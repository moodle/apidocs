<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: restore_structure_step Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;4.0</span>
   </div>
   <div id="projectbrief">Moodle 4.0.8+ (Build: 20230526) (abb8647b620)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="../../db/d0c/classrestore__structure__step-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">restore_structure_step Class Reference<div class="ingroups"><a class="el" href="../../d6/d9f/group__moodlecore.html">moodlecore</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Abstract class defining the needed stuff to restore one xml file.  
 <a href="../../d9/dcb/classrestore__structure__step.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for restore_structure_step:</div>
<div class="dyncontent">
 <div class="center">
  <img src="../../d9/dcb/classrestore__structure__step.png" usemap="#restore_5Fstructure_5Fstep_map" alt=""/>
  <map id="restore_5Fstructure_5Fstep_map" name="restore_5Fstructure_5Fstep_map">
<area href="../../db/d9b/classrestore__step.html" title="Abstract class defining the needed stuf for one restore step." alt="restore_step" shape="rect" coords="140,112,411,136"/>
<area href="../../d3/dbd/classbase__step.html" title="Abstract class defining the basis for one execution (backup/restore) step." alt="base_step" shape="rect" coords="140,56,411,80"/>
<area href="../../df/dc9/interfaceexecutable.html" title="Interface to apply to all the classes we want to be executable (plan/part/task)" alt="executable" shape="rect" coords="0,0,271,24"/>
<area href="../../d8/dda/interfaceloggable.html" title="Interface to apply to all the classes we want to be able to write to logs." alt="loggable" shape="rect" coords="281,0,552,24"/>
<area href="../../d0/dff/classrestore__activity__competencies__structure__step.html" title="Restore activity competencies structure step." alt="restore_activity_competencies_structure_step" shape="rect" coords="421,224,692,248"/>
<area href="../../d8/d56/classrestore__activity__grade__history__structure__step.html" title="Step in charge of restoring the grade history of an activity." alt="restore_activity_grade_history_structure_step" shape="rect" coords="421,280,692,304"/>
<area href="../../d4/d41/classrestore__activity__grades__structure__step.html" title="This structure step restores the grade items associated with one activity All the grade items are mad..." alt="restore_activity_grades_structure_step" shape="rect" coords="421,336,692,360"/>
<area href="../../dc/d89/classrestore__activity__grading__structure__step.html" title="Defines the restore step for advanced grading methods attached to the activity module." alt="restore_activity_grading_structure_step" shape="rect" coords="421,392,692,416"/>
<area href="../../dc/db5/classrestore__activity__structure__step.html" title="Abstract structure step, parent of all the activity structure steps." alt="restore_activity_structure_step" shape="rect" coords="421,448,692,472"/>
<area href="../../d3/d8f/classrestore__badges__structure__step.html" title="This structure steps restores the badges and their configs." alt="restore_badges_structure_step" shape="rect" coords="421,504,692,528"/>
<area href="../../d2/d84/classrestore__block__instance__structure__step.html" title="This structure steps restores one instance + positions of one block Note: Positions corresponding to ..." alt="restore_block_instance_structure_step" shape="rect" coords="421,560,692,584"/>
<area href="../../d8/db2/classrestore__calendarevents__structure__step.html" title="This structure steps restores the calendar events." alt="restore_calendarevents_structure_step" shape="rect" coords="421,616,692,640"/>
<area href="../../d1/d4e/classrestore__comments__structure__step.html" title="This structure steps restores the comments Note: Cannot use the comments API because defaults to USER..." alt="restore_comments_structure_step" shape="rect" coords="421,672,692,696"/>
<area href="../../d8/d60/classrestore__contentbankcontent__structure__step.html" title="This structure steps restores the content bank content." alt="restore_contentbankcontent_structure_step" shape="rect" coords="421,728,692,752"/>
<area href="../../d6/d6a/classrestore__course__competencies__structure__step.html" title="Restore course competencies structure step." alt="restore_course_competencies_structure_step" shape="rect" coords="421,784,692,808"/>
<area href="../../d9/da8/classrestore__course__completion__structure__step.html" alt="restore_course_completion_structure_step" shape="rect" coords="421,840,692,864"/>
<area href="../../dc/d2f/classrestore__course__loglastaccess__structure__step.html" title="Structure step in charge of restoring the loglastaccess.xml file for the course logs." alt="restore_course_loglastaccess_structure_step" shape="rect" coords="421,896,692,920"/>
<area href="../../de/d86/classrestore__course__logs__structure__step.html" title="This structure step restores course logs (cmid = 0), delegating the hard work to the corresponding re..." alt="restore_course_logs_structure_step" shape="rect" coords="421,952,692,976"/>
<area href="../../d8/df0/classrestore__course__logstores__structure__step.html" title="Structure step in charge of restoring the logstores.xml file for the course logs." alt="restore_course_logstores_structure_step" shape="rect" coords="421,1008,692,1032"/>
<area href="../../de/d6b/classrestore__course__structure__step.html" title="Structure step that will read the course.xml file, loading it and performing various actions dependin..." alt="restore_course_structure_step" shape="rect" coords="421,1064,692,1088"/>
<area href="../../d0/d64/classrestore__create__categories__and__questions.html" title="Structure step in charge of creating/mapping all the qcats and qs by parsing the questions...." alt="restore_create_categories_and_questions" shape="rect" coords="421,1120,692,1144"/>
<area href="../../d4/dc6/classrestore__enrolments__structure__step.html" title="This structure steps restores the enrol plugins and their underlying enrolments, performing all the m..." alt="restore_enrolments_structure_step" shape="rect" coords="421,1176,692,1200"/>
<area href="../../d0/d7c/classrestore__filters__structure__step.html" title="This structure steps restores the filters and their configs." alt="restore_filters_structure_step" shape="rect" coords="421,1232,692,1256"/>
<area href="../../d6/d03/classrestore__grade__history__structure__step.html" title="Step in charge of restoring the grade history of a course." alt="restore_grade_history_structure_step" shape="rect" coords="421,1288,692,1312"/>
<area href="../../d5/df1/classrestore__gradebook__structure__step.html" title="Restore calculated grade items, grade categories etc." alt="restore_gradebook_structure_step" shape="rect" coords="421,1344,692,1368"/>
<area href="../../d9/d5f/classrestore__groups__members__structure__step.html" title="Structure step that will create all the needed group memberships by loading them from the groups...." alt="restore_groups_members_structure_step" shape="rect" coords="421,1400,692,1424"/>
<area href="../../d8/df8/classrestore__groups__structure__step.html" title="Structure step that will create all the needed groups and groupings by loading them from the groups...." alt="restore_groups_structure_step" shape="rect" coords="421,1456,692,1480"/>
<area href="../../de/d6d/classrestore__load__included__files.html" alt="restore_load_included_files" shape="rect" coords="421,1512,692,1536"/>
<area href="../../de/d9f/classrestore__module__structure__step.html" title="Structure step to restore common course_module information." alt="restore_module_structure_step" shape="rect" coords="421,1568,692,1592"/>
<area href="../../db/d72/classrestore__outcomes__structure__step.html" title="Structure step that will create all the needed outocomes by loading them from the outcomes...." alt="restore_outcomes_structure_step" shape="rect" coords="421,1624,692,1648"/>
<area href="../../de/d97/classrestore__ras__and__caps__structure__step.html" alt="restore_ras_and_caps_structure_step" shape="rect" coords="421,1680,692,1704"/>
<area href="../../d2/ddc/classrestore__rss__client__block__structure__step.html" title="Define all the restore steps that wll be used by the restore_rss_client_block_task." alt="restore_rss_client_block_structure_step" shape="rect" coords="421,1736,692,1760"/>
<area href="../../d9/d32/classrestore__scales__structure__step.html" title="Structure step that will create all the needed scales by loading them from the scales...." alt="restore_scales_structure_step" shape="rect" coords="421,1792,692,1816"/>
<area href="../../d4/d0e/classrestore__section__structure__step.html" title="Structure step that will read the section.xml creating/updating sections as needed,..." alt="restore_section_structure_step" shape="rect" coords="421,1848,692,1872"/>
<area href="../../d6/d80/classrestore__userscompletion__structure__step.html" title="Structure step that will process the user activity completion information if all these conditions are..." alt="restore_userscompletion_structure_step" shape="rect" coords="421,1904,692,1928"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4a4ddb12095dc8e75a9b8262d70a8c27"><td class="memItemLeft" align="right" valign="top"><a id="a4a4ddb12095dc8e75a9b8262d70a8c27" name="a4a4ddb12095dc8e75a9b8262d70a8c27"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>__construct</b> ($name, $filename, $task=null)</td></tr>
<tr class="memdesc:a4a4ddb12095dc8e75a9b8262d70a8c27"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor - instantiates one object of this class. <br /></td></tr>
<tr class="separator:a4a4ddb12095dc8e75a9b8262d70a8c27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55585469af6127126d913e7152c7bf2b"><td class="memItemLeft" align="right" valign="top"><a id="a55585469af6127126d913e7152c7bf2b" name="a55585469af6127126d913e7152c7bf2b"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>add_related_files</b> ($component, $filearea, $mappingitemname, $filesctxid=null, $olditemid=null)</td></tr>
<tr class="memdesc:a55585469af6127126d913e7152c7bf2b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add all the existing file, given their component and filearea and one backup_ids itemname to match with. <br /></td></tr>
<tr class="separator:a55585469af6127126d913e7152c7bf2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c70f0c7596f5500981002a1a9df027d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d9b/classrestore__step.html#a9c70f0c7596f5500981002a1a9df027d">apply_date_offset</a> ($<a class="el" href="../../d8/ded/group___simple_pie.html#gaefbfa229f1c9e1fc967bff724a010f9e">value</a>)</td></tr>
<tr class="memdesc:a9c70f0c7596f5500981002a1a9df027d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply course startdate offset based in original course startdate and course_offset_startdate setting Note we are using one static cache here, but <em>by restoreid</em>, so it's ok for concurrence/multiple executions in the same request.  <br /></td></tr>
<tr class="separator:a9c70f0c7596f5500981002a1a9df027d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb820ae8d44addb02d4e18a5cf6f28fc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d9b/classrestore__step.html#afb820ae8d44addb02d4e18a5cf6f28fc">decrypt</a> ($<a class="el" href="../../d8/ded/group___simple_pie.html#gaefbfa229f1c9e1fc967bff724a010f9e">value</a>)</td></tr>
<tr class="memdesc:afb820ae8d44addb02d4e18a5cf6f28fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns symmetric-key AES-256 decryption of base64 encoded contents.  <br /></td></tr>
<tr class="separator:afb820ae8d44addb02d4e18a5cf6f28fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35c8c82d27e1aa5991a685e1ca13a47d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dbd/classbase__step.html#a35c8c82d27e1aa5991a685e1ca13a47d">destroy</a> ()</td></tr>
<tr class="memdesc:a35c8c82d27e1aa5991a685e1ca13a47d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy all circular references.  <br /></td></tr>
<tr class="separator:a35c8c82d27e1aa5991a685e1ca13a47d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a3912e58d4837bab006658938f33dac"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dcb/classrestore__structure__step.html#a2a3912e58d4837bab006658938f33dac">execute</a> ()</td></tr>
<tr class="memdesc:a2a3912e58d4837bab006658938f33dac"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function will perform all the actions necessary to achieve the execution of the plan/part/task.  <br /></td></tr>
<tr class="separator:a2a3912e58d4837bab006658938f33dac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a890609829390748a66aa74dbbcd8d4b2"><td class="memItemLeft" align="right" valign="top"><a id="a890609829390748a66aa74dbbcd8d4b2" name="a890609829390748a66aa74dbbcd8d4b2"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>get_mapping</b> ($itemname, $oldid)</td></tr>
<tr class="memdesc:a890609829390748a66aa74dbbcd8d4b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the complete mapping from the given itemname, itemid. <br /></td></tr>
<tr class="separator:a890609829390748a66aa74dbbcd8d4b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac09d6de4de95edad9da7972f6eddea25"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dcb/classrestore__structure__step.html#ac09d6de4de95edad9da7972f6eddea25">get_mappingid</a> ($itemname, $oldid, $ifnotfound=false)</td></tr>
<tr class="memdesc:ac09d6de4de95edad9da7972f6eddea25"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the new id of a mapping for the given itemname.  <br /></td></tr>
<tr class="separator:ac09d6de4de95edad9da7972f6eddea25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa09adb3eeebb1589cdfe5983d938d600"><td class="memItemLeft" align="right" valign="top"><a id="aa09adb3eeebb1589cdfe5983d938d600" name="aa09adb3eeebb1589cdfe5983d938d600"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>get_name</b> ()</td></tr>
<tr class="separator:aa09adb3eeebb1589cdfe5983d938d600"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcaff513ccf9479c801c71b4293f394f"><td class="memItemLeft" align="right" valign="top"><a id="abcaff513ccf9479c801c71b4293f394f" name="abcaff513ccf9479c801c71b4293f394f"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>get_new_parentid</b> ($itemname)</td></tr>
<tr class="memdesc:abcaff513ccf9479c801c71b4293f394f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the latest (parent) new id mapped by one pathelement. <br /></td></tr>
<tr class="separator:abcaff513ccf9479c801c71b4293f394f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae846db96de5559b0e5e6603d9ed8d15a"><td class="memItemLeft" align="right" valign="top"><a id="ae846db96de5559b0e5e6603d9ed8d15a" name="ae846db96de5559b0e5e6603d9ed8d15a"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>get_old_parentid</b> ($itemname)</td></tr>
<tr class="memdesc:ae846db96de5559b0e5e6603d9ed8d15a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the latest (parent) old id mapped by one pathelement. <br /></td></tr>
<tr class="separator:ae846db96de5559b0e5e6603d9ed8d15a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3f8755a3fc8e4a8afd4a385b2016920"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dcb/classrestore__structure__step.html#ae3f8755a3fc8e4a8afd4a385b2016920">get_task</a> ()</td></tr>
<tr class="memdesc:ae3f8755a3fc8e4a8afd4a385b2016920"><td class="mdescLeft">&#160;</td><td class="mdescRight">As far as restore structure steps are implementing <a class="el" href="../../d8/d35/classrestore__plugin.html" title="Class implementing the plugins support for moodle2 restore.">restore_plugin</a> stuff, they need to have the parent task available for wrapping purposes (get course/context....)  <br /></td></tr>
<tr class="separator:ae3f8755a3fc8e4a8afd4a385b2016920"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3585480af09452a3c038ea822a309300"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dcb/classrestore__structure__step.html#a3585480af09452a3c038ea822a309300">grouped_parent_exists</a> ($pelement, $elements)</td></tr>
<tr class="memdesc:a3585480af09452a3c038ea822a309300"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given one pathelement, return true if grouped parent was found.  <br /></td></tr>
<tr class="separator:a3585480af09452a3c038ea822a309300"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae28041330e9811d34f76d61cd4bc8d21"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dcb/classrestore__structure__step.html#ae28041330e9811d34f76d61cd4bc8d21">launch_after_restore_methods</a> ()</td></tr>
<tr class="memdesc:ae28041330e9811d34f76d61cd4bc8d21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Launch all the after_restore methods present in all the processing objects.  <br /></td></tr>
<tr class="separator:ae28041330e9811d34f76d61cd4bc8d21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac849571ff5893405cd4b0be044779678"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dbd/classbase__step.html#ac849571ff5893405cd4b0be044779678">log</a> ($message, $level, $a=null, $depth=null, $display=false)</td></tr>
<tr class="memdesc:ac849571ff5893405cd4b0be044779678"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function will be responsible for handling the params, and to call to the corresponding logger-&gt;process() once all modifications in params have been performed.  <br /></td></tr>
<tr class="separator:ac849571ff5893405cd4b0be044779678"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11ea01f63c8ae143762c50675246188d"><td class="memItemLeft" align="right" valign="top"><a id="a11ea01f63c8ae143762c50675246188d" name="a11ea01f63c8ae143762c50675246188d"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>process</b> ($data)</td></tr>
<tr class="memdesc:a11ea01f63c8ae143762c50675246188d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive one chunk of information form the xml parser processor and dispatch it, following the naming rules. <br /></td></tr>
<tr class="separator:a11ea01f63c8ae143762c50675246188d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad82dabee427613b2d9bbfa1e9dd28dd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dcb/classrestore__structure__step.html#aad82dabee427613b2d9bbfa1e9dd28dd">set_mapping</a> ($itemname, $oldid, $newid, $restorefiles=false, $filesctxid=null, $parentid=null)</td></tr>
<tr class="memdesc:aad82dabee427613b2d9bbfa1e9dd28dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">To send ids pairs to backup_ids_table and to store them into paths.  <br /></td></tr>
<tr class="separator:aad82dabee427613b2d9bbfa1e9dd28dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab26bcb34417b639aa1735729b598b536"><td class="memItemLeft" align="right" valign="top"><a id="ab26bcb34417b639aa1735729b598b536" name="ab26bcb34417b639aa1735729b598b536"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>set_task</b> ($task)</td></tr>
<tr class="separator:ab26bcb34417b639aa1735729b598b536"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a211ee2ab675b152d030e28ab71b210c9"><td class="memItemLeft" align="right" valign="top"><a id="a211ee2ab675b152d030e28ab71b210c9" name="a211ee2ab675b152d030e28ab71b210c9"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>SKIP_ALL_CHILDREN</b> = -991399</td></tr>
<tr class="separator:a211ee2ab675b152d030e28ab71b210c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a2652dc3247c519c2bd3cb0083b5547ab"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dcb/classrestore__structure__step.html#a2652dc3247c519c2bd3cb0083b5547ab">add_plugin_structure</a> ($plugintype, $element)</td></tr>
<tr class="memdesc:a2652dc3247c519c2bd3cb0083b5547ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add plugin structure to any element in the structure restore tree.  <br /></td></tr>
<tr class="separator:a2652dc3247c519c2bd3cb0083b5547ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad18b19ae3b919c22a5552548e95515f5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dcb/classrestore__structure__step.html#ad18b19ae3b919c22a5552548e95515f5">add_subplugin_structure</a> ($subplugintype, $element, $plugintype=null, $pluginname=null)</td></tr>
<tr class="memdesc:ad18b19ae3b919c22a5552548e95515f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add subplugin structure for a given plugin to any element in the structure restore tree.  <br /></td></tr>
<tr class="separator:ad18b19ae3b919c22a5552548e95515f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1aaba5bfb63882f4d34e9218bbd72340"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dcb/classrestore__structure__step.html#a1aaba5bfb63882f4d34e9218bbd72340">after_execute</a> ()</td></tr>
<tr class="memdesc:a1aaba5bfb63882f4d34e9218bbd72340"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method will be executed after the whole structure step have been processed.  <br /></td></tr>
<tr class="separator:a1aaba5bfb63882f4d34e9218bbd72340"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d0e659d8eaafc1068d8eb0687afee5c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dcb/classrestore__structure__step.html#a2d0e659d8eaafc1068d8eb0687afee5c">after_restore</a> ()</td></tr>
<tr class="memdesc:a2d0e659d8eaafc1068d8eb0687afee5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method will be executed after the rest of the restore has been processed.  <br /></td></tr>
<tr class="separator:a2d0e659d8eaafc1068d8eb0687afee5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9744cd987b66b312f105bf91ca43b8b4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dcb/classrestore__structure__step.html#a9744cd987b66b312f105bf91ca43b8b4">define_structure</a> ()</td></tr>
<tr class="memdesc:a9744cd987b66b312f105bf91ca43b8b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function that will return the structure to be processed by this <a class="el" href="../../db/d9b/classrestore__step.html" title="Abstract class defining the needed stuf for one restore step.">restore_step</a>.  <br /></td></tr>
<tr class="separator:a9744cd987b66b312f105bf91ca43b8b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aceab2b07fc2034fd4447035d6f65c8ae"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dcb/classrestore__structure__step.html#aceab2b07fc2034fd4447035d6f65c8ae">execute_condition</a> ()</td></tr>
<tr class="memdesc:aceab2b07fc2034fd4447035d6f65c8ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">To conditionally decide if one step will be executed or no.  <br /></td></tr>
<tr class="separator:aceab2b07fc2034fd4447035d6f65c8ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a925e017145d7b71ed5e9496b1fc3bfeb"><td class="memItemLeft" align="right" valign="top"><a id="a925e017145d7b71ed5e9496b1fc3bfeb" name="a925e017145d7b71ed5e9496b1fc3bfeb"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>get_basepath</b> ()</td></tr>
<tr class="separator:a925e017145d7b71ed5e9496b1fc3bfeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5932624e302d00b33da90591a0d26761"><td class="memItemLeft" align="right" valign="top"><a id="a5932624e302d00b33da90591a0d26761" name="a5932624e302d00b33da90591a0d26761"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>get_courseid</b> ()</td></tr>
<tr class="separator:a5932624e302d00b33da90591a0d26761"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5f8a7543af0f03ad2d7baa41bfd097c"><td class="memItemLeft" align="right" valign="top"><a id="aa5f8a7543af0f03ad2d7baa41bfd097c" name="aa5f8a7543af0f03ad2d7baa41bfd097c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>get_logger</b> ()</td></tr>
<tr class="separator:aa5f8a7543af0f03ad2d7baa41bfd097c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd91ec816eb4961b01949293e589d162"><td class="memItemLeft" align="right" valign="top"><a id="afd91ec816eb4961b01949293e589d162" name="afd91ec816eb4961b01949293e589d162"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>get_restoreid</b> ()</td></tr>
<tr class="separator:afd91ec816eb4961b01949293e589d162"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe85108f2bed8aef517c17184663997b"><td class="memItemLeft" align="right" valign="top"><a id="abe85108f2bed8aef517c17184663997b" name="abe85108f2bed8aef517c17184663997b"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>get_setting</b> ($name)</td></tr>
<tr class="separator:abe85108f2bed8aef517c17184663997b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcc900833b962344c356fa0bd0d5337c"><td class="memItemLeft" align="right" valign="top"><a id="afcc900833b962344c356fa0bd0d5337c" name="afcc900833b962344c356fa0bd0d5337c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>get_setting_value</b> ($name)</td></tr>
<tr class="separator:afcc900833b962344c356fa0bd0d5337c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae522f2b075c01e3f5487dc9d5d999b75"><td class="memItemLeft" align="right" valign="top"><a id="ae522f2b075c01e3f5487dc9d5d999b75" name="ae522f2b075c01e3f5487dc9d5d999b75"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>get_settings</b> ()</td></tr>
<tr class="memdesc:ae522f2b075c01e3f5487dc9d5d999b75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Protected API starts here. <br /></td></tr>
<tr class="separator:ae522f2b075c01e3f5487dc9d5d999b75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abad8bfe79237f90669015f0494f509a8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dcb/classrestore__structure__step.html#abad8bfe79237f90669015f0494f509a8">launch_after_execute_methods</a> ()</td></tr>
<tr class="memdesc:abad8bfe79237f90669015f0494f509a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Launch all the after_execute methods present in all the processing objects.  <br /></td></tr>
<tr class="separator:abad8bfe79237f90669015f0494f509a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e7becd679d431e4dfff8a0169696f63"><td class="memItemLeft" align="right" valign="top"><a id="a0e7becd679d431e4dfff8a0169696f63" name="a0e7becd679d431e4dfff8a0169696f63"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>prepare_pathelements</b> ($elementsarr)</td></tr>
<tr class="memdesc:a0e7becd679d431e4dfff8a0169696f63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepare the pathelements for processing, looking for duplicates, applying processing objects and other adjustments. <br /></td></tr>
<tr class="separator:a0e7becd679d431e4dfff8a0169696f63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f068bdd7dcbb018561fa52ae72d23ff"><td class="memItemLeft" align="right" valign="top"><a id="a0f068bdd7dcbb018561fa52ae72d23ff" name="a0f068bdd7dcbb018561fa52ae72d23ff"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>setting_exists</b> ($name)</td></tr>
<tr class="separator:a0f068bdd7dcbb018561fa52ae72d23ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a1a33f2ca5224c8540b39f889528d5938"><td class="memItemLeft" align="right" valign="top"><a id="a1a33f2ca5224c8540b39f889528d5938" name="a1a33f2ca5224c8540b39f889528d5938"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$contentprocessor</b></td></tr>
<tr class="separator:a1a33f2ca5224c8540b39f889528d5938"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25c56f9109ec716cfdf1cccb4941aa0a"><td class="memItemLeft" align="right" valign="top"><a id="a25c56f9109ec716cfdf1cccb4941aa0a" name="a25c56f9109ec716cfdf1cccb4941aa0a"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$elementsnewid</b></td></tr>
<tr class="separator:a25c56f9109ec716cfdf1cccb4941aa0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab59879fd22c0b57a534dfbf7e03ee923"><td class="memItemLeft" align="right" valign="top"><a id="ab59879fd22c0b57a534dfbf7e03ee923" name="ab59879fd22c0b57a534dfbf7e03ee923"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$elementsoldid</b></td></tr>
<tr class="separator:ab59879fd22c0b57a534dfbf7e03ee923"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee9183c071c44190be94c8fdbbd4a737"><td class="memItemLeft" align="right" valign="top"><a id="aee9183c071c44190be94c8fdbbd4a737" name="aee9183c071c44190be94c8fdbbd4a737"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$filename</b></td></tr>
<tr class="separator:aee9183c071c44190be94c8fdbbd4a737"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada686e78d14f4d7f0554db5b5697e95a"><td class="memItemLeft" align="right" valign="top"><a id="ada686e78d14f4d7f0554db5b5697e95a" name="ada686e78d14f4d7f0554db5b5697e95a"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$name</b></td></tr>
<tr class="separator:ada686e78d14f4d7f0554db5b5697e95a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1e44a632893cb76f6b6ca8c29eda05d"><td class="memItemLeft" align="right" valign="top"><a id="ae1e44a632893cb76f6b6ca8c29eda05d" name="ae1e44a632893cb76f6b6ca8c29eda05d"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$pathelements</b></td></tr>
<tr class="separator:ae1e44a632893cb76f6b6ca8c29eda05d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e209ba4abd39cd79401ca123f0e60a9"><td class="memItemLeft" align="right" valign="top"><a id="a0e209ba4abd39cd79401ca123f0e60a9" name="a0e209ba4abd39cd79401ca123f0e60a9"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$pathlock</b></td></tr>
<tr class="separator:a0e209ba4abd39cd79401ca123f0e60a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a026baa754a617951bc7b58634e54650e"><td class="memItemLeft" align="right" valign="top"><a id="a026baa754a617951bc7b58634e54650e" name="a026baa754a617951bc7b58634e54650e"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$task</b></td></tr>
<tr class="separator:a026baa754a617951bc7b58634e54650e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Abstract class defining the needed stuff to restore one xml file. </p>
<p>TODO: Finish phpdocs </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a2652dc3247c519c2bd3cb0083b5547ab" name="a2652dc3247c519c2bd3cb0083b5547ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2652dc3247c519c2bd3cb0083b5547ab">&#9670;&#160;</a></span>add_plugin_structure()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">restore_structure_step::add_plugin_structure </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$plugintype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$element</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add plugin structure to any element in the structure restore tree. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$plugintype</td><td>type of plugin as defined by core_component::get_plugin_types() </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../de/dc3/classrestore__path__element.html" title="Class representing one path to be restored from XML file.">restore_path_element</a></td><td class="paramname">$element</td><td>element in the structure restore tree that we are going to add plugin information to </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad18b19ae3b919c22a5552548e95515f5" name="ad18b19ae3b919c22a5552548e95515f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad18b19ae3b919c22a5552548e95515f5">&#9670;&#160;</a></span>add_subplugin_structure()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">restore_structure_step::add_subplugin_structure </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$subplugintype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$element</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$plugintype</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$pluginname</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add subplugin structure for a given plugin to any element in the structure restore tree. </p>
<p>This method allows the injection of subplugins (of a specific plugin) parsing and proccessing to any element in the restore structure.</p>
<p>NOTE: Initially subplugins were only available for activities (mod), so only the <a class="el" href="../../dc/db5/classrestore__activity__structure__step.html">restore_activity_structure_step</a> class had support for them, always looking for /mod/modulenanme subplugins. This new method is a generalization of the existing one for activities, supporting all subplugins injecting information everywhere.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$subplugintype</td><td>type of subplugin as defined in plugin's db/subplugins.json. </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../de/dc3/classrestore__path__element.html" title="Class representing one path to be restored from XML file.">restore_path_element</a></td><td class="paramname">$element</td><td>element in the structure restore tree that we are going to add subplugin information to. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$plugintype</td><td>type of the plugin. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$pluginname</td><td>name of the plugin. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1aaba5bfb63882f4d34e9218bbd72340" name="a1aaba5bfb63882f4d34e9218bbd72340"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1aaba5bfb63882f4d34e9218bbd72340">&#9670;&#160;</a></span>after_execute()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">restore_structure_step::after_execute </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method will be executed after the whole structure step have been processed. </p>
<p>After execution method for code needed to be executed after the whole structure has been processed. Useful for cleaning tasks, files process and others. Simply overwrite in in your steps if needed </p>

<p>Reimplemented in <a class="el" href="../../d5/df1/classrestore__gradebook__structure__step.html#a9d084df9077e85af9081421fc0ce370f">restore_gradebook_structure_step</a>, <a class="el" href="../../d8/df8/classrestore__groups__structure__step.html#a5055655bca10fc2e846ade900e207872">restore_groups_structure_step</a>, <a class="el" href="../../d9/d32/classrestore__scales__structure__step.html#a4c963ed1ba30c9304c60849d16af2c5e">restore_scales_structure_step</a>, <a class="el" href="../../db/d72/classrestore__outcomes__structure__step.html#a0214564b70902e5014828b0bf764100e">restore_outcomes_structure_step</a>, <a class="el" href="../../d4/d0e/classrestore__section__structure__step.html#a1adebccd814b70ba36ca8b9f99900390">restore_section_structure_step</a>, <a class="el" href="../../de/d6b/classrestore__course__structure__step.html#a1e9d80bcc6083705a17a022069d8d576">restore_course_structure_step</a>, <a class="el" href="../../d3/d8f/classrestore__badges__structure__step.html#a0b6feb67ed9655c7c1425e10328c4ce2">restore_badges_structure_step</a>, <a class="el" href="../../d8/db2/classrestore__calendarevents__structure__step.html#a1db3a7fcd0c624be65dfe16503482e93">restore_calendarevents_structure_step</a>, <a class="el" href="../../dc/d89/classrestore__activity__grading__structure__step.html#ae0ac5e107976bba599c8c95910fb4572">restore_activity_grading_structure_step</a>, <a class="el" href="../../d8/d60/classrestore__contentbankcontent__structure__step.html#a0ad3481739b3a64939c3ca6a0c0d6c5b">restore_contentbankcontent_structure_step</a>, <a class="el" href="../../d0/d64/classrestore__create__categories__and__questions.html#a232c41f13bb0e4fab97dd6ddcc4ca1d7">restore_create_categories_and_questions</a>, <a class="el" href="../../df/d5a/classrestore__assign__activity__structure__step.html#a57cc08a48d99a087e7943a1119874149">restore_assign_activity_structure_step</a>, <a class="el" href="../../d8/d32/classrestore__assignment__activity__structure__step.html#a24fdd6c882eb84a537305119fd4be243">restore_assignment_activity_structure_step</a>, <a class="el" href="../../dc/d74/classrestore__bigbluebuttonbn__activity__structure__step.html#ad3471e884879e74cf7fcb42ba6a21063">restore_bigbluebuttonbn_activity_structure_step</a>, <a class="el" href="../../d5/de3/classrestore__book__activity__structure__step.html#abaedd6ddc258958c07d7b69ee5e02850">restore_book_activity_structure_step</a>, <a class="el" href="../../d2/dd5/classrestore__chat__activity__structure__step.html#afd09ea560a50e8570e8e34886e8a2a2b">restore_chat_activity_structure_step</a>, <a class="el" href="../../dc/d3a/classrestore__choice__activity__structure__step.html#a41c9798dc126b5ac13b1c7cc90751b8b">restore_choice_activity_structure_step</a>, <a class="el" href="../../dd/d60/classrestore__data__activity__structure__step.html#a74e724d5584e4963e3c71b9008675e03">restore_data_activity_structure_step</a>, <a class="el" href="../../d3/d55/classrestore__feedback__activity__structure__step.html#ab3331acbeb1600d9424380d57348cfda">restore_feedback_activity_structure_step</a>, <a class="el" href="../../d4/dd0/classrestore__folder__activity__structure__step.html#a556cc460e02af64facce184a6f7a7a0e">restore_folder_activity_structure_step</a>, <a class="el" href="../../d8/ddc/classrestore__forum__activity__structure__step.html#a785039cc73c54cef765ee67256d50368">restore_forum_activity_structure_step</a>, <a class="el" href="../../db/d53/classrestore__glossary__activity__structure__step.html#ab5c660b28757e54c157ae12a4db91ca5">restore_glossary_activity_structure_step</a>, <a class="el" href="../../d7/dfa/classrestore__h5pactivity__activity__structure__step.html#ada86a7348cde81e21be2cfa76bb1df02">restore_h5pactivity_activity_structure_step</a>, <a class="el" href="../../d0/d4c/classrestore__imscp__activity__structure__step.html#a7ed28092950b4d81ab76bc17af2f9a6f">restore_imscp_activity_structure_step</a>, <a class="el" href="../../d0/dc2/classrestore__label__activity__structure__step.html#aefe6209cc4d6529410f72fac8ad09d5d">restore_label_activity_structure_step</a>, <a class="el" href="../../df/ddd/classrestore__lesson__activity__structure__step.html#ac679d454b23333239fc67f84fbda8c00">restore_lesson_activity_structure_step</a>, <a class="el" href="../../de/d39/classrestore__lti__activity__structure__step.html#a5c34a31d7903928db67a443d417d708b">restore_lti_activity_structure_step</a>, <a class="el" href="../../d6/d85/classrestore__page__activity__structure__step.html#ae4030bc3bb4cdd4955fda53d726c6364">restore_page_activity_structure_step</a>, <a class="el" href="../../db/d2b/classrestore__resource__activity__structure__step.html#aff58cedc64c89092cfe4aa7a65791327">restore_resource_activity_structure_step</a>, <a class="el" href="../../d4/d7f/classrestore__scorm__activity__structure__step.html#a41b791e55b7851f380b0e87a18c4ae3b">restore_scorm_activity_structure_step</a>, <a class="el" href="../../dc/dea/classrestore__survey__activity__structure__step.html#ada1a2f01eeefae1f11876963c8bf1742">restore_survey_activity_structure_step</a>, <a class="el" href="../../d2/dc4/classrestore__url__activity__structure__step.html#a8b7e994225ad7819cc9cfa98b94f8094">restore_url_activity_structure_step</a>, <a class="el" href="../../d6/d78/classrestore__wiki__activity__structure__step.html#a22036094561815a41655d0c0dada1168">restore_wiki_activity_structure_step</a>, and <a class="el" href="../../d2/d70/classrestore__workshop__activity__structure__step.html#aef71eb0a3ce0a34050682feafb3733ee">restore_workshop_activity_structure_step</a>.</p>

</div>
</div>
<a id="a2d0e659d8eaafc1068d8eb0687afee5c" name="a2d0e659d8eaafc1068d8eb0687afee5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d0e659d8eaafc1068d8eb0687afee5c">&#9670;&#160;</a></span>after_restore()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">restore_structure_step::after_restore </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method will be executed after the rest of the restore has been processed. </p>
<p>Use if you need to update IDs based on things which are restored after this step has completed. </p>

<p>Reimplemented in <a class="el" href="../../d4/d41/classrestore__activity__grades__structure__step.html#a30d1afba7b7ea91c90dbd261b213d87f">restore_activity_grades_structure_step</a>, <a class="el" href="../../de/d9f/classrestore__module__structure__step.html#a6622ad04b7b971861106130c7236e2fd">restore_module_structure_step</a>, <a class="el" href="../../d8/d32/classrestore__assignment__activity__structure__step.html#a7b6a691e3104b2c8b135d295c7dcec7b">restore_assignment_activity_structure_step</a>, and <a class="el" href="../../d8/ddc/classrestore__forum__activity__structure__step.html#ad72795fad131d48759ee5b74e1e1035f">restore_forum_activity_structure_step</a>.</p>

</div>
</div>
<a id="a9c70f0c7596f5500981002a1a9df027d" name="a9c70f0c7596f5500981002a1a9df027d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c70f0c7596f5500981002a1a9df027d">&#9670;&#160;</a></span>apply_date_offset()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">restore_step::apply_date_offset </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Apply course startdate offset based in original course startdate and course_offset_startdate setting Note we are using one static cache here, but <em>by restoreid</em>, so it's ok for concurrence/multiple executions in the same request. </p>
<p>Note: The policy is to roll date only for configurations and not for user data. see <a href="https://tracker.moodle.org/browse/MDL-9367" class="el">MDL-9367</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$value</td><td>Time value (seconds since epoch), or empty for nothing </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td>Time value after applying the date offset, or empty for nothing </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afb820ae8d44addb02d4e18a5cf6f28fc" name="afb820ae8d44addb02d4e18a5cf6f28fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb820ae8d44addb02d4e18a5cf6f28fc">&#9670;&#160;</a></span>decrypt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">restore_step::decrypt </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns symmetric-key AES-256 decryption of base64 encoded contents. </p>
<p>This method is used in restore operations to decrypt contents encrypted with <a class="el" href="../../da/d84/classencrypted__final__element.html">encrypted_final_element</a> automatically decoding (base64) and decrypting contents using the key stored in backup_encryptkey config.</p>
<p>Requires openssl, cipher availability, and key existence (backup automatically sets it if missing). Integrity is provided via HMAC.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$value</td><td><a class="el" href="../../da/d84/classencrypted__final__element.html">encrypted_final_element</a> value to decode and decrypt. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string|null</td><td>decoded and decrypted value or null if the operation can not be performed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9744cd987b66b312f105bf91ca43b8b4" name="a9744cd987b66b312f105bf91ca43b8b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9744cd987b66b312f105bf91ca43b8b4">&#9670;&#160;</a></span>define_structure()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">restore_structure_step::define_structure </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">abstract</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function that will return the structure to be processed by this <a class="el" href="../../db/d9b/classrestore__step.html" title="Abstract class defining the needed stuf for one restore step.">restore_step</a>. </p>
<p>Must return one array of @restore_path_element elements </p>

<p>Reimplemented in <a class="el" href="../../d5/df1/classrestore__gradebook__structure__step.html#a37d99ce2758938b74fbc5ea9b0cdcfc8">restore_gradebook_structure_step</a>, <a class="el" href="../../d6/d03/classrestore__grade__history__structure__step.html#a1ec49b922bb7a5e27f78767bf6d5dbdc">restore_grade_history_structure_step</a>, <a class="el" href="../../de/d6d/classrestore__load__included__files.html#aff869dd0a00a73ed5b435b20d269f171">restore_load_included_files</a>, <a class="el" href="../../d8/df8/classrestore__groups__structure__step.html#a79a9c1c2e1bd083ddfcbd7b32847ad6c">restore_groups_structure_step</a>, <a class="el" href="../../d9/d5f/classrestore__groups__members__structure__step.html#a087ca1aed631efe4d05c0d97a64bd6dc">restore_groups_members_structure_step</a>, <a class="el" href="../../d9/d32/classrestore__scales__structure__step.html#a7018c6b6d99bd03db332b98b14cbd0bf">restore_scales_structure_step</a>, <a class="el" href="../../db/d72/classrestore__outcomes__structure__step.html#abe2ad66771df9d022e90374d8d28bb28">restore_outcomes_structure_step</a>, <a class="el" href="../../d4/d0e/classrestore__section__structure__step.html#aff42a1ca1ab9adc6b8574ac9039de02e">restore_section_structure_step</a>, <a class="el" href="../../de/d6b/classrestore__course__structure__step.html#a8a3879750941d7a30cb142e4c32c9771">restore_course_structure_step</a>, <a class="el" href="../../de/d97/classrestore__ras__and__caps__structure__step.html#a9e88a4856fae9940c9396d3eed68e20a">restore_ras_and_caps_structure_step</a>, <a class="el" href="../../d4/dc6/classrestore__enrolments__structure__step.html#ac345edda6da37093060eade78e48ee56">restore_enrolments_structure_step</a>, <a class="el" href="../../d0/d7c/classrestore__filters__structure__step.html#a9cc87d07777dc64da0ffee7707a791ae">restore_filters_structure_step</a>, <a class="el" href="../../d1/d4e/classrestore__comments__structure__step.html#ac671a1999825695b204d4aa9dc1ab2a5">restore_comments_structure_step</a>, <a class="el" href="../../d3/d8f/classrestore__badges__structure__step.html#a4565bc7216696a14bcd87360a1701255">restore_badges_structure_step</a>, <a class="el" href="../../d8/db2/classrestore__calendarevents__structure__step.html#ac71e30d97ed476d836fa2ea5c9c50cba">restore_calendarevents_structure_step</a>, <a class="el" href="../../d9/da8/classrestore__course__completion__structure__step.html#af0843eed0d4b78908d244e2682b5cecb">restore_course_completion_structure_step</a>, <a class="el" href="../../de/d86/classrestore__course__logs__structure__step.html#a1f946b3cfd77ee5b44e46889650d581b">restore_course_logs_structure_step</a>, <a class="el" href="../../d8/df0/classrestore__course__logstores__structure__step.html#a70916d3c7ad422583bc56d514b2bfa86">restore_course_logstores_structure_step</a>, <a class="el" href="../../dc/d2f/classrestore__course__loglastaccess__structure__step.html#a0b37041f5840b451bbc77920a895168a">restore_course_loglastaccess_structure_step</a>, <a class="el" href="../../d6/d6a/classrestore__course__competencies__structure__step.html#a46fb898ccfecf36ae5454f371ba1e92a">restore_course_competencies_structure_step</a>, <a class="el" href="../../d0/dff/classrestore__activity__competencies__structure__step.html#afe5f906f1ae7ded9071dcb586069f4d0">restore_activity_competencies_structure_step</a>, <a class="el" href="../../dc/d89/classrestore__activity__grading__structure__step.html#ae02b8a818fc5f3ad3a5d32b3a099b189">restore_activity_grading_structure_step</a>, <a class="el" href="../../d4/d41/classrestore__activity__grades__structure__step.html#a53f83da70ffe51b9a532c9834280fd58">restore_activity_grades_structure_step</a>, <a class="el" href="../../d8/d56/classrestore__activity__grade__history__structure__step.html#a9554f2ddc27ad240e8ff3fe99db79093">restore_activity_grade_history_structure_step</a>, <a class="el" href="../../d8/d60/classrestore__contentbankcontent__structure__step.html#a2965779fe32c50e3b7eac35ea04241f5">restore_contentbankcontent_structure_step</a>, <a class="el" href="../../d2/d84/classrestore__block__instance__structure__step.html#a83768b6cdf0a9c59cbc78d6edb8ed4d5">restore_block_instance_structure_step</a>, <a class="el" href="../../de/d9f/classrestore__module__structure__step.html#af03b845ce7d8c94381a3967556e72939">restore_module_structure_step</a>, <a class="el" href="../../d6/d80/classrestore__userscompletion__structure__step.html#a9ff7e31d18d16acb7cf461b81cd56188">restore_userscompletion_structure_step</a>, <a class="el" href="../../d0/d64/classrestore__create__categories__and__questions.html#ad90e19eb35837b8924d73344f4075436">restore_create_categories_and_questions</a>, <a class="el" href="../../d2/ddc/classrestore__rss__client__block__structure__step.html#aa50d5d779c50189b199b47702a8b140f">restore_rss_client_block_structure_step</a>, <a class="el" href="../../df/d5a/classrestore__assign__activity__structure__step.html#ac62d6ff216b5d03581be31d47ce38f30">restore_assign_activity_structure_step</a>, <a class="el" href="../../d8/d32/classrestore__assignment__activity__structure__step.html#a92cdc57ded423a3362d825c8423fc3b8">restore_assignment_activity_structure_step</a>, <a class="el" href="../../dc/d74/classrestore__bigbluebuttonbn__activity__structure__step.html#ab0c4bd27a5b92373ce9a1d52d5f910c9">restore_bigbluebuttonbn_activity_structure_step</a>, <a class="el" href="../../d5/de3/classrestore__book__activity__structure__step.html#ae0e6540ee8b12183810f31b42fbd4c58">restore_book_activity_structure_step</a>, <a class="el" href="../../d2/dd5/classrestore__chat__activity__structure__step.html#a545b9d2656cc3278bbac851fa1c41c81">restore_chat_activity_structure_step</a>, <a class="el" href="../../dc/d3a/classrestore__choice__activity__structure__step.html#abde8bde71af754d93286bc6d86015b1f">restore_choice_activity_structure_step</a>, <a class="el" href="../../dd/d60/classrestore__data__activity__structure__step.html#a97de8a4f67dad56c1f68ee13173ad4d0">restore_data_activity_structure_step</a>, <a class="el" href="../../d3/d55/classrestore__feedback__activity__structure__step.html#ab2a848cad8fa2079bb123eadb8008bbe">restore_feedback_activity_structure_step</a>, <a class="el" href="../../d4/dd0/classrestore__folder__activity__structure__step.html#a69e1d7aefa19ff3beb01ae4266078dcf">restore_folder_activity_structure_step</a>, <a class="el" href="../../d8/ddc/classrestore__forum__activity__structure__step.html#abc3dc51bf84fa1311b8489544c837869">restore_forum_activity_structure_step</a>, <a class="el" href="../../db/d53/classrestore__glossary__activity__structure__step.html#afc0753dc7f8929832e0df98ac99bee73">restore_glossary_activity_structure_step</a>, <a class="el" href="../../d7/dfa/classrestore__h5pactivity__activity__structure__step.html#a13f0fded997b2d09836a00f1b1372ac1">restore_h5pactivity_activity_structure_step</a>, <a class="el" href="../../d0/d4c/classrestore__imscp__activity__structure__step.html#aa4562b00f1522338f07c250ad21865d4">restore_imscp_activity_structure_step</a>, <a class="el" href="../../d0/dc2/classrestore__label__activity__structure__step.html#a3b714dae5a050541784d22792cdaedc4">restore_label_activity_structure_step</a>, <a class="el" href="../../df/ddd/classrestore__lesson__activity__structure__step.html#a771a3b27f482d0cec61b06bed3d0cc6b">restore_lesson_activity_structure_step</a>, <a class="el" href="../../de/d39/classrestore__lti__activity__structure__step.html#adf37b799ee201369f8bec9a6e352928a">restore_lti_activity_structure_step</a>, <a class="el" href="../../d6/d85/classrestore__page__activity__structure__step.html#a8eca77db8f14afd453de70a791ce1b96">restore_page_activity_structure_step</a>, <a class="el" href="../../db/d2b/classrestore__resource__activity__structure__step.html#a62b492282f0ef48906fb7407d346832b">restore_resource_activity_structure_step</a>, <a class="el" href="../../d4/d7f/classrestore__scorm__activity__structure__step.html#af09ca1ae2e04b39097eb3649cc6fad49">restore_scorm_activity_structure_step</a>, <a class="el" href="../../dc/dea/classrestore__survey__activity__structure__step.html#a96b0dcfb1aedcf6cdaca25ca9bc0cb80">restore_survey_activity_structure_step</a>, <a class="el" href="../../d2/dc4/classrestore__url__activity__structure__step.html#ac140d7a3b1b87fb3afbffd54ba44771e">restore_url_activity_structure_step</a>, <a class="el" href="../../d6/d78/classrestore__wiki__activity__structure__step.html#a37bd36c4452a604d97136c0408c512d2">restore_wiki_activity_structure_step</a>, and <a class="el" href="../../d2/d70/classrestore__workshop__activity__structure__step.html#ae13f37abaaa589d90e7bc0de2289e160">restore_workshop_activity_structure_step</a>.</p>

</div>
</div>
<a id="a35c8c82d27e1aa5991a685e1ca13a47d" name="a35c8c82d27e1aa5991a685e1ca13a47d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35c8c82d27e1aa5991a685e1ca13a47d">&#9670;&#160;</a></span>destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">base_step::destroy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destroy all circular references. </p>
<p>It helps PHP 5.2 a lot! </p>

</div>
</div>
<a id="a2a3912e58d4837bab006658938f33dac" name="a2a3912e58d4837bab006658938f33dac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a3912e58d4837bab006658938f33dac">&#9670;&#160;</a></span>execute()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">restore_structure_step::execute </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function will perform all the actions necessary to achieve the execution of the plan/part/task. </p>

<p>Implements <a class="el" href="../../df/dc9/interfaceexecutable.html#a5e976183baad284e1e8aa7361ad14193">executable</a>.</p>

</div>
</div>
<a id="aceab2b07fc2034fd4447035d6f65c8ae" name="aceab2b07fc2034fd4447035d6f65c8ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aceab2b07fc2034fd4447035d6f65c8ae">&#9670;&#160;</a></span>execute_condition()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">restore_structure_step::execute_condition </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>To conditionally decide if one step will be executed or no. </p>
<p>For steps needing to be executed conditionally, based in dynamic conditions (at execution time vs at declaration time) you must override this function. It will return true if the step must be executed and false if not </p>

<p>Reimplemented in <a class="el" href="../../d5/df1/classrestore__gradebook__structure__step.html#a7317e445ce33aae58c326b3b41ea05bf">restore_gradebook_structure_step</a>, <a class="el" href="../../d6/d03/classrestore__grade__history__structure__step.html#ab238b08855ed24e08a2ce357e376695c">restore_grade_history_structure_step</a>, <a class="el" href="../../d4/dc6/classrestore__enrolments__structure__step.html#a31a288ad3325ecf3bf902bc0c5e0e16f">restore_enrolments_structure_step</a>, <a class="el" href="../../d3/d8f/classrestore__badges__structure__step.html#aafc6a40bc393c1a3540a8976bb1cc0b2">restore_badges_structure_step</a>, <a class="el" href="../../d9/da8/classrestore__course__completion__structure__step.html#acbbf90612281d75ce8015fc72b51e1f5">restore_course_completion_structure_step</a>, <a class="el" href="../../de/d86/classrestore__course__logs__structure__step.html#aa11a92627f2e64d72dff94f3d5446198">restore_course_logs_structure_step</a>, <a class="el" href="../../d8/df0/classrestore__course__logstores__structure__step.html#a586c1fb0df9f5e0723a8ecd102f18ab6">restore_course_logstores_structure_step</a>, <a class="el" href="../../dc/d2f/classrestore__course__loglastaccess__structure__step.html#a753ebc46640bdcd78898ed7bdc920b5f">restore_course_loglastaccess_structure_step</a>, <a class="el" href="../../d6/d6a/classrestore__course__competencies__structure__step.html#ac1c07c0dbd9c06c146dead1c4eafdf09">restore_course_competencies_structure_step</a>, <a class="el" href="../../d0/dff/classrestore__activity__competencies__structure__step.html#a1ef5667d2fa3f18b6e87c0fb8e579577">restore_activity_competencies_structure_step</a>, <a class="el" href="../../dc/d89/classrestore__activity__grading__structure__step.html#abc760bf0a11b37c02510c8a61fa56aa4">restore_activity_grading_structure_step</a>, <a class="el" href="../../d4/d41/classrestore__activity__grades__structure__step.html#aae6d2410bc16a8c2adebe54010bdba82">restore_activity_grades_structure_step</a>, <a class="el" href="../../d8/d56/classrestore__activity__grade__history__structure__step.html#a83211b023f8ef817f0b1af3bf96eeca7">restore_activity_grade_history_structure_step</a>, and <a class="el" href="../../d6/d80/classrestore__userscompletion__structure__step.html#a1298f6b0c83660199d54755eca8a3753">restore_userscompletion_structure_step</a>.</p>

</div>
</div>
<a id="ac09d6de4de95edad9da7972f6eddea25" name="ac09d6de4de95edad9da7972f6eddea25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac09d6de4de95edad9da7972f6eddea25">&#9670;&#160;</a></span>get_mappingid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">restore_structure_step::get_mappingid </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$itemname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$oldid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$ifnotfound</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the new id of a mapping for the given itemname. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$itemname</td><td>the type of item </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$oldid</td><td>the item ID from the backup </td></tr>
    <tr><td class="paramtype">mixed</td><td class="paramname">$ifnotfound</td><td>what to return if $oldid wasnt found. Defaults to false </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae3f8755a3fc8e4a8afd4a385b2016920" name="ae3f8755a3fc8e4a8afd4a385b2016920"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3f8755a3fc8e4a8afd4a385b2016920">&#9670;&#160;</a></span>get_task()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">restore_structure_step::get_task </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>As far as restore structure steps are implementing <a class="el" href="../../d8/d35/classrestore__plugin.html" title="Class implementing the plugins support for moodle2 restore.">restore_plugin</a> stuff, they need to have the parent task available for wrapping purposes (get course/context....) </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">restore_task|null</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3585480af09452a3c038ea822a309300" name="a3585480af09452a3c038ea822a309300"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3585480af09452a3c038ea822a309300">&#9670;&#160;</a></span>grouped_parent_exists()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">restore_structure_step::grouped_parent_exists </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$pelement</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$elements</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given one pathelement, return true if grouped parent was found. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../de/dc3/classrestore__path__element.html" title="Class representing one path to be restored from XML file.">restore_path_element</a></td><td class="paramname">$pelement</td><td>the element we are interested in. </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../de/dc3/classrestore__path__element.html" title="Class representing one path to be restored from XML file.">restore_path_element</a>[]</td><td class="paramname">$elements</td><td>the elements that exist. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>true if this element is inside a grouped parent. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abad8bfe79237f90669015f0494f509a8" name="abad8bfe79237f90669015f0494f509a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abad8bfe79237f90669015f0494f509a8">&#9670;&#160;</a></span>launch_after_execute_methods()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">restore_structure_step::launch_after_execute_methods </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Launch all the after_execute methods present in all the processing objects. </p>
<p>This method will launch all the after_execute methods that can be defined both in <a class="el" href="../../d8/d35/classrestore__plugin.html" title="Class implementing the plugins support for moodle2 restore.">restore_plugin</a> and <a class="el" href="../../d9/dcb/classrestore__structure__step.html" title="Abstract class defining the needed stuff to restore one xml file.">restore_structure_step</a> classes</p>
<p>For <a class="el" href="../../d8/d35/classrestore__plugin.html" title="Class implementing the plugins support for moodle2 restore.">restore_plugin</a> classes the name of the method to be executed will be "after_execute_" + connection point (as far as can be multiple connection points in the same class)</p>
<p>For <a class="el" href="../../d9/dcb/classrestore__structure__step.html" title="Abstract class defining the needed stuff to restore one xml file.">restore_structure_step</a> classes is will be, simply, "after_execute". Note that this is executed <em>after</em> the plugin ones </p>

</div>
</div>
<a id="ae28041330e9811d34f76d61cd4bc8d21" name="ae28041330e9811d34f76d61cd4bc8d21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae28041330e9811d34f76d61cd4bc8d21">&#9670;&#160;</a></span>launch_after_restore_methods()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">restore_structure_step::launch_after_restore_methods </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Launch all the after_restore methods present in all the processing objects. </p>
<p>This method will launch all the after_restore methods that can be defined both in <a class="el" href="../../d8/d35/classrestore__plugin.html" title="Class implementing the plugins support for moodle2 restore.">restore_plugin</a> class</p>
<p>For <a class="el" href="../../d8/d35/classrestore__plugin.html" title="Class implementing the plugins support for moodle2 restore.">restore_plugin</a> classes the name of the method to be executed will be "after_restore_" + connection point (as far as can be multiple connection points in the same class) </p>

</div>
</div>
<a id="ac849571ff5893405cd4b0be044779678" name="ac849571ff5893405cd4b0be044779678"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac849571ff5893405cd4b0be044779678">&#9670;&#160;</a></span>log()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">base_step::log </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$a</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$depth</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$display</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function will be responsible for handling the params, and to call to the corresponding logger-&gt;<a class="el" href="../../d9/dcb/classrestore__structure__step.html#a11ea01f63c8ae143762c50675246188d" title="Receive one chunk of information form the xml parser processor and dispatch it, following the naming ...">process()</a> once all modifications in params have been performed. </p>

<p>Implements <a class="el" href="../../d8/dda/interfaceloggable.html#af2c072bff8301fc01a338def4b556b06">loggable</a>.</p>

</div>
</div>
<a id="aad82dabee427613b2d9bbfa1e9dd28dd" name="aad82dabee427613b2d9bbfa1e9dd28dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad82dabee427613b2d9bbfa1e9dd28dd">&#9670;&#160;</a></span>set_mapping()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">restore_structure_step::set_mapping </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$itemname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$oldid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$newid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$restorefiles</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$filesctxid</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$parentid</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>To send ids pairs to backup_ids_table and to store them into paths. </p>
<p>This method will send the given itemname and old/new ids to the backup_ids_temp table, and, at the same time, will save the new id into the corresponding <a class="el" href="../../de/dc3/classrestore__path__element.html" title="Class representing one path to be restored from XML file.">restore_path_element</a> for easier access by children. Also will inject the known old context id for the task in case it's going to be used for restoring files later </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>backup/util/plan/restore_structure_step.class.php</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun May 28 2023 02:55:01 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>
