<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: core_question\local\bank\random_question_loader Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;4.1</span>
   </div>
   <div id="projectbrief">Moodle 4.1dev (Build: 20220701) (9ccda59e00)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>core_question</b></li><li class="navelem"><b>local</b></li><li class="navelem"><a class="el" href="../../df/d29/namespacecore__question_1_1local_1_1bank.html">bank</a></li><li class="navelem"><a class="el" href="../../d7/d7c/classcore__question_1_1local_1_1bank_1_1random__question__loader.html">random_question_loader</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="../../d4/dc2/classcore__question_1_1local_1_1bank_1_1random__question__loader-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">core_question\local\bank\random_question_loader Class Reference<div class="ingroups"><a class="el" href="../../de/d37/group__core__question.html">core_question</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>This class efficiently finds questions at random from the question bank.  
 <a href="../../d7/d7c/classcore__question_1_1local_1_1bank_1_1random__question__loader.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a0c5b32c65211090d044a06e7c419fdc2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d7c/classcore__question_1_1local_1_1bank_1_1random__question__loader.html#a0c5b32c65211090d044a06e7c419fdc2">__construct</a> (\<a class="el" href="../../d2/d58/classqubaid__condition.html">qubaid_condition</a> $qubaids, array $usedquestions=[])</td></tr>
<tr class="memdesc:a0c5b32c65211090d044a06e7c419fdc2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="../../d7/d7c/classcore__question_1_1local_1_1bank_1_1random__question__loader.html#a0c5b32c65211090d044a06e7c419fdc2">More...</a><br /></td></tr>
<tr class="separator:a0c5b32c65211090d044a06e7c419fdc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab57ba5560f44ba73f34ec01b3d12d283"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d7c/classcore__question_1_1local_1_1bank_1_1random__question__loader.html#ab57ba5560f44ba73f34ec01b3d12d283">count_questions</a> ($categoryid, $includesubcategories, $tagids=[])</td></tr>
<tr class="memdesc:ab57ba5560f44ba73f34ec01b3d12d283"><td class="mdescLeft">&#160;</td><td class="mdescRight">Count the number of available questions for the given criteria.  <a href="../../d7/d7c/classcore__question_1_1local_1_1bank_1_1random__question__loader.html#ab57ba5560f44ba73f34ec01b3d12d283">More...</a><br /></td></tr>
<tr class="separator:ab57ba5560f44ba73f34ec01b3d12d283"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2529dbce426ee50d009d75ba0dd57ef9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d7c/classcore__question_1_1local_1_1bank_1_1random__question__loader.html#a2529dbce426ee50d009d75ba0dd57ef9">get_next_question_id</a> ($categoryid, $includesubcategories, $tagids=[])</td></tr>
<tr class="memdesc:a2529dbce426ee50d009d75ba0dd57ef9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pick a question at random from the given category, from among those with the fewest uses.  <a href="../../d7/d7c/classcore__question_1_1local_1_1bank_1_1random__question__loader.html#a2529dbce426ee50d009d75ba0dd57ef9">More...</a><br /></td></tr>
<tr class="separator:a2529dbce426ee50d009d75ba0dd57ef9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42ba223690a7bef8586792599e4b0c3e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d7c/classcore__question_1_1local_1_1bank_1_1random__question__loader.html#a42ba223690a7bef8586792599e4b0c3e">get_questions</a> ($categoryid, $includesubcategories, $tagids=[], $limit=100, $offset=0, $fields=[])</td></tr>
<tr class="memdesc:a42ba223690a7bef8586792599e4b0c3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the list of available questions for the given criteria.  <a href="../../d7/d7c/classcore__question_1_1local_1_1bank_1_1random__question__loader.html#a42ba223690a7bef8586792599e4b0c3e">More...</a><br /></td></tr>
<tr class="separator:a42ba223690a7bef8586792599e4b0c3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a023df28ec9ea60d1946805b21aab6b94"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d7c/classcore__question_1_1local_1_1bank_1_1random__question__loader.html#a023df28ec9ea60d1946805b21aab6b94">is_question_available</a> ($categoryid, $includesubcategories, $questionid, $tagids=[])</td></tr>
<tr class="memdesc:a023df28ec9ea60d1946805b21aab6b94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether a given question is available in a given category.  <a href="../../d7/d7c/classcore__question_1_1local_1_1bank_1_1random__question__loader.html#a023df28ec9ea60d1946805b21aab6b94">More...</a><br /></td></tr>
<tr class="separator:a023df28ec9ea60d1946805b21aab6b94"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:ab5e63d765b0f2adad4084bdee2d1e295"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d7c/classcore__question_1_1local_1_1bank_1_1random__question__loader.html#ab5e63d765b0f2adad4084bdee2d1e295">ensure_questions_for_category_loaded</a> ($categoryid, $includesubcategories, $tagids=[])</td></tr>
<tr class="memdesc:ab5e63d765b0f2adad4084bdee2d1e295"><td class="mdescLeft">&#160;</td><td class="mdescRight">Populate {.  <a href="../../d7/d7c/classcore__question_1_1local_1_1bank_1_1random__question__loader.html#ab5e63d765b0f2adad4084bdee2d1e295">More...</a><br /></td></tr>
<tr class="separator:ab5e63d765b0f2adad4084bdee2d1e295"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4bf5d037010377b4ab1b195c45fc45e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d7c/classcore__question_1_1local_1_1bank_1_1random__question__loader.html#aa4bf5d037010377b4ab1b195c45fc45e">get_category_key</a> ($categoryid, $includesubcategories, $tagids=[])</td></tr>
<tr class="memdesc:aa4bf5d037010377b4ab1b195c45fc45e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the key into {.  <a href="../../d7/d7c/classcore__question_1_1local_1_1bank_1_1random__question__loader.html#aa4bf5d037010377b4ab1b195c45fc45e">More...</a><br /></td></tr>
<tr class="separator:aa4bf5d037010377b4ab1b195c45fc45e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afad1c8e63bde937b6b392422bfe89a59"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d7c/classcore__question_1_1local_1_1bank_1_1random__question__loader.html#afad1c8e63bde937b6b392422bfe89a59">get_question_ids</a> ($categoryid, $includesubcategories, $tagids=[])</td></tr>
<tr class="memdesc:afad1c8e63bde937b6b392422bfe89a59"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the list of available question ids for the given criteria.  <a href="../../d7/d7c/classcore__question_1_1local_1_1bank_1_1random__question__loader.html#afad1c8e63bde937b6b392422bfe89a59">More...</a><br /></td></tr>
<tr class="separator:afad1c8e63bde937b6b392422bfe89a59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31a9bf225fbbfa3f6c79d4242af6d4ff"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d7c/classcore__question_1_1local_1_1bank_1_1random__question__loader.html#a31a9bf225fbbfa3f6c79d4242af6d4ff">use_question</a> ($questionid)</td></tr>
<tr class="memdesc:a31a9bf225fbbfa3f6c79d4242af6d4ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the internal data structures to indicate that a given question has been used one more time.  <a href="../../d7/d7c/classcore__question_1_1local_1_1bank_1_1random__question__loader.html#a31a9bf225fbbfa3f6c79d4242af6d4ff">More...</a><br /></td></tr>
<tr class="separator:a31a9bf225fbbfa3f6c79d4242af6d4ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a48dcbad86e3dde0f16eaf3da6b82d77e"><td class="memItemLeft" align="right" valign="top"><a id="a48dcbad86e3dde0f16eaf3da6b82d77e" name="a48dcbad86e3dde0f16eaf3da6b82d77e"></a>
array&#160;</td><td class="memItemRight" valign="bottom"><b>$availablequestionscache</b> = []</td></tr>
<tr class="memdesc:a48dcbad86e3dde0f16eaf3da6b82d77e"><td class="mdescLeft">&#160;</td><td class="mdescRight">categoryid &amp; include subcategories =&gt; num previous uses =&gt; questionid =&gt; 1. <br /></td></tr>
<tr class="separator:a48dcbad86e3dde0f16eaf3da6b82d77e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64eb906c7305a40218115dd2ba55da08"><td class="memItemLeft" align="right" valign="top"><a id="a64eb906c7305a40218115dd2ba55da08" name="a64eb906c7305a40218115dd2ba55da08"></a>
array&#160;</td><td class="memItemRight" valign="bottom"><b>$excludedqtypes</b></td></tr>
<tr class="memdesc:a64eb906c7305a40218115dd2ba55da08"><td class="mdescLeft">&#160;</td><td class="mdescRight">qtypes that cannot be used by random questions. <br /></td></tr>
<tr class="separator:a64eb906c7305a40218115dd2ba55da08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf2f15295b89cb4c96ae29309a10c2b6"><td class="memItemLeft" align="right" valign="top"><a id="acf2f15295b89cb4c96ae29309a10c2b6" name="acf2f15295b89cb4c96ae29309a10c2b6"></a>
<a class="el" href="../../d2/d58/classqubaid__condition.html">qubaid_condition</a>&#160;</td><td class="memItemRight" valign="bottom"><b>$qubaids</b></td></tr>
<tr class="memdesc:acf2f15295b89cb4c96ae29309a10c2b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">which usages to consider previous attempts from. <br /></td></tr>
<tr class="separator:acf2f15295b89cb4c96ae29309a10c2b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b214db15ddb962695ec8ec1367c756f"><td class="memItemLeft" align="right" valign="top">array&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d7c/classcore__question_1_1local_1_1bank_1_1random__question__loader.html#a8b214db15ddb962695ec8ec1367c756f">$recentlyusedquestions</a></td></tr>
<tr class="memdesc:a8b214db15ddb962695ec8ec1367c756f"><td class="mdescLeft">&#160;</td><td class="mdescRight">questionid =&gt; num recent uses.  <a href="../../d7/d7c/classcore__question_1_1local_1_1bank_1_1random__question__loader.html#a8b214db15ddb962695ec8ec1367c756f">More...</a><br /></td></tr>
<tr class="separator:a8b214db15ddb962695ec8ec1367c756f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >This class efficiently finds questions at random from the question bank. </p>
<p >You can ask for questions at random one at a time. Each time you ask, you pass a category id, and whether to pick from that category and all subcategories or just that category.</p>
<p >The number of teams each question has been used is tracked, and we will always return a question from among those elegible that has been used the fewest times. So, if there are questions that have not been used yet in the category asked for, one of those will be returned. However, within one instantiation of this class, we will never return a given question more than once, and we will never return questions passed into the constructor as $usedquestions.</p>
<dl class="section copyright"><dt>Copyright</dt><dd>2015 The Open University </dd></dl>
<dl class="section author"><dt>Author</dt><dd>2021 Safat Shahin <a href="#" onclick="location.href='mai'+'lto:'+'saf'+'at'+'sha'+'hi'+'n@c'+'at'+'aly'+'st'+'-au'+'.n'+'et'; return false;">safat<span class="obfuscator">.nosp@m.</span>shah<span class="obfuscator">.nosp@m.</span>in@ca<span class="obfuscator">.nosp@m.</span>taly<span class="obfuscator">.nosp@m.</span>st-au<span class="obfuscator">.nosp@m.</span>.net</a> </dd></dl>
<dl class="section user"><dt>License</dt><dd><a href="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a0c5b32c65211090d044a06e7c419fdc2" name="a0c5b32c65211090d044a06e7c419fdc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c5b32c65211090d044a06e7c419fdc2">&#9670;&nbsp;</a></span>__construct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_question\local\bank\random_question_loader::__construct </td>
          <td>(</td>
          <td class="paramtype">\<a class="el" href="../../d2/d58/classqubaid__condition.html">qubaid_condition</a>&#160;</td>
          <td class="paramname"><em>$qubaids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$usedquestions</em> = <code>[]</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d2/d58/classqubaid__condition.html" title="This class represents a restriction on the set of question_usage ids to include in a larger database ...">qubaid_condition</a></td><td class="paramname">$qubaids</td><td>the usages to consider when counting previous uses of each question. </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$usedquestions</td><td>questionid =&gt; number of times used count. If we should allow for further existing uses of a question in addition to the ones in $qubaids. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ab57ba5560f44ba73f34ec01b3d12d283" name="ab57ba5560f44ba73f34ec01b3d12d283"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab57ba5560f44ba73f34ec01b3d12d283">&#9670;&nbsp;</a></span>count_questions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_question\local\bank\random_question_loader::count_questions </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$categoryid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$includesubcategories</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$tagids</em> = <code>[]</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Count the number of available questions for the given criteria. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$categoryid</td><td>The id of a category in the question bank. </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$includesubcategories</td><td>Whether to pick a question from exactly that category, or that category and subcategories. </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$tagids</td><td>An array of tag ids. If an array is provided, then only the questions that are tagged with ALL the provided tagids will be loaded. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td>The number of questions matching the criteria. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab5e63d765b0f2adad4084bdee2d1e295" name="ab5e63d765b0f2adad4084bdee2d1e295"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5e63d765b0f2adad4084bdee2d1e295">&#9670;&nbsp;</a></span>ensure_questions_for_category_loaded()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_question\local\bank\random_question_loader::ensure_questions_for_category_loaded </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$categoryid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$includesubcategories</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$tagids</em> = <code>[]</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Populate {. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d7/d7c/classcore__question_1_1local_1_1bank_1_1random__question__loader.html#a48dcbad86e3dde0f16eaf3da6b82d77e" title="categoryid &amp; include subcategories =&gt; num previous uses =&gt; questionid =&gt; 1.">$availablequestionscache</a>} for this combination of options.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$categoryid</td><td>The id of a category in the question bank. </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$includesubcategories</td><td>Whether to pick a question from exactly that category, or that category and subcategories. </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$tagids</td><td>An array of tag ids. If an array is provided, then only the questions that are tagged with ALL the provided tagids will be loaded. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa4bf5d037010377b4ab1b195c45fc45e" name="aa4bf5d037010377b4ab1b195c45fc45e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4bf5d037010377b4ab1b195c45fc45e">&#9670;&nbsp;</a></span>get_category_key()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_question\local\bank\random_question_loader::get_category_key </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$categoryid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$includesubcategories</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$tagids</em> = <code>[]</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the key into {. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d7/d7c/classcore__question_1_1local_1_1bank_1_1random__question__loader.html#a48dcbad86e3dde0f16eaf3da6b82d77e" title="categoryid &amp; include subcategories =&gt; num previous uses =&gt; questionid =&gt; 1.">$availablequestionscache</a>} for this combination of options.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$categoryid</td><td>the id of a category in the question bank. </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$includesubcategories</td><td>wether to pick a question from exactly that category, or that category and subcategories. </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$tagids</td><td>an array of tag ids. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>the cache key. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2529dbce426ee50d009d75ba0dd57ef9" name="a2529dbce426ee50d009d75ba0dd57ef9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2529dbce426ee50d009d75ba0dd57ef9">&#9670;&nbsp;</a></span>get_next_question_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_question\local\bank\random_question_loader::get_next_question_id </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$categoryid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$includesubcategories</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$tagids</em> = <code>[]</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pick a question at random from the given category, from among those with the fewest uses. </p>
<p >If an array of tag ids are specified, then only the questions that are tagged with ALL those tags will be selected.</p>
<p >It is up the the caller to verify that the cateogry exists. An unknown category behaves like an empty one.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$categoryid</td><td>the id of a category in the question bank. </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$includesubcategories</td><td>wether to pick a question from exactly that category, or that category and subcategories. </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$tagids</td><td>An array of tag ids. A question has to be tagged with all the provided tagids (if any) in order to be eligible for being picked. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int|null</td><td>the id of the question picked, or null if there aren't any. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afad1c8e63bde937b6b392422bfe89a59" name="afad1c8e63bde937b6b392422bfe89a59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afad1c8e63bde937b6b392422bfe89a59">&#9670;&nbsp;</a></span>get_question_ids()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_question\local\bank\random_question_loader::get_question_ids </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$categoryid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$includesubcategories</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$tagids</em> = <code>[]</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the list of available question ids for the given criteria. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$categoryid</td><td>The id of a category in the question bank. </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$includesubcategories</td><td>Whether to pick a question from exactly that category, or that category and subcategories. </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$tagids</td><td>An array of tag ids. If an array is provided, then only the questions that are tagged with ALL the provided tagids will be loaded. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int[]</td><td>The list of question ids </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a42ba223690a7bef8586792599e4b0c3e" name="a42ba223690a7bef8586792599e4b0c3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42ba223690a7bef8586792599e4b0c3e">&#9670;&nbsp;</a></span>get_questions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_question\local\bank\random_question_loader::get_questions </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$categoryid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$includesubcategories</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$tagids</em> = <code>[]</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$limit</em> = <code>100</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$offset</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$fields</em> = <code>[]</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the list of available questions for the given criteria. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$categoryid</td><td>The id of a category in the question bank. </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$includesubcategories</td><td>Whether to pick a question from exactly that category, or that category and subcategories. </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$tagids</td><td>An array of tag ids. If an array is provided, then only the questions that are tagged with ALL the provided tagids will be loaded. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$limit</td><td>Maximum number of results to return. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$offset</td><td>Number of items to skip from the begging of the result set. </td></tr>
    <tr><td class="paramtype">string[]</td><td class="paramname">$fields</td><td>The fields to return for each question. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass[]</td><td>The list of question records </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a023df28ec9ea60d1946805b21aab6b94" name="a023df28ec9ea60d1946805b21aab6b94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a023df28ec9ea60d1946805b21aab6b94">&#9670;&nbsp;</a></span>is_question_available()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_question\local\bank\random_question_loader::is_question_available </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$categoryid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$includesubcategories</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$questionid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$tagids</em> = <code>[]</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check whether a given question is available in a given category. </p>
<p >If so, mark it used. If an optional list of tag ids are provided, then the question must be tagged with ALL of the provided tags to be considered as available.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$categoryid</td><td>the id of a category in the question bank. </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$includesubcategories</td><td>wether to pick a question from exactly that category, or that category and subcategories. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$questionid</td><td>the question that is being used. </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$tagids</td><td>An array of tag ids. Only the questions that are tagged with all the provided tagids can be available. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>whether the question is available in the requested category. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a31a9bf225fbbfa3f6c79d4242af6d4ff" name="a31a9bf225fbbfa3f6c79d4242af6d4ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31a9bf225fbbfa3f6c79d4242af6d4ff">&#9670;&nbsp;</a></span>use_question()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_question\local\bank\random_question_loader::use_question </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$questionid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update the internal data structures to indicate that a given question has been used one more time. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$questionid</td><td>the question that is being used. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a8b214db15ddb962695ec8ec1367c756f" name="a8b214db15ddb962695ec8ec1367c756f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b214db15ddb962695ec8ec1367c756f">&#9670;&nbsp;</a></span>$recentlyusedquestions</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">array core_question\local\bank\random_question_loader::$recentlyusedquestions</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>questionid =&gt; num recent uses. </p>
<p >Questions that have been used, but that is not yet recorded in the <a class="el" href="../../d1/dc8/class_d_b.html" title="The main &quot;DB&quot; class is simply a container class with some static methods for creating DB objects as w...">DB</a>. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>question/classes/local/bank/random_question_loader.php</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Jul 3 2022 03:42:13 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
