<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: core_install</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;4.3</span>
   </div>
   <div id="projectbrief">Moodle 4.3dev+ (Build: 20230916) (ecddfa6ccd8)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">core_install</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae2c0233000f0a5b5da67f5beb98f03a9" id="r_gae2c0233000f0a5b5da67f5beb98f03a9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d13/group__core__install.html#gae2c0233000f0a5b5da67f5beb98f03a9">make_competence_scale</a> ()</td></tr>
<tr class="memdesc:gae2c0233000f0a5b5da67f5beb98f03a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create another default scale.  <br /></td></tr>
<tr class="separator:gae2c0233000f0a5b5da67f5beb98f03a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4a00c930ab7adfe8730fdc8ed8f64146" id="r_ga4a00c930ab7adfe8730fdc8ed8f64146"><td class="memItemLeft" align="right" valign="top">object&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d13/group__core__install.html#ga4a00c930ab7adfe8730fdc8ed8f64146">make_default_scale</a> ()</td></tr>
<tr class="memdesc:ga4a00c930ab7adfe8730fdc8ed8f64146"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function creates a default separated/connected scale so there's something in the database.  <br /></td></tr>
<tr class="separator:ga4a00c930ab7adfe8730fdc8ed8f64146"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga70e25cbda4adecca2592e4bf125d797f" id="r_ga70e25cbda4adecca2592e4bf125d797f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d13/group__core__install.html#ga70e25cbda4adecca2592e4bf125d797f">upgrade_add_item_to_usermenu</a> (string $menuitem)</td></tr>
<tr class="memdesc:ga70e25cbda4adecca2592e4bf125d797f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a new item at the end of the usermenu.  <br /></td></tr>
<tr class="separator:ga70e25cbda4adecca2592e4bf125d797f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga87e4a9c4fa10160131a4dc345215447e" id="r_ga87e4a9c4fa10160131a4dc345215447e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d13/group__core__install.html#ga87e4a9c4fa10160131a4dc345215447e">upgrade_block_set_defaultregion</a> (string $blockname, string $pagename, string $pagetypepattern, string $newdefaultregion)</td></tr>
<tr class="memdesc:ga87e4a9c4fa10160131a4dc345215447e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update all instances of a block shown on a pagetype to a new default region, adding missing block instances where none is found.  <br /></td></tr>
<tr class="separator:ga87e4a9c4fa10160131a4dc345215447e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8da0b6648217372af82d0ea80fb3c62c" id="r_ga8da0b6648217372af82d0ea80fb3c62c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d13/group__core__install.html#ga8da0b6648217372af82d0ea80fb3c62c">upgrade_calculated_grade_items</a> ($courseid=null)</td></tr>
<tr class="memdesc:ga8da0b6648217372af82d0ea80fb3c62c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Marks all courses that require calculated grade items be updated.  <br /></td></tr>
<tr class="separator:ga8da0b6648217372af82d0ea80fb3c62c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga342a6dd6ca803b613c016c82213f2663" id="r_ga342a6dd6ca803b613c016c82213f2663"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d13/group__core__install.html#ga342a6dd6ca803b613c016c82213f2663">upgrade_calendar_action_events_fix</a> (stdClass $info, bool $output=true, int $endtime=0)</td></tr>
<tr class="memdesc:ga342a6dd6ca803b613c016c82213f2663"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detects the calendar action events needing to be fixed.  <br /></td></tr>
<tr class="separator:ga342a6dd6ca803b613c016c82213f2663"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad837fabb9c860ef199206981440480ed" id="r_gad837fabb9c860ef199206981440480ed"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d13/group__core__install.html#gad837fabb9c860ef199206981440480ed">upgrade_calendar_events_fix_remaining</a> (array $info, bool $output=true, int $maxseconds=0)</td></tr>
<tr class="memdesc:gad837fabb9c860ef199206981440480ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detects the calendar events needing to be fixed.  <br /></td></tr>
<tr class="separator:gad837fabb9c860ef199206981440480ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0f4ca2cf426cbf1129cb5b0e8386dbc8" id="r_ga0f4ca2cf426cbf1129cb5b0e8386dbc8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d13/group__core__install.html#ga0f4ca2cf426cbf1129cb5b0e8386dbc8">upgrade_calendar_events_get_teacherid</a> (int $courseid)</td></tr>
<tr class="memdesc:ga0f4ca2cf426cbf1129cb5b0e8386dbc8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a valid editing teacher for a given courseid.  <br /></td></tr>
<tr class="separator:ga0f4ca2cf426cbf1129cb5b0e8386dbc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae790f8ae41a970adb062756c78344c11" id="r_gae790f8ae41a970adb062756c78344c11"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d13/group__core__install.html#gae790f8ae41a970adb062756c78344c11">upgrade_calendar_events_mtrace</a> (string $string, bool $output)</td></tr>
<tr class="memdesc:gae790f8ae41a970adb062756c78344c11"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wrapper over <a class="el" href="../../d0/de1/group__core.html#ga8643808fe020d0242fb98be8fce80496" title="For outputting debugging info.">mtrace()</a> to allow a few more things to be specified.  <br /></td></tr>
<tr class="separator:gae790f8ae41a970adb062756c78344c11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac6e3af78316a047d75c65c330d34e7d3" id="r_gac6e3af78316a047d75c65c330d34e7d3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d13/group__core__install.html#gac6e3af78316a047d75c65c330d34e7d3">upgrade_calendar_events_status</a> (bool $output=true)</td></tr>
<tr class="memdesc:gac6e3af78316a047d75c65c330d34e7d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detects the calendar events needing to be fixed.  <br /></td></tr>
<tr class="separator:gac6e3af78316a047d75c65c330d34e7d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac27537fe60938eb0fe406d839a8188b7" id="r_gac27537fe60938eb0fe406d839a8188b7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d13/group__core__install.html#gac27537fe60938eb0fe406d839a8188b7">upgrade_calendar_override_events_fix</a> (stdClass $info, bool $output=true, int $endtime=0)</td></tr>
<tr class="memdesc:gac27537fe60938eb0fe406d839a8188b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detects the calendar override events needing to be fixed.  <br /></td></tr>
<tr class="separator:gac27537fe60938eb0fe406d839a8188b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8b424640c96bf1037a026ddbc09ecfab" id="r_ga8b424640c96bf1037a026ddbc09ecfab"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d13/group__core__install.html#ga8b424640c96bf1037a026ddbc09ecfab">upgrade_calendar_site_status</a> (bool $output=true)</td></tr>
<tr class="memdesc:ga8b424640c96bf1037a026ddbc09ecfab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detects if the site may need to get the calendar events fixed or no.  <br /></td></tr>
<tr class="separator:ga8b424640c96bf1037a026ddbc09ecfab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9a196cdc611035701db75a0e8643e36e" id="r_ga9a196cdc611035701db75a0e8643e36e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d13/group__core__install.html#ga9a196cdc611035701db75a0e8643e36e">upgrade_calendar_standard_events_fix</a> (stdClass $info, bool $output=true, int $endtime=0)</td></tr>
<tr class="memdesc:ga9a196cdc611035701db75a0e8643e36e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detects the calendar standard events needing to be fixed.  <br /></td></tr>
<tr class="separator:ga9a196cdc611035701db75a0e8643e36e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1816e80e0560fc91ee383b6449a9125b" id="r_ga1816e80e0560fc91ee383b6449a9125b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d13/group__core__install.html#ga1816e80e0560fc91ee383b6449a9125b">upgrade_calendar_subscription_events_fix</a> (stdClass $info, bool $output=true, int $endtime=0)</td></tr>
<tr class="memdesc:ga1816e80e0560fc91ee383b6449a9125b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detects the calendar subscription events needing to be fixed.  <br /></td></tr>
<tr class="separator:ga1816e80e0560fc91ee383b6449a9125b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac0f12ae8f6fa2574fbfa4e47f32db4a4" id="r_gac0f12ae8f6fa2574fbfa4e47f32db4a4"><td class="memItemLeft" align="right" valign="top"><a id="gac0f12ae8f6fa2574fbfa4e47f32db4a4" name="gac0f12ae8f6fa2574fbfa4e47f32db4a4"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>upgrade_core_licenses</b> ()</td></tr>
<tr class="memdesc:gac0f12ae8f6fa2574fbfa4e47f32db4a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Upgrade core licenses shipped with <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a>. <br /></td></tr>
<tr class="separator:gac0f12ae8f6fa2574fbfa4e47f32db4a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0ea4410dba5b411a92f76b714de11fa7" id="r_ga0ea4410dba5b411a92f76b714de11fa7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d13/group__core__install.html#ga0ea4410dba5b411a92f76b714de11fa7">upgrade_course_letter_boundary</a> ($courseid=null)</td></tr>
<tr class="memdesc:ga0ea4410dba5b411a92f76b714de11fa7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Marks all courses that require rounded grade items be updated.  <br /></td></tr>
<tr class="separator:ga0ea4410dba5b411a92f76b714de11fa7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga34c6d66cb9f1a59724b851767b681ec6" id="r_ga34c6d66cb9f1a59724b851767b681ec6"><td class="memItemLeft" align="right" valign="top"><a id="ga34c6d66cb9f1a59724b851767b681ec6" name="ga34c6d66cb9f1a59724b851767b681ec6"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>upgrade_delete_orphaned_file_records</b> ()</td></tr>
<tr class="memdesc:ga34c6d66cb9f1a59724b851767b681ec6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes file records which have their repository deleted. <br /></td></tr>
<tr class="separator:ga34c6d66cb9f1a59724b851767b681ec6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8f23212f758087cfd6b06b594ac80549" id="r_ga8f23212f758087cfd6b06b594ac80549"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d13/group__core__install.html#ga8f23212f758087cfd6b06b594ac80549">upgrade_extra_credit_weightoverride</a> ($onlycourseid=0)</td></tr>
<tr class="memdesc:ga8f23212f758087cfd6b06b594ac80549"><td class="mdescLeft">&#160;</td><td class="mdescRight">Marks all courses with changes in extra credit weight calculation.  <br /></td></tr>
<tr class="separator:ga8f23212f758087cfd6b06b594ac80549"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacf976e7fcd638bbe2b757287b7653ae7" id="r_gacf976e7fcd638bbe2b757287b7653ae7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d13/group__core__install.html#gacf976e7fcd638bbe2b757287b7653ae7">upgrade_fix_serialized_objects</a> ($serializeddata)</td></tr>
<tr class="memdesc:gacf976e7fcd638bbe2b757287b7653ae7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provides a way to check and update a serialized string that uses the deprecated object class.  <br /></td></tr>
<tr class="separator:gacf976e7fcd638bbe2b757287b7653ae7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga944ac11b466514e99cfde32948a020ad" id="r_ga944ac11b466514e99cfde32948a020ad"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d13/group__core__install.html#ga944ac11b466514e99cfde32948a020ad">upgrade_group_members_only</a> ($groupingid, $availability)</td></tr>
<tr class="memdesc:ga944ac11b466514e99cfde32948a020ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Using data for a single course-module that has groupmembersonly enabled, returns the new availability value that incorporates the correct groupmembersonly option.  <br /></td></tr>
<tr class="separator:ga944ac11b466514e99cfde32948a020ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac0cd4113dc2a07937f2a8107cdc3453a" id="r_gac0cd4113dc2a07937f2a8107cdc3453a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d13/group__core__install.html#gac0cd4113dc2a07937f2a8107cdc3453a">upgrade_letter_boundary_needs_freeze</a> ($context)</td></tr>
<tr class="memdesc:gac0cd4113dc2a07937f2a8107cdc3453a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks the letter boundary of the provided context to see if it needs freezing.  <br /></td></tr>
<tr class="separator:gac0cd4113dc2a07937f2a8107cdc3453a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga79b56a13a2a4e6cc072d2c90bfb8d919" id="r_ga79b56a13a2a4e6cc072d2c90bfb8d919"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d13/group__core__install.html#ga79b56a13a2a4e6cc072d2c90bfb8d919">upgrade_mysql_get_supported_tables</a> ()</td></tr>
<tr class="memdesc:ga79b56a13a2a4e6cc072d2c90bfb8d919"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns all non-view and non-temp tables with sane names.  <br /></td></tr>
<tr class="separator:ga79b56a13a2a4e6cc072d2c90bfb8d919"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa382bf4293ed79440d104f3ca16dcc30" id="r_gaa382bf4293ed79440d104f3ca16dcc30"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d13/group__core__install.html#gaa382bf4293ed79440d104f3ca16dcc30">upgrade_standardise_score</a> ($rawgrade, $sourcemin, $sourcemax, $targetmin, $targetmax)</td></tr>
<tr class="memdesc:gaa382bf4293ed79440d104f3ca16dcc30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a float value situated between a source minimum and a source maximum, converts it to the corresponding value situated between a target minimum and a target maximum.  <br /></td></tr>
<tr class="separator:gaa382bf4293ed79440d104f3ca16dcc30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac3feaf35aa79f6bb7be7ae00c6e3cb70" id="r_gac3feaf35aa79f6bb7be7ae00c6e3cb70"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d13/group__core__install.html#gac3feaf35aa79f6bb7be7ae00c6e3cb70">xmldb_main_install</a> ()</td></tr>
<tr class="memdesc:gac3feaf35aa79f6bb7be7ae00c6e3cb70"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main post-install tasks to be executed after the BD schema is available.  <br /></td></tr>
<tr class="separator:gac3feaf35aa79f6bb7be7ae00c6e3cb70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga973614fdda9b486a5dd430559804c138" id="r_ga973614fdda9b486a5dd430559804c138"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d13/group__core__install.html#ga973614fdda9b486a5dd430559804c138">xmldb_main_upgrade</a> ($oldversion)</td></tr>
<tr class="memdesc:ga973614fdda9b486a5dd430559804c138"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main upgrade tasks to be executed on <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> version bump.  <br /></td></tr>
<tr class="separator:ga973614fdda9b486a5dd430559804c138"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="gae2c0233000f0a5b5da67f5beb98f03a9" name="gae2c0233000f0a5b5da67f5beb98f03a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae2c0233000f0a5b5da67f5beb98f03a9">&#9670;&#160;</a></span>make_competence_scale()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">make_competence_scale </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create another default scale. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$oldversion</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>always true </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga4a00c930ab7adfe8730fdc8ed8f64146" name="ga4a00c930ab7adfe8730fdc8ed8f64146"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4a00c930ab7adfe8730fdc8ed8f64146">&#9670;&#160;</a></span>make_default_scale()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">object make_default_scale </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function creates a default separated/connected scale so there's something in the database. </p>
<p>The locations of strings and files is a bit odd, but this is because we need to maintain backward compatibility with many different existing language translations and older sites.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga70e25cbda4adecca2592e4bf125d797f" name="ga70e25cbda4adecca2592e4bf125d797f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga70e25cbda4adecca2592e4bf125d797f">&#9670;&#160;</a></span>upgrade_add_item_to_usermenu()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">upgrade_add_item_to_usermenu </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$menuitem</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a new item at the end of the usermenu. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$menuitem</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga87e4a9c4fa10160131a4dc345215447e" name="ga87e4a9c4fa10160131a4dc345215447e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga87e4a9c4fa10160131a4dc345215447e">&#9670;&#160;</a></span>upgrade_block_set_defaultregion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">upgrade_block_set_defaultregion </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$blockname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$pagename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$pagetypepattern</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$newdefaultregion</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update all instances of a block shown on a pagetype to a new default region, adding missing block instances where none is found. </p>
<p>Note: This is intended as a helper to add blocks to all instances of the standard my-page. It will only work where the subpagepattern is a string representation of an integer. If there are any string values this will not work.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$blockname</td><td>The block name, without the block_ frankenstyle component </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$pagename</td><td>The type of my-page to match </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$pagetypepattern</td><td>The page type pattern to match for the block </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$newdefaultregion</td><td>The new region to set </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga8da0b6648217372af82d0ea80fb3c62c" name="ga8da0b6648217372af82d0ea80fb3c62c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8da0b6648217372af82d0ea80fb3c62c">&#9670;&#160;</a></span>upgrade_calculated_grade_items()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">upgrade_calculated_grade_items </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$courseid</em> = <code>null</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Marks all courses that require calculated grade items be updated. </p>
<p>Used during upgrade and in course restore process.</p>
<p>This upgrade script is needed because the calculated grade items were stuck with a maximum of 100 and could be changed. This flags the courses that are affected and the grade book is frozen to retain grade integrity.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$courseid</td><td>Specify a course ID to run this script on just one course. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga342a6dd6ca803b613c016c82213f2663" name="ga342a6dd6ca803b613c016c82213f2663"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga342a6dd6ca803b613c016c82213f2663">&#9670;&#160;</a></span>upgrade_calendar_action_events_fix()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">upgrade_calendar_action_events_fix </td>
          <td>(</td>
          <td class="paramtype">stdClass&#160;</td>
          <td class="paramname"><em>$info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>$output</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>$endtime</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Detects the calendar action events needing to be fixed. </p>
<p>With optional output.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$info</td><td>an object with total and bad counters, plus sql to retrieve them. </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$output</td><td>true if the function must output information, false if not. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$endtime</td><td>cutoff time when the process must stop (0 means no cutoff). </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>true if the function has not finished fixing everything, false if it has finished. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gad837fabb9c860ef199206981440480ed" name="gad837fabb9c860ef199206981440480ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad837fabb9c860ef199206981440480ed">&#9670;&#160;</a></span>upgrade_calendar_events_fix_remaining()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">upgrade_calendar_events_fix_remaining </td>
          <td>(</td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>$output</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>$maxseconds</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Detects the calendar events needing to be fixed. </p>
<p>With optional output.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"></td><td class="paramname">stdClass[]</td><td>an array of event types (as keys) with total and bad counters, plus sql to retrieve them. </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$output</td><td>true if the function must output information, false if not. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$maxseconds</td><td>Number of seconds the function will run as max, with zero meaning no limit. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>true if the function has not finished fixing everything, false if it has finished. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga0f4ca2cf426cbf1129cb5b0e8386dbc8" name="ga0f4ca2cf426cbf1129cb5b0e8386dbc8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0f4ca2cf426cbf1129cb5b0e8386dbc8">&#9670;&#160;</a></span>upgrade_calendar_events_get_teacherid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">upgrade_calendar_events_get_teacherid </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>$courseid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a valid editing teacher for a given courseid. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$courseid</td><td>The course to look for editing teachers. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td>A user id of an editing teacher or, if missing, the admin userid. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gae790f8ae41a970adb062756c78344c11" name="gae790f8ae41a970adb062756c78344c11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae790f8ae41a970adb062756c78344c11">&#9670;&#160;</a></span>upgrade_calendar_events_mtrace()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">upgrade_calendar_events_mtrace </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>$output</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wrapper over <a class="el" href="../../d0/de1/group__core.html#ga8643808fe020d0242fb98be8fce80496" title="For outputting debugging info.">mtrace()</a> to allow a few more things to be specified. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$string</td><td>string to output. </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$output</td><td>true to perform the output, false to avoid it. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gac6e3af78316a047d75c65c330d34e7d3" name="gac6e3af78316a047d75c65c330d34e7d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac6e3af78316a047d75c65c330d34e7d3">&#9670;&#160;</a></span>upgrade_calendar_events_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">upgrade_calendar_events_status </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>$output</em> = <code>true</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Detects the calendar events needing to be fixed. </p>
<p>With optional output.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">bool</td><td class="paramname">$output</td><td>true if the function must output information, false if not. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass[]</td><td>an array of event types (as keys) with total and bad counters, plus sql to retrieve them. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gac27537fe60938eb0fe406d839a8188b7" name="gac27537fe60938eb0fe406d839a8188b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac27537fe60938eb0fe406d839a8188b7">&#9670;&#160;</a></span>upgrade_calendar_override_events_fix()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">upgrade_calendar_override_events_fix </td>
          <td>(</td>
          <td class="paramtype">stdClass&#160;</td>
          <td class="paramname"><em>$info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>$output</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>$endtime</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Detects the calendar override events needing to be fixed. </p>
<p>With optional output.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$info</td><td>an object with total and bad counters, plus sql to retrieve them. </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$output</td><td>true if the function must output information, false if not. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$endtime</td><td>cutoff time when the process must stop (0 means no cutoff). </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>true if the function has not finished fixing everything, false if it has finished. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga8b424640c96bf1037a026ddbc09ecfab" name="ga8b424640c96bf1037a026ddbc09ecfab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8b424640c96bf1037a026ddbc09ecfab">&#9670;&#160;</a></span>upgrade_calendar_site_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">upgrade_calendar_site_status </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>$output</em> = <code>true</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Detects if the site may need to get the calendar events fixed or no. </p>
<p>With optional output.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">bool</td><td class="paramname">$output</td><td>true if the function must output information, false if not. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>true if the site needs to run the fixes, false if not. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga9a196cdc611035701db75a0e8643e36e" name="ga9a196cdc611035701db75a0e8643e36e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9a196cdc611035701db75a0e8643e36e">&#9670;&#160;</a></span>upgrade_calendar_standard_events_fix()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">upgrade_calendar_standard_events_fix </td>
          <td>(</td>
          <td class="paramtype">stdClass&#160;</td>
          <td class="paramname"><em>$info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>$output</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>$endtime</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Detects the calendar standard events needing to be fixed. </p>
<p>With optional output.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$info</td><td>an object with total and bad counters, plus sql to retrieve them. </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$output</td><td>true if the function must output information, false if not. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$endtime</td><td>cutoff time when the process must stop (0 means no cutoff). </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>true if the function has not finished fixing everything, false if it has finished. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga1816e80e0560fc91ee383b6449a9125b" name="ga1816e80e0560fc91ee383b6449a9125b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1816e80e0560fc91ee383b6449a9125b">&#9670;&#160;</a></span>upgrade_calendar_subscription_events_fix()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">upgrade_calendar_subscription_events_fix </td>
          <td>(</td>
          <td class="paramtype">stdClass&#160;</td>
          <td class="paramname"><em>$info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>$output</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>$endtime</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Detects the calendar subscription events needing to be fixed. </p>
<p>With optional output.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$info</td><td>an object with total and bad counters, plus sql to retrieve them. </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$output</td><td>true if the function must output information, false if not. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$endtime</td><td>cutoff time when the process must stop (0 means no cutoff). </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>true if the function has not finished fixing everything, false if it has finished. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga0ea4410dba5b411a92f76b714de11fa7" name="ga0ea4410dba5b411a92f76b714de11fa7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0ea4410dba5b411a92f76b714de11fa7">&#9670;&#160;</a></span>upgrade_course_letter_boundary()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">upgrade_course_letter_boundary </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$courseid</em> = <code>null</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Marks all courses that require rounded grade items be updated. </p>
<p>Used during upgrade and in course restore process.</p>
<p>This upgrade script is needed because it has been decided that if a grade is rounded up, and it will changed a letter grade or satisfy a course completion grade criteria, then it should be set as so, and the letter will be awarded and or the course completion grade will be awarded.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$courseid</td><td>Specify a course ID to run this script on just one course. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga8f23212f758087cfd6b06b594ac80549" name="ga8f23212f758087cfd6b06b594ac80549"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8f23212f758087cfd6b06b594ac80549">&#9670;&#160;</a></span>upgrade_extra_credit_weightoverride()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">upgrade_extra_credit_weightoverride </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$onlycourseid</em> = <code>0</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Marks all courses with changes in extra credit weight calculation. </p>
<p>Used during upgrade and in course restore process</p>
<p>This upgrade script is needed because we changed the algorithm for calculating the automatic weights of extra credit items and want to prevent changes in the existing student grades.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$onlycourseid</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gacf976e7fcd638bbe2b757287b7653ae7" name="gacf976e7fcd638bbe2b757287b7653ae7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacf976e7fcd638bbe2b757287b7653ae7">&#9670;&#160;</a></span>upgrade_fix_serialized_objects()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">upgrade_fix_serialized_objects </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$serializeddata</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Provides a way to check and update a serialized string that uses the deprecated object class. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$serializeddata</td><td>Serialized string which may contain the now deprecated object. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>Returns an array where the first variable is a bool with a status of whether the initial data was changed or not. The second variable is the said data. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga944ac11b466514e99cfde32948a020ad" name="ga944ac11b466514e99cfde32948a020ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga944ac11b466514e99cfde32948a020ad">&#9670;&#160;</a></span>upgrade_group_members_only()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">upgrade_group_members_only </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$groupingid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$availability</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Using data for a single course-module that has groupmembersonly enabled, returns the new availability value that incorporates the correct groupmembersonly option. </p>
<p>Included as a function so that it can be shared between upgrade and restore, and unit-tested.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$groupingid</td><td>Grouping id for the course-module (0 if none) </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$availability</td><td>Availability JSON data for the module (null if none) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>New value for availability for the module </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gac0cd4113dc2a07937f2a8107cdc3453a" name="gac0cd4113dc2a07937f2a8107cdc3453a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac0cd4113dc2a07937f2a8107cdc3453a">&#9670;&#160;</a></span>upgrade_letter_boundary_needs_freeze()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">upgrade_letter_boundary_needs_freeze </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks the letter boundary of the provided context to see if it needs freezing. </p>
<p>Each letter boundary is tested to see if receiving that boundary number will result in achieving the cosponsoring letter.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">object</td><td class="paramname">$context</td><td>Context object </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>if the letter boundary for this context should be frozen. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga79b56a13a2a4e6cc072d2c90bfb8d919" name="ga79b56a13a2a4e6cc072d2c90bfb8d919"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga79b56a13a2a4e6cc072d2c90bfb8d919">&#9670;&#160;</a></span>upgrade_mysql_get_supported_tables()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">upgrade_mysql_get_supported_tables </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns all non-view and non-temp tables with sane names. </p>
<p>Prints list of non-supported tables using $OUTPUT-&gt;notification()</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaa382bf4293ed79440d104f3ca16dcc30" name="gaa382bf4293ed79440d104f3ca16dcc30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa382bf4293ed79440d104f3ca16dcc30">&#9670;&#160;</a></span>upgrade_standardise_score()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">upgrade_standardise_score </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$rawgrade</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sourcemin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sourcemax</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$targetmin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$targetmax</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given a float value situated between a source minimum and a source maximum, converts it to the corresponding value situated between a target minimum and a target maximum. </p>
<p>Thanks to Darlene for the formula :-)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">float</td><td class="paramname">$rawgrade</td><td></td></tr>
    <tr><td class="paramtype">float</td><td class="paramname">$sourcemin</td><td></td></tr>
    <tr><td class="paramtype">float</td><td class="paramname">$sourcemax</td><td></td></tr>
    <tr><td class="paramtype">float</td><td class="paramname">$targetmin</td><td></td></tr>
    <tr><td class="paramtype">float</td><td class="paramname">$targetmax</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">float</td><td>Converted value </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gac3feaf35aa79f6bb7be7ae00c6e3cb70" name="gac3feaf35aa79f6bb7be7ae00c6e3cb70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac3feaf35aa79f6bb7be7ae00c6e3cb70">&#9670;&#160;</a></span>xmldb_main_install()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">xmldb_main_install </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main post-install tasks to be executed after the BD schema is available. </p>
<p>This function is automatically executed after <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> core <a class="el" href="../../d1/dc8/class_d_b.html" title="The main &quot;DB&quot; class is simply a container class with some static methods for creating DB objects as w...">DB</a> has been created at initial install. It's in charge of perform the initial tasks not covered by the <a class="el" href="../../">install.xml</a> file, like create initial users, roles, templates, moving stuff from other plugins...</p>
<p>Note that the function is only invoked once, at install time, so if new tasks are needed in the future, they will need to be added both here (for new sites) and in the corresponding <a class="el" href="../../">upgrade.php</a> file (for existing sites).</p>
<p>All plugins within <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> (modules, blocks, reports...) support the existence of their own install.php file, using the "Frankenstyle" component name as defined at <a href="http://docs.moodle.org/dev/Frankenstyle" class="el externalurl"></a>, for example:</p><ul>
<li><a class="el" href="../../#ga3b8e33d3ec6d8584f24695c7b24a0e1e">xmldb_page_install()</a>. (modules don't require the plugintype ("mod_") to be used.</li>
<li><a class="el" href="../../#gaffdc7828c9464a5163c7e25e20f3ab55">xmldb_enrol_meta_install()</a>.</li>
<li><a class="el" href="../../d3/db3/group__workshopform__accumulative.html#ga6de608e3de848f23ae22ce0623e0de25">xmldb_workshopform_accumulative_install()</a>.</li>
<li>....</li>
</ul>
<p>Finally, note that it's also supported to have one uninstall.php file that is executed also once, each time one plugin is uninstalled (before the <a class="el" href="../../d1/dc8/class_d_b.html" title="The main &quot;DB&quot; class is simply a container class with some static methods for creating DB objects as w...">DB</a> schema is deleted). Those uninstall files will contain one function, using the "Frankenstyle" naming conventions, like <a class="el" href="../../#gafede994be5658e8a02de8f6e2e02c3d7">xmldb_enrol_meta_uninstall()</a> or <a class="el" href="../../">xmldb_workshop_uninstall()</a>. </p>

</div>
</div>
<a id="ga973614fdda9b486a5dd430559804c138" name="ga973614fdda9b486a5dd430559804c138"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga973614fdda9b486a5dd430559804c138">&#9670;&#160;</a></span>xmldb_main_upgrade()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">xmldb_main_upgrade </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$oldversion</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main upgrade tasks to be executed on <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> version bump. </p>
<p>This function is automatically executed after one bump in the <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> core version is detected. It's in charge of performing the required tasks to raise core from the previous version to the next one.</p>
<p>It's a collection of ordered blocks of code, named "upgrade steps", each one performing one isolated (from the rest of steps) task. Usually tasks involve creating new <a class="el" href="../../d1/dc8/class_d_b.html" title="The main &quot;DB&quot; class is simply a container class with some static methods for creating DB objects as w...">DB</a> objects or performing manipulation of the information for cleanup/fixup purposes.</p>
<p>Each upgrade step has a fixed structure, that can be summarised as follows:</p>
<p>if ($oldversion &lt; XXXXXXXXXX.XX) { // Explanation of the update step, linking to issue in the Tracker if necessary upgrade_set_timeout(XX); // Optional for big tasks // Code to execute goes here, usually the XMLDB Editor will // help you here. See <a href="http://docs.moodle.org/dev/XMLDB_editor" class="el externalurl"></a>. upgrade_main_savepoint(true, XXXXXXXXXX.XX); }</p>
<p>All plugins within <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> (modules, blocks, reports...) support the existence of their own upgrade.php file, using the "Frankenstyle" component name as defined at <a href="http://docs.moodle.org/dev/Frankenstyle" class="el externalurl"></a>, for example:</p><ul>
<li><a class="el" href="../../#gacca69703b8f5bad61afd0a4031d6a677">xmldb_page_upgrade($oldversion)</a>. (modules don't require the plugintype ("mod_") to be used.</li>
<li><a class="el" href="../../d4/ded/group__auth__manual.html#gaa544352ec504d681dec483767a5c4a89">xmldb_auth_manual_upgrade($oldversion)</a>.</li>
<li><a class="el" href="../../d3/db3/group__workshopform__accumulative.html#ga8693abd970ca21bd6c529b6e5652ad5b">xmldb_workshopform_accumulative_upgrade($oldversion)</a>.</li>
<li>....</li>
</ul>
<p>In order to keep the contents of this file reduced, it's allowed to create some helper functions to be used here in the <a class="el" href="../../">upgradelib.php</a> file at the same directory. Note that such a file must be manually included from upgrade.php, and there are some restrictions about what can be used within it.</p>
<p>For more information, take a look to the documentation available:</p><ul>
<li>Data definition API: <a href="http://docs.moodle.org/dev/Data_definition_API" class="el externalurl"></a></li>
<li>Upgrade API: <a href="http://docs.moodle.org/dev/Upgrade_API" class="el externalurl"></a></li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$oldversion</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>always true </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Sep 17 2023 02:44:54 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
