<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: core_user Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;4.2</span>
   </div>
   <div id="projectbrief">Moodle 4.2dev (Build: 20221216) (5019abfdd64)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="#pro-static-attribs">Static Protected Attributes</a> &#124;
<a href="../../df/d8a/classcore__user-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">core_user Class Reference<div class="ingroups"><a class="el" href="../../d0/de1/group__core.html">core</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>User class to access user details.  
 <a href="../../da/de3/classcore__user.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:aebb227bb096843f3695eb7a3dbc7c2ea"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/de3/classcore__user.html#aebb227bb096843f3695eb7a3dbc7c2ea">awaiting_action</a> (stdClass $user=null)</td></tr>
<tr class="memdesc:aebb227bb096843f3695eb7a3dbc7c2ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is the user expected to perform an action to start using <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> properly?  <a href="../../da/de3/classcore__user.html#aebb227bb096843f3695eb7a3dbc7c2ea">More...</a><br /></td></tr>
<tr class="separator:aebb227bb096843f3695eb7a3dbc7c2ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2208dc45fea63891e23ff0983cd7a403"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/de3/classcore__user.html#a2208dc45fea63891e23ff0983cd7a403">can_edit_preference</a> ($preferencename, $user)</td></tr>
<tr class="memdesc:a2208dc45fea63891e23ff0983cd7a403"><td class="mdescLeft">&#160;</td><td class="mdescRight">Can current user edit preference of this/another user.  <a href="../../da/de3/classcore__user.html#a2208dc45fea63891e23ff0983cd7a403">More...</a><br /></td></tr>
<tr class="separator:a2208dc45fea63891e23ff0983cd7a403"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcc70f1996c46aeb80ed66c008838cc6"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/de3/classcore__user.html#afcc70f1996c46aeb80ed66c008838cc6">clean_data</a> ($user)</td></tr>
<tr class="memdesc:afcc70f1996c46aeb80ed66c008838cc6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clean the user data.  <a href="../../da/de3/classcore__user.html#afcc70f1996c46aeb80ed66c008838cc6">More...</a><br /></td></tr>
<tr class="separator:afcc70f1996c46aeb80ed66c008838cc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af36d97ba0223bc72a03638daeeabd2c8"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/de3/classcore__user.html#af36d97ba0223bc72a03638daeeabd2c8">clean_field</a> ($data, $field)</td></tr>
<tr class="memdesc:af36d97ba0223bc72a03638daeeabd2c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clean a specific user field.  <a href="../../da/de3/classcore__user.html#af36d97ba0223bc72a03638daeeabd2c8">More...</a><br /></td></tr>
<tr class="separator:af36d97ba0223bc72a03638daeeabd2c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61e5004e4b923f77a115a13caf018fa9"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/de3/classcore__user.html#a61e5004e4b923f77a115a13caf018fa9">clean_preference</a> ($<a class="el" href="../../d8/ded/group___simple_pie.html#gaefbfa229f1c9e1fc967bff724a010f9e">value</a>, $preferencename)</td></tr>
<tr class="memdesc:a61e5004e4b923f77a115a13caf018fa9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clean value of a user preference.  <a href="../../da/de3/classcore__user.html#a61e5004e4b923f77a115a13caf018fa9">More...</a><br /></td></tr>
<tr class="separator:a61e5004e4b923f77a115a13caf018fa9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1aaccc0c80dcc345002bb95e82824fd"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/de3/classcore__user.html#aa1aaccc0c80dcc345002bb95e82824fd">get_noreply_user</a> ()</td></tr>
<tr class="memdesc:aa1aaccc0c80dcc345002bb95e82824fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return noreply user record, this is currently used in messaging system only for sending messages from noreply email.  <a href="../../da/de3/classcore__user.html#aa1aaccc0c80dcc345002bb95e82824fd">More...</a><br /></td></tr>
<tr class="separator:aa1aaccc0c80dcc345002bb95e82824fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e64435ead5319123765c231ffbdba6f"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/de3/classcore__user.html#a3e64435ead5319123765c231ffbdba6f">get_property_choices</a> ($property)</td></tr>
<tr class="memdesc:a3e64435ead5319123765c231ffbdba6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the choices of the property.  <a href="../../da/de3/classcore__user.html#a3e64435ead5319123765c231ffbdba6f">More...</a><br /></td></tr>
<tr class="separator:a3e64435ead5319123765c231ffbdba6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a140ddcbd021665595e8ddef0c9da8276"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/de3/classcore__user.html#a140ddcbd021665595e8ddef0c9da8276">get_property_default</a> ($property)</td></tr>
<tr class="memdesc:a140ddcbd021665595e8ddef0c9da8276"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the property default.  <a href="../../da/de3/classcore__user.html#a140ddcbd021665595e8ddef0c9da8276">More...</a><br /></td></tr>
<tr class="separator:a140ddcbd021665595e8ddef0c9da8276"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae93a467b4fed4c62727007b6b5b37e64"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/de3/classcore__user.html#ae93a467b4fed4c62727007b6b5b37e64">get_property_definition</a> ($property)</td></tr>
<tr class="memdesc:ae93a467b4fed4c62727007b6b5b37e64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get properties of a user field.  <a href="../../da/de3/classcore__user.html#ae93a467b4fed4c62727007b6b5b37e64">More...</a><br /></td></tr>
<tr class="separator:ae93a467b4fed4c62727007b6b5b37e64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6100d46d0f80009a06ca17ff1dc8e0b2"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/de3/classcore__user.html#a6100d46d0f80009a06ca17ff1dc8e0b2">get_property_null</a> ($property)</td></tr>
<tr class="memdesc:a6100d46d0f80009a06ca17ff1dc8e0b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Discover if the property is NULL_ALLOWED or NULL_NOT_ALLOWED.  <a href="../../da/de3/classcore__user.html#a6100d46d0f80009a06ca17ff1dc8e0b2">More...</a><br /></td></tr>
<tr class="separator:a6100d46d0f80009a06ca17ff1dc8e0b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75d6b1600f6ed03d680788d9443f1669"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/de3/classcore__user.html#a75d6b1600f6ed03d680788d9443f1669">get_property_type</a> ($property)</td></tr>
<tr class="memdesc:a75d6b1600f6ed03d680788d9443f1669"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the parameter type of the property.  <a href="../../da/de3/classcore__user.html#a75d6b1600f6ed03d680788d9443f1669">More...</a><br /></td></tr>
<tr class="separator:a75d6b1600f6ed03d680788d9443f1669"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7385be3ea165b6bd784f231c925d05b8"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/de3/classcore__user.html#a7385be3ea165b6bd784f231c925d05b8">get_support_user</a> ()</td></tr>
<tr class="memdesc:a7385be3ea165b6bd784f231c925d05b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return support user record, this is currently used in messaging system only for sending messages to support email.  <a href="../../da/de3/classcore__user.html#a7385be3ea165b6bd784f231c925d05b8">More...</a><br /></td></tr>
<tr class="separator:a7385be3ea165b6bd784f231c925d05b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a762d2d930361b46299673f0384fac0"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/de3/classcore__user.html#a6a762d2d930361b46299673f0384fac0">get_user</a> ($userid, $fields=' *', $strictness=<a class="el" href="../../d0/de1/group__core.html#gaffc7005a2da386334d76ec5f85ca2d48">IGNORE_MISSING</a>)</td></tr>
<tr class="memdesc:a6a762d2d930361b46299673f0384fac0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return user object from db or create noreply or support user, if userid matches corse_user::NOREPLY_USER or corse_user::SUPPORT_USER respectively.  <a href="../../da/de3/classcore__user.html#a6a762d2d930361b46299673f0384fac0">More...</a><br /></td></tr>
<tr class="separator:a6a762d2d930361b46299673f0384fac0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1648046d81f6ff8cc4a370d3510c1da7"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/de3/classcore__user.html#a1648046d81f6ff8cc4a370d3510c1da7">get_user_by_email</a> ($email, $fields=' *', $mnethostid=null, $strictness=<a class="el" href="../../d0/de1/group__core.html#gaffc7005a2da386334d76ec5f85ca2d48">IGNORE_MISSING</a>)</td></tr>
<tr class="memdesc:a1648046d81f6ff8cc4a370d3510c1da7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return user object from db based on their email.  <a href="../../da/de3/classcore__user.html#a1648046d81f6ff8cc4a370d3510c1da7">More...</a><br /></td></tr>
<tr class="separator:a1648046d81f6ff8cc4a370d3510c1da7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add0a9b43d3d0992a403a2fb5c47832de"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/de3/classcore__user.html#add0a9b43d3d0992a403a2fb5c47832de">get_user_by_username</a> ($username, $fields=' *', $mnethostid=null, $strictness=<a class="el" href="../../d0/de1/group__core.html#gaffc7005a2da386334d76ec5f85ca2d48">IGNORE_MISSING</a>)</td></tr>
<tr class="memdesc:add0a9b43d3d0992a403a2fb5c47832de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return user object from db based on their username.  <a href="../../da/de3/classcore__user.html#add0a9b43d3d0992a403a2fb5c47832de">More...</a><br /></td></tr>
<tr class="separator:add0a9b43d3d0992a403a2fb5c47832de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bf1f0231c2b0f5a59920c59ac04e57c"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/de3/classcore__user.html#a9bf1f0231c2b0f5a59920c59ac04e57c">is_real_user</a> ($userid, $checkdb=false)</td></tr>
<tr class="memdesc:a9bf1f0231c2b0f5a59920c59ac04e57c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return true if user id is greater than 0 and alternatively check db.  <a href="../../da/de3/classcore__user.html#a9bf1f0231c2b0f5a59920c59ac04e57c">More...</a><br /></td></tr>
<tr class="separator:a9bf1f0231c2b0f5a59920c59ac04e57c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc9e7ab4afda3a16251330bd637ff558"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/de3/classcore__user.html#adc9e7ab4afda3a16251330bd637ff558">require_active_user</a> ($user, $checksuspended=false, $checknologin=false)</td></tr>
<tr class="memdesc:adc9e7ab4afda3a16251330bd637ff558"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the given user is an active user in the site.  <a href="../../da/de3/classcore__user.html#adc9e7ab4afda3a16251330bd637ff558">More...</a><br /></td></tr>
<tr class="separator:adc9e7ab4afda3a16251330bd637ff558"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a634fa1935618bb3c6c6a0af4d52e9a1c"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/de3/classcore__user.html#a634fa1935618bb3c6c6a0af4d52e9a1c">reset_caches</a> ()</td></tr>
<tr class="memdesc:a634fa1935618bb3c6c6a0af4d52e9a1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clean the properties cache.  <a href="../../da/de3/classcore__user.html#a634fa1935618bb3c6c6a0af4d52e9a1c">More...</a><br /></td></tr>
<tr class="separator:a634fa1935618bb3c6c6a0af4d52e9a1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ebce63098d14b03f910eedff464c913"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/de3/classcore__user.html#a9ebce63098d14b03f910eedff464c913">reset_internal_users</a> ()</td></tr>
<tr class="memdesc:a9ebce63098d14b03f910eedff464c913"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset self::$noreplyuser and self::$supportuser.  <a href="../../da/de3/classcore__user.html#a9ebce63098d14b03f910eedff464c913">More...</a><br /></td></tr>
<tr class="separator:a9ebce63098d14b03f910eedff464c913"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb36cc1142e536cd55972511c28ccdaf"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/de3/classcore__user.html#adb36cc1142e536cd55972511c28ccdaf">search</a> ($<a class="el" href="../../dc/d71/group___imap___client.html#gae0ccb7bceda061e460576520b09aa443">query</a>, <a class="el" href="../../d8/d0a/classcontext__course.html">context_course</a> $coursecontext=null, $max=30, $querylimit=5)</td></tr>
<tr class="memdesc:adb36cc1142e536cd55972511c28ccdaf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Searches for users by name, possibly within a specified context, with current user's access.  <a href="../../da/de3/classcore__user.html#adb36cc1142e536cd55972511c28ccdaf">More...</a><br /></td></tr>
<tr class="separator:adb36cc1142e536cd55972511c28ccdaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a390c4f3e97afc1cdcefa7195c7d38989"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/de3/classcore__user.html#a390c4f3e97afc1cdcefa7195c7d38989">update_picture</a> (stdClass $usernew, $filemanageroptions=array())</td></tr>
<tr class="memdesc:a390c4f3e97afc1cdcefa7195c7d38989"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the provided users profile picture based upon the expected fields returned from the edit or edit_advanced forms.  <a href="../../da/de3/classcore__user.html#a390c4f3e97afc1cdcefa7195c7d38989">More...</a><br /></td></tr>
<tr class="separator:a390c4f3e97afc1cdcefa7195c7d38989"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0217613ce4570bf6f389735b93b7238"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/de3/classcore__user.html#af0217613ce4570bf6f389735b93b7238">validate</a> ($data)</td></tr>
<tr class="memdesc:af0217613ce4570bf6f389735b93b7238"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validate user data.  <a href="../../da/de3/classcore__user.html#af0217613ce4570bf6f389735b93b7238">More...</a><br /></td></tr>
<tr class="separator:af0217613ce4570bf6f389735b93b7238"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56def03601b4aa5664a52374a838e30d"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/de3/classcore__user.html#a56def03601b4aa5664a52374a838e30d">welcome_message</a> ()</td></tr>
<tr class="memdesc:a56def03601b4aa5664a52374a838e30d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get welcome message.  <a href="../../da/de3/classcore__user.html#a56def03601b4aa5664a52374a838e30d">More...</a><br /></td></tr>
<tr class="separator:a56def03601b4aa5664a52374a838e30d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:ad254af695e6bc5ff907f7ce58acd14f7"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/de3/classcore__user.html#ad254af695e6bc5ff907f7ce58acd14f7">AUTHSYNCFIELDS</a></td></tr>
<tr class="memdesc:ad254af695e6bc5ff907f7ce58acd14f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of fields that can be synched/locked during authentication.  <a href="../../da/de3/classcore__user.html#ad254af695e6bc5ff907f7ce58acd14f7">More...</a><br /></td></tr>
<tr class="separator:ad254af695e6bc5ff907f7ce58acd14f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afebeb52ac2068e732510543432d0b3e4"><td class="memItemLeft" align="right" valign="top"><a id="afebeb52ac2068e732510543432d0b3e4" name="afebeb52ac2068e732510543432d0b3e4"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>MAILDISPLAY_COURSE_MEMBERS_ONLY</b> = 2</td></tr>
<tr class="memdesc:afebeb52ac2068e732510543432d0b3e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Display email address to course members only. <br /></td></tr>
<tr class="separator:afebeb52ac2068e732510543432d0b3e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a237103d1f510ec808a0df6285a1879"><td class="memItemLeft" align="right" valign="top"><a id="a0a237103d1f510ec808a0df6285a1879" name="a0a237103d1f510ec808a0df6285a1879"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>MAILDISPLAY_EVERYONE</b> = 1</td></tr>
<tr class="memdesc:a0a237103d1f510ec808a0df6285a1879"><td class="mdescLeft">&#160;</td><td class="mdescRight">Display email address to everyone. <br /></td></tr>
<tr class="separator:a0a237103d1f510ec808a0df6285a1879"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05716e438648c2567e639e27aa0a1d27"><td class="memItemLeft" align="right" valign="top"><a id="a05716e438648c2567e639e27aa0a1d27" name="a05716e438648c2567e639e27aa0a1d27"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>MAILDISPLAY_HIDE</b> = 0</td></tr>
<tr class="memdesc:a05716e438648c2567e639e27aa0a1d27"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hide email address from everyone. <br /></td></tr>
<tr class="separator:a05716e438648c2567e639e27aa0a1d27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e50220ce0a75c91a84945c82c70a887"><td class="memItemLeft" align="right" valign="top"><a id="a1e50220ce0a75c91a84945c82c70a887" name="a1e50220ce0a75c91a84945c82c70a887"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>NOREPLY_USER</b> = -10</td></tr>
<tr class="memdesc:a1e50220ce0a75c91a84945c82c70a887"><td class="mdescLeft">&#160;</td><td class="mdescRight">No reply user id. <br /></td></tr>
<tr class="separator:a1e50220ce0a75c91a84945c82c70a887"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abab082d180f9feea92d35646531f713c"><td class="memItemLeft" align="right" valign="top"><a id="abab082d180f9feea92d35646531f713c" name="abab082d180f9feea92d35646531f713c"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>SUPPORT_USER</b> = -20</td></tr>
<tr class="memdesc:abab082d180f9feea92d35646531f713c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Support user id. <br /></td></tr>
<tr class="separator:abab082d180f9feea92d35646531f713c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55bdbc321898a739f3b6a75f56adf8b8"><td class="memItemLeft" align="right" valign="top"><a id="a55bdbc321898a739f3b6a75f56adf8b8" name="a55bdbc321898a739f3b6a75f56adf8b8"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>VIEWPROFILE_DO_NOT_PREVENT</b> = 0</td></tr>
<tr class="memdesc:a55bdbc321898a739f3b6a75f56adf8b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates that user profile view should not be prevented. <br /></td></tr>
<tr class="separator:a55bdbc321898a739f3b6a75f56adf8b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc98bf296222585abe743b3a891ad227"><td class="memItemLeft" align="right" valign="top"><a id="abc98bf296222585abe743b3a891ad227" name="abc98bf296222585abe743b3a891ad227"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>VIEWPROFILE_FORCE_ALLOW</b> = 1</td></tr>
<tr class="memdesc:abc98bf296222585abe743b3a891ad227"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates that user profile view should be allowed even if <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> would prevent it. <br /></td></tr>
<tr class="separator:abc98bf296222585abe743b3a891ad227"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32634cc0232e66ccdb67d88312ce3951"><td class="memItemLeft" align="right" valign="top"><a id="a32634cc0232e66ccdb67d88312ce3951" name="a32634cc0232e66ccdb67d88312ce3951"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>VIEWPROFILE_PREVENT</b> = -1</td></tr>
<tr class="memdesc:a32634cc0232e66ccdb67d88312ce3951"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates that user profile view should be prevented. <br /></td></tr>
<tr class="separator:a32634cc0232e66ccdb67d88312ce3951"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:ae690059d0f999832932e25269d887a20"><td class="memItemLeft" align="right" valign="top"><a id="ae690059d0f999832932e25269d887a20" name="ae690059d0f999832932e25269d887a20"></a>
static stdClass&#160;</td><td class="memItemRight" valign="bottom"><b>$noreplyuser</b> = false</td></tr>
<tr class="memdesc:ae690059d0f999832932e25269d887a20"><td class="mdescLeft">&#160;</td><td class="mdescRight">keep record of noreply user <br /></td></tr>
<tr class="separator:ae690059d0f999832932e25269d887a20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fd5280bbd1c3dd068cd960ad336a7ed"><td class="memItemLeft" align="right" valign="top"><a id="a1fd5280bbd1c3dd068cd960ad336a7ed" name="a1fd5280bbd1c3dd068cd960ad336a7ed"></a>
static stdClass&#160;</td><td class="memItemRight" valign="bottom"><b>$supportuser</b> = false</td></tr>
<tr class="memdesc:a1fd5280bbd1c3dd068cd960ad336a7ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">keep record of support user <br /></td></tr>
<tr class="separator:a1fd5280bbd1c3dd068cd960ad336a7ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-static-methods" name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr class="memitem:a20edd6977236bdfb696ecbcb665e3e25"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/de3/classcore__user.html#a20edd6977236bdfb696ecbcb665e3e25">default_preference_permission_check</a> ($user, $preferencename)</td></tr>
<tr class="memdesc:a20edd6977236bdfb696ecbcb665e3e25"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default callback used for checking if current user is allowed to change permission of user $user.  <a href="../../da/de3/classcore__user.html#a20edd6977236bdfb696ecbcb665e3e25">More...</a><br /></td></tr>
<tr class="separator:a20edd6977236bdfb696ecbcb665e3e25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34e73f3aef617108daf0f46d0d290f3a"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/de3/classcore__user.html#a34e73f3aef617108daf0f46d0d290f3a">fill_preferences_cache</a> ()</td></tr>
<tr class="memdesc:a34e73f3aef617108daf0f46d0d290f3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Definition of updateable user preferences and rules for data and access validation.  <a href="../../da/de3/classcore__user.html#a34e73f3aef617108daf0f46d0d290f3a">More...</a><br /></td></tr>
<tr class="separator:a34e73f3aef617108daf0f46d0d290f3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d6e2bd9b60a2f6806079c07755bf719"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/de3/classcore__user.html#a2d6e2bd9b60a2f6806079c07755bf719">fill_properties_cache</a> ()</td></tr>
<tr class="memdesc:a2d6e2bd9b60a2f6806079c07755bf719"><td class="mdescLeft">&#160;</td><td class="mdescRight">Definition of user profile fields and the expected parameter type for data validation.  <a href="../../da/de3/classcore__user.html#a2d6e2bd9b60a2f6806079c07755bf719">More...</a><br /></td></tr>
<tr class="separator:a2d6e2bd9b60a2f6806079c07755bf719"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa82b4831583a4c34852a9e817a104ea6"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/de3/classcore__user.html#aa82b4831583a4c34852a9e817a104ea6">get_dummy_user_record</a> ()</td></tr>
<tr class="memdesc:aa82b4831583a4c34852a9e817a104ea6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to return dummy noreply user record.  <a href="../../da/de3/classcore__user.html#aa82b4831583a4c34852a9e817a104ea6">More...</a><br /></td></tr>
<tr class="separator:aa82b4831583a4c34852a9e817a104ea6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae91942708ddbc8102708b1798819e4bd"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/de3/classcore__user.html#ae91942708ddbc8102708b1798819e4bd">get_enrolled_sql_on_courses_with_capability</a> ($<a class="el" href="../../dc/d71/group___imap___client.html#gab2c24006bbccb7984767e680dc4c3e92">capability</a>)</td></tr>
<tr class="memdesc:ae91942708ddbc8102708b1798819e4bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets an SQL query that lists all enrolled user ids on any course where the current user has the specified capability.  <a href="../../da/de3/classcore__user.html#ae91942708ddbc8102708b1798819e4bd">More...</a><br /></td></tr>
<tr class="separator:ae91942708ddbc8102708b1798819e4bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0910047da34b9ff5573b4a17c539f3a3"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/de3/classcore__user.html#a0910047da34b9ff5573b4a17c539f3a3">get_preference_definition</a> ($preferencename)</td></tr>
<tr class="memdesc:a0910047da34b9ff5573b4a17c539f3a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the preference definition.  <a href="../../da/de3/classcore__user.html#a0910047da34b9ff5573b4a17c539f3a3">More...</a><br /></td></tr>
<tr class="separator:a0910047da34b9ff5573b4a17c539f3a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-static-attribs" name="pro-static-attribs"></a>
Static Protected Attributes</h2></td></tr>
<tr class="memitem:a4dc69fca18d70c1b23128770cd7b5b94"><td class="memItemLeft" align="right" valign="top"><a id="a4dc69fca18d70c1b23128770cd7b5b94" name="a4dc69fca18d70c1b23128770cd7b5b94"></a>
static array&#160;</td><td class="memItemRight" valign="bottom"><b>$preferencescache</b> = null</td></tr>
<tr class="memdesc:a4dc69fca18d70c1b23128770cd7b5b94"><td class="mdescLeft">&#160;</td><td class="mdescRight">store user preferences cache. <br /></td></tr>
<tr class="separator:a4dc69fca18d70c1b23128770cd7b5b94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7350cbb7ad478eaa691f55b265eb3f99"><td class="memItemLeft" align="right" valign="top"><a id="a7350cbb7ad478eaa691f55b265eb3f99" name="a7350cbb7ad478eaa691f55b265eb3f99"></a>
static array&#160;</td><td class="memItemRight" valign="bottom"><b>$propertiescache</b> = null</td></tr>
<tr class="memdesc:a7350cbb7ad478eaa691f55b265eb3f99"><td class="mdescLeft">&#160;</td><td class="mdescRight">store user fields properties cache. <br /></td></tr>
<tr class="separator:a7350cbb7ad478eaa691f55b265eb3f99"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >User class to access user details. </p>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000075">Todo:</a></b></dt><dd>move api's from user/lib.php and deprecate old ones.</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>2013 Rajesh Taneja <a href="#" onclick="location.href='mai'+'lto:'+'raj'+'es'+'h@m'+'oo'+'dle'+'.c'+'om'; return false;">rajes<span class="obfuscator">.nosp@m.</span>h@mo<span class="obfuscator">.nosp@m.</span>odle.<span class="obfuscator">.nosp@m.</span>com</a> </dd></dl>
<dl class="section user"><dt>License</dt><dd><a href="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later </dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="aebb227bb096843f3695eb7a3dbc7c2ea" name="aebb227bb096843f3695eb7a3dbc7c2ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebb227bb096843f3695eb7a3dbc7c2ea">&#9670;&#160;</a></span>awaiting_action()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user::awaiting_action </td>
          <td>(</td>
          <td class="paramtype">stdClass&#160;</td>
          <td class="paramname"><em>$user</em> = <code>null</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Is the user expected to perform an action to start using <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> properly? </p>
<p >This covers cases such as filling the profile, changing password or agreeing to the site policy.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$user</td><td>User object, defaults to the current user. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2208dc45fea63891e23ff0983cd7a403" name="a2208dc45fea63891e23ff0983cd7a403"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2208dc45fea63891e23ff0983cd7a403">&#9670;&#160;</a></span>can_edit_preference()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user::can_edit_preference </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$preferencename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$user</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Can current user edit preference of this/another user. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$preferencename</td><td></td></tr>
    <tr><td class="paramtype">stdClass</td><td class="paramname">$user</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afcc70f1996c46aeb80ed66c008838cc6" name="afcc70f1996c46aeb80ed66c008838cc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcc70f1996c46aeb80ed66c008838cc6">&#9670;&#160;</a></span>clean_data()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user::clean_data </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$user</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clean the user data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass&#160;|&#160;array</td><td class="paramname">$user</td><td>the user data to be validated against properties definition. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass::$user</td><td>the cleaned user data. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af36d97ba0223bc72a03638daeeabd2c8" name="af36d97ba0223bc72a03638daeeabd2c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af36d97ba0223bc72a03638daeeabd2c8">&#9670;&#160;</a></span>clean_field()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user::clean_field </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$field</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clean a specific user field. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$data</td><td>the user field data to be cleaned. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$field</td><td>the user field name on the property definition cache. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>the cleaned user data. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a61e5004e4b923f77a115a13caf018fa9" name="a61e5004e4b923f77a115a13caf018fa9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61e5004e4b923f77a115a13caf018fa9">&#9670;&#160;</a></span>clean_preference()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user::clean_preference </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$preferencename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clean value of a user preference. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$value</td><td>the user preference value to be cleaned. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$preferencename</td><td>the user preference name </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>the cleaned preference value </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a20edd6977236bdfb696ecbcb665e3e25" name="a20edd6977236bdfb696ecbcb665e3e25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20edd6977236bdfb696ecbcb665e3e25">&#9670;&#160;</a></span>default_preference_permission_check()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user::default_preference_permission_check </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$preferencename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Default callback used for checking if current user is allowed to change permission of user $user. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$user</td><td></td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$preferencename</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a34e73f3aef617108daf0f46d0d290f3a" name="a34e73f3aef617108daf0f46d0d290f3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34e73f3aef617108daf0f46d0d290f3a">&#9670;&#160;</a></span>fill_preferences_cache()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user::fill_preferences_cache </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition of updateable user preferences and rules for data and access validation. </p>
<p >array( 'preferencename' =&gt; array( // Either exact preference name or a regular expression. 'null' =&gt; NULL_ALLOWED, // Defaults to NULL_NOT_ALLOWED. Takes NULL_NOT_ALLOWED or NULL_ALLOWED. 'type' =&gt; PARAM_TYPE, // Expected parameter type of the user field - mandatory 'choices' =&gt; array(1, 2..) // An array of accepted values of the user field - optional 'default' =&gt; $CFG-&gt;setting // An default value for the field - optional 'isregex' =&gt; false/true // Whether the name of the preference is a regular expression (default false). 'permissioncallback' =&gt; callable // Function accepting arguments ($user, $preferencename) that checks if current user // is allowed to modify this preference for given user. // If not specified core_user::default_preference_permission_check() will be assumed. 'cleancallback' =&gt; callable // Custom callback for cleaning value if something more difficult than just type/choices is needed // accepts arguments ($value, $preferencename) ) )</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2d6e2bd9b60a2f6806079c07755bf719" name="a2d6e2bd9b60a2f6806079c07755bf719"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d6e2bd9b60a2f6806079c07755bf719">&#9670;&#160;</a></span>fill_properties_cache()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user::fill_properties_cache </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition of user profile fields and the expected parameter type for data validation. </p>
<p >array( 'property_name' =&gt; array( // The user property to be checked. Should match the field on the user table. 'null' =&gt; NULL_ALLOWED, // Defaults to NULL_NOT_ALLOWED. Takes NULL_NOT_ALLOWED or NULL_ALLOWED. 'type' =&gt; PARAM_TYPE, // Expected parameter type of the user field. 'choices' =&gt; array(1, 2..) // An array of accepted values of the user field. 'default' =&gt; $CFG-&gt;setting // An default value for the field. ) )</p>
<p >The fields choices and default are optional.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa82b4831583a4c34852a9e817a104ea6" name="aa82b4831583a4c34852a9e817a104ea6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa82b4831583a4c34852a9e817a104ea6">&#9670;&#160;</a></span>get_dummy_user_record()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user::get_dummy_user_record </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function to return dummy noreply user record. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae91942708ddbc8102708b1798819e4bd" name="ae91942708ddbc8102708b1798819e4bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae91942708ddbc8102708b1798819e4bd">&#9670;&#160;</a></span>get_enrolled_sql_on_courses_with_capability()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user::get_enrolled_sql_on_courses_with_capability </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$capability</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets an SQL query that lists all enrolled user ids on any course where the current user has the specified capability. </p>
<p >Helper function used for searching users.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$capability</td><td>Required capability </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>Array containing SQL and params, or two nulls if there are no courses </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa1aaccc0c80dcc345002bb95e82824fd" name="aa1aaccc0c80dcc345002bb95e82824fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1aaccc0c80dcc345002bb95e82824fd">&#9670;&#160;</a></span>get_noreply_user()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user::get_noreply_user </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return noreply user record, this is currently used in messaging system only for sending messages from noreply email. </p>
<p >It will return record of $CFG-&gt;noreplyuserid if set else return dummy user object with hard-coded $user-&gt;emailstop = 1 so noreply can be sent to user.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass</td><td>user record. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0910047da34b9ff5573b4a17c539f3a3" name="a0910047da34b9ff5573b4a17c539f3a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0910047da34b9ff5573b4a17c539f3a3">&#9670;&#160;</a></span>get_preference_definition()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user::get_preference_definition </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$preferencename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieves the preference definition. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$preferencename</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3e64435ead5319123765c231ffbdba6f" name="a3e64435ead5319123765c231ffbdba6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e64435ead5319123765c231ffbdba6f">&#9670;&#160;</a></span>get_property_choices()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user::get_property_choices </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$property</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the choices of the property. </p>
<p >This is a helper method to validate a value against a list of acceptable choices. For instance: country, language, themes and etc.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$property</td><td>property name to be retrieved. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../da/d34/classcoding__exception.html" title="Exception indicating programming error, must be fixed by a programer.">coding_exception</a></td><td>if the requested property name is invalid or if it does not has a list of choices. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>the property parameter type. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a140ddcbd021665595e8ddef0c9da8276" name="a140ddcbd021665595e8ddef0c9da8276"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a140ddcbd021665595e8ddef0c9da8276">&#9670;&#160;</a></span>get_property_default()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user::get_property_default </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$property</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the property default. </p>
<p >This method gets the default value of a field (if exists).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$property</td><td>property name to be retrieved. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../da/d34/classcoding__exception.html" title="Exception indicating programming error, must be fixed by a programer.">coding_exception</a></td><td>if the requested property name is invalid or if it does not has a default value. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>the property default value. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae93a467b4fed4c62727007b6b5b37e64" name="ae93a467b4fed4c62727007b6b5b37e64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae93a467b4fed4c62727007b6b5b37e64">&#9670;&#160;</a></span>get_property_definition()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user::get_property_definition </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$property</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get properties of a user field. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$property</td><td>property name to be retrieved. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../da/d34/classcoding__exception.html" title="Exception indicating programming error, must be fixed by a programer.">coding_exception</a></td><td>if the requested property name is invalid. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>the property definition. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6100d46d0f80009a06ca17ff1dc8e0b2" name="a6100d46d0f80009a06ca17ff1dc8e0b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6100d46d0f80009a06ca17ff1dc8e0b2">&#9670;&#160;</a></span>get_property_null()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user::get_property_null </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$property</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Discover if the property is NULL_ALLOWED or NULL_NOT_ALLOWED. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$property</td><td>property name to be retrieved. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../da/d34/classcoding__exception.html" title="Exception indicating programming error, must be fixed by a programer.">coding_exception</a></td><td>if the requested property name is invalid. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>true if the property is NULL_ALLOWED, false otherwise. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a75d6b1600f6ed03d680788d9443f1669" name="a75d6b1600f6ed03d680788d9443f1669"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75d6b1600f6ed03d680788d9443f1669">&#9670;&#160;</a></span>get_property_type()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user::get_property_type </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$property</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the parameter type of the property. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$property</td><td>property name to be retrieved. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../da/d34/classcoding__exception.html" title="Exception indicating programming error, must be fixed by a programer.">coding_exception</a></td><td>if the requested property name is invalid. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td>the property parameter type. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7385be3ea165b6bd784f231c925d05b8" name="a7385be3ea165b6bd784f231c925d05b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7385be3ea165b6bd784f231c925d05b8">&#9670;&#160;</a></span>get_support_user()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user::get_support_user </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return support user record, this is currently used in messaging system only for sending messages to support email. </p>
<p >$CFG-&gt;supportuserid is set then returns user record $CFG-&gt;supportemail is set then return dummy record with $CFG-&gt;supportemail else return admin user record with hard-coded $user-&gt;emailstop = 0, so user gets support message.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass</td><td>user record. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6a762d2d930361b46299673f0384fac0" name="a6a762d2d930361b46299673f0384fac0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a762d2d930361b46299673f0384fac0">&#9670;&#160;</a></span>get_user()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user::get_user </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$userid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$fields</em> = <code>'*'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$strictness</em> = <code><a class="el" href="../../d0/de1/group__core.html#gaffc7005a2da386334d76ec5f85ca2d48">IGNORE_MISSING</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return user object from db or create noreply or support user, if userid matches corse_user::NOREPLY_USER or corse_user::SUPPORT_USER respectively. </p>
<p >If userid is not found, then return false.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td>user id </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$fields</td><td>A comma separated list of user fields to be returned, support and noreply user will not be filtered by this. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$strictness</td><td>IGNORE_MISSING means compatible mode, false returned if user not found, debug message if more found; IGNORE_MULTIPLE means return first user, ignore multiple user records found(not recommended); MUST_EXIST means throw an exception if no user record or multiple records found. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass|bool</td><td>user record if found, else false. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d5/d5c/classdml__exception.html">dml_exception</a></td><td>if user record not found and respective $strictness is set. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1648046d81f6ff8cc4a370d3510c1da7" name="a1648046d81f6ff8cc4a370d3510c1da7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1648046d81f6ff8cc4a370d3510c1da7">&#9670;&#160;</a></span>get_user_by_email()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user::get_user_by_email </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$email</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$fields</em> = <code>'*'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$mnethostid</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$strictness</em> = <code><a class="el" href="../../d0/de1/group__core.html#gaffc7005a2da386334d76ec5f85ca2d48">IGNORE_MISSING</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return user object from db based on their email. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$email</td><td>The email of the user searched. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$fields</td><td>A comma separated list of user fields to be returned, support and noreply user. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$mnethostid</td><td>The id of the remote host. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$strictness</td><td>IGNORE_MISSING means compatible mode, false returned if user not found, debug message if more found; IGNORE_MULTIPLE means return first user, ignore multiple user records found(not recommended); MUST_EXIST means throw an exception if no user record or multiple records found. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass|bool</td><td>user record if found, else false. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d5/d5c/classdml__exception.html">dml_exception</a></td><td>if user record not found and respective $strictness is set. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="add0a9b43d3d0992a403a2fb5c47832de" name="add0a9b43d3d0992a403a2fb5c47832de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add0a9b43d3d0992a403a2fb5c47832de">&#9670;&#160;</a></span>get_user_by_username()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user::get_user_by_username </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$username</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$fields</em> = <code>'*'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$mnethostid</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$strictness</em> = <code><a class="el" href="../../d0/de1/group__core.html#gaffc7005a2da386334d76ec5f85ca2d48">IGNORE_MISSING</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return user object from db based on their username. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$username</td><td>The username of the user searched. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$fields</td><td>A comma separated list of user fields to be returned, support and noreply user. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$mnethostid</td><td>The id of the remote host. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$strictness</td><td>IGNORE_MISSING means compatible mode, false returned if user not found, debug message if more found; IGNORE_MULTIPLE means return first user, ignore multiple user records found(not recommended); MUST_EXIST means throw an exception if no user record or multiple records found. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass|bool</td><td>user record if found, else false. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d5/d5c/classdml__exception.html">dml_exception</a></td><td>if user record not found and respective $strictness is set. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9bf1f0231c2b0f5a59920c59ac04e57c" name="a9bf1f0231c2b0f5a59920c59ac04e57c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bf1f0231c2b0f5a59920c59ac04e57c">&#9670;&#160;</a></span>is_real_user()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user::is_real_user </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$userid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$checkdb</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return true if user id is greater than 0 and alternatively check db. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td>user id. </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$checkdb</td><td>if true userid will be checked in db. By default it's false, and userid is compared with 0 for performance. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>true is real user else false. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adc9e7ab4afda3a16251330bd637ff558" name="adc9e7ab4afda3a16251330bd637ff558"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc9e7ab4afda3a16251330bd637ff558">&#9670;&#160;</a></span>require_active_user()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user::require_active_user </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$checksuspended</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$checknologin</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if the given user is an active user in the site. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$user</td><td>user object </td></tr>
    <tr><td class="paramtype">boolean</td><td class="paramname">$checksuspended</td><td>whether to check if the user has the account suspended </td></tr>
    <tr><td class="paramtype">boolean</td><td class="paramname">$checknologin</td><td>whether to check if the user uses the nologin auth method </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d6/da8/classmoodle__exception.html" title="Base Moodle Exception class.">moodle_exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd><a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 3.0 </dd></dl>

</div>
</div>
<a id="a634fa1935618bb3c6c6a0af4d52e9a1c" name="a634fa1935618bb3c6c6a0af4d52e9a1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a634fa1935618bb3c6c6a0af4d52e9a1c">&#9670;&#160;</a></span>reset_caches()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user::reset_caches </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clean the properties cache. </p>
<p >During unit tests we need to be able to reset all caches so that each new test starts in a known state. Intended for use only for testing, phpunit calls this before every test. </p>

</div>
</div>
<a id="a9ebce63098d14b03f910eedff464c913" name="a9ebce63098d14b03f910eedff464c913"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ebce63098d14b03f910eedff464c913">&#9670;&#160;</a></span>reset_internal_users()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user::reset_internal_users </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reset self::$noreplyuser and self::$supportuser. </p>
<p >This is only used by phpunit, and there is no other use case for this function. Please don't use it outside phpunit. </p>

</div>
</div>
<a id="adb36cc1142e536cd55972511c28ccdaf" name="adb36cc1142e536cd55972511c28ccdaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb36cc1142e536cd55972511c28ccdaf">&#9670;&#160;</a></span>search()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user::search </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$query</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/d0a/classcontext__course.html">context_course</a>&#160;</td>
          <td class="paramname"><em>$coursecontext</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$max</em> = <code>30</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$querylimit</em> = <code>5</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Searches for users by name, possibly within a specified context, with current user's access. </p>
<p >Deciding which users to search is complicated because it relies on user permissions; ideally, we shouldn't show names if you aren't allowed to see their profile. The permissions for seeing profile are really complicated.</p>
<p >Even if search is restricted to a course, it's possible that other people might have been able to contribute within the course (e.g. they were enrolled before and not now; or people with system-level roles) so if the user has permission we do want to include everyone. However, if there are multiple results then we prioritise the ones who are enrolled in the course.</p>
<p >If you have moodle/user:viewdetails at system level, you can search everyone. Otherwise we check which courses you <em>do</em> have that permission and search everyone who is enrolled on those courses.</p>
<p >Normally you can only search the user's name. If you have the moodle/site:viewuseridentity capability then we also let you search the fields which are listed as identity fields in the 'showuseridentity' config option. For example, this might include the user's ID number or email.</p>
<p >The $max parameter controls the maximum number of users returned. If users are restricted from view for some reason, multiple runs of the main query might be made; the $querylimit parameter allows this to be restricted. Both parameters can be zero to remove limits.</p>
<p >The returned user objects include id, username, all fields required for user pictures, and user identity fields.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$query</td><td>Search query text </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../d8/d0a/classcontext__course.html">context_course</a>&#160;|&#160;null</td><td class="paramname">$coursecontext</td><td>Course context or null if system-wide </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$max</td><td>Max number of users to return, default 30 (zero = no limit) </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$querylimit</td><td>Max number of database queries, default 5 (zero = no limit) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>Array of user objects with limited fields </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a390c4f3e97afc1cdcefa7195c7d38989" name="a390c4f3e97afc1cdcefa7195c7d38989"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a390c4f3e97afc1cdcefa7195c7d38989">&#9670;&#160;</a></span>update_picture()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user::update_picture </td>
          <td>(</td>
          <td class="paramtype">stdClass&#160;</td>
          <td class="paramname"><em>$usernew</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$filemanageroptions</em> = <code>array()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Updates the provided users profile picture based upon the expected fields returned from the edit or edit_advanced forms. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$usernew</td><td>An object that contains some information about the user being updated </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$filemanageroptions</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>True if the user was updated, false if it stayed the same. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af0217613ce4570bf6f389735b93b7238" name="af0217613ce4570bf6f389735b93b7238"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0217613ce4570bf6f389735b93b7238">&#9670;&#160;</a></span>validate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user::validate </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Validate user data. </p>
<p >This method just validates each user field and return an array of errors. It doesn't clean the data, the methods clean() and clean_field() should be used for this purpose.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass&#160;|&#160;array</td><td class="paramname">$data</td><td>user data object or array to be validated. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array|true::$errors</td><td>array of errors found on the user object, true if the validation passed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a56def03601b4aa5664a52374a838e30d" name="a56def03601b4aa5664a52374a838e30d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56def03601b4aa5664a52374a838e30d">&#9670;&#160;</a></span>welcome_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_user::welcome_message </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get welcome message. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="../../d1/d21/classlang__string.html">lang_string</a></td><td>welcome message </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ad254af695e6bc5ff907f7ce58acd14f7" name="ad254af695e6bc5ff907f7ce58acd14f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad254af695e6bc5ff907f7ce58acd14f7">&#9670;&#160;</a></span>AUTHSYNCFIELDS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const core_user::AUTHSYNCFIELDS</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= [</div>
<div class="line">        <span class="stringliteral">&#39;firstname&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;lastname&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;email&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;city&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;country&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;lang&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;description&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;idnumber&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;institution&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;department&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;phone1&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;phone2&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;address&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;firstnamephonetic&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;lastnamephonetic&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;middlename&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;alternatename&#39;</span></div>
<div class="line">    ]</div>
</div><!-- fragment -->
<p>List of fields that can be synched/locked during authentication. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>lib/classes/user.php</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Dec 18 2022 03:08:05 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
