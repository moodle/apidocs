<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: MongoDB\Operation\MapReduce Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;4.2</span>
   </div>
   <div id="projectbrief">Moodle 4.2dev (Build: 20230224) (9ee4f8db8ba)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d1/d48/namespace_mongo_d_b.html">MongoDB</a></li><li class="navelem"><a class="el" href="../../d8/d88/namespace_mongo_d_b_1_1_operation.html">Operation</a></li><li class="navelem"><a class="el" href="../../d0/d7f/class_mongo_d_b_1_1_operation_1_1_map_reduce.html">MapReduce</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../d7/dbc/class_mongo_d_b_1_1_operation_1_1_map_reduce-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">MongoDB\Operation\MapReduce Class Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for MongoDB\Operation\MapReduce:</div>
<div class="dyncontent">
 <div class="center">
  <img src="../../d0/d7f/class_mongo_d_b_1_1_operation_1_1_map_reduce.png" usemap="#MongoDB_5COperation_5CMapReduce_map" alt=""/>
  <map id="MongoDB_5COperation_5CMapReduce_map" name="MongoDB_5COperation_5CMapReduce_map">
<area href="../../d7/d7c/interface_mongo_d_b_1_1_operation_1_1_executable.html" alt="MongoDB\Operation\Executable" shape="rect" coords="0,0,200,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a90ae925ca46e4d5d9f0975a9b504ab24"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d7f/class_mongo_d_b_1_1_operation_1_1_map_reduce.html#a90ae925ca46e4d5d9f0975a9b504ab24">__construct</a> (string $databaseName, string $collectionName, JavascriptInterface $map, JavascriptInterface $reduce, $out, array $options=[])</td></tr>
<tr class="memdesc:a90ae925ca46e4d5d9f0975a9b504ab24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a mapReduce command.  <br /></td></tr>
<tr class="separator:a90ae925ca46e4d5d9f0975a9b504ab24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd770d0cfd44ffb66a2284c721dfb21e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d7f/class_mongo_d_b_1_1_operation_1_1_map_reduce.html#acd770d0cfd44ffb66a2284c721dfb21e">execute</a> (Server $<a class="el" href="../../dc/d71/group___imap___client.html#gaa7cf0dd2417970c0d8ade087cb1dc7f8">server</a>)</td></tr>
<tr class="memdesc:acd770d0cfd44ffb66a2284c721dfb21e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Execute the operation.  <br /></td></tr>
<tr class="separator:acd770d0cfd44ffb66a2284c721dfb21e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a90ae925ca46e4d5d9f0975a9b504ab24" name="a90ae925ca46e4d5d9f0975a9b504ab24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90ae925ca46e4d5d9f0975a9b504ab24">&#9670;&#160;</a></span>__construct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MongoDB\Operation\MapReduce::__construct </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$databaseName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$collectionName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">JavascriptInterface&#160;</td>
          <td class="paramname"><em>$map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">JavascriptInterface&#160;</td>
          <td class="paramname"><em>$reduce</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$options</em> = <code>[]</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructs a mapReduce command. </p>
<p>Required arguments:</p>
<ul>
<li><p class="startli">map (MongoDB::BSON::Javascript): A JavaScript function that associates or "maps" a value with a key and emits the key and value pair.</p>
<p class="startli">Passing a Javascript instance with a scope is deprecated. Put all scope variables in the "scope" option of the MapReduce operation.</p>
</li>
<li><p class="startli">reduce (MongoDB::BSON::Javascript): A JavaScript function that "reduces" to a single object all the values associated with a particular key.</p>
<p class="startli">Passing a Javascript instance with a scope is deprecated. Put all scope variables in the "scope" option of the MapReduce operation.</p>
</li>
<li>out (string|document): Specifies where to output the result of the map-reduce operation. You can either output to a collection or return the result inline. On a primary member of a replica set you can output either to a collection or inline, but on a secondary, only inline output is possible.</li>
</ul>
<p>Supported options:</p>
<ul>
<li>bypassDocumentValidation (boolean): If true, allows the write to circumvent document level validation. This only applies when results are output to a collection.</li>
<li>collation (document): Collation specification.</li>
<li><p class="startli">comment (mixed): BSON value to attach as a comment to this command.</p>
<p class="startli">This is not supported for servers versions &lt; 4.4.</p>
</li>
<li><p class="startli">finalize (MongoDB::BSON::JavascriptInterface): Follows the reduce method and modifies the output.</p>
<p class="startli">Passing a Javascript instance with a scope is deprecated. Put all scope variables in the "scope" option of the MapReduce operation.</p>
</li>
<li>jsMode (boolean): Specifies whether to convert intermediate data into BSON format between the execution of the map and reduce functions.</li>
<li>limit (integer): Specifies a maximum number of documents for the input into the map function.</li>
<li>maxTimeMS (integer): The maximum amount of time to allow the query to run.</li>
<li>query (document): Specifies the selection criteria using query operators for determining the documents input to the map function.</li>
<li>readConcern (MongoDB::Driver::ReadConcern): Read concern. This is not supported when results are returned inline.</li>
<li><p class="startli">readPreference (MongoDB::Driver::ReadPreference): Read preference.</p>
<p class="startli">This option is ignored if results are output to a collection.</p>
</li>
<li>scope (document): Specifies global variables that are accessible in the map, reduce and finalize functions.</li>
<li>session (MongoDB::Driver::Session): <a class="el" href="../../d3/d7a/class_client.html">Client</a> session.</li>
<li>sort (document): Sorts the input documents. This option is useful for optimization. For example, specify the sort key to be the same as the emit key so that there are fewer reduce operations. The sort key must be in an existing index for this collection.</li>
<li>typeMap (array): Type map for BSON deserialization. This will be applied to the returned Cursor (it is not sent to the server).</li>
<li>verbose (boolean): Specifies whether to include the timing information in the result information.</li>
<li>writeConcern (MongoDB::Driver::WriteConcern): Write concern. This only applies when results are output to a collection.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$databaseName</td><td>Database name </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$collectionName</td><td>Collection name </td></tr>
    <tr><td class="paramtype">JavascriptInterface</td><td class="paramname">$map</td><td>Map function </td></tr>
    <tr><td class="paramtype">JavascriptInterface</td><td class="paramname">$reduce</td><td>Reduce function </td></tr>
    <tr><td class="paramtype">string&#160;|&#160;array&#160;|&#160;object</td><td class="paramname">$out</td><td>Output specification </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$options</td><td>Command options </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>for parameter/option parsing errors </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="acd770d0cfd44ffb66a2284c721dfb21e" name="acd770d0cfd44ffb66a2284c721dfb21e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd770d0cfd44ffb66a2284c721dfb21e">&#9670;&#160;</a></span>execute()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MongoDB\Operation\MapReduce::execute </td>
          <td>(</td>
          <td class="paramtype">Server&#160;</td>
          <td class="paramname"><em>$server</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Execute the operation. </p>
<dl class="section see"><dt>See also</dt><dd>Executable::execute() </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MapReduceResult</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">UnexpectedValueException</td><td>if the command response was malformed </td></tr>
    <tr><td class="paramname">UnsupportedException</td><td>if read concern or write concern is used and unsupported </td></tr>
    <tr><td class="paramname">DriverRuntimeException</td><td>for other driver errors (e.g. connection errors) </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="../../d7/d7c/interface_mongo_d_b_1_1_operation_1_1_executable.html#a2a0d642f8265ebbc16968033cbe0d7d4">MongoDB\Operation\Executable</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>cache/stores/mongodb/MongoDB/Operation/MapReduce.php</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Feb 26 2023 03:22:23 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
