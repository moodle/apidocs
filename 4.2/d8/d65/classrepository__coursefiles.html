<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: repository_coursefiles Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;4.2</span>
   </div>
   <div id="projectbrief">Moodle 4.2.1+ (Build: 20230728) (e4919b0feb4)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="../../d9/d07/classrepository__coursefiles-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">repository_coursefiles Class Reference<div class="ingroups"><a class="el" href="../../d3/dc6/group__repository__coursefiles.html">repository_coursefiles</a></div></div></div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="../../d8/d65/classrepository__coursefiles.html" title="repository_coursefiles class is used to browse course files">repository_coursefiles</a> class is used to browse course files  
 <a href="../../d8/d65/classrepository__coursefiles.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for repository_coursefiles:</div>
<div class="dyncontent">
 <div class="center">
  <img src="../../d8/d65/classrepository__coursefiles.png" usemap="#repository_5Fcoursefiles_map" alt=""/>
  <map id="repository_5Fcoursefiles_map" name="repository_5Fcoursefiles_map">
<area href="../../dc/d1a/classrepository.html" title="This is the base class of the repository class." alt="repository" shape="rect" coords="0,56,138,80"/>
<area href="../../d3/db0/interfacecacheable__object.html" title="Cacheable object." alt="cacheable_object" shape="rect" coords="0,0,138,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:accb70ecaee2d1a37d8203183a2640e3e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#accb70ecaee2d1a37d8203183a2640e3e">cache_file_by_reference</a> ($reference, $storedfile)</td></tr>
<tr class="memdesc:accb70ecaee2d1a37d8203183a2640e3e"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="../../dc/d67/class_cache.html" title="Used to create cache objects.">Cache</a> file from external repository by reference <a class="el" href="../../dc/d1a/classrepository.html#ac88b0c625ecb49e4c545ae5c49c93bf2">repository::get_file_reference()</a> <a class="el" href="../../dc/d1a/classrepository.html#a4404403c6d681ff8ed1b5f7297e92193">repository::get_file()</a> Invoked at MOODLE/repository/repository_ajax.php.  <br /></td></tr>
<tr class="separator:accb70ecaee2d1a37d8203183a2640e3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0566aa0689f2a21ca4943c11f6d04ef7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a0566aa0689f2a21ca4943c11f6d04ef7">callback</a> ()</td></tr>
<tr class="memdesc:a0566aa0689f2a21ca4943c11f6d04ef7"><td class="mdescLeft">&#160;</td><td class="mdescRight">For oauth like external authentication, when external repository direct user back to moodle, this function will be called to set up token and token_secret.  <br /></td></tr>
<tr class="separator:a0566aa0689f2a21ca4943c11f6d04ef7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb3110f130235e0202a60f51569029c8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#afb3110f130235e0202a60f51569029c8">can_be_edited_by_user</a> ()</td></tr>
<tr class="memdesc:afb3110f130235e0202a60f51569029c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Can the instance be edited by the current user?  <br /></td></tr>
<tr class="separator:afb3110f130235e0202a60f51569029c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8550e2bd919406e683c4597de77b982"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#aa8550e2bd919406e683c4597de77b982">check_capability</a> ()</td></tr>
<tr class="memdesc:aa8550e2bd919406e683c4597de77b982"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if user has a capability to view the current repository.  <br /></td></tr>
<tr class="separator:aa8550e2bd919406e683c4597de77b982"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af185c41fac9fe95ce19e924ae4c60ca7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#af185c41fac9fe95ce19e924ae4c60ca7">check_login</a> ()</td></tr>
<tr class="memdesc:af185c41fac9fe95ce19e924ae4c60ca7"><td class="mdescLeft">&#160;</td><td class="mdescRight">To check whether the user is logged in.  <br /></td></tr>
<tr class="separator:af185c41fac9fe95ce19e924ae4c60ca7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d523a5cb09b3f28cfc021b74af08104"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d65/classrepository__coursefiles.html#a1d523a5cb09b3f28cfc021b74af08104">contains_private_data</a> ()</td></tr>
<tr class="memdesc:a1d523a5cb09b3f28cfc021b74af08104"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is this repository accessing private data?  <br /></td></tr>
<tr class="separator:a1d523a5cb09b3f28cfc021b74af08104"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac242b349d78d95608bdda5bcc1f7f494"><td class="memItemLeft" align="right" valign="top"><a id="ac242b349d78d95608bdda5bcc1f7f494" name="ac242b349d78d95608bdda5bcc1f7f494"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>convert_references_to_local</b> ()</td></tr>
<tr class="memdesc:ac242b349d78d95608bdda5bcc1f7f494"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find all external files in this repo and import them. <br /></td></tr>
<tr class="separator:ac242b349d78d95608bdda5bcc1f7f494"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d5320d4413137d25bab6b9ada4eb888"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a2d5320d4413137d25bab6b9ada4eb888">copy_to_area</a> ($source, $filerecord, $maxbytes=-1, $areamaxbytes=<a class="el" href="../../d5/d09/group__core__files.html#ga24927741ed9b853e263c0fcf567d58e1">FILE_AREA_MAX_BYTES_UNLIMITED</a>)</td></tr>
<tr class="memdesc:a2d5320d4413137d25bab6b9ada4eb888"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is used to copy a moodle file to draft area.  <br /></td></tr>
<tr class="separator:a2d5320d4413137d25bab6b9ada4eb888"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a593ed480825d47c6faa7406d7d9e6db9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a593ed480825d47c6faa7406d7d9e6db9">cron</a> ()</td></tr>
<tr class="memdesc:a593ed480825d47c6faa7406d7d9e6db9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines operations that happen occasionally on cron.  <br /></td></tr>
<tr class="separator:a593ed480825d47c6faa7406d7d9e6db9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe000c32f5304386d22a0c84be78ea84"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#abe000c32f5304386d22a0c84be78ea84">default_returntype</a> ()</td></tr>
<tr class="memdesc:abe000c32f5304386d22a0c84be78ea84"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tells how the file can be picked from this repository.  <br /></td></tr>
<tr class="separator:abe000c32f5304386d22a0c84be78ea84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90b1a2a32fd0c18bb4e813a2e1e3df74"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a90b1a2a32fd0c18bb4e813a2e1e3df74">delete</a> ($downloadcontents=false)</td></tr>
<tr class="memdesc:a90b1a2a32fd0c18bb4e813a2e1e3df74"><td class="mdescLeft">&#160;</td><td class="mdescRight">delete a repository instance  <br /></td></tr>
<tr class="separator:a90b1a2a32fd0c18bb4e813a2e1e3df74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb86193b8932bb3e5027264239324c94"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#aeb86193b8932bb3e5027264239324c94">file_is_accessible</a> ($source)</td></tr>
<tr class="memdesc:aeb86193b8932bb3e5027264239324c94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Repository method to make sure that user can access particular file.  <br /></td></tr>
<tr class="separator:aeb86193b8932bb3e5027264239324c94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a892126d529325978597716d8e80e4e21"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a892126d529325978597716d8e80e4e21">filter</a> ($value)</td></tr>
<tr class="memdesc:a892126d529325978597716d8e80e4e21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Filter file listing to display specific types.  <br /></td></tr>
<tr class="separator:a892126d529325978597716d8e80e4e21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4404403c6d681ff8ed1b5f7297e92193"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a4404403c6d681ff8ed1b5f7297e92193">get_file</a> ($url, $filename='')</td></tr>
<tr class="memdesc:a4404403c6d681ff8ed1b5f7297e92193"><td class="mdescLeft">&#160;</td><td class="mdescRight">Downloads a file from external repository and saves it in temp dir.  <br /></td></tr>
<tr class="separator:a4404403c6d681ff8ed1b5f7297e92193"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac88b0c625ecb49e4c545ae5c49c93bf2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#ac88b0c625ecb49e4c545ae5c49c93bf2">get_file_reference</a> ($source)</td></tr>
<tr class="memdesc:ac88b0c625ecb49e4c545ae5c49c93bf2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepare file reference information.  <br /></td></tr>
<tr class="separator:ac88b0c625ecb49e4c545ae5c49c93bf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2940a7623b342d66132f1c6ec2af0e9f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a2940a7623b342d66132f1c6ec2af0e9f">get_file_size</a> ($source)</td></tr>
<tr class="memdesc:a2940a7623b342d66132f1c6ec2af0e9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return size of a file in bytes.  <br /></td></tr>
<tr class="separator:a2940a7623b342d66132f1c6ec2af0e9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c2386d80e303d5259b1a24ae2b9924c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a5c2386d80e303d5259b1a24ae2b9924c">get_file_source_info</a> ($source)</td></tr>
<tr class="memdesc:a5c2386d80e303d5259b1a24ae2b9924c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the source information.  <br /></td></tr>
<tr class="separator:a5c2386d80e303d5259b1a24ae2b9924c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f68856571775f3f85049c035e5349a8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d65/classrepository__coursefiles.html#a9f68856571775f3f85049c035e5349a8">get_link</a> ($encoded)</td></tr>
<tr class="memdesc:a9f68856571775f3f85049c035e5349a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return file URL, for most plugins, the parameter is the original url, but some plugins use a file id, so we need this function to convert file id to original url.  <br /></td></tr>
<tr class="separator:a9f68856571775f3f85049c035e5349a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a723d59974f7888db00bbf6c01aaf41c8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d65/classrepository__coursefiles.html#a723d59974f7888db00bbf6c01aaf41c8">get_listing</a> ($encodedpath='', $page='')</td></tr>
<tr class="memdesc:a723d59974f7888db00bbf6c01aaf41c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get file listing.  <br /></td></tr>
<tr class="separator:a723d59974f7888db00bbf6c01aaf41c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46212d7c6d121764b5e5728c508dc514"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a46212d7c6d121764b5e5728c508dc514">get_meta</a> ()</td></tr>
<tr class="memdesc:a46212d7c6d121764b5e5728c508dc514"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provide repository instance information for Ajax.  <br /></td></tr>
<tr class="separator:a46212d7c6d121764b5e5728c508dc514"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09eb286908b4561c20594e16dcf2c989"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d65/classrepository__coursefiles.html#a09eb286908b4561c20594e16dcf2c989">get_name</a> ()</td></tr>
<tr class="memdesc:a09eb286908b4561c20594e16dcf2c989"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the repository name.  <br /></td></tr>
<tr class="separator:a09eb286908b4561c20594e16dcf2c989"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a288cc7df716c6cb3f415f11fa185e92a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a288cc7df716c6cb3f415f11fa185e92a">get_option</a> ($config='')</td></tr>
<tr class="memdesc:a288cc7df716c6cb3f415f11fa185e92a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get settings for repository instance.  <br /></td></tr>
<tr class="separator:a288cc7df716c6cb3f415f11fa185e92a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e8f4ec26c1d7547b98b6c9988fd3cac"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a3e8f4ec26c1d7547b98b6c9988fd3cac">get_reference_details</a> ($reference, $filestatus=0)</td></tr>
<tr class="memdesc:a3e8f4ec26c1d7547b98b6c9988fd3cac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return human readable reference information.  <br /></td></tr>
<tr class="separator:a3e8f4ec26c1d7547b98b6c9988fd3cac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a1df198cf7b191ac81ff5e6fe9c3757"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a7a1df198cf7b191ac81ff5e6fe9c3757">get_short_filename</a> ($str, $maxlength)</td></tr>
<tr class="memdesc:a7a1df198cf7b191ac81ff5e6fe9c3757"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a shorten filename.  <br /></td></tr>
<tr class="separator:a7a1df198cf7b191ac81ff5e6fe9c3757"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cab68f0dd7f8062b989925d12f935bb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a8cab68f0dd7f8062b989925d12f935bb">get_typename</a> ()</td></tr>
<tr class="memdesc:a8cab68f0dd7f8062b989925d12f935bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the type name of the repository.  <br /></td></tr>
<tr class="separator:a8cab68f0dd7f8062b989925d12f935bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74e3b22c2d436e748f9b817cf7f19b9d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a74e3b22c2d436e748f9b817cf7f19b9d">global_search</a> ()</td></tr>
<tr class="memdesc:a74e3b22c2d436e748f9b817cf7f19b9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">is it possible to do glboal search?  <br /></td></tr>
<tr class="separator:a74e3b22c2d436e748f9b817cf7f19b9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8447d924b4322dc9593b8969b590c01b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d65/classrepository__coursefiles.html#a8447d924b4322dc9593b8969b590c01b">has_moodle_files</a> ()</td></tr>
<tr class="memdesc:a8447d924b4322dc9593b8969b590c01b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Does this repository used to browse moodle files?  <br /></td></tr>
<tr class="separator:a8447d924b4322dc9593b8969b590c01b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22d3e67b47bef8cf5e71d6cf53b765c3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a22d3e67b47bef8cf5e71d6cf53b765c3">hide</a> ($hide='toggle')</td></tr>
<tr class="memdesc:a22d3e67b47bef8cf5e71d6cf53b765c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hide/Show a repository.  <br /></td></tr>
<tr class="separator:a22d3e67b47bef8cf5e71d6cf53b765c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2df96d37bf0ff3003d3ff43949619af1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a2df96d37bf0ff3003d3ff43949619af1">import_external_file_contents</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $file, $maxbytes=0)</td></tr>
<tr class="memdesc:a2df96d37bf0ff3003d3ff43949619af1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Downloads the file from external repository and saves it in moodle filepool.  <br /></td></tr>
<tr class="separator:a2df96d37bf0ff3003d3ff43949619af1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab78c18f3f85f591834ba2192f01cc391"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d65/classrepository__coursefiles.html#ab78c18f3f85f591834ba2192f01cc391">is_visible</a> ()</td></tr>
<tr class="memdesc:ab78c18f3f85f591834ba2192f01cc391"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return is the instance is visible (is the type visible ? is the context enable ?)  <br /></td></tr>
<tr class="separator:ab78c18f3f85f591834ba2192f01cc391"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29789c098bbfa583f496b49992078fd3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a29789c098bbfa583f496b49992078fd3">logout</a> ()</td></tr>
<tr class="memdesc:a29789c098bbfa583f496b49992078fd3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Logout from repository instance By default, this function will return a login form.  <br /></td></tr>
<tr class="separator:a29789c098bbfa583f496b49992078fd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a329d4c782086c3e27eb563d419730c1f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a329d4c782086c3e27eb563d419730c1f">prepare_file</a> ($filename)</td></tr>
<tr class="memdesc:a329d4c782086c3e27eb563d419730c1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a unique file path in which to save the file.  <br /></td></tr>
<tr class="separator:a329d4c782086c3e27eb563d419730c1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ee6aaba02b6f3253790934fb6701a17"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a4ee6aaba02b6f3253790934fb6701a17">prepare_to_cache</a> ()</td></tr>
<tr class="memdesc:a4ee6aaba02b6f3253790934fb6701a17"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepares the repository to be cached.  <br /></td></tr>
<tr class="separator:a4ee6aaba02b6f3253790934fb6701a17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9dabe04b3cbbabf79072932099cae663"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d65/classrepository__coursefiles.html#a9dabe04b3cbbabf79072932099cae663">print_login</a> ()</td></tr>
<tr class="memdesc:a9dabe04b3cbbabf79072932099cae663"><td class="mdescLeft">&#160;</td><td class="mdescRight">coursefiles plugin doesn't require login, so list all files  <br /></td></tr>
<tr class="separator:a9dabe04b3cbbabf79072932099cae663"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98ae3bba92221a654c7ebbc269a657c6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a98ae3bba92221a654c7ebbc269a657c6">print_search</a> ()</td></tr>
<tr class="memdesc:a98ae3bba92221a654c7ebbc269a657c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Show the search screen, if required.  <br /></td></tr>
<tr class="separator:a98ae3bba92221a654c7ebbc269a657c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86c92f321849067a0543093e00edab34"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a86c92f321849067a0543093e00edab34">reference_file_selected</a> ($reference, $context, $component, $filearea, $itemid)</td></tr>
<tr class="memdesc:a86c92f321849067a0543093e00edab34"><td class="mdescLeft">&#160;</td><td class="mdescRight">reference_file_selected  <br /></td></tr>
<tr class="separator:a86c92f321849067a0543093e00edab34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bcd738dccf511164c48e32a54973e9b"><td class="memItemLeft" align="right" valign="top"><a id="a0bcd738dccf511164c48e32a54973e9b" name="a0bcd738dccf511164c48e32a54973e9b"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>remove_files</b> ()</td></tr>
<tr class="memdesc:a0bcd738dccf511164c48e32a54973e9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find all external files linked to this repository and delete them. <br /></td></tr>
<tr class="separator:a0bcd738dccf511164c48e32a54973e9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3d7f85659b90d92feab651e4d03e425"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#af3d7f85659b90d92feab651e4d03e425">search</a> ($search_text, $page=0)</td></tr>
<tr class="memdesc:af3d7f85659b90d92feab651e4d03e425"><td class="mdescLeft">&#160;</td><td class="mdescRight">Search files in repository When doing global search, $search_text will be used as keyword.  <br /></td></tr>
<tr class="separator:af3d7f85659b90d92feab651e4d03e425"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e11bdfb6dd5951733c2bdfe784be1e9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a1e11bdfb6dd5951733c2bdfe784be1e9">send_file</a> ($storedfile, $lifetime=null, $filter=0, $forcedownload=false, array $options=null)</td></tr>
<tr class="memdesc:a1e11bdfb6dd5951733c2bdfe784be1e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Repository method to serve the referenced file.  <br /></td></tr>
<tr class="separator:a1e11bdfb6dd5951733c2bdfe784be1e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57cb9f7fe57d3adbd7966f0616eb8f6e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a57cb9f7fe57d3adbd7966f0616eb8f6e">send_relative_file</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $mainfile, $relativepath)</td></tr>
<tr class="memdesc:a57cb9f7fe57d3adbd7966f0616eb8f6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a file relative to this file in the repository and sends it to the browser.  <br /></td></tr>
<tr class="separator:a57cb9f7fe57d3adbd7966f0616eb8f6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18c1dc209a00f5ed4acc405ae97fa4b4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a18c1dc209a00f5ed4acc405ae97fa4b4">set_option</a> ($options=array())</td></tr>
<tr class="memdesc:a18c1dc209a00f5ed4acc405ae97fa4b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save settings for repository instance $repo-&gt;set_option(array('api_key'=&gt;'f2188bde132', 'name'=&gt;'dongsheng'));.  <br /></td></tr>
<tr class="separator:a18c1dc209a00f5ed4acc405ae97fa4b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb6293adfb4df812acf19d8a45d0cc2f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#afb6293adfb4df812acf19d8a45d0cc2f">supported_filetypes</a> ()</td></tr>
<tr class="memdesc:afb6293adfb4df812acf19d8a45d0cc2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">What kind of files will be in this repository?  <br /></td></tr>
<tr class="separator:afb6293adfb4df812acf19d8a45d0cc2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bbd153f42faf547f4d6d5ccd37d1cef"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d65/classrepository__coursefiles.html#a9bbd153f42faf547f4d6d5ccd37d1cef">supported_returntypes</a> ()</td></tr>
<tr class="memdesc:a9bbd153f42faf547f4d6d5ccd37d1cef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tells how the file can be picked from this repository.  <br /></td></tr>
<tr class="separator:a9bbd153f42faf547f4d6d5ccd37d1cef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e8b1e4d4a80d8fa3d3e648d7b2d4365"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a4e8b1e4d4a80d8fa3d3e648d7b2d4365">supports_relative_file</a> ()</td></tr>
<tr class="memdesc:a4e8b1e4d4a80d8fa3d3e648d7b2d4365"><td class="mdescLeft">&#160;</td><td class="mdescRight">helper function to check if the repository supports send_relative_file.  <br /></td></tr>
<tr class="separator:a4e8b1e4d4a80d8fa3d3e648d7b2d4365"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a176c4c95cbd9c2b362fb90ea14f4ce13"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a176c4c95cbd9c2b362fb90ea14f4ce13">sync_reference</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $file)</td></tr>
<tr class="memdesc:a176c4c95cbd9c2b362fb90ea14f4ce13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs synchronisation of an external file if the previous one has expired.  <br /></td></tr>
<tr class="separator:a176c4c95cbd9c2b362fb90ea14f4ce13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c31d90e3f0aeea4114e0b40d897c88f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a9c31d90e3f0aeea4114e0b40d897c88f">uses_post_requests</a> ()</td></tr>
<tr class="memdesc:a9c31d90e3f0aeea4114e0b40d897c88f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to indicate if this repository uses post requests for uploading files.  <br /></td></tr>
<tr class="separator:a9c31d90e3f0aeea4114e0b40d897c88f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:aa510b38a18f603071d82a92367fa4941"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#aa510b38a18f603071d82a92367fa4941">antivir_scan_file</a> ($thefile, $filename, $deleteinfected)</td></tr>
<tr class="memdesc:aa510b38a18f603071d82a92367fa4941"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scan file, throws exception in case of infected file.  <br /></td></tr>
<tr class="separator:aa510b38a18f603071d82a92367fa4941"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a047a28eeadef9273f27b235dffc66d75"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a047a28eeadef9273f27b235dffc66d75">append_suffix</a> ($filename)</td></tr>
<tr class="memdesc:a047a28eeadef9273f27b235dffc66d75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Append a suffix to filename.  <br /></td></tr>
<tr class="separator:a047a28eeadef9273f27b235dffc66d75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12b9d739d5e59bcf033c0fafb9d520e3"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a12b9d739d5e59bcf033c0fafb9d520e3">build_source_field</a> ($source)</td></tr>
<tr class="memdesc:a12b9d739d5e59bcf033c0fafb9d520e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build draft file's source field.  <br /></td></tr>
<tr class="separator:a12b9d739d5e59bcf033c0fafb9d520e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af02fd297cf9df563892985784ead0eaf"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#af02fd297cf9df563892985784ead0eaf">build_tree</a> ($fileinfo, $<a class="el" href="../../dc/d71/group___imap___client.html#ga51cc7ed42bce580dcc33ed45d9cef0c9">search</a>, $dynamicmode, &amp;$list)</td></tr>
<tr class="memdesc:af02fd297cf9df563892985784ead0eaf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Builds a tree of files This function is then called recursively.  <br /></td></tr>
<tr class="separator:af02fd297cf9df563892985784ead0eaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf0b43fd502af6f78c2bfe7df17768cd"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#aaf0b43fd502af6f78c2bfe7df17768cd">create</a> ($type, $userid, $context, $params, $readonly=0)</td></tr>
<tr class="memdesc:aaf0b43fd502af6f78c2bfe7df17768cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an instance for this plug-in.  <br /></td></tr>
<tr class="separator:aaf0b43fd502af6f78c2bfe7df17768cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad9ec3c21dd39b5ccf7688ed83a86215"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#aad9ec3c21dd39b5ccf7688ed83a86215">delete_all_for_context</a> ($contextid, $downloadcontents=true)</td></tr>
<tr class="memdesc:aad9ec3c21dd39b5ccf7688ed83a86215"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete all the instances associated to a context.  <br /></td></tr>
<tr class="separator:aad9ec3c21dd39b5ccf7688ed83a86215"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b3ae779b055ee2cd06d27d60afe9279"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a7b3ae779b055ee2cd06d27d60afe9279">delete_tempfile_from_draft</a> ($draftitemid, $filepath, $filename)</td></tr>
<tr class="memdesc:a7b3ae779b055ee2cd06d27d60afe9279"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a temp file from draft area.  <br /></td></tr>
<tr class="separator:a7b3ae779b055ee2cd06d27d60afe9279"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2135266bc6cd2609bfbd88af23dfb4a5"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a2135266bc6cd2609bfbd88af23dfb4a5">display_instances_list</a> ($context, $typename=null)</td></tr>
<tr class="memdesc:a2135266bc6cd2609bfbd88af23dfb4a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Display a repository instance list (with edit/delete/create links)  <br /></td></tr>
<tr class="separator:a2135266bc6cd2609bfbd88af23dfb4a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f65d9983336c9c37564eb2af4b1bb36"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a2f65d9983336c9c37564eb2af4b1bb36">draftfile_exists</a> ($itemid, $filepath, $filename)</td></tr>
<tr class="memdesc:a2f65d9983336c9c37564eb2af4b1bb36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if file already exists in draft area.  <br /></td></tr>
<tr class="separator:a2f65d9983336c9c37564eb2af4b1bb36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26015bfb89beadb1437b06c96fc6508e"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a26015bfb89beadb1437b06c96fc6508e">get_editable_types</a> ($context=null)</td></tr>
<tr class="memdesc:a26015bfb89beadb1437b06c96fc6508e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return all types that you a user can create/edit and which are also visible Note: Mostly used in order to know if at least one editable type can be set.  <br /></td></tr>
<tr class="separator:a26015bfb89beadb1437b06c96fc6508e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afec4fd7101221f8de034d0c022de5e5b"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#afec4fd7101221f8de034d0c022de5e5b">get_instance</a> ($id)</td></tr>
<tr class="memdesc:afec4fd7101221f8de034d0c022de5e5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get single repository instance for administrative actions.  <br /></td></tr>
<tr class="separator:afec4fd7101221f8de034d0c022de5e5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89d9125de8d76feeb2d3a82883c04302"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a89d9125de8d76feeb2d3a82883c04302">get_instance_option_names</a> ()</td></tr>
<tr class="memdesc:a89d9125de8d76feeb2d3a82883c04302"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return names of the instance options.  <br /></td></tr>
<tr class="separator:a89d9125de8d76feeb2d3a82883c04302"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa5e5197d32a46cc8ea48f2f276899c7"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#aaa5e5197d32a46cc8ea48f2f276899c7">get_instances</a> ($args=array())</td></tr>
<tr class="memdesc:aaa5e5197d32a46cc8ea48f2f276899c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return repository instances.  <br /></td></tr>
<tr class="separator:aaa5e5197d32a46cc8ea48f2f276899c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfe43b6084390282b965aad7e9e68c62"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#abfe43b6084390282b965aad7e9e68c62">get_moodle_file</a> ($reference)</td></tr>
<tr class="memdesc:abfe43b6084390282b965aad7e9e68c62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses the moodle file reference and returns an instance of <a class="el" href="../../d0/d00/classstored__file.html">stored_file</a>.  <br /></td></tr>
<tr class="separator:abfe43b6084390282b965aad7e9e68c62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a154c72f87f8ed5bddb28907e1e8ac5c7"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a154c72f87f8ed5bddb28907e1e8ac5c7">get_repository_by_id</a> ($repositoryid, $context, $options=array())</td></tr>
<tr class="memdesc:a154c72f87f8ed5bddb28907e1e8ac5c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get repository instance using repository id.  <br /></td></tr>
<tr class="separator:a154c72f87f8ed5bddb28907e1e8ac5c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88933c3736c77bdd492eb66b9588d302"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a88933c3736c77bdd492eb66b9588d302">get_secret_key</a> ()</td></tr>
<tr class="memdesc:a88933c3736c77bdd492eb66b9588d302"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate a secret key to be used for passing sensitive information around.  <br /></td></tr>
<tr class="separator:a88933c3736c77bdd492eb66b9588d302"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a962e8fe96afc5d22e87183111c3e64a5"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a962e8fe96afc5d22e87183111c3e64a5">get_type_by_id</a> ($id)</td></tr>
<tr class="memdesc:a962e8fe96afc5d22e87183111c3e64a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the repository type by a given repository type id.  <br /></td></tr>
<tr class="separator:a962e8fe96afc5d22e87183111c3e64a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49ba203f7a557ddde0a256c416754ff9"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a49ba203f7a557ddde0a256c416754ff9">get_type_by_typename</a> ($typename)</td></tr>
<tr class="memdesc:a49ba203f7a557ddde0a256c416754ff9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a repository type object by a given type name.  <br /></td></tr>
<tr class="separator:a49ba203f7a557ddde0a256c416754ff9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8edd3281398ebd11475db36e92ade620"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d65/classrepository__coursefiles.html#a8edd3281398ebd11475db36e92ade620">get_type_option_names</a> ()</td></tr>
<tr class="memdesc:a8edd3281398ebd11475db36e92ade620"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return names of the general options.  <br /></td></tr>
<tr class="separator:a8edd3281398ebd11475db36e92ade620"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cc5dea62dca625e0e6d4f6e3a63af01"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a0cc5dea62dca625e0e6d4f6e3a63af01">get_types</a> ($visible=null)</td></tr>
<tr class="memdesc:a0cc5dea62dca625e0e6d4f6e3a63af01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return all repository types ordered by sortorder field first repository type in returnedarray[0], second repository type in returnedarray[1], ...  <br /></td></tr>
<tr class="separator:a0cc5dea62dca625e0e6d4f6e3a63af01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a368484a7d2a7dd101286633282d25c"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a0a368484a7d2a7dd101286633282d25c">get_unused_filename</a> ($itemid, $filepath, $filename)</td></tr>
<tr class="memdesc:a0a368484a7d2a7dd101286633282d25c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get an unused filename from the current draft area.  <br /></td></tr>
<tr class="separator:a0a368484a7d2a7dd101286633282d25c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cc47c9b2801e7838524d4943da91f22"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a9cc47c9b2801e7838524d4943da91f22">instance_config_form</a> ($mform)</td></tr>
<tr class="memdesc:a9cc47c9b2801e7838524d4943da91f22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Edit/Create Instance Settings <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> form.  <br /></td></tr>
<tr class="separator:a9cc47c9b2801e7838524d4943da91f22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13ddc57523d8e517bf297bf7d95473a6"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a13ddc57523d8e517bf297bf7d95473a6">instance_form_validation</a> ($mform, $data, $errors)</td></tr>
<tr class="memdesc:a13ddc57523d8e517bf297bf7d95473a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validate repository plugin instance form.  <br /></td></tr>
<tr class="separator:a13ddc57523d8e517bf297bf7d95473a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3519530c2c90dc247eb08ee87d779ae1"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a3519530c2c90dc247eb08ee87d779ae1">move_to_filepool</a> ($thefile, $record)</td></tr>
<tr class="memdesc:a3519530c2c90dc247eb08ee87d779ae1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move file from download folder to file pool using FILE API.  <br /></td></tr>
<tr class="separator:a3519530c2c90dc247eb08ee87d779ae1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44341e8f9d3955e3ba499ed81930b6dc"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a44341e8f9d3955e3ba499ed81930b6dc">overwrite_existing_draftfile</a> ($itemid, $filepath, $filename, $newfilepath, $newfilename)</td></tr>
<tr class="memdesc:a44341e8f9d3955e3ba499ed81930b6dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Overwrite an existing file.  <br /></td></tr>
<tr class="separator:a44341e8f9d3955e3ba499ed81930b6dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e53f416cfbe22d61d8933edf762077d"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a6e53f416cfbe22d61d8933edf762077d">plugin_init</a> ()</td></tr>
<tr class="memdesc:a6e53f416cfbe22d61d8933edf762077d"><td class="mdescLeft">&#160;</td><td class="mdescRight">function which is run when the type is created (moodle administrator add the plugin)  <br /></td></tr>
<tr class="separator:a6e53f416cfbe22d61d8933edf762077d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02830d42eb73cc4c0441e4327ae25193"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a02830d42eb73cc4c0441e4327ae25193">prepare_listing</a> ($listing)</td></tr>
<tr class="memdesc:a02830d42eb73cc4c0441e4327ae25193"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepares list of files before passing it to AJAX, makes sure data is in the correct format and stores formatted values.  <br /></td></tr>
<tr class="separator:a02830d42eb73cc4c0441e4327ae25193"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81e575cb60d16aee1ef4dbb892f400e4"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a81e575cb60d16aee1ef4dbb892f400e4">reset_caches</a> ()</td></tr>
<tr class="memdesc:a81e575cb60d16aee1ef4dbb892f400e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function <a class="el" href="../../dc/d1a/classrepository.html#a81e575cb60d16aee1ef4dbb892f400e4" title="Function repository::reset_caches() is deprecated, cache is handled by MUC now.">repository::reset_caches()</a> is deprecated, cache is handled by MUC now.  <br /></td></tr>
<tr class="separator:a81e575cb60d16aee1ef4dbb892f400e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a0c8dfa7a9d974d2367721b8a01a39d"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a5a0c8dfa7a9d974d2367721b8a01a39d">static_function</a> ($plugin, $function)</td></tr>
<tr class="memdesc:a5a0c8dfa7a9d974d2367721b8a01a39d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call a static function.  <br /></td></tr>
<tr class="separator:a5a0c8dfa7a9d974d2367721b8a01a39d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91ddea19dc0e264c77258280dbab29b7"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a91ddea19dc0e264c77258280dbab29b7">sync_external_file</a> ($file, $resetsynchistory=false)</td></tr>
<tr class="memdesc:a91ddea19dc0e264c77258280dbab29b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function <a class="el" href="../../dc/d1a/classrepository.html#a91ddea19dc0e264c77258280dbab29b7" title="Function repository::sync_external_file() is deprecated.">repository::sync_external_file()</a> is deprecated.  <br /></td></tr>
<tr class="separator:a91ddea19dc0e264c77258280dbab29b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a851b2a6b7c6c9e95492bedc6ac7df71b"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a851b2a6b7c6c9e95492bedc6ac7df71b">type_config_form</a> ($mform, $classname='<a class="el" href="../../dc/d1a/classrepository.html">repository</a>')</td></tr>
<tr class="memdesc:a851b2a6b7c6c9e95492bedc6ac7df71b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Edit/Create Admin Settings <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> form.  <br /></td></tr>
<tr class="separator:a851b2a6b7c6c9e95492bedc6ac7df71b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab56f34eaa82e19f5359cee1b4a9eeb88"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#ab56f34eaa82e19f5359cee1b4a9eeb88">type_form_validation</a> ($mform, $data, $errors)</td></tr>
<tr class="memdesc:ab56f34eaa82e19f5359cee1b4a9eeb88"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validate Admin Settings <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> form.  <br /></td></tr>
<tr class="separator:ab56f34eaa82e19f5359cee1b4a9eeb88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad78b6747897dffb5da0fd3febb58e614"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#ad78b6747897dffb5da0fd3febb58e614">update_draftfile</a> ($draftid, $filepath, $filename, $updatedata)</td></tr>
<tr class="memdesc:ad78b6747897dffb5da0fd3febb58e614"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates a file in draft filearea.  <br /></td></tr>
<tr class="separator:ad78b6747897dffb5da0fd3febb58e614"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a279900c35946c29d1098424005a31763"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a279900c35946c29d1098424005a31763">wake_from_cache</a> ($data)</td></tr>
<tr class="memdesc:a279900c35946c29d1098424005a31763"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restores the repository from cache.  <br /></td></tr>
<tr class="separator:a279900c35946c29d1098424005a31763"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:ab039597ecb1bce75133f66e75fe596f8"><td class="memItemLeft" align="right" valign="top"><a id="ab039597ecb1bce75133f66e75fe596f8" name="ab039597ecb1bce75133f66e75fe596f8"></a>
context&#160;</td><td class="memItemRight" valign="bottom"><b>$context</b></td></tr>
<tr class="memdesc:ab039597ecb1bce75133f66e75fe596f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">current context <br /></td></tr>
<tr class="separator:ab039597ecb1bce75133f66e75fe596f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b1f6fcca8d802fec9633d01296a310e"><td class="memItemLeft" align="right" valign="top"><a id="a7b1f6fcca8d802fec9633d01296a310e" name="a7b1f6fcca8d802fec9633d01296a310e"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>$disabled</b> = false</td></tr>
<tr class="memdesc:a7b1f6fcca8d802fec9633d01296a310e"><td class="mdescLeft">&#160;</td><td class="mdescRight">force disable repository instance <br /></td></tr>
<tr class="separator:a7b1f6fcca8d802fec9633d01296a310e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a646c3636edfd386c038540afbf5e9744"><td class="memItemLeft" align="right" valign="top"><a id="a646c3636edfd386c038540afbf5e9744" name="a646c3636edfd386c038540afbf5e9744"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>$id</b></td></tr>
<tr class="memdesc:a646c3636edfd386c038540afbf5e9744"><td class="mdescLeft">&#160;</td><td class="mdescRight">repository instance id <br /></td></tr>
<tr class="separator:a646c3636edfd386c038540afbf5e9744"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad904661f59092557e4f9b0973cf30049"><td class="memItemLeft" align="right" valign="top"><a id="ad904661f59092557e4f9b0973cf30049" name="ad904661f59092557e4f9b0973cf30049"></a>
stdClass&#160;</td><td class="memItemRight" valign="bottom"><b>$instance</b></td></tr>
<tr class="memdesc:ad904661f59092557e4f9b0973cf30049"><td class="mdescLeft">&#160;</td><td class="mdescRight">repository instance database record <br /></td></tr>
<tr class="separator:ad904661f59092557e4f9b0973cf30049"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1213bc126f448afbd915a1ab013767d"><td class="memItemLeft" align="right" valign="top"><a id="af1213bc126f448afbd915a1ab013767d" name="af1213bc126f448afbd915a1ab013767d"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>$name</b></td></tr>
<tr class="memdesc:af1213bc126f448afbd915a1ab013767d"><td class="mdescLeft">&#160;</td><td class="mdescRight">instance name. <br /></td></tr>
<tr class="separator:af1213bc126f448afbd915a1ab013767d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef7dd9f65ba2e1eca17e07c564ce1065"><td class="memItemLeft" align="right" valign="top"><a id="aef7dd9f65ba2e1eca17e07c564ce1065" name="aef7dd9f65ba2e1eca17e07c564ce1065"></a>
array&#160;</td><td class="memItemRight" valign="bottom"><b>$options</b></td></tr>
<tr class="memdesc:aef7dd9f65ba2e1eca17e07c564ce1065"><td class="mdescLeft">&#160;</td><td class="mdescRight">repository options <br /></td></tr>
<tr class="separator:aef7dd9f65ba2e1eca17e07c564ce1065"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3abcd58a963c43a09460afec0ee4fb34"><td class="memItemLeft" align="right" valign="top"><a id="a3abcd58a963c43a09460afec0ee4fb34" name="a3abcd58a963c43a09460afec0ee4fb34"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>$readonly</b></td></tr>
<tr class="memdesc:a3abcd58a963c43a09460afec0ee4fb34"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether or not the repository instance is editable. <br /></td></tr>
<tr class="separator:a3abcd58a963c43a09460afec0ee4fb34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a39503970c89ebc8a73fb453f60e3aa"><td class="memItemLeft" align="right" valign="top"><a id="a4a39503970c89ebc8a73fb453f60e3aa" name="a4a39503970c89ebc8a73fb453f60e3aa"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>$returntypes</b></td></tr>
<tr class="memdesc:a4a39503970c89ebc8a73fb453f60e3aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">return types <br /></td></tr>
<tr class="separator:a4a39503970c89ebc8a73fb453f60e3aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22298fe77ea5db7b51ab0973d6f9e68d"><td class="memItemLeft" align="right" valign="top"><a id="a22298fe77ea5db7b51ab0973d6f9e68d" name="a22298fe77ea5db7b51ab0973d6f9e68d"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>$super_called</b></td></tr>
<tr class="memdesc:a22298fe77ea5db7b51ab0973d6f9e68d"><td class="mdescLeft">&#160;</td><td class="mdescRight">true if the super construct is called, otherwise false. <br /></td></tr>
<tr class="separator:a22298fe77ea5db7b51ab0973d6f9e68d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f33f46934696d767375531fe38b6976"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a8f33f46934696d767375531fe38b6976">GETFILE_TIMEOUT</a> = 30</td></tr>
<tr class="memdesc:a8f33f46934696d767375531fe38b6976"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timeout in seconds for downloading the external file into moodle.  <br /></td></tr>
<tr class="separator:a8f33f46934696d767375531fe38b6976"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf0098b6cc875dc363cc3c6e0e9b77c5"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#abf0098b6cc875dc363cc3c6e0e9b77c5">SYNCFILE_TIMEOUT</a> = 1</td></tr>
<tr class="memdesc:abf0098b6cc875dc363cc3c6e0e9b77c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timeout in seconds for syncronising the external file size.  <br /></td></tr>
<tr class="separator:abf0098b6cc875dc363cc3c6e0e9b77c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e149b125af515563ee59b7a390658a4"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a7e149b125af515563ee59b7a390658a4">SYNCIMAGE_TIMEOUT</a> = 3</td></tr>
<tr class="memdesc:a7e149b125af515563ee59b7a390658a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timeout in seconds for downloading an image file from external repository during syncronisation.  <br /></td></tr>
<tr class="separator:a7e149b125af515563ee59b7a390658a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-static-methods" name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr class="memitem:a7f8be770ab9805505726be1f08539970"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#a7f8be770ab9805505726be1f08539970">prepare_breadcrumb</a> ($breadcrumb)</td></tr>
<tr class="memdesc:a7f8be770ab9805505726be1f08539970"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepare the breadcrumb.  <br /></td></tr>
<tr class="separator:a7f8be770ab9805505726be1f08539970"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae75967d20db3a0dff0f34bc95c9bcf49"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#ae75967d20db3a0dff0f34bc95c9bcf49">prepare_list</a> ($list)</td></tr>
<tr class="memdesc:ae75967d20db3a0dff0f34bc95c9bcf49"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepare the file/folder listing.  <br /></td></tr>
<tr class="separator:ae75967d20db3a0dff0f34bc95c9bcf49"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:ac7b2efb40532349185ead7d739896b29"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d1a/classrepository.html#ac7b2efb40532349185ead7d739896b29">$typename</a></td></tr>
<tr class="memdesc:ac7b2efb40532349185ead7d739896b29"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of repository (webdav, <a class="el" href="../../d9/d2a/classgoogle__docs.html" title="Class for manipulating google documents through the google data api.">google_docs</a>, dropbox, ...).  <br /></td></tr>
<tr class="separator:ac7b2efb40532349185ead7d739896b29"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="../../d8/d65/classrepository__coursefiles.html" title="repository_coursefiles class is used to browse course files">repository_coursefiles</a> class is used to browse course files </p>
<dl class="section since"><dt>Since</dt><dd><a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 2.0</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>2010 Dongsheng Cai <a href="http://dongsheng.org" class="el externalurl"></a> </dd></dl>
<dl class="section user"><dt>License</dt><dd><a href="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later </dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="aa510b38a18f603071d82a92367fa4941" name="aa510b38a18f603071d82a92367fa4941"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa510b38a18f603071d82a92367fa4941">&#9670;&#160;</a></span>antivir_scan_file()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static repository::antivir_scan_file </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$thefile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$deleteinfected</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Scan file, throws exception in case of infected file. </p>
<p>Please note that the scanning engine must be able to access the file, permissions of the file are not modified here!</p>
<dl class="deprecated"><dt><b><a class="el" href="../../da/d58/deprecated.html#_deprecated001236">Deprecated:</a></b></dt><dd>since <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 3.0 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$thefile</td><td></td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$filename</td><td>name of the file </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$deleteinfected</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a047a28eeadef9273f27b235dffc66d75" name="a047a28eeadef9273f27b235dffc66d75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a047a28eeadef9273f27b235dffc66d75">&#9670;&#160;</a></span>append_suffix()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static repository::append_suffix </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Append a suffix to filename. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$filename</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="deprecated"><dt><b><a class="el" href="../../da/d58/deprecated.html#_deprecated001235">Deprecated:</a></b></dt><dd>since 2.5 </dd></dl>

</div>
</div>
<a id="a12b9d739d5e59bcf033c0fafb9d520e3" name="a12b9d739d5e59bcf033c0fafb9d520e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12b9d739d5e59bcf033c0fafb9d520e3">&#9670;&#160;</a></span>build_source_field()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static repository::build_source_field </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$source</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Build draft file's source field. </p>
<p><a class="el" href="../../d5/d09/group__core__files.html#ga503ed81e4a26decc25ac86221414b8d9">file_restore_source_field_from_draft_file()</a> XXX: This is a hack for file manager (<a href="https://tracker.moodle.org/browse/MDL-28666" class="el">MDL-28666</a>) For newly created draft files we have to construct source filed in php serialized data format. <a class="el" href="../../d1/d31/class_file.html" title="Caches data to the filesystem.">File</a> manager needs to know the original file information before copying to draft area, so we append these information in mdl_files.source field</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$source</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>serialised source field </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af02fd297cf9df563892985784ead0eaf" name="af02fd297cf9df563892985784ead0eaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af02fd297cf9df563892985784ead0eaf">&#9670;&#160;</a></span>build_tree()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static repository::build_tree </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$fileinfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$search</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$dynamicmode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;&#160;</td>
          <td class="paramname"><em>$list</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Builds a tree of files This function is then called recursively. </p>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000360">Todo:</a></b></dt><dd>take $search into account, and respect a threshold for dynamic loading </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../de/dff/classfile__info.html" title="Base class for things in the tree navigated by file_browser.">file_info</a></td><td class="paramname">$fileinfo</td><td>an object returned by <a class="el" href="../../d3/d38/classfile__browser.html#a697178efb2ba61c157da8987b6607922" title="Looks up file_info instance.">file_browser::get_file_info()</a> </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$search</td><td>searched string </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$dynamicmode</td><td>no recursive call is done when in dynamic mode </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$list</td><td>the array containing the files under the passed $fileinfo </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td>the number of files found </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="accb70ecaee2d1a37d8203183a2640e3e" name="accb70ecaee2d1a37d8203183a2640e3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#accb70ecaee2d1a37d8203183a2640e3e">&#9670;&#160;</a></span>cache_file_by_reference()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repository::cache_file_by_reference </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$reference</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$storedfile</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="../../dc/d67/class_cache.html" title="Used to create cache objects.">Cache</a> file from external repository by reference <a class="el" href="../../dc/d1a/classrepository.html#ac88b0c625ecb49e4c545ae5c49c93bf2">repository::get_file_reference()</a> <a class="el" href="../../dc/d1a/classrepository.html#a4404403c6d681ff8ed1b5f7297e92193">repository::get_file()</a> Invoked at MOODLE/repository/repository_ajax.php. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$reference</td><td>this reference is generated by <a class="el" href="../../dc/d1a/classrepository.html#ac88b0c625ecb49e4c545ae5c49c93bf2" title="Prepare file reference information.">repository::get_file_reference()</a> </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$storedfile</td><td>created file reference </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../de/df2/classrepository__dropbox.html#a500b3196aa9268fe1908e240462f0bcc">repository_dropbox</a>.</p>

</div>
</div>
<a id="a0566aa0689f2a21ca4943c11f6d04ef7" name="a0566aa0689f2a21ca4943c11f6d04ef7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0566aa0689f2a21ca4943c11f6d04ef7">&#9670;&#160;</a></span>callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repository::callback </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For oauth like external authentication, when external repository direct user back to moodle, this function will be called to set up token and token_secret. </p>

<p>Reimplemented in <a class="el" href="../../de/df2/classrepository__dropbox.html#ae0df3bd4deddaec47cab8535f86212b7">repository_dropbox</a>, <a class="el" href="../../df/d6c/classrepository__flickr.html#a15aa8a27b8082734d9beed96711065d7">repository_flickr</a>, <a class="el" href="../../dc/dd4/classrepository__nextcloud.html#a96e68b54ff1be553999a1139e0f5fdc4">repository_nextcloud</a>, and <a class="el" href="../../d8/d93/classrepository__onedrive.html#a4a9170bb30454a112ecce757e4ea20e8">repository_onedrive</a>.</p>

</div>
</div>
<a id="afb3110f130235e0202a60f51569029c8" name="afb3110f130235e0202a60f51569029c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb3110f130235e0202a60f51569029c8">&#9670;&#160;</a></span>can_be_edited_by_user()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repository::can_be_edited_by_user </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Can the instance be edited by the current user? </p>
<p>The property $readonly must not be used within this method because it only controls if the options from self::get_instance_option_names() can be edited.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>true if the user can edit the instance. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd><a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 2.5 </dd></dl>

</div>
</div>
<a id="aa8550e2bd919406e683c4597de77b982" name="aa8550e2bd919406e683c4597de77b982"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8550e2bd919406e683c4597de77b982">&#9670;&#160;</a></span>check_capability()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repository::check_capability </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if user has a capability to view the current repository. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>true when the user can, otherwise throws an exception. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d0/df4/classrepository__exception.html" title="Exception class for repository api.">repository_exception</a></td><td>when the user does not meet the requirements. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af185c41fac9fe95ce19e924ae4c60ca7" name="af185c41fac9fe95ce19e924ae4c60ca7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af185c41fac9fe95ce19e924ae4c60ca7">&#9670;&#160;</a></span>check_login()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repository::check_login </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>To check whether the user is logged in. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../de/df2/classrepository__dropbox.html#acaf0483bc5feeee8fe41ea6a88db70c9">repository_dropbox</a>, <a class="el" href="../../d2/d5a/classrepository__filesystem.html#a96dbde8ad2e3ebe586113b768bbb2cfc">repository_filesystem</a>, <a class="el" href="../../df/d6c/classrepository__flickr.html#a2eb30c0ea798aa7028ef40a5bcb0e0aa">repository_flickr</a>, <a class="el" href="../../d3/de0/classrepository__flickr__public.html#a7a904aae3acbb9715f888969c25cd860">repository_flickr_public</a>, <a class="el" href="../../de/d1a/classrepository__merlot.html#a5395d6807f65cef50a911dd052915992">repository_merlot</a>, <a class="el" href="../../dc/dd4/classrepository__nextcloud.html#ac236358bbaad87ce0e5d7ea7934279b3">repository_nextcloud</a>, <a class="el" href="../../d8/d93/classrepository__onedrive.html#a644cf18dd7878b5e2a459186a836fd76">repository_onedrive</a>, <a class="el" href="../../d6/d01/classrepository__s3.html#ac93ba1c5c02aa4fec40c92c79241fcb9">repository_s3</a>, <a class="el" href="../../d8/d84/classrepository__url.html#adcb9664ac623adda963f334f8e0b918f">repository_url</a>, <a class="el" href="../../d6/df3/classrepository__webdav.html#a262f22ac272100eac4a356c087e84402">repository_webdav</a>, <a class="el" href="../../dc/d8b/classrepository__wikimedia.html#a4b018309c61d85e5b9b3f651830fda80">repository_wikimedia</a>, and <a class="el" href="../../d0/d9b/classrepository__youtube.html#ae63729a646b642df5851cea17380f42e">repository_youtube</a>.</p>

</div>
</div>
<a id="a1d523a5cb09b3f28cfc021b74af08104" name="a1d523a5cb09b3f28cfc021b74af08104"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d523a5cb09b3f28cfc021b74af08104">&#9670;&#160;</a></span>contains_private_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">repository_coursefiles::contains_private_data </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Is this repository accessing private data? </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../dc/d1a/classrepository.html#a6db5aa094b9a349ac04c002597725e9c">repository</a>.</p>

</div>
</div>
<a id="a2d5320d4413137d25bab6b9ada4eb888" name="a2d5320d4413137d25bab6b9ada4eb888"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d5320d4413137d25bab6b9ada4eb888">&#9670;&#160;</a></span>copy_to_area()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repository::copy_to_area </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$filerecord</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$maxbytes</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$areamaxbytes</em> = <code><a class="el" href="../../d5/d09/group__core__files.html#ga24927741ed9b853e263c0fcf567d58e1">FILE_AREA_MAX_BYTES_UNLIMITED</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function is used to copy a moodle file to draft area. </p>
<p>It DOES NOT check if the user is allowed to access this file because the actual file can be located in the area where user does not have access to but there is an alias to this file in the area where user CAN access it. <a class="el" href="../../">file_is_accessible</a> should be called for alias location before calling this function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$source</td><td>The metainfo of file, it is base64 encoded php serialized data </td></tr>
    <tr><td class="paramtype">stdClass&#160;|&#160;array</td><td class="paramname">$filerecord</td><td>contains itemid, filepath, filename and optionally other attributes of the new file </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$maxbytes</td><td>maximum allowed size of file, -1 if unlimited. If size of file exceeds the limit, the <a class="el" href="../../d9/daf/classfile__exception.html">file_exception</a> is thrown. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$areamaxbytes</td><td>the maximum size of the area. A <a class="el" href="../../d9/daf/classfile__exception.html">file_exception</a> is thrown if the new file will reach the limit. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>The information about the created file </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aaf0b43fd502af6f78c2bfe7df17768cd" name="aaf0b43fd502af6f78c2bfe7df17768cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf0b43fd502af6f78c2bfe7df17768cd">&#9670;&#160;</a></span>create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static repository::create </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$userid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$readonly</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create an instance for this plug-in. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$type</td><td>the type of the repository </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td>the user id </td></tr>
    <tr><td class="paramtype">stdClass</td><td class="paramname">$context</td><td>the context </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$params</td><td>the options for this instance </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$readonly</td><td>whether to create it readonly or not (defaults to not) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">mixed</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../d2/d5a/classrepository__filesystem.html#a97407dfd31a3cdcd27a5ccd5f306ee71">repository_filesystem</a>, and <a class="el" href="../../dc/dd4/classrepository__nextcloud.html#a789bab5e1bab19c0e6e3d58d3620a00c">repository_nextcloud</a>.</p>

</div>
</div>
<a id="a593ed480825d47c6faa7406d7d9e6db9" name="a593ed480825d47c6faa7406d7d9e6db9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a593ed480825d47c6faa7406d7d9e6db9">&#9670;&#160;</a></span>cron()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repository::cron </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Defines operations that happen occasionally on cron. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../de/df2/classrepository__dropbox.html#a968fd47e9bf8928525566c39ef9d33dc">repository_dropbox</a>.</p>

</div>
</div>
<a id="abe000c32f5304386d22a0c84be78ea84" name="abe000c32f5304386d22a0c84be78ea84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe000c32f5304386d22a0c84be78ea84">&#9670;&#160;</a></span>default_returntype()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repository::default_returntype </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tells how the file can be picked from this repository. </p>
<p>Maximum value is FILE_INTERNAL | FILE_EXTERNAL | FILE_REFERENCE</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../d0/d5b/classrepository__contentbank.html#ab48cfbbbfba6f3c8f9c110b86a5cf39a">repository_contentbank</a>, <a class="el" href="../../dc/dd4/classrepository__nextcloud.html#a9d41d701ff4453dc0fe209ac46f80a6b">repository_nextcloud</a>, and <a class="el" href="../../d8/d93/classrepository__onedrive.html#a80d9c76a7745a00464784ed1db0beeaa">repository_onedrive</a>.</p>

</div>
</div>
<a id="a90b1a2a32fd0c18bb4e813a2e1e3df74" name="a90b1a2a32fd0c18bb4e813a2e1e3df74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90b1a2a32fd0c18bb4e813a2e1e3df74">&#9670;&#160;</a></span>delete()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repository::delete </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$downloadcontents</em> = <code>false</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>delete a repository instance </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">bool</td><td class="paramname">$downloadcontents</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aad9ec3c21dd39b5ccf7688ed83a86215" name="aad9ec3c21dd39b5ccf7688ed83a86215"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad9ec3c21dd39b5ccf7688ed83a86215">&#9670;&#160;</a></span>delete_all_for_context()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static repository::delete_all_for_context </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$contextid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$downloadcontents</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">final</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Delete all the instances associated to a context. </p>
<p>This method is intended to be a callback when deleting a course or a user to delete all the instances associated to their context. The usual way to delete a single instance is to use <a class="el" href="../../">self::delete()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$contextid</td><td>context ID. </td></tr>
    <tr><td class="paramtype">boolean</td><td class="paramname">$downloadcontents</td><td>true to convert references to hard copies. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7b3ae779b055ee2cd06d27d60afe9279" name="a7b3ae779b055ee2cd06d27d60afe9279"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b3ae779b055ee2cd06d27d60afe9279">&#9670;&#160;</a></span>delete_tempfile_from_draft()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static repository::delete_tempfile_from_draft </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$draftitemid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$filepath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Delete a temp file from draft area. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$draftitemid</td><td></td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$filepath</td><td></td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$filename</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2135266bc6cd2609bfbd88af23dfb4a5" name="a2135266bc6cd2609bfbd88af23dfb4a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2135266bc6cd2609bfbd88af23dfb4a5">&#9670;&#160;</a></span>display_instances_list()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static repository::display_instances_list </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$typename</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Display a repository instance list (with edit/delete/create links) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$context</td><td>the context for which we display the instance </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$typename</td><td>if set, we display only one type of instance </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2f65d9983336c9c37564eb2af4b1bb36" name="a2f65d9983336c9c37564eb2af4b1bb36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f65d9983336c9c37564eb2af4b1bb36">&#9670;&#160;</a></span>draftfile_exists()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static repository::draftfile_exists </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$itemid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$filepath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if file already exists in draft area. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$itemid</td><td>of the draft area. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$filepath</td><td>path to the file. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$filename</td><td>file name. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aeb86193b8932bb3e5027264239324c94" name="aeb86193b8932bb3e5027264239324c94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb86193b8932bb3e5027264239324c94">&#9670;&#160;</a></span>file_is_accessible()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repository::file_is_accessible </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$source</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Repository method to make sure that user can access particular file. </p>
<p>This is checked when user tries to pick the file from repository to deal with potential parameter substitutions is request</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$source</td><td>source of the file, returned by repository as 'source' and received back from user (not cleaned) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>whether the file is accessible by current user </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../d0/d5b/classrepository__contentbank.html#afa4f34b6dd5955ee3c89a907de49851f">repository_contentbank</a>, and <a class="el" href="../../d8/d08/classrepository__recent.html#a1ef698c073af29d7a1f468ab46bd8fe4">repository_recent</a>.</p>

</div>
</div>
<a id="a892126d529325978597716d8e80e4e21" name="a892126d529325978597716d8e80e4e21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a892126d529325978597716d8e80e4e21">&#9670;&#160;</a></span>filter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repository::filter </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Filter file listing to display specific types. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$value</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a26015bfb89beadb1437b06c96fc6508e" name="a26015bfb89beadb1437b06c96fc6508e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26015bfb89beadb1437b06c96fc6508e">&#9670;&#160;</a></span>get_editable_types()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static repository::get_editable_types </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$context</em> = <code>null</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return all types that you a user can create/edit and which are also visible Note: Mostly used in order to know if at least one editable type can be set. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$context</td><td>the context for which we want the editable types </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>types </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4404403c6d681ff8ed1b5f7297e92193" name="a4404403c6d681ff8ed1b5f7297e92193"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4404403c6d681ff8ed1b5f7297e92193">&#9670;&#160;</a></span>get_file()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repository::get_file </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$url</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$filename</em> = <code>''</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Downloads a file from external repository and saves it in temp dir. </p>
<p>Function get_file() must be implemented by repositories that support returntypes FILE_INTERNAL or FILE_REFERENCE. It is invoked to pick up the file and copy it to moodle. This function is not called for moodle repositories, the function <a class="el" href="../../dc/d1a/classrepository.html#a2d5320d4413137d25bab6b9ada4eb888">repository::copy_to_area()</a> is used instead.</p>
<p>This function can be overridden by subclass if the files.reference field contains not just URL or if request should be done differently.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../da/d9f/classcurl.html">curl</a> </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d9/daf/classfile__exception.html">file_exception</a></td><td>when error occured</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$url</td><td>the content of files.reference field, in this implementaion it is asssumed that it contains the string with URL of the file </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$filename</td><td>filename (without path) to save the downloaded file in the temporary directory, if omitted or file already exists the new filename will be generated </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>with elements: path: internal location of the file url: URL to the source (from parameters) </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../d2/d5a/classrepository__filesystem.html#a4537c01b69f0d75d8282c7831c2160a7">repository_filesystem</a>, <a class="el" href="../../d6/d01/classrepository__s3.html#aab492ddbdfbf96353fd7c67697c1e1ed">repository_s3</a>, <a class="el" href="../../df/d6c/classrepository__flickr.html#a5462f18d5451e2a349682f090c7aadd8">repository_flickr</a>, <a class="el" href="../../d3/de0/classrepository__flickr__public.html#aaf53f61d82fbcd12f628299073384ffc">repository_flickr_public</a>, <a class="el" href="../../db/d45/classrepository__equella.html#a331813cf989561336b35a0a8509b7bce">repository_equella</a>, <a class="el" href="../../d8/d93/classrepository__onedrive.html#a8df69e0078a8d764262011ec0b1925b3">repository_onedrive</a>, <a class="el" href="../../de/df2/classrepository__dropbox.html#a35d314a0575dba4358d086e870aeeb17">repository_dropbox</a>, <a class="el" href="../../dc/dd4/classrepository__nextcloud.html#a53547fe4c906ef9759b8445fb0e8869d">repository_nextcloud</a>, and <a class="el" href="../../d6/df3/classrepository__webdav.html#ab85191e4564a05df28cece1885f6d635">repository_webdav</a>.</p>

</div>
</div>
<a id="ac88b0c625ecb49e4c545ae5c49c93bf2" name="ac88b0c625ecb49e4c545ae5c49c93bf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac88b0c625ecb49e4c545ae5c49c93bf2">&#9670;&#160;</a></span>get_file_reference()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repository::get_file_reference </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$source</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prepare file reference information. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$source</td><td>source of the file, returned by repository as 'source' and received back from user (not cleaned) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>file reference, ready to be stored </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../de/df2/classrepository__dropbox.html#adf12835408a5547748cfbc1a20de7cf2">repository_dropbox</a>, <a class="el" href="../../db/d45/classrepository__equella.html#ae5c1d803143c98cc69fd3b453660b5f2">repository_equella</a>, <a class="el" href="../../dc/dd4/classrepository__nextcloud.html#ad6f19732416a3ac648653973c1300519">repository_nextcloud</a>, and <a class="el" href="../../d8/d93/classrepository__onedrive.html#a2c6a8ac9fc9fedac20dcef140a12c238">repository_onedrive</a>.</p>

</div>
</div>
<a id="a2940a7623b342d66132f1c6ec2af0e9f" name="a2940a7623b342d66132f1c6ec2af0e9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2940a7623b342d66132f1c6ec2af0e9f">&#9670;&#160;</a></span>get_file_size()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repository::get_file_size </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$source</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return size of a file in bytes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$source</td><td>encoded and serialized data of file </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td>file size in bytes </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5c2386d80e303d5259b1a24ae2b9924c" name="a5c2386d80e303d5259b1a24ae2b9924c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c2386d80e303d5259b1a24ae2b9924c">&#9670;&#160;</a></span>get_file_source_info()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repository::get_file_source_info </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$source</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the source information. </p>
<p>The result of the function is stored in files.source field. It may be analysed when the source file is lost or repository may use it to display human-readable location of reference original.</p>
<p>This method is called when file is picked for the first time only. When file (either copy or a reference) is already in moodle and it is being picked again to another file area (also as a copy or as a reference), the value of files.source is copied.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$source</td><td>source of the file, returned by repository as 'source' and received back from user (not cleaned) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string|null</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../d2/d5a/classrepository__filesystem.html#ad84374e462e8627303f88d30d8cca78f">repository_filesystem</a>, <a class="el" href="../../d6/d01/classrepository__s3.html#a4798f3204ee6cd361cf119355c03f6a4">repository_s3</a>, <a class="el" href="../../df/d6c/classrepository__flickr.html#a45aa8e3026de1d77f4d38b98dc7d75bd">repository_flickr</a>, <a class="el" href="../../d3/de0/classrepository__flickr__public.html#a473cce362588df21c1c4fcd6991c33dc">repository_flickr_public</a>, <a class="el" href="../../de/df2/classrepository__dropbox.html#a62e4be8f20041595a75e58d5a28dbf02">repository_dropbox</a>, <a class="el" href="../../db/d45/classrepository__equella.html#ac3f3d3047a2d9f543bbd77574c81e7ec">repository_equella</a>, <a class="el" href="../../d8/d84/classrepository__url.html#ad868473ef7f7e62f025cf4bc0b27c33d">repository_url</a>, and <a class="el" href="../../dc/d8b/classrepository__wikimedia.html#a4144748af697c1302600c67d840864eb">repository_wikimedia</a>.</p>

</div>
</div>
<a id="afec4fd7101221f8de034d0c022de5e5b" name="afec4fd7101221f8de034d0c022de5e5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afec4fd7101221f8de034d0c022de5e5b">&#9670;&#160;</a></span>get_instance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static repository::get_instance </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get single repository instance for administrative actions. </p>
<p>Do not use this function to access repository contents, because it does not set the current context</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../dc/d1a/classrepository.html#a154c72f87f8ed5bddb28907e1e8ac5c7" title="Get repository instance using repository id.">repository::get_repository_by_id()</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">integer</td><td class="paramname">$id</td><td>repository instance id </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">repository</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a89d9125de8d76feeb2d3a82883c04302" name="a89d9125de8d76feeb2d3a82883c04302"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89d9125de8d76feeb2d3a82883c04302">&#9670;&#160;</a></span>get_instance_option_names()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static repository::get_instance_option_names </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return names of the instance options. </p>
<p>By default: no instance option name</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../db/d45/classrepository__equella.html#a89ff194e9f82d74a64b1398adfc5b5c5">repository_equella</a>, <a class="el" href="../../d2/d5a/classrepository__filesystem.html#af70b7c9e73b2579ffdf53294578d7142">repository_filesystem</a>, <a class="el" href="../../d3/de0/classrepository__flickr__public.html#a9cfbcfab6942a89975a832977db23cb5">repository_flickr_public</a>, <a class="el" href="../../dc/dd4/classrepository__nextcloud.html#aba4b966fc70bd1e258a70a4f36131ff5">repository_nextcloud</a>, and <a class="el" href="../../d6/df3/classrepository__webdav.html#abf18afcda313294c3fc3c0a3fcee7d5d">repository_webdav</a>.</p>

</div>
</div>
<a id="aaa5e5197d32a46cc8ea48f2f276899c7" name="aaa5e5197d32a46cc8ea48f2f276899c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa5e5197d32a46cc8ea48f2f276899c7">&#9670;&#160;</a></span>get_instances()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static repository::get_instances </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$args</em> = <code>array()</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return repository instances. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$args</td><td>Array containing the following keys: currentcontext : instance of context (default system context) context : array of instances of context (default empty array) onlyvisible : bool (default true) type : string return instances of this type only accepted_types : string|array return instances that contain files of those types (*, web_image, .pdf, ...) return_types : int combination of FILE_INTERNAL &amp; FILE_EXTERNAL &amp; FILE_REFERENCE &amp; FILE_CONTROLLED_LINK. 0 means every type. The default is FILE_INTERNAL | FILE_EXTERNAL. userid : int if specified, instances belonging to other users will not be returned</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>repository instances </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9f68856571775f3f85049c035e5349a8" name="a9f68856571775f3f85049c035e5349a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f68856571775f3f85049c035e5349a8">&#9670;&#160;</a></span>get_link()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">repository_coursefiles::get_link </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$url</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return file URL, for most plugins, the parameter is the original url, but some plugins use a file id, so we need this function to convert file id to original url. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$url</td><td>the url of file </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../dc/d1a/classrepository.html#accb73f5733f2cbf4d722edc5425da259">repository</a>.</p>

</div>
</div>
<a id="a723d59974f7888db00bbf6c01aaf41c8" name="a723d59974f7888db00bbf6c01aaf41c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a723d59974f7888db00bbf6c01aaf41c8">&#9670;&#160;</a></span>get_listing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">repository_coursefiles::get_listing </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$encodedpath</em> = <code>''</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$page</em> = <code>''</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get file listing. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$encodedpath</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">mixed</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../dc/d1a/classrepository.html#a52834261685e86208656e11f1d489e3f">repository</a>.</p>

</div>
</div>
<a id="a46212d7c6d121764b5e5728c508dc514" name="a46212d7c6d121764b5e5728c508dc514"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46212d7c6d121764b5e5728c508dc514">&#9670;&#160;</a></span>get_meta()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repository::get_meta </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Provide repository instance information for Ajax. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abfe43b6084390282b965aad7e9e68c62" name="abfe43b6084390282b965aad7e9e68c62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfe43b6084390282b965aad7e9e68c62">&#9670;&#160;</a></span>get_moodle_file()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static repository::get_moodle_file </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$reference</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Parses the moodle file reference and returns an instance of <a class="el" href="../../d0/d00/classstored__file.html">stored_file</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$reference</td><td>reference to the moodle internal file as retruned by <a class="el" href="../../dc/d1a/classrepository.html#ac88b0c625ecb49e4c545ae5c49c93bf2">repository::get_file_reference()</a> or <a class="el" href="../../">file_storage::pack_reference()</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stored_file|null</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a09eb286908b4561c20594e16dcf2c989" name="a09eb286908b4561c20594e16dcf2c989"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09eb286908b4561c20594e16dcf2c989">&#9670;&#160;</a></span>get_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">repository_coursefiles::get_name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the repository name. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../dc/d1a/classrepository.html#af846d6f590806c81a7770fb5c53b1827">repository</a>.</p>

</div>
</div>
<a id="a288cc7df716c6cb3f415f11fa185e92a" name="a288cc7df716c6cb3f415f11fa185e92a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a288cc7df716c6cb3f415f11fa185e92a">&#9670;&#160;</a></span>get_option()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repository::get_option </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$config</em> = <code>''</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get settings for repository instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$config</td><td>a specific option to get. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">mixed</td><td>returns an array of options. If $config is not empty, then it returns that option, or null if the option does not exist. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../de/df2/classrepository__dropbox.html#a3ecfcfb9cbf0f94903ae978f2e58dec6">repository_dropbox</a>, <a class="el" href="../../df/d6c/classrepository__flickr.html#ae68a59175f2e0365a122b37ab9ec39a2">repository_flickr</a>, <a class="el" href="../../d3/de0/classrepository__flickr__public.html#a5ae60af57472c6eacca68fcbbb2e859a">repository_flickr_public</a>, and <a class="el" href="../../d0/d9b/classrepository__youtube.html#afb3adaca5cf49cc15f4559187331b09d">repository_youtube</a>.</p>

</div>
</div>
<a id="a3e8f4ec26c1d7547b98b6c9988fd3cac" name="a3e8f4ec26c1d7547b98b6c9988fd3cac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e8f4ec26c1d7547b98b6c9988fd3cac">&#9670;&#160;</a></span>get_reference_details()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repository::get_reference_details </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$reference</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$filestatus</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return human readable reference information. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$reference</td><td>value of <a class="el" href="../../d1/dc8/class_d_b.html" title="The main &quot;DB&quot; class is simply a container class with some static methods for creating DB objects as w...">DB</a> field files_reference.reference </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$filestatus</td><td>status of the file, 0 - ok, 666 - source missing </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../de/df2/classrepository__dropbox.html#a282ae56034b785bf1be605fa343c4cd2">repository_dropbox</a>, <a class="el" href="../../db/d45/classrepository__equella.html#a34933e1863435496d307d6949250cd45">repository_equella</a>, <a class="el" href="../../d2/d5a/classrepository__filesystem.html#acdc7b7d671e1247d8a97ff572f241349">repository_filesystem</a>, <a class="el" href="../../dc/dd4/classrepository__nextcloud.html#a00582fe07838b52834c0e209740cf5bb">repository_nextcloud</a>, and <a class="el" href="../../d8/d93/classrepository__onedrive.html#af165f67a96202cd1567561c4cd06aaad">repository_onedrive</a>.</p>

</div>
</div>
<a id="a154c72f87f8ed5bddb28907e1e8ac5c7" name="a154c72f87f8ed5bddb28907e1e8ac5c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a154c72f87f8ed5bddb28907e1e8ac5c7">&#9670;&#160;</a></span>get_repository_by_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static repository::get_repository_by_id </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$repositoryid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$options</em> = <code>array()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get repository instance using repository id. </p>
<p>Note that this function does not check permission to access repository contents</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d0/df4/classrepository__exception.html" title="Exception class for repository api.">repository_exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$repositoryid</td><td>repository instance ID </td></tr>
    <tr><td class="paramtype">context&#160;|&#160;int</td><td class="paramname">$context</td><td>context instance or context ID where this repository will be used </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$options</td><td>additional repository options </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">repository</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a88933c3736c77bdd492eb66b9588d302" name="a88933c3736c77bdd492eb66b9588d302"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88933c3736c77bdd492eb66b9588d302">&#9670;&#160;</a></span>get_secret_key()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static repository::get_secret_key </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">final</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generate a secret key to be used for passing sensitive information around. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>repository secret key. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7a1df198cf7b191ac81ff5e6fe9c3757" name="a7a1df198cf7b191ac81ff5e6fe9c3757"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a1df198cf7b191ac81ff5e6fe9c3757">&#9670;&#160;</a></span>get_short_filename()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repository::get_short_filename </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$maxlength</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a shorten filename. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$str</td><td>filename </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$maxlength</td><td>max file name length </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>short filename </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a962e8fe96afc5d22e87183111c3e64a5" name="a962e8fe96afc5d22e87183111c3e64a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a962e8fe96afc5d22e87183111c3e64a5">&#9670;&#160;</a></span>get_type_by_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static repository::get_type_by_id </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the repository type by a given repository type id. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$id</td><td>the type id </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">object</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a49ba203f7a557ddde0a256c416754ff9" name="a49ba203f7a557ddde0a256c416754ff9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49ba203f7a557ddde0a256c416754ff9">&#9670;&#160;</a></span>get_type_by_typename()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static repository::get_type_by_typename </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$typename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get a repository type object by a given type name. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$typename</td><td>the repository type name </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">repository_type|bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8edd3281398ebd11475db36e92ade620" name="a8edd3281398ebd11475db36e92ade620"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8edd3281398ebd11475db36e92ade620">&#9670;&#160;</a></span>get_type_option_names()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static repository_coursefiles::get_type_option_names </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return names of the general options. </p>
<p>By default: no general option name</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../dc/d1a/classrepository.html#ac18d68335b9473786def3d8697b21b1b">repository</a>.</p>

</div>
</div>
<a id="a8cab68f0dd7f8062b989925d12f935bb" name="a8cab68f0dd7f8062b989925d12f935bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8cab68f0dd7f8062b989925d12f935bb">&#9670;&#160;</a></span>get_typename()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repository::get_typename </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the type name of the repository. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>type name of the repository. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd><a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 2.5 </dd></dl>

</div>
</div>
<a id="a0cc5dea62dca625e0e6d4f6e3a63af01" name="a0cc5dea62dca625e0e6d4f6e3a63af01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0cc5dea62dca625e0e6d4f6e3a63af01">&#9670;&#160;</a></span>get_types()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static repository::get_types </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$visible</em> = <code>null</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return all repository types ordered by sortorder field first repository type in returnedarray[0], second repository type in returnedarray[1], ... </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">bool</td><td class="paramname">$visible</td><td>can return types by visiblity, return all types if null </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>Repository types </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0a368484a7d2a7dd101286633282d25c" name="a0a368484a7d2a7dd101286633282d25c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a368484a7d2a7dd101286633282d25c">&#9670;&#160;</a></span>get_unused_filename()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static repository::get_unused_filename </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$itemid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$filepath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get an unused filename from the current draft area. </p>
<p>Will check if the file ends with ([0-9]) and increase the number.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$itemid</td><td>draft item ID. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$filepath</td><td>path to the file. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$filename</td><td>name of the file. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>an unused file name. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a74e3b22c2d436e748f9b817cf7f19b9d" name="a74e3b22c2d436e748f9b817cf7f19b9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74e3b22c2d436e748f9b817cf7f19b9d">&#9670;&#160;</a></span>global_search()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repository::global_search </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>is it possible to do glboal search? </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../d2/d5a/classrepository__filesystem.html#aeeb3814b927a44457be8f44cba51a04b">repository_filesystem</a>, <a class="el" href="../../df/d6c/classrepository__flickr.html#a3d9da29e55eacb92a737a7e5062d65f4">repository_flickr</a>, <a class="el" href="../../d3/de0/classrepository__flickr__public.html#af8a510d3ead2a7ca87a102f7a2542c32">repository_flickr_public</a>, <a class="el" href="../../de/d1a/classrepository__merlot.html#aaefe1f36e1d3569a037f7b290e27b22f">repository_merlot</a>, <a class="el" href="../../d6/d01/classrepository__s3.html#af17c6b8e45967341199c7e8ec068ac82">repository_s3</a>, <a class="el" href="../../d6/df3/classrepository__webdav.html#aad6629343f8046f065300b77aa8c35ee">repository_webdav</a>, <a class="el" href="../../dc/d8b/classrepository__wikimedia.html#a2cd83af66f04ba3119c14eee137b0f77">repository_wikimedia</a>, and <a class="el" href="../../d0/d9b/classrepository__youtube.html#a077be763886cb75f43f09b82c044fd6f">repository_youtube</a>.</p>

</div>
</div>
<a id="a8447d924b4322dc9593b8969b590c01b" name="a8447d924b4322dc9593b8969b590c01b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8447d924b4322dc9593b8969b590c01b">&#9670;&#160;</a></span>has_moodle_files()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">repository_coursefiles::has_moodle_files </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Does this repository used to browse moodle files? </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">boolean</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../dc/d1a/classrepository.html#a2b7c2c08ad04272226d14aecf1354b15">repository</a>.</p>

</div>
</div>
<a id="a22d3e67b47bef8cf5e71d6cf53b765c3" name="a22d3e67b47bef8cf5e71d6cf53b765c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22d3e67b47bef8cf5e71d6cf53b765c3">&#9670;&#160;</a></span>hide()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repository::hide </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$hide</em> = <code>'toggle'</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Hide/Show a repository. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$hide</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2df96d37bf0ff3003d3ff43949619af1" name="a2df96d37bf0ff3003d3ff43949619af1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2df96d37bf0ff3003d3ff43949619af1">&#9670;&#160;</a></span>import_external_file_contents()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repository::import_external_file_contents </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a>&#160;</td>
          <td class="paramname"><em>$file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$maxbytes</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Downloads the file from external repository and saves it in moodle filepool. </p>
<p>This function is different from <a class="el" href="../../dc/d1a/classrepository.html#a176c4c95cbd9c2b362fb90ea14f4ce13">repository::sync_reference()</a> because it has bigger request timeout and always downloads the content.</p>
<p>This function is invoked when we try to unlink the file from the source and convert a reference into a true copy.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">exception</td><td>when file could not be imported</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td></td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$maxbytes</td><td>throw an exception if file size is bigger than $maxbytes (0 means no limit) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9cc47c9b2801e7838524d4943da91f22" name="a9cc47c9b2801e7838524d4943da91f22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9cc47c9b2801e7838524d4943da91f22">&#9670;&#160;</a></span>instance_config_form()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static repository::instance_config_form </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$mform</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Edit/Create Instance Settings <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> form. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">moodleform</td><td class="paramname">$mform</td><td><a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> form (passed by reference) </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../db/d45/classrepository__equella.html#a368d5b6eb20928812becf21f02e0089c">repository_equella</a>, <a class="el" href="../../d2/d5a/classrepository__filesystem.html#afc237b21c24c02e02b6fa05f9642213b">repository_filesystem</a>, <a class="el" href="../../d3/de0/classrepository__flickr__public.html#a022ccd36751a8f1bcc9b69195f248bf1">repository_flickr_public</a>, <a class="el" href="../../dc/dd4/classrepository__nextcloud.html#aa5f6867639bb6bea0a9f7262c709ffbf">repository_nextcloud</a>, and <a class="el" href="../../d6/df3/classrepository__webdav.html#a562c96076369df225d523d20c2e245a3">repository_webdav</a>.</p>

</div>
</div>
<a id="a13ddc57523d8e517bf297bf7d95473a6" name="a13ddc57523d8e517bf297bf7d95473a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13ddc57523d8e517bf297bf7d95473a6">&#9670;&#160;</a></span>instance_form_validation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static repository::instance_form_validation </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$mform</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$errors</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Validate repository plugin instance form. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">moodleform</td><td class="paramname">$mform</td><td>moodle form </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$data</td><td>form data </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$errors</td><td>errors </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>errors </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../d2/d5a/classrepository__filesystem.html#aea271a07d3b7b200a3ec57f3e2b07735">repository_filesystem</a>.</p>

</div>
</div>
<a id="ab78c18f3f85f591834ba2192f01cc391" name="ab78c18f3f85f591834ba2192f01cc391"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab78c18f3f85f591834ba2192f01cc391">&#9670;&#160;</a></span>is_visible()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">repository_coursefiles::is_visible </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return is the instance is visible (is the type visible ? is the context enable ?) </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">boolean</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../dc/d1a/classrepository.html#a1386e4e56f3609bbe4cc3e3485b3d8ff">repository</a>.</p>

</div>
</div>
<a id="a29789c098bbfa583f496b49992078fd3" name="a29789c098bbfa583f496b49992078fd3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29789c098bbfa583f496b49992078fd3">&#9670;&#160;</a></span>logout()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repository::logout </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Logout from repository instance By default, this function will return a login form. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../de/df2/classrepository__dropbox.html#a53fd4cb77ce41265ca1760313d4e0573">repository_dropbox</a>, <a class="el" href="../../d2/d5a/classrepository__filesystem.html#afc9b4a1fdb51e11e64c996b27540c07b">repository_filesystem</a>, <a class="el" href="../../df/d6c/classrepository__flickr.html#aa4953698504542fe101c52bda1ad8f49">repository_flickr</a>, <a class="el" href="../../d3/de0/classrepository__flickr__public.html#a4680f510595b4ed2a04144ea6ea4f08b">repository_flickr_public</a>, <a class="el" href="../../dc/dd4/classrepository__nextcloud.html#a6c2bb086596e9ca0b461f87fdc6d6de7">repository_nextcloud</a>, <a class="el" href="../../d8/d93/classrepository__onedrive.html#ae94b38c94f3f8e16f2ad7e24e061f97b">repository_onedrive</a>, and <a class="el" href="../../dc/d8b/classrepository__wikimedia.html#a87a2f0a6276ca256ab49629d52a04108">repository_wikimedia</a>.</p>

</div>
</div>
<a id="a3519530c2c90dc247eb08ee87d779ae1" name="a3519530c2c90dc247eb08ee87d779ae1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3519530c2c90dc247eb08ee87d779ae1">&#9670;&#160;</a></span>move_to_filepool()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static repository::move_to_filepool </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$thefile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$record</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Move file from download folder to file pool using FILE API. </p>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000359">Todo:</a></b></dt><dd><a href="https://tracker.moodle.org/browse/MDL-28637" class="el">MDL-28637</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$thefile</td><td>file path in download folder </td></tr>
    <tr><td class="paramtype">stdClass</td><td class="paramname">$record</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>containing the following keys: icon file id url </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a44341e8f9d3955e3ba499ed81930b6dc" name="a44341e8f9d3955e3ba499ed81930b6dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44341e8f9d3955e3ba499ed81930b6dc">&#9670;&#160;</a></span>overwrite_existing_draftfile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static repository::overwrite_existing_draftfile </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$itemid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$filepath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$newfilepath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$newfilename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Overwrite an existing file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$itemid</td><td></td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$filepath</td><td></td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$filename</td><td></td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$newfilepath</td><td></td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$newfilename</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6e53f416cfbe22d61d8933edf762077d" name="a6e53f416cfbe22d61d8933edf762077d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e53f416cfbe22d61d8933edf762077d">&#9670;&#160;</a></span>plugin_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static repository::plugin_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>function which is run when the type is created (moodle administrator add the plugin) </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>success or fail? </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../d3/de0/classrepository__flickr__public.html#aed6f288b6e1f0a5f185054c8626f9485">repository_flickr_public</a>.</p>

</div>
</div>
<a id="a7f8be770ab9805505726be1f08539970" name="a7f8be770ab9805505726be1f08539970"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f8be770ab9805505726be1f08539970">&#9670;&#160;</a></span>prepare_breadcrumb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static repository::prepare_breadcrumb </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$breadcrumb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prepare the breadcrumb. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$breadcrumb</td><td>contains each element of the breadcrumb. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>of breadcrumb elements. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd><a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 2.3.3 </dd></dl>

</div>
</div>
<a id="a329d4c782086c3e27eb563d419730c1f" name="a329d4c782086c3e27eb563d419730c1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a329d4c782086c3e27eb563d419730c1f">&#9670;&#160;</a></span>prepare_file()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repository::prepare_file </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get a unique file path in which to save the file. </p>
<p>The filename returned will be removed at the end of the request and should not be relied upon to exist in subsequent requests.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$filename</td><td>file name </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">file</td><td>path </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae75967d20db3a0dff0f34bc95c9bcf49" name="ae75967d20db3a0dff0f34bc95c9bcf49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae75967d20db3a0dff0f34bc95c9bcf49">&#9670;&#160;</a></span>prepare_list()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static repository::prepare_list </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$list</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prepare the file/folder listing. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$list</td><td>of files and folders. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>of files and folders. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd><a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 2.3.3 </dd></dl>

</div>
</div>
<a id="a02830d42eb73cc4c0441e4327ae25193" name="a02830d42eb73cc4c0441e4327ae25193"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02830d42eb73cc4c0441e4327ae25193">&#9670;&#160;</a></span>prepare_listing()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static repository::prepare_listing </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$listing</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prepares list of files before passing it to AJAX, makes sure data is in the correct format and stores formatted values. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array&#160;|&#160;stdClass</td><td class="paramname">$listing</td><td>result of get_listing() or <a class="el" href="../../dc/d71/group___imap___client.html#ga51cc7ed42bce580dcc33ed45d9cef0c9" title="Search a mailbox.">search()</a> or <a class="el" href="../../d5/d09/group__core__files.html#ga7cd2d143e90b6405d483e37734f6b105" title="Listing all files (including folders) in current path (draft area) used by file manager.">file_get_drafarea_files()</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4ee6aaba02b6f3253790934fb6701a17" name="a4ee6aaba02b6f3253790934fb6701a17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ee6aaba02b6f3253790934fb6701a17">&#9670;&#160;</a></span>prepare_to_cache()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repository::prepare_to_cache </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prepares the repository to be cached. </p>
<p>Implements method from <a class="el" href="../../d3/db0/interfacecacheable__object.html" title="Cacheable object.">cacheable_object</a> interface.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="../../d3/db0/interfacecacheable__object.html#aa1819bfb33722e7f9a3672bd4aba6e2a">cacheable_object</a>.</p>

</div>
</div>
<a id="a9dabe04b3cbbabf79072932099cae663" name="a9dabe04b3cbbabf79072932099cae663"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9dabe04b3cbbabf79072932099cae663">&#9670;&#160;</a></span>print_login()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">repository_coursefiles::print_login </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>coursefiles plugin doesn't require login, so list all files </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">mixed</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../dc/d1a/classrepository.html#a21ec06151809fc42096eda7238731f87">repository</a>.</p>

</div>
</div>
<a id="a98ae3bba92221a654c7ebbc269a657c6" name="a98ae3bba92221a654c7ebbc269a657c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98ae3bba92221a654c7ebbc269a657c6">&#9670;&#160;</a></span>print_search()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repository::print_search </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Show the search screen, if required. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../d3/de0/classrepository__flickr__public.html#a8102be246002b80c0cd6cb8b5d5dff9c">repository_flickr_public</a>.</p>

</div>
</div>
<a id="a86c92f321849067a0543093e00edab34" name="a86c92f321849067a0543093e00edab34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86c92f321849067a0543093e00edab34">&#9670;&#160;</a></span>reference_file_selected()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repository::reference_file_selected </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$reference</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$component</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$filearea</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$itemid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>reference_file_selected </p>
<p>This function is called when a controlled link file is selected in a file picker and the form is saved. The expected behaviour for repositories supporting controlled links is to</p><ul>
<li>copy the file to the moodle system account</li>
<li>put it in a folder that reflects the context it is being used</li>
<li>make sure the sharing permissions are correct (read-only with the link)</li>
<li>return a new reference string pointing to the newly copied file.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$reference</td><td>this reference is generated by <a class="el" href="../../dc/d1a/classrepository.html#ac88b0c625ecb49e4c545ae5c49c93bf2" title="Prepare file reference information.">repository::get_file_reference()</a> </td></tr>
    <tr><td class="paramtype">context</td><td class="paramname">$context</td><td>the target context for this new file. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$component</td><td>the target component for this new file. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$filearea</td><td>the target filearea for this new file. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$itemid</td><td>the target itemid for this new file. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>updated reference (final one before it's saved to db). </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../dc/dd4/classrepository__nextcloud.html#a82bca9beec4c2d0c24758f1b2f95c6db">repository_nextcloud</a>, and <a class="el" href="../../d8/d93/classrepository__onedrive.html#a3d7d7aeffecf5a3da584fad0a6742d6d">repository_onedrive</a>.</p>

</div>
</div>
<a id="a81e575cb60d16aee1ef4dbb892f400e4" name="a81e575cb60d16aee1ef4dbb892f400e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81e575cb60d16aee1ef4dbb892f400e4">&#9670;&#160;</a></span>reset_caches()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static repository::reset_caches </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function <a class="el" href="../../dc/d1a/classrepository.html#a81e575cb60d16aee1ef4dbb892f400e4" title="Function repository::reset_caches() is deprecated, cache is handled by MUC now.">repository::reset_caches()</a> is deprecated, cache is handled by MUC now. </p>
<dl class="deprecated"><dt><b><a class="el" href="../../da/d58/deprecated.html#_deprecated001237">Deprecated:</a></b></dt><dd>since <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 2.6 <a href="https://tracker.moodle.org/browse/MDL-42016" class="el">MDL-42016</a> - please do not use this function any more. </dd></dl>

</div>
</div>
<a id="af3d7f85659b90d92feab651e4d03e425" name="af3d7f85659b90d92feab651e4d03e425"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3d7f85659b90d92feab651e4d03e425">&#9670;&#160;</a></span>search()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repository::search </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$search_text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$page</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Search files in repository When doing global search, $search_text will be used as keyword. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$search_text</td><td>search key word </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$page</td><td>page </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">mixed</td><td>see <a class="el" href="../../dc/d1a/classrepository.html#a52834261685e86208656e11f1d489e3f">repository::get_listing()</a> </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../d9/d6a/classrepository__local.html#ad8be6aabde8298878da0d86a3ff52e48">repository_local</a>, <a class="el" href="../../de/df2/classrepository__dropbox.html#a0331be4b074361add533b6d097aa9b19">repository_dropbox</a>, <a class="el" href="../../d2/d5a/classrepository__filesystem.html#a6547a478b72a2636ee6c8e6105dfdaee">repository_filesystem</a>, <a class="el" href="../../d0/d5b/classrepository__contentbank.html#a1137daa68e97bb8a03f5c519b8c628ed">repository_contentbank</a>, <a class="el" href="../../d3/de0/classrepository__flickr__public.html#a76d2df212ad220ca4b7ca073995764b2">repository_flickr_public</a>, <a class="el" href="../../de/d1a/classrepository__merlot.html#a71d9faeab446b85fe4a4a8c0eb68991f">repository_merlot</a>, <a class="el" href="../../dc/d8b/classrepository__wikimedia.html#a9e83d44c8c7352c2a9cebd89dcc36fdc">repository_wikimedia</a>, <a class="el" href="../../d0/d9b/classrepository__youtube.html#af168bd0a592dd18919e746a4fb771b89">repository_youtube</a>, <a class="el" href="../../df/d6c/classrepository__flickr.html#a9d620b78b65c70ff5780cc128a5d0146">repository_flickr</a>, and <a class="el" href="../../d8/d93/classrepository__onedrive.html#a41f7d121352aee839e3483da00508999">repository_onedrive</a>.</p>

</div>
</div>
<a id="a1e11bdfb6dd5951733c2bdfe784be1e9" name="a1e11bdfb6dd5951733c2bdfe784be1e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e11bdfb6dd5951733c2bdfe784be1e9">&#9670;&#160;</a></span>send_file()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repository::send_file </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$storedfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$lifetime</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$filter</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$forcedownload</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$options</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Repository method to serve the referenced file. </p>
<dl class="section see"><dt>See also</dt><dd>send_stored_file</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$storedfile</td><td>the file that contains the reference </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$lifetime</td><td>Number of seconds before the file should expire from caches (null means $CFG-&gt;filelifetime) </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$filter</td><td>0 (default)=no filtering, 1=all files, 2=html files only </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$forcedownload</td><td>If true (default false), forces download of file rather than view in browser/plugin </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$options</td><td>additional options affecting the file serving </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../db/d45/classrepository__equella.html#a20a814b93b5764b1d5c8b04f542c4366">repository_equella</a>, <a class="el" href="../../de/df2/classrepository__dropbox.html#a33905cca6f62ad4bb43020a77c83ee05">repository_dropbox</a>, <a class="el" href="../../d2/d5a/classrepository__filesystem.html#a890883f2b03a27291d07dbc3a11ed9a1">repository_filesystem</a>, <a class="el" href="../../dc/dd4/classrepository__nextcloud.html#ae2a4f252325a03ca6e97c1a7ad621265">repository_nextcloud</a>, and <a class="el" href="../../d8/d93/classrepository__onedrive.html#a5d412a72686b47d88a757a670379eae6">repository_onedrive</a>.</p>

</div>
</div>
<a id="a57cb9f7fe57d3adbd7966f0616eb8f6e" name="a57cb9f7fe57d3adbd7966f0616eb8f6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57cb9f7fe57d3adbd7966f0616eb8f6e">&#9670;&#160;</a></span>send_relative_file()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repository::send_relative_file </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a>&#160;</td>
          <td class="paramname"><em>$mainfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$relativepath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets a file relative to this file in the repository and sends it to the browser. </p>
<p>Used to allow relative file linking within a repository without creating file records for linked files</p>
<p>Repositories that overwrite this must be very careful - see filesystem repository for example.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$mainfile</td><td>The main file we are trying to access relative files for. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$relativepath</td><td>the relative path to the file we are trying to access. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../d2/d5a/classrepository__filesystem.html#a01ebf00bbf8fc727c7b67c2d5f15fb60">repository_filesystem</a>.</p>

</div>
</div>
<a id="a18c1dc209a00f5ed4acc405ae97fa4b4" name="a18c1dc209a00f5ed4acc405ae97fa4b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18c1dc209a00f5ed4acc405ae97fa4b4">&#9670;&#160;</a></span>set_option()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repository::set_option </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$options</em> = <code>array()</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Save settings for repository instance $repo-&gt;set_option(array('api_key'=&gt;'f2188bde132', 'name'=&gt;'dongsheng'));. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$options</td><td>settings </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../de/df2/classrepository__dropbox.html#ac21e46cf5b4cd50cc30e28e7b605a156">repository_dropbox</a>, <a class="el" href="../../d2/d5a/classrepository__filesystem.html#a018ac884bd0632a9e1f64403f59557de">repository_filesystem</a>, <a class="el" href="../../df/d6c/classrepository__flickr.html#afec51088103415c5e7a06bed43a42a7d">repository_flickr</a>, <a class="el" href="../../d3/de0/classrepository__flickr__public.html#a06a74a70a6805f487646e548da0fbd72">repository_flickr_public</a>, <a class="el" href="../../dc/dd4/classrepository__nextcloud.html#a026b8d64931e92b5ed9df0c04070472c">repository_nextcloud</a>, and <a class="el" href="../../d0/d9b/classrepository__youtube.html#acfe9c3ec816620e19f9c681e17a0eef2">repository_youtube</a>.</p>

</div>
</div>
<a id="a5a0c8dfa7a9d974d2367721b8a01a39d" name="a5a0c8dfa7a9d974d2367721b8a01a39d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a0c8dfa7a9d974d2367721b8a01a39d">&#9670;&#160;</a></span>static_function()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static repository::static_function </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$plugin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$function</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Call a static function. </p>
<p>Any additional arguments than plugin and function will be passed through.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$plugin</td><td>repository plugin name </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$function</td><td>function name </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">mixed</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afb6293adfb4df812acf19d8a45d0cc2f" name="afb6293adfb4df812acf19d8a45d0cc2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb6293adfb4df812acf19d8a45d0cc2f">&#9670;&#160;</a></span>supported_filetypes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repository::supported_filetypes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>What kind of files will be in this repository? </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>return '*' means this repository support any files, otherwise return mimetypes of files, it can be an array </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../de/df2/classrepository__dropbox.html#ac23ec97e1baf76e3492fe557ed9b5a62">repository_dropbox</a>, <a class="el" href="../../df/d6c/classrepository__flickr.html#abe4058444cc393855298413b55933695">repository_flickr</a>, <a class="el" href="../../d3/de0/classrepository__flickr__public.html#af5e501520fd19242a3e43017c63197c3">repository_flickr_public</a>, <a class="el" href="../../de/d1a/classrepository__merlot.html#a08b2848eaa16c22ed79dd4f8c08c6c04">repository_merlot</a>, <a class="el" href="../../d8/d93/classrepository__onedrive.html#a6c064ac40e34ef5db1b4b2bebbd5b8f6">repository_onedrive</a>, <a class="el" href="../../d8/d84/classrepository__url.html#a7b498f89f7637878e2c662e9d805a920">repository_url</a>, and <a class="el" href="../../d0/d9b/classrepository__youtube.html#af918e01bd040a5539d24a25a3bdb8ab0">repository_youtube</a>.</p>

</div>
</div>
<a id="a9bbd153f42faf547f4d6d5ccd37d1cef" name="a9bbd153f42faf547f4d6d5ccd37d1cef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bbd153f42faf547f4d6d5ccd37d1cef">&#9670;&#160;</a></span>supported_returntypes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">repository_coursefiles::supported_returntypes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tells how the file can be picked from this repository. </p>
<p>Maximum value is FILE_INTERNAL | FILE_EXTERNAL | FILE_REFERENCE</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../dc/d1a/classrepository.html#a5dc0a3197ea77457056cd1466dbc9724">repository</a>.</p>

</div>
</div>
<a id="a4e8b1e4d4a80d8fa3d3e648d7b2d4365" name="a4e8b1e4d4a80d8fa3d3e648d7b2d4365"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e8b1e4d4a80d8fa3d3e648d7b2d4365">&#9670;&#160;</a></span>supports_relative_file()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repository::supports_relative_file </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>helper function to check if the repository supports send_relative_file. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true|false</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../d2/d5a/classrepository__filesystem.html#a3e6ff58bad730eb0e7029e9b249cd18b">repository_filesystem</a>.</p>

</div>
</div>
<a id="a91ddea19dc0e264c77258280dbab29b7" name="a91ddea19dc0e264c77258280dbab29b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91ddea19dc0e264c77258280dbab29b7">&#9670;&#160;</a></span>sync_external_file()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static repository::sync_external_file </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$resetsynchistory</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function <a class="el" href="../../dc/d1a/classrepository.html#a91ddea19dc0e264c77258280dbab29b7" title="Function repository::sync_external_file() is deprecated.">repository::sync_external_file()</a> is deprecated. </p>
<p>Use <a class="el" href="../../dc/d1a/classrepository.html#a176c4c95cbd9c2b362fb90ea14f4ce13" title="Performs synchronisation of an external file if the previous one has expired.">repository::sync_reference</a> instead</p>
<dl class="deprecated"><dt><b><a class="el" href="../../da/d58/deprecated.html#_deprecated001238">Deprecated:</a></b></dt><dd>since <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 2.6 <a href="https://tracker.moodle.org/browse/MDL-42016" class="el">MDL-42016</a> - please do not use this function any more. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../dc/d1a/classrepository.html#a176c4c95cbd9c2b362fb90ea14f4ce13" title="Performs synchronisation of an external file if the previous one has expired.">repository::sync_reference()</a> </dd></dl>

</div>
</div>
<a id="a176c4c95cbd9c2b362fb90ea14f4ce13" name="a176c4c95cbd9c2b362fb90ea14f4ce13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a176c4c95cbd9c2b362fb90ea14f4ce13">&#9670;&#160;</a></span>sync_reference()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repository::sync_reference </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a>&#160;</td>
          <td class="paramname"><em>$file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Performs synchronisation of an external file if the previous one has expired. </p>
<p>This function must be implemented for external repositories supporting FILE_REFERENCE, it is called for existing aliases when their filesize, contenthash or timemodified are requested. It is not called for internal repositories (see <a class="el" href="../../dc/d1a/classrepository.html#a2b7c2c08ad04272226d14aecf1354b15">repository::has_moodle_files()</a>), references to internal files are updated immediately when source is modified.</p>
<p>Referenced files may optionally keep their content in <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> filepool (for thumbnail generation or to be able to serve cached copy). In this case both contenthash and filesize need to be synchronized. Otherwise repositories should use contenthash of empty file and correct filesize in bytes.</p>
<p>Note that this function may be run for EACH file that needs to be synchronised at the moment. If anything is being downloaded or requested from external sources there should be a small timeout. The synchronisation is performed to update the size of the file and/or to update image and re-generated image preview. There is nothing fatal if syncronisation fails but it is fatal if syncronisation takes too long and hangs the script generating a page.</p>
<p>Note: If you wish to call $file-&gt;get_filesize(), $file-&gt;get_contenthash() or $file-&gt;get_timemodified() make sure that recursion does not happen.</p>
<p>Called from <a class="el" href="../../">stored_file::sync_external_file()</a></p>
<p>@uses stored_file::set_missingsource() @uses stored_file::set_synchronized() </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>false when file does not need synchronisation, true if it was synchronised </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../de/df2/classrepository__dropbox.html#a953dbed05518c15399484e03073c4c38">repository_dropbox</a>, <a class="el" href="../../db/d45/classrepository__equella.html#a40453942e35fc9989a3876cbf7cf8b2e">repository_equella</a>, <a class="el" href="../../d2/d5a/classrepository__filesystem.html#a931665eb61eaee91f25cdbedbb37ee0d">repository_filesystem</a>, and <a class="el" href="../../dc/dd4/classrepository__nextcloud.html#aa7b6628fe872c2d86d530d82e01b3180">repository_nextcloud</a>.</p>

</div>
</div>
<a id="a851b2a6b7c6c9e95492bedc6ac7df71b" name="a851b2a6b7c6c9e95492bedc6ac7df71b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a851b2a6b7c6c9e95492bedc6ac7df71b">&#9670;&#160;</a></span>type_config_form()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static repository::type_config_form </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$mform</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$classname</em> = <code>'<a class="el" href="../../dc/d1a/classrepository.html">repository</a>'</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Edit/Create Admin Settings <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> form. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d5/d8e/class_moodle_quick_form.html">MoodleQuickForm</a></td><td class="paramname">$mform</td><td><a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> form (passed by reference) </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$classname</td><td>repository class name </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../de/df2/classrepository__dropbox.html#ad95ba7168b1b55ca06abe88c0af19875">repository_dropbox</a>, <a class="el" href="../../df/d6c/classrepository__flickr.html#a1246a43b251c4e537b5a546ac2b2cadd">repository_flickr</a>, <a class="el" href="../../d3/de0/classrepository__flickr__public.html#a87f582772bfe1599e26cdbd46daa93d8">repository_flickr_public</a>, <a class="el" href="../../de/d1a/classrepository__merlot.html#abb7fc8cb24e7da39a6374f305f788d9b">repository_merlot</a>, <a class="el" href="../../d8/d93/classrepository__onedrive.html#a0d75b0c956486b40122042911aa76fa5">repository_onedrive</a>, <a class="el" href="../../d8/d08/classrepository__recent.html#aeafc8494dff2380e525ae94a8da5f242">repository_recent</a>, <a class="el" href="../../d6/d01/classrepository__s3.html#a16290beb571ea8d600fc3caef2e3039d">repository_s3</a>, and <a class="el" href="../../d0/d9b/classrepository__youtube.html#a8c8864e88055aeaa797f6ff1fda53c7d">repository_youtube</a>.</p>

</div>
</div>
<a id="ab56f34eaa82e19f5359cee1b4a9eeb88" name="ab56f34eaa82e19f5359cee1b4a9eeb88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab56f34eaa82e19f5359cee1b4a9eeb88">&#9670;&#160;</a></span>type_form_validation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static repository::type_form_validation </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$mform</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$errors</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Validate Admin Settings <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> form. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">moodleform</td><td class="paramname">$mform</td><td><a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> form (passed by reference) </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$data</td><td>array of ("fieldname"=&gt;value) of submitted data </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$errors</td><td>array of ("fieldname"=&gt;errormessage) of errors </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>array of errors </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad78b6747897dffb5da0fd3febb58e614" name="ad78b6747897dffb5da0fd3febb58e614"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad78b6747897dffb5da0fd3febb58e614">&#9670;&#160;</a></span>update_draftfile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static repository::update_draftfile </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$draftid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$filepath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$updatedata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Updates a file in draft filearea. </p>
<p>This function can only update fields filepath, filename, author, license. If anything (except filepath) is updated, timemodified is set to current time. If filename or filepath is updated the file unconnects from it's origin and therefore all references to it will be converted to copies when filearea is saved.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$draftid</td><td></td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$filepath</td><td>path to the directory containing the file, or full path in case of directory </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$filename</td><td>name of the file, or '.' in case of directory </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$updatedata</td><td>array of fields to change (only filename, filepath, license and/or author can be updated) </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d6/da8/classmoodle__exception.html" title="Base Moodle Exception class.">moodle_exception</a></td><td>if for any reason file can not be updated (file does not exist, target already exists, etc.) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9c31d90e3f0aeea4114e0b40d897c88f" name="a9c31d90e3f0aeea4114e0b40d897c88f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c31d90e3f0aeea4114e0b40d897c88f">&#9670;&#160;</a></span>uses_post_requests()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">repository::uses_post_requests </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function to indicate if this repository uses post requests for uploading files. </p>
<dl class="deprecated"><dt><b><a class="el" href="../../da/d58/deprecated.html#_deprecated001239">Deprecated:</a></b></dt><dd>since <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 3.2, 3.1.1, 3.0.5 </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a279900c35946c29d1098424005a31763" name="a279900c35946c29d1098424005a31763"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a279900c35946c29d1098424005a31763">&#9670;&#160;</a></span>wake_from_cache()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static repository::wake_from_cache </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Restores the repository from cache. </p>
<p>Implements method from <a class="el" href="../../d3/db0/interfacecacheable__object.html" title="Cacheable object.">cacheable_object</a> interface.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="../../d3/db0/interfacecacheable__object.html#ae85a357bab41da508d1818447379a5d7">cacheable_object</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ac7b2efb40532349185ead7d739896b29" name="ac7b2efb40532349185ead7d739896b29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7b2efb40532349185ead7d739896b29">&#9670;&#160;</a></span>$typename</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string repository::$typename</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Type of repository (webdav, <a class="el" href="../../d9/d2a/classgoogle__docs.html" title="Class for manipulating google documents through the google data api.">google_docs</a>, dropbox, ...). </p>
<p>Read from $this-&gt;get_typename(). </p>

</div>
</div>
<a id="a8f33f46934696d767375531fe38b6976" name="a8f33f46934696d767375531fe38b6976"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f33f46934696d767375531fe38b6976">&#9670;&#160;</a></span>GETFILE_TIMEOUT</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const repository::GETFILE_TIMEOUT = 30</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Timeout in seconds for downloading the external file into moodle. </p>
<dl class="deprecated"><dt><b><a class="el" href="../../da/d58/deprecated.html#_deprecated001232">Deprecated:</a></b></dt><dd>since <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 2.7, please use $CFG-&gt;repositorygetfiletimeout instead </dd></dl>

</div>
</div>
<a id="abf0098b6cc875dc363cc3c6e0e9b77c5" name="abf0098b6cc875dc363cc3c6e0e9b77c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf0098b6cc875dc363cc3c6e0e9b77c5">&#9670;&#160;</a></span>SYNCFILE_TIMEOUT</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const repository::SYNCFILE_TIMEOUT = 1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Timeout in seconds for syncronising the external file size. </p>
<dl class="deprecated"><dt><b><a class="el" href="../../da/d58/deprecated.html#_deprecated001233">Deprecated:</a></b></dt><dd>since <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 2.7, please use $CFG-&gt;repositorysyncfiletimeout instead </dd></dl>

</div>
</div>
<a id="a7e149b125af515563ee59b7a390658a4" name="a7e149b125af515563ee59b7a390658a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e149b125af515563ee59b7a390658a4">&#9670;&#160;</a></span>SYNCIMAGE_TIMEOUT</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const repository::SYNCIMAGE_TIMEOUT = 3</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Timeout in seconds for downloading an image file from external repository during syncronisation. </p>
<dl class="deprecated"><dt><b><a class="el" href="../../da/d58/deprecated.html#_deprecated001234">Deprecated:</a></b></dt><dd>since <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 2.7, please use $CFG-&gt;repositorysyncimagetimeout instead </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>repository/coursefiles/lib.php</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Jul 30 2023 02:54:54 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>
