<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: phpunit_dataset Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;4.2</span>
   </div>
   <div id="projectbrief">Moodle 4.2.1 (Build: 20230612) (8c989335be7)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="../../dd/d8d/classphpunit__dataset-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">phpunit_dataset Class Reference<div class="ingroups"><a class="el" href="../../d0/de1/group__core.html">core</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Lightweight dataset class for phpunit, supports XML, CSV and array datasets.  
 <a href="../../d9/d8a/classphpunit__dataset.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:abb1cd949b8a0127b2fa56054d13ac416"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d8a/classphpunit__dataset.html#abb1cd949b8a0127b2fa56054d13ac416">from_array</a> (array $structure)</td></tr>
<tr class="memdesc:abb1cd949b8a0127b2fa56054d13ac416"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load information from a PHP array to the dataset.  <br /></td></tr>
<tr class="separator:abb1cd949b8a0127b2fa56054d13ac416"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5284dcb4e9807fb12613615eb1b21fd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d8a/classphpunit__dataset.html#ab5284dcb4e9807fb12613615eb1b21fd">from_file</a> (string $fullpath, ?string $table=null)</td></tr>
<tr class="memdesc:ab5284dcb4e9807fb12613615eb1b21fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load information from one file (XML, CSV) to the dataset.  <br /></td></tr>
<tr class="separator:ab5284dcb4e9807fb12613615eb1b21fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a275e5c6bc34dfd07c80a88cf595008d0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d8a/classphpunit__dataset.html#a275e5c6bc34dfd07c80a88cf595008d0">from_files</a> (array $fullpaths)</td></tr>
<tr class="memdesc:a275e5c6bc34dfd07c80a88cf595008d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load information from multiple files (XML, CSV) to the dataset.  <br /></td></tr>
<tr class="separator:a275e5c6bc34dfd07c80a88cf595008d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90eb6a0c77013a94ecbe7d21ed14e905"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d8a/classphpunit__dataset.html#a90eb6a0c77013a94ecbe7d21ed14e905">from_string</a> (string $content, string $type, ?string $table=null)</td></tr>
<tr class="memdesc:a90eb6a0c77013a94ecbe7d21ed14e905"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load information from a string (XML, CSV) to the dataset.  <br /></td></tr>
<tr class="separator:a90eb6a0c77013a94ecbe7d21ed14e905"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86f80c87e4c0a86a415a91ef84a3f8ad"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d8a/classphpunit__dataset.html#a86f80c87e4c0a86a415a91ef84a3f8ad">get_rows</a> (array $filter=[])</td></tr>
<tr class="memdesc:a86f80c87e4c0a86a415a91ef84a3f8ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the rows, for a given table, that the dataset holds.  <br /></td></tr>
<tr class="separator:a86f80c87e4c0a86a415a91ef84a3f8ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab39367e7c4d700350f04bda21d2274e2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d8a/classphpunit__dataset.html#ab39367e7c4d700350f04bda21d2274e2">to_database</a> (array $filter=[])</td></tr>
<tr class="memdesc:ab39367e7c4d700350f04bda21d2274e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send all the information to the dataset to the database.  <br /></td></tr>
<tr class="separator:ab39367e7c4d700350f04bda21d2274e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a497bbfac4be1da03eff49a4fc2114a3c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d8a/classphpunit__dataset.html#a497bbfac4be1da03eff49a4fc2114a3c">load_csv</a> (string $content, string $tablename)</td></tr>
<tr class="memdesc:a497bbfac4be1da03eff49a4fc2114a3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a CSV content, process and load it as a table into the dataset.  <br /></td></tr>
<tr class="separator:a497bbfac4be1da03eff49a4fc2114a3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08316a6ce38cd99451917402e49f6989"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d8a/classphpunit__dataset.html#a08316a6ce38cd99451917402e49f6989">load_xml</a> (string $content)</td></tr>
<tr class="memdesc:a08316a6ce38cd99451917402e49f6989"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a XML content, process and load it as tables into the dataset.  <br /></td></tr>
<tr class="separator:a08316a6ce38cd99451917402e49f6989"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a1cb6f26b6d891c592539b94494a43d35"><td class="memItemLeft" align="right" valign="top"><a id="a1cb6f26b6d891c592539b94494a43d35" name="a1cb6f26b6d891c592539b94494a43d35"></a>
array&#160;</td><td class="memItemRight" valign="bottom"><b>$columns</b> = []</td></tr>
<tr class="memdesc:a1cb6f26b6d891c592539b94494a43d35"><td class="mdescLeft">&#160;</td><td class="mdescRight">columns belonging to every table (keys) handled by the dataset <br /></td></tr>
<tr class="separator:a1cb6f26b6d891c592539b94494a43d35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a345d8f097fbb48f805d184a0a3b1ab90"><td class="memItemLeft" align="right" valign="top"><a id="a345d8f097fbb48f805d184a0a3b1ab90" name="a345d8f097fbb48f805d184a0a3b1ab90"></a>
array&#160;</td><td class="memItemRight" valign="bottom"><b>$rows</b> = []</td></tr>
<tr class="memdesc:a345d8f097fbb48f805d184a0a3b1ab90"><td class="mdescLeft">&#160;</td><td class="mdescRight">rows belonging to every table (keys) handled by the dataset <br /></td></tr>
<tr class="separator:a345d8f097fbb48f805d184a0a3b1ab90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c497aaed22cdedb076a16bad06a669c"><td class="memItemLeft" align="right" valign="top"><a id="a6c497aaed22cdedb076a16bad06a669c" name="a6c497aaed22cdedb076a16bad06a669c"></a>
array&#160;</td><td class="memItemRight" valign="bottom"><b>$tables</b> = []</td></tr>
<tr class="memdesc:a6c497aaed22cdedb076a16bad06a669c"><td class="mdescLeft">&#160;</td><td class="mdescRight">tables being handled by the dataset <br /></td></tr>
<tr class="separator:a6c497aaed22cdedb076a16bad06a669c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Lightweight dataset class for phpunit, supports XML, CSV and array datasets. </p>
<p>This is a simple replacement class for the old old phpunit/dbunit, now archived. It allows to load CSV, XML and array structures to database. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="abb1cd949b8a0127b2fa56054d13ac416" name="abb1cd949b8a0127b2fa56054d13ac416"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb1cd949b8a0127b2fa56054d13ac416">&#9670;&#160;</a></span>from_array()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">phpunit_dataset::from_array </td>
          <td>(</td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$structure</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load information from a PHP array to the dataset. </p>
<p>The general structure of the PHP array must be [table name] =&gt; [array of rows, each one being an array of values or column =&gt; values. The format of the array must be one of the following:</p><ul>
<li>non-associative array, with column names in the first row (pretty much like CSV files are): $structure = [ 'table 1' =&gt; [ ['column name 1', 'column name 2'], ['row 1 column 1 value', 'row 1 column 2 value'*, ['row 2 column 1 value', 'row 2 column 2 value'*, ], 'table 2' =&gt; ... ];</li>
<li>associative array, with column names being keys in the array. $structure = [ 'table 1' =&gt; [ ['column name 1' =&gt; 'row 1 column 1 value', 'column name 2' =&gt; 'row 1 column 2 value'], ['column name 1' =&gt; 'row 2 column 1 value', 'column name 2' =&gt; 'row 2 column 2 value'], ], 'table 2' =&gt; ... ]; <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$structure</td><td>php array with a valid structure to be loaded to the dataset. </td></tr>
  </table>
  </dd>
</dl>
</li>
</ul>

</div>
</div>
<a id="ab5284dcb4e9807fb12613615eb1b21fd" name="ab5284dcb4e9807fb12613615eb1b21fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5284dcb4e9807fb12613615eb1b21fd">&#9670;&#160;</a></span>from_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">phpunit_dataset::from_file </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$fullpath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?string&#160;</td>
          <td class="paramname"><em>$table</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load information from one file (XML, CSV) to the dataset. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$fullpath</td><td>full path to CSV or XML file to load. </td></tr>
    <tr><td class="paramtype">string&#160;|&#160;null</td><td class="paramname">$table</td><td>name of the table which the file belongs to (only for CSV files). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a275e5c6bc34dfd07c80a88cf595008d0" name="a275e5c6bc34dfd07c80a88cf595008d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a275e5c6bc34dfd07c80a88cf595008d0">&#9670;&#160;</a></span>from_files()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">phpunit_dataset::from_files </td>
          <td>(</td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$fullpaths</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load information from multiple files (XML, CSV) to the dataset. </p>
<p>This method accepts an array of full paths to CSV or XML files to be loaded into the dataset. For CSV files, the name of the table which the file belongs to needs to be specified. Example:</p>
<p>$fullpaths = [ '/path/to/users.xml', 'course' =&gt; '/path/to/courses.csv', ];</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$fullpaths</td><td>full paths to CSV or XML files to load. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a90eb6a0c77013a94ecbe7d21ed14e905" name="a90eb6a0c77013a94ecbe7d21ed14e905"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90eb6a0c77013a94ecbe7d21ed14e905">&#9670;&#160;</a></span>from_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">phpunit_dataset::from_string </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$content</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?string&#160;</td>
          <td class="paramname"><em>$table</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load information from a string (XML, CSV) to the dataset. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$content</td><td>contents (CSV or XML) to load. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$type</td><td>format of the content to be loaded (csv or xml). </td></tr>
    <tr><td class="paramtype">string&#160;|&#160;null</td><td class="paramname">$table</td><td>name of the table which the file belongs to (only for CSV files). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a86f80c87e4c0a86a415a91ef84a3f8ad" name="a86f80c87e4c0a86a415a91ef84a3f8ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86f80c87e4c0a86a415a91ef84a3f8ad">&#9670;&#160;</a></span>get_rows()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">phpunit_dataset::get_rows </td>
          <td>(</td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$filter</em> = <code>[]</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the rows, for a given table, that the dataset holds. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string[]</td><td class="paramname">$filter</td><td>Tables to return rows. If not specified, all tables are processed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>tables as keys with rows on each as sub array. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a497bbfac4be1da03eff49a4fc2114a3c" name="a497bbfac4be1da03eff49a4fc2114a3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a497bbfac4be1da03eff49a4fc2114a3c">&#9670;&#160;</a></span>load_csv()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">phpunit_dataset::load_csv </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$content</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$tablename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given a CSV content, process and load it as a table into the dataset. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$content</td><td>CSV content to be loaded (only one table). </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$tablename</td><td>Name of the table the content belongs to. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a08316a6ce38cd99451917402e49f6989" name="a08316a6ce38cd99451917402e49f6989"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08316a6ce38cd99451917402e49f6989">&#9670;&#160;</a></span>load_xml()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">phpunit_dataset::load_xml </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$content</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given a XML content, process and load it as tables into the dataset. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$content</td><td>XML content to be loaded (can be multi-table). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab39367e7c4d700350f04bda21d2274e2" name="ab39367e7c4d700350f04bda21d2274e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab39367e7c4d700350f04bda21d2274e2">&#9670;&#160;</a></span>to_database()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">phpunit_dataset::to_database </td>
          <td>(</td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$filter</em> = <code>[]</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send all the information to the dataset to the database. </p>
<p>This method gets all the information loaded in the dataset, using the from_xxx() methods and sends it to the database; table and column names must match.</p>
<p>Note that, if the information to be sent to database contains sequence columns (usually 'id') then those values will be preserved (performing an import and adjusting sequences later). Else normal inserts will happen and sequence (auto-increment) columns will be fed automatically.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string[]</td><td class="paramname">$filter</td><td>Tables to be sent to database. If not specified, all tables are processed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>lib/phpunit/classes/phpunit_dataset.php</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Jun 11 2023 03:26:14 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>
