<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: convert_helper Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;4.2</span>
   </div>
   <div id="projectbrief">Moodle 4.2.1+ (Build: 20230707) (2ef6a3b9b9e)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="../../d4/df9/classconvert__helper-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">convert_helper Class Reference<div class="ingroups"><a class="el" href="../../d0/de1/group__core.html">core</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Provides various functionality via its static methods.  
 <a href="../../de/dc8/classconvert__helper.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a3c71d039db5a9ffe1ba6d4858ae7ef94"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dc8/classconvert__helper.html#a3c71d039db5a9ffe1ba6d4858ae7ef94">available_converters</a> ($restore=true)</td></tr>
<tr class="memdesc:a3c71d039db5a9ffe1ba6d4858ae7ef94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the list of all available converters and loads their classes.  <br /></td></tr>
<tr class="separator:a3c71d039db5a9ffe1ba6d4858ae7ef94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f987432dbcccdaa955bc3b69c6598c1"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dc8/classconvert__helper.html#a2f987432dbcccdaa955bc3b69c6598c1">detect_moodle2_format</a> ($tempdir)</td></tr>
<tr class="memdesc:a2f987432dbcccdaa955bc3b69c6598c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detects if the given folder contains an unpacked moodle2 backup.  <br /></td></tr>
<tr class="separator:a2f987432dbcccdaa955bc3b69c6598c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7fffb9765357a26c852c2d78e2eb55b"><td class="memItemLeft" align="right" valign="top"><a id="aa7fffb9765357a26c852c2d78e2eb55b" name="aa7fffb9765357a26c852c2d78e2eb55b"></a>
static&#160;</td><td class="memItemRight" valign="bottom"><b>export_converter_dependencies</b> ($converter, $dependency)</td></tr>
<tr class="separator:aa7fffb9765357a26c852c2d78e2eb55b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae49a3da1eb916ab8e6ef7b7809c0462a"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dc8/classconvert__helper.html#ae49a3da1eb916ab8e6ef7b7809c0462a">generate_id</a> ($entropy)</td></tr>
<tr class="separator:ae49a3da1eb916ab8e6ef7b7809c0462a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af98a782657cf8e06b4e81194b27818ea"><td class="memItemLeft" align="right" valign="top"><a id="af98a782657cf8e06b4e81194b27818ea" name="af98a782657cf8e06b4e81194b27818ea"></a>
static&#160;</td><td class="memItemRight" valign="bottom"><b>get_inforef</b> ($contextid)</td></tr>
<tr class="separator:af98a782657cf8e06b4e81194b27818ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af414099fccb805294958f64145682758"><td class="memItemLeft" align="right" valign="top"><a id="af414099fccb805294958f64145682758" name="af414099fccb805294958f64145682758"></a>
static&#160;</td><td class="memItemRight" valign="bottom"><b>set_inforef</b> ($contextid)</td></tr>
<tr class="memdesc:af414099fccb805294958f64145682758"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inserts an inforef into the conversion temp table. <br /></td></tr>
<tr class="separator:af414099fccb805294958f64145682758"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74898d40f3a7671a1b11fc3089cb2a0b"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dc8/classconvert__helper.html#a74898d40f3a7671a1b11fc3089cb2a0b">to_moodle2_format</a> ($tempdir, $format=null, $logger=null)</td></tr>
<tr class="memdesc:a74898d40f3a7671a1b11fc3089cb2a0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts the given directory with the backup into moodle2 format.  <br /></td></tr>
<tr class="separator:a74898d40f3a7671a1b11fc3089cb2a0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-static-methods" name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr class="memitem:afae5062af603b1214dd5e9a16f7b2eef"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dc8/classconvert__helper.html#afae5062af603b1214dd5e9a16f7b2eef">choose_conversion_path</a> ($format, array $descriptions)</td></tr>
<tr class="memdesc:afae5062af603b1214dd5e9a16f7b2eef"><td class="mdescLeft">&#160;</td><td class="mdescRight">end of public API //////////////////////////////////////////////////////  <br /></td></tr>
<tr class="separator:afae5062af603b1214dd5e9a16f7b2eef"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Provides various functionality via its static methods. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a3c71d039db5a9ffe1ba6d4858ae7ef94" name="a3c71d039db5a9ffe1ba6d4858ae7ef94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c71d039db5a9ffe1ba6d4858ae7ef94">&#9670;&#160;</a></span>available_converters()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static convert_helper::available_converters </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$restore</em> = <code>true</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the list of all available converters and loads their classes. </p>
<p>Converter must be installed as a directory in backup/converter/ and its method is_available() must return true to get to the list.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d7/d9b/classbase__converter.html#adafb849edcee6b9bfc304ff1948ab791" title="public static methods //////////////////////////////////////////////////">base_converter::is_available()</a> </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>of strings </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afae5062af603b1214dd5e9a16f7b2eef" name="afae5062af603b1214dd5e9a16f7b2eef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afae5062af603b1214dd5e9a16f7b2eef">&#9670;&#160;</a></span>choose_conversion_path()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static convert_helper::choose_conversion_path </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$descriptions</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>end of public API ////////////////////////////////////////////////////// </p>
<p>Choose the best conversion path for the given format</p>
<p>Given the source format and the list of available converters and their properties, this methods picks the most effective way how to convert the source format into the target moodle2 format. The method returns a list of converters that should be called, in order.</p>
<p>This implementation uses Dijkstra's algorithm to find the shortest way through the oriented graph.</p>
<dl class="section see"><dt>See also</dt><dd><a href="http://en.wikipedia.org/wiki/Dijkstra's_algorithm">http://en.wikipedia.org/wiki/Dijkstra's_algorithm</a> </dd></dl>
<dl class="section author"><dt>Author</dt><dd>David Mudrak <a href="#" onclick="location.href='mai'+'lto:'+'dav'+'id'+'@mo'+'od'+'le.'+'co'+'m'; return false;">david<span class="obfuscator">.nosp@m.</span>@moo<span class="obfuscator">.nosp@m.</span>dle.c<span class="obfuscator">.nosp@m.</span>om</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$format</td><td>the source backup format, one of backup::FORMAT_xxx </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$descriptions</td><td>list of <a class="el" href="../../d7/d9b/classbase__converter.html#a08ccb41bb4755a0239a18399dba8d7cc">base_converter::description()</a> indexed by the converter name </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>ordered list of converter names to call (may be empty if not reachable) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2f987432dbcccdaa955bc3b69c6598c1" name="a2f987432dbcccdaa955bc3b69c6598c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f987432dbcccdaa955bc3b69c6598c1">&#9670;&#160;</a></span>detect_moodle2_format()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static convert_helper::detect_moodle2_format </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$tempdir</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Detects if the given folder contains an unpacked moodle2 backup. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$tempdir</td><td>the name of the backup directory </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">boolean</td><td>true if moodle2 format detected, false otherwise </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae49a3da1eb916ab8e6ef7b7809c0462a" name="ae49a3da1eb916ab8e6ef7b7809c0462a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae49a3da1eb916ab8e6ef7b7809c0462a">&#9670;&#160;</a></span>generate_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static convert_helper::generate_id </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$entropy</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$entropy</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>random identifier </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a74898d40f3a7671a1b11fc3089cb2a0b" name="a74898d40f3a7671a1b11fc3089cb2a0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74898d40f3a7671a1b11fc3089cb2a0b">&#9670;&#160;</a></span>to_moodle2_format()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static convert_helper::to_moodle2_format </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$tempdir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$format</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$logger</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Converts the given directory with the backup into moodle2 format. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$tempdir</td><td>The directory to convert </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$format</td><td>The current format, if already detected </td></tr>
    <tr><td class="paramtype"></td><td class="paramname">base_logger|null</td><td>if the conversion should be logged, use this logger </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../da/d61/classconvert__helper__exception.html" title="General convert_helper related exception.">convert_helper_exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>false if unable to find the conversion path, true otherwise </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>backup/util/helper/convert_helper.class.php</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Jul 9 2023 03:34:24 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>
