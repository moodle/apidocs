<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: core\progress\db_updater Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;4.2</span>
   </div>
   <div id="projectbrief">Moodle 4.2.2+ (Build: 20230818) (4488c928597)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d9/d0f/namespacecore.html">core</a></li><li class="navelem"><a class="el" href="../../d3/da6/namespacecore_1_1progress.html">progress</a></li><li class="navelem"><a class="el" href="../../d4/da0/classcore_1_1progress_1_1db__updater.html">db_updater</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="../../d9/de4/classcore_1_1progress_1_1db__updater-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">core\progress\db_updater Class Reference<div class="ingroups"><a class="el" href="../../d0/de1/group__core.html">core</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Progress handler that updates a database table with the progress.  
 <a href="../../d4/da0/classcore_1_1progress_1_1db__updater.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for core\progress\db_updater:</div>
<div class="dyncontent">
 <div class="center">
  <img src="../../d4/da0/classcore_1_1progress_1_1db__updater.png" usemap="#core_5Cprogress_5Cdb_5Fupdater_map" alt=""/>
  <map id="core_5Cprogress_5Cdb_5Fupdater_map" name="core_5Cprogress_5Cdb_5Fupdater_map">
<area href="../../db/df4/classcore_1_1progress_1_1base.html" alt="core\progress\base" shape="rect" coords="0,0,160,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae2fb07f6744005c6c59ada59e4c2ea90"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da0/classcore_1_1progress_1_1db__updater.html#ae2fb07f6744005c6c59ada59e4c2ea90">__construct</a> ($recordid, $table, $field, $interval=5)</td></tr>
<tr class="memdesc:ae2fb07f6744005c6c59ada59e4c2ea90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs the progress reporter.  <br /></td></tr>
<tr class="separator:ae2fb07f6744005c6c59ada59e4c2ea90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaadbde0360f16db5b4b608305ae07484"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/df4/classcore_1_1progress_1_1base.html#aaadbde0360f16db5b4b608305ae07484">end_progress</a> ()</td></tr>
<tr class="memdesc:aaadbde0360f16db5b4b608305ae07484"><td class="mdescLeft">&#160;</td><td class="mdescRight">Marks the end of an operation that will display progress.  <br /></td></tr>
<tr class="separator:aaadbde0360f16db5b4b608305ae07484"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a199545b294f2c5e676399bd05feba471"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/df4/classcore_1_1progress_1_1base.html#a199545b294f2c5e676399bd05feba471">get_current_description</a> ()</td></tr>
<tr class="separator:a199545b294f2c5e676399bd05feba471"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b01102d3425f590b2ec1969b22d2366"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/df4/classcore_1_1progress_1_1base.html#a2b01102d3425f590b2ec1969b22d2366">get_current_max</a> ()</td></tr>
<tr class="memdesc:a2b01102d3425f590b2ec1969b22d2366"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks max value of current progress section.  <br /></td></tr>
<tr class="separator:a2b01102d3425f590b2ec1969b22d2366"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af11103551c6246276dad6945933f9d45"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/df4/classcore_1_1progress_1_1base.html#af11103551c6246276dad6945933f9d45">get_progress_count</a> ()</td></tr>
<tr class="memdesc:af11103551c6246276dad6945933f9d45"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtains current indeterminate progress in a way suitable for adding to the progress display.  <br /></td></tr>
<tr class="separator:af11103551c6246276dad6945933f9d45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5e1d00b505b65bbabe3fb94ef292e8c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/df4/classcore_1_1progress_1_1base.html#ab5e1d00b505b65bbabe3fb94ef292e8c">get_progress_proportion_range</a> ()</td></tr>
<tr class="memdesc:ab5e1d00b505b65bbabe3fb94ef292e8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtains current progress in a way suitable for drawing a progress bar.  <br /></td></tr>
<tr class="separator:ab5e1d00b505b65bbabe3fb94ef292e8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5822f3231860b07c9d1d60738abbca0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/df4/classcore_1_1progress_1_1base.html#ac5822f3231860b07c9d1d60738abbca0">increment_progress</a> ($incby=1)</td></tr>
<tr class="memdesc:ac5822f3231860b07c9d1d60738abbca0"><td class="mdescLeft">&#160;</td><td class="mdescRight">An alternative to calling progress.  <br /></td></tr>
<tr class="separator:ac5822f3231860b07c9d1d60738abbca0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82b5771891931af061803532d72eef8e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/df4/classcore_1_1progress_1_1base.html#a82b5771891931af061803532d72eef8e">is_in_progress_section</a> ()</td></tr>
<tr class="separator:a82b5771891931af061803532d72eef8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70c5a4613720a858b831985b4e2da2b1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/df4/classcore_1_1progress_1_1base.html#a70c5a4613720a858b831985b4e2da2b1">progress</a> ($progress=self::INDETERMINATE)</td></tr>
<tr class="memdesc:a70c5a4613720a858b831985b4e2da2b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates that progress has occurred.  <br /></td></tr>
<tr class="separator:a70c5a4613720a858b831985b4e2da2b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2592d8c342e8badcd3ade4fcd5ee78aa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/df4/classcore_1_1progress_1_1base.html#a2592d8c342e8badcd3ade4fcd5ee78aa">start_progress</a> ($description, $max=self::INDETERMINATE, $parentcount=1)</td></tr>
<tr class="memdesc:a2592d8c342e8badcd3ade4fcd5ee78aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Marks the start of an operation that will display progress.  <br /></td></tr>
<tr class="separator:a2592d8c342e8badcd3ade4fcd5ee78aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a294054d4be14968bfdb2734203c199bc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da0/classcore_1_1progress_1_1db__updater.html#a294054d4be14968bfdb2734203c199bc">update_progress</a> ()</td></tr>
<tr class="memdesc:a294054d4be14968bfdb2734203c199bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the progress in the database.  <br /></td></tr>
<tr class="separator:a294054d4be14968bfdb2734203c199bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a7403a293b53efebb87c8a2c7a868f284"><td class="memItemLeft" align="right" valign="top"><a id="a7403a293b53efebb87c8a2c7a868f284" name="a7403a293b53efebb87c8a2c7a868f284"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>INDETERMINATE</b> = -1</td></tr>
<tr class="memdesc:a7403a293b53efebb87c8a2c7a868f284"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constant indicating that the number of progress calls is unknown. <br /></td></tr>
<tr class="separator:a7403a293b53efebb87c8a2c7a868f284"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15a09c44a83a6cce40d84ac6ce072e82"><td class="memItemLeft" align="right" valign="top">int const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/df4/classcore_1_1progress_1_1base.html#a15a09c44a83a6cce40d84ac6ce072e82">TIME_LIMIT_WITHOUT_PROGRESS</a> = 3600</td></tr>
<tr class="memdesc:a15a09c44a83a6cce40d84ac6ce072e82"><td class="mdescLeft">&#160;</td><td class="mdescRight">This value is set rather high to ensure there are no regressions from previous behaviour.  <br /></td></tr>
<tr class="separator:a15a09c44a83a6cce40d84ac6ce072e82"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a173a4e71a048f9d73858006c58e42682"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/df4/classcore_1_1progress_1_1base.html#a173a4e71a048f9d73858006c58e42682">get_time</a> ()</td></tr>
<tr class="memdesc:a173a4e71a048f9d73858006c58e42682"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets time (this is provided so that unit tests can override it).  <br /></td></tr>
<tr class="separator:a173a4e71a048f9d73858006c58e42682"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:ac7fe0c16557b372d95a4ebed6692305b"><td class="memItemLeft" align="right" valign="top"><a id="ac7fe0c16557b372d95a4ebed6692305b" name="ac7fe0c16557b372d95a4ebed6692305b"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>$count</b></td></tr>
<tr class="memdesc:ac7fe0c16557b372d95a4ebed6692305b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of progress calls (restricted to ~ 1/second). <br /></td></tr>
<tr class="separator:ac7fe0c16557b372d95a4ebed6692305b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a457ee5ac417a45d1db180dbdf5bd1901"><td class="memItemLeft" align="right" valign="top"><a id="a457ee5ac417a45d1db180dbdf5bd1901" name="a457ee5ac417a45d1db180dbdf5bd1901"></a>
array&#160;</td><td class="memItemRight" valign="bottom"><b>$currents</b> = array()</td></tr>
<tr class="memdesc:a457ee5ac417a45d1db180dbdf5bd1901"><td class="mdescLeft">&#160;</td><td class="mdescRight">Array of current progress values. <br /></td></tr>
<tr class="separator:a457ee5ac417a45d1db180dbdf5bd1901"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42a5bba0c59a8fac37d2656da141ecd6"><td class="memItemLeft" align="right" valign="top"><a id="a42a5bba0c59a8fac37d2656da141ecd6" name="a42a5bba0c59a8fac37d2656da141ecd6"></a>
array&#160;</td><td class="memItemRight" valign="bottom"><b>$descriptions</b> = array()</td></tr>
<tr class="memdesc:a42a5bba0c59a8fac37d2656da141ecd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Array of progress descriptions for each stack level. <br /></td></tr>
<tr class="separator:a42a5bba0c59a8fac37d2656da141ecd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bcbca1fdb792ff75f64510c33ffdebf"><td class="memItemLeft" align="right" valign="top"><a id="a9bcbca1fdb792ff75f64510c33ffdebf" name="a9bcbca1fdb792ff75f64510c33ffdebf"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>$field</b> = ''</td></tr>
<tr class="memdesc:a9bcbca1fdb792ff75f64510c33ffdebf"><td class="mdescLeft">&#160;</td><td class="mdescRight">The table field to update with the progress. <br /></td></tr>
<tr class="separator:a9bcbca1fdb792ff75f64510c33ffdebf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a860dc232b4dc67f9bcf63b87a5cd22a5"><td class="memItemLeft" align="right" valign="top">integer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da0/classcore_1_1progress_1_1db__updater.html#a860dc232b4dc67f9bcf63b87a5cd22a5">$interval</a> = 5</td></tr>
<tr class="memdesc:a860dc232b4dc67f9bcf63b87a5cd22a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">The maximum frequency in seconds to update the database (default 5 seconds).  <br /></td></tr>
<tr class="separator:a860dc232b4dc67f9bcf63b87a5cd22a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadb6a146a8c31045caefa2497c3124a4"><td class="memItemLeft" align="right" valign="top"><a id="aadb6a146a8c31045caefa2497c3124a4" name="aadb6a146a8c31045caefa2497c3124a4"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>$lastprogresstime</b></td></tr>
<tr class="memdesc:aadb6a146a8c31045caefa2497c3124a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Time of last progress call. <br /></td></tr>
<tr class="separator:aadb6a146a8c31045caefa2497c3124a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61e42159baa296560a255aa62057d9ea"><td class="memItemLeft" align="right" valign="top"><a id="a61e42159baa296560a255aa62057d9ea" name="a61e42159baa296560a255aa62057d9ea"></a>
array&#160;</td><td class="memItemRight" valign="bottom"><b>$maxes</b> = array()</td></tr>
<tr class="memdesc:a61e42159baa296560a255aa62057d9ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Array of maximum progress values for each stack level. <br /></td></tr>
<tr class="separator:a61e42159baa296560a255aa62057d9ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa283e47212d53728d945de5ae0dfd92c"><td class="memItemLeft" align="right" valign="top"><a id="aa283e47212d53728d945de5ae0dfd92c" name="aa283e47212d53728d945de5ae0dfd92c"></a>
integer&#160;</td><td class="memItemRight" valign="bottom"><b>$nextupdate</b> = 0</td></tr>
<tr class="memdesc:aa283e47212d53728d945de5ae0dfd92c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The timestamp of when the next progress update to the database will be. <br /></td></tr>
<tr class="separator:aa283e47212d53728d945de5ae0dfd92c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6413bfc6f41022aed99cb9956febb869"><td class="memItemLeft" align="right" valign="top"><a id="a6413bfc6f41022aed99cb9956febb869" name="a6413bfc6f41022aed99cb9956febb869"></a>
int[]&#160;</td><td class="memItemRight" valign="bottom"><b>$parentcounts</b> = array()</td></tr>
<tr class="memdesc:a6413bfc6f41022aed99cb9956febb869"><td class="mdescLeft">&#160;</td><td class="mdescRight">Array of counts within parent progress entry (ignored for first) <br /></td></tr>
<tr class="separator:a6413bfc6f41022aed99cb9956febb869"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4ea997f8df260e54dca40ff63afe5e0"><td class="memItemLeft" align="right" valign="top"><a id="ac4ea997f8df260e54dca40ff63afe5e0" name="ac4ea997f8df260e54dca40ff63afe5e0"></a>
integer&#160;</td><td class="memItemRight" valign="bottom"><b>$recordid</b> = 0</td></tr>
<tr class="memdesc:ac4ea997f8df260e54dca40ff63afe5e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">The primary key of the database record to update. <br /></td></tr>
<tr class="separator:ac4ea997f8df260e54dca40ff63afe5e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8745ba75197619784b2b5716f2a5ac1"><td class="memItemLeft" align="right" valign="top"><a id="ad8745ba75197619784b2b5716f2a5ac1" name="ad8745ba75197619784b2b5716f2a5ac1"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>$table</b> = ''</td></tr>
<tr class="memdesc:ad8745ba75197619784b2b5716f2a5ac1"><td class="mdescLeft">&#160;</td><td class="mdescRight">The database table to insert the progress updates into. <br /></td></tr>
<tr class="separator:ad8745ba75197619784b2b5716f2a5ac1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Progress handler that updates a database table with the progress. </p>
<dl class="section copyright"><dt>Copyright</dt><dd>2018 Matt Porritt <a href="#" onclick="location.href='mai'+'lto:'+'mat'+'tp'+'@ca'+'ta'+'lys'+'t-'+'au.'+'ne'+'t'; return false;">mattp<span class="obfuscator">.nosp@m.</span>@cat<span class="obfuscator">.nosp@m.</span>alyst<span class="obfuscator">.nosp@m.</span>-au.<span class="obfuscator">.nosp@m.</span>net</a> </dd></dl>
<dl class="section user"><dt>License</dt><dd><a href="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ae2fb07f6744005c6c59ada59e4c2ea90" name="ae2fb07f6744005c6c59ada59e4c2ea90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2fb07f6744005c6c59ada59e4c2ea90">&#9670;&#160;</a></span>__construct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core\progress\db_updater::__construct </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$recordid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$interval</em> = <code>5</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructs the progress reporter. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$recordid</td><td>The primary key of the database record to update. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$table</td><td>The databse table to insert the progress updates into. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$field</td><td>The table field to update with the progress. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$interval</td><td>The maximum frequency in seconds to update the database (default 5 seconds). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aaadbde0360f16db5b4b608305ae07484" name="aaadbde0360f16db5b4b608305ae07484"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaadbde0360f16db5b4b608305ae07484">&#9670;&#160;</a></span>end_progress()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core\progress\base::end_progress </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Marks the end of an operation that will display progress. </p>
<p>This must be paired with each <a class="el" href="../../">start_progress</a> call.</p>
<p>If there is a parent progress section, its progress will be increased automatically to reflect the end of the child section.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../da/d34/classcoding__exception.html" title="Exception indicating programming error, must be fixed by a programer.">coding_exception</a></td><td>If progress hasn't been started </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a199545b294f2c5e676399bd05feba471" name="a199545b294f2c5e676399bd05feba471"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a199545b294f2c5e676399bd05feba471">&#9670;&#160;</a></span>get_current_description()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core\progress\base::get_current_description </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../da/d34/classcoding__exception.html" title="Exception indicating programming error, must be fixed by a programer.">coding_exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>Current progress section description </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2b01102d3425f590b2ec1969b22d2366" name="a2b01102d3425f590b2ec1969b22d2366"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b01102d3425f590b2ec1969b22d2366">&#9670;&#160;</a></span>get_current_max()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core\progress\base::get_current_max </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks max value of current progress section. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td>Current max value - may be <a class="el" href="../../db/df4/classcore_1_1progress_1_1base.html#a7403a293b53efebb87c8a2c7a868f284">core::progress::base::INDETERMINATE</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../da/d34/classcoding__exception.html" title="Exception indicating programming error, must be fixed by a programer.">coding_exception</a></td><td>If not in a progress section </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af11103551c6246276dad6945933f9d45" name="af11103551c6246276dad6945933f9d45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af11103551c6246276dad6945933f9d45">&#9670;&#160;</a></span>get_progress_count()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core\progress\base::get_progress_count </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Obtains current indeterminate progress in a way suitable for adding to the progress display. </p>
<p>This returns the number of indeterminate calls (at any level) during the lifetime of this progress reporter, whether or not there is a current indeterminate step. (The number will not be ridiculously high because progress calls are limited to one per second.)</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td>Number of indeterminate progress calls </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab5e1d00b505b65bbabe3fb94ef292e8c" name="ab5e1d00b505b65bbabe3fb94ef292e8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5e1d00b505b65bbabe3fb94ef292e8c">&#9670;&#160;</a></span>get_progress_proportion_range()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core\progress\base::get_progress_proportion_range </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Obtains current progress in a way suitable for drawing a progress bar. </p>
<p>Progress is returned as a minimum and maximum value. If there is no indeterminate progress, these values will be identical. If there is intermediate progress, these values can be different. (For example, if the top level progress sections is indeterminate, then the values will always be 0.0 and 1.0.)</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>Minimum and maximum possible progress proportions </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a173a4e71a048f9d73858006c58e42682" name="a173a4e71a048f9d73858006c58e42682"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a173a4e71a048f9d73858006c58e42682">&#9670;&#160;</a></span>get_time()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core\progress\base::get_time </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets time (this is provided so that unit tests can override it). </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td>Current system time </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac5822f3231860b07c9d1d60738abbca0" name="ac5822f3231860b07c9d1d60738abbca0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5822f3231860b07c9d1d60738abbca0">&#9670;&#160;</a></span>increment_progress()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int core\progress\base::increment_progress </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$incby</em> = <code>1</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>An alternative to calling progress. </p>
<p>This keeps track of the number of items done internally. Call this method with no parameters to increment the internal counter by one or you can use the $incby parameter to specify a positive change in progress. The internal progress counter should not exceed $max as passed to <a class="el" href="../../">start_progress</a> for this section.</p>
<p>If you called <a class="el" href="../../">start_progress</a> with parameter INDETERMINATE then you cannot call this method.</p>
<p>$incby The positive change to apply to the internal progress counter. Defaults to 1. </p>

</div>
</div>
<a id="a82b5771891931af061803532d72eef8e" name="a82b5771891931af061803532d72eef8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82b5771891931af061803532d72eef8e">&#9670;&#160;</a></span>is_in_progress_section()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core\progress\base::is_in_progress_section </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>True if currently inside a progress section </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a70c5a4613720a858b831985b4e2da2b1" name="a70c5a4613720a858b831985b4e2da2b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70c5a4613720a858b831985b4e2da2b1">&#9670;&#160;</a></span>progress()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core\progress\base::progress </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$progress</em> = <code>self::INDETERMINATE</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Indicates that progress has occurred. </p>
<p>The progress value should indicate the total progress so far, from 0 to the value supplied for $max (inclusive) in <a class="el" href="../../">start_progress</a>.</p>
<p>You do not need to call this function for every value. It is OK to skip values. It is also OK to call this function as often as desired; it doesn't update the display if called more than once per second.</p>
<p>It must be INDETERMINATE if <a class="el" href="../../">start_progress</a> was called with $max set to INDETERMINATE. Otherwise it must not be indeterminate.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$progress</td><td>Progress so far </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../da/d34/classcoding__exception.html" title="Exception indicating programming error, must be fixed by a programer.">coding_exception</a></td><td>If progress value is invalid </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2592d8c342e8badcd3ade4fcd5ee78aa" name="a2592d8c342e8badcd3ade4fcd5ee78aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2592d8c342e8badcd3ade4fcd5ee78aa">&#9670;&#160;</a></span>start_progress()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core\progress\base::start_progress </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$description</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$max</em> = <code>self::INDETERMINATE</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$parentcount</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Marks the start of an operation that will display progress. </p>
<p>This can be called multiple times for nested progress sections. It must be paired with calls to end_progress.</p>
<p>The progress maximum may be <a class="el" href="../../">self::INDETERMINATE</a> if the current operation has an unknown number of steps. (This is default.)</p>
<p>Calling this function will always result in a new display, so this should not be called exceedingly frequently.</p>
<p>When it is complete by calling <a class="el" href="../../">end_progress()</a>, each <a class="el" href="../../">start_progress</a> section automatically adds progress to its parent, as defined by $parentcount.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$description</td><td>Description to display </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$max</td><td>Maximum value of progress for this section </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$parentcount</td><td>How many progress points this section counts for </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../da/d34/classcoding__exception.html" title="Exception indicating programming error, must be fixed by a programer.">coding_exception</a></td><td>If max is invalid </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a294054d4be14968bfdb2734203c199bc" name="a294054d4be14968bfdb2734203c199bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a294054d4be14968bfdb2734203c199bc">&#9670;&#160;</a></span>update_progress()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core\progress\db_updater::update_progress </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the progress in the database. </p>
<p>Database update frequency is set by $interval.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../db/df4/classcore_1_1progress_1_1base.html#a637b8ca363b6a85428d812493720d624" title="Called whenever new progress should be displayed.">core::progress::base::update_progress()</a> </dd></dl>

<p>Reimplemented from <a class="el" href="../../db/df4/classcore_1_1progress_1_1base.html#a637b8ca363b6a85428d812493720d624">core\progress\base</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a860dc232b4dc67f9bcf63b87a5cd22a5" name="a860dc232b4dc67f9bcf63b87a5cd22a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a860dc232b4dc67f9bcf63b87a5cd22a5">&#9670;&#160;</a></span>$interval</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer core\progress\db_updater::$interval = 5</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The maximum frequency in seconds to update the database (default 5 seconds). </p>
<p>Lower values will increase database calls. </p>

</div>
</div>
<a id="a15a09c44a83a6cce40d84ac6ce072e82" name="a15a09c44a83a6cce40d84ac6ce072e82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15a09c44a83a6cce40d84ac6ce072e82">&#9670;&#160;</a></span>TIME_LIMIT_WITHOUT_PROGRESS</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int const core\progress\base::TIME_LIMIT_WITHOUT_PROGRESS = 3600</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This value is set rather high to ensure there are no regressions from previous behaviour. </p>
<p>For testing, it may be useful to set the frontendservertimeout config option to a lower value, such as 180 seconds (default for some commercial products).</p>
<p>The number of seconds that can pass without <a class="el" href="../../">progress()</a> calls. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>lib/classes/progress/db_updater.php</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 20 2023 02:38:12 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>
