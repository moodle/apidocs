<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: HTMLPurifier_Encoder Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;4.2</span>
   </div>
   <div id="projectbrief">Moodle 4.2.3+ (Build: 20231116) (3790c0a8fe2)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="../../d2/de3/class_h_t_m_l_purifier___encoder-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">HTMLPurifier_Encoder Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a4903a5cfecda1c255647e87106cc686b" id="r_a4903a5cfecda1c255647e87106cc686b"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d86/class_h_t_m_l_purifier___encoder.html#a4903a5cfecda1c255647e87106cc686b">cleanUTF8</a> ($str, $force_php=false)</td></tr>
<tr class="memdesc:a4903a5cfecda1c255647e87106cc686b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cleans a UTF-8 string for well-formedness and SGML validity.  <br /></td></tr>
<tr class="separator:a4903a5cfecda1c255647e87106cc686b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48bca7ecbdec1fde428a95fc2ec8fff9" id="r_a48bca7ecbdec1fde428a95fc2ec8fff9"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d86/class_h_t_m_l_purifier___encoder.html#a48bca7ecbdec1fde428a95fc2ec8fff9">convertFromUTF8</a> ($str, $config, $context)</td></tr>
<tr class="memdesc:a48bca7ecbdec1fde428a95fc2ec8fff9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a string from UTF-8 based on configuration.  <br /></td></tr>
<tr class="separator:a48bca7ecbdec1fde428a95fc2ec8fff9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60bc1be93b691bc03b1205103c839f7b" id="r_a60bc1be93b691bc03b1205103c839f7b"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d86/class_h_t_m_l_purifier___encoder.html#a60bc1be93b691bc03b1205103c839f7b">convertToASCIIDumbLossless</a> ($str)</td></tr>
<tr class="memdesc:a60bc1be93b691bc03b1205103c839f7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lossless (character-wise) conversion of HTML to ASCII.  <br /></td></tr>
<tr class="separator:a60bc1be93b691bc03b1205103c839f7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6876fc3fbf0ae1ce1d06bd127fb55886" id="r_a6876fc3fbf0ae1ce1d06bd127fb55886"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d86/class_h_t_m_l_purifier___encoder.html#a6876fc3fbf0ae1ce1d06bd127fb55886">convertToUTF8</a> ($str, $config, $context)</td></tr>
<tr class="memdesc:a6876fc3fbf0ae1ce1d06bd127fb55886"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a string to UTF-8 based on configuration.  <br /></td></tr>
<tr class="separator:a6876fc3fbf0ae1ce1d06bd127fb55886"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a149d8038f81dcd50f70598067b4444d8" id="r_a149d8038f81dcd50f70598067b4444d8"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d86/class_h_t_m_l_purifier___encoder.html#a149d8038f81dcd50f70598067b4444d8">iconv</a> ($in, $out, $text, $max_chunk_size=8000)</td></tr>
<tr class="memdesc:a149d8038f81dcd50f70598067b4444d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">iconv wrapper which mutes errors and works around bugs.  <br /></td></tr>
<tr class="separator:a149d8038f81dcd50f70598067b4444d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9526f4471531a5455e5f0e560349226" id="r_ac9526f4471531a5455e5f0e560349226"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d86/class_h_t_m_l_purifier___encoder.html#ac9526f4471531a5455e5f0e560349226">iconvAvailable</a> ()</td></tr>
<tr class="separator:ac9526f4471531a5455e5f0e560349226"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8daf61530ad6f5219b3a2f2ec6d4de32" id="r_a8daf61530ad6f5219b3a2f2ec6d4de32"><td class="memItemLeft" align="right" valign="top"><a id="a8daf61530ad6f5219b3a2f2ec6d4de32" name="a8daf61530ad6f5219b3a2f2ec6d4de32"></a>
static&#160;</td><td class="memItemRight" valign="bottom"><b>muteErrorHandler</b> ()</td></tr>
<tr class="memdesc:a8daf61530ad6f5219b3a2f2ec6d4de32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Error-handler that mutes errors, alternative to shut-up operator. <br /></td></tr>
<tr class="separator:a8daf61530ad6f5219b3a2f2ec6d4de32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b50502a5abcacf711adb0f3b6bbcfb2" id="r_a7b50502a5abcacf711adb0f3b6bbcfb2"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d86/class_h_t_m_l_purifier___encoder.html#a7b50502a5abcacf711adb0f3b6bbcfb2">testEncodingSupportsASCII</a> ($encoding, $bypass=false)</td></tr>
<tr class="memdesc:a7b50502a5abcacf711adb0f3b6bbcfb2"><td class="mdescLeft">&#160;</td><td class="mdescRight">This expensive function tests whether or not a given character encoding supports ASCII.  <br /></td></tr>
<tr class="separator:a7b50502a5abcacf711adb0f3b6bbcfb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad491b38d38ff9d9cdb6ea7d67a841de2" id="r_ad491b38d38ff9d9cdb6ea7d67a841de2"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d86/class_h_t_m_l_purifier___encoder.html#ad491b38d38ff9d9cdb6ea7d67a841de2">testIconvTruncateBug</a> ()</td></tr>
<tr class="memdesc:ad491b38d38ff9d9cdb6ea7d67a841de2"><td class="mdescLeft">&#160;</td><td class="mdescRight">glibc iconv has a known bug where it doesn't handle the magic //IGNORE stanza correctly.  <br /></td></tr>
<tr class="separator:ad491b38d38ff9d9cdb6ea7d67a841de2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ce3abe9bf916a9ec35014f23255a408" id="r_a1ce3abe9bf916a9ec35014f23255a408"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d86/class_h_t_m_l_purifier___encoder.html#a1ce3abe9bf916a9ec35014f23255a408">unichr</a> ($code)</td></tr>
<tr class="memdesc:a1ce3abe9bf916a9ec35014f23255a408"><td class="mdescLeft">&#160;</td><td class="mdescRight">Translates a Unicode codepoint into its corresponding UTF-8 character.  <br /></td></tr>
<tr class="separator:a1ce3abe9bf916a9ec35014f23255a408"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae177bdf5de75fd487d55fa87568366c8" id="r_ae177bdf5de75fd487d55fa87568366c8"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d86/class_h_t_m_l_purifier___encoder.html#ae177bdf5de75fd487d55fa87568366c8">unsafeIconv</a> ($in, $out, $text)</td></tr>
<tr class="memdesc:ae177bdf5de75fd487d55fa87568366c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">iconv wrapper which mutes errors, but doesn't work around bugs.  <br /></td></tr>
<tr class="separator:ae177bdf5de75fd487d55fa87568366c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:abee6de7ca542a201ad9bd1ff762d4b6d" id="r_abee6de7ca542a201ad9bd1ff762d4b6d"><td class="memItemLeft" align="right" valign="top"><a id="abee6de7ca542a201ad9bd1ff762d4b6d" name="abee6de7ca542a201ad9bd1ff762d4b6d"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>ICONV_OK</b> = 0</td></tr>
<tr class="memdesc:abee6de7ca542a201ad9bd1ff762d4b6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">No bugs detected in iconv. <br /></td></tr>
<tr class="separator:abee6de7ca542a201ad9bd1ff762d4b6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a275b2fb955a479eff7f6a4cdd49fdaf4" id="r_a275b2fb955a479eff7f6a4cdd49fdaf4"><td class="memItemLeft" align="right" valign="top"><a id="a275b2fb955a479eff7f6a4cdd49fdaf4" name="a275b2fb955a479eff7f6a4cdd49fdaf4"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>ICONV_TRUNCATES</b> = 1</td></tr>
<tr class="memdesc:a275b2fb955a479eff7f6a4cdd49fdaf4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iconv truncates output if converting from UTF-8 to another character set with //IGNORE, and a non-encodable character is found. <br /></td></tr>
<tr class="separator:a275b2fb955a479eff7f6a4cdd49fdaf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abba31caaa72f5cd8639d96326af31e4d" id="r_abba31caaa72f5cd8639d96326af31e4d"><td class="memItemLeft" align="right" valign="top"><a id="abba31caaa72f5cd8639d96326af31e4d" name="abba31caaa72f5cd8639d96326af31e4d"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>ICONV_UNUSABLE</b> = 2</td></tr>
<tr class="memdesc:abba31caaa72f5cd8639d96326af31e4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iconv does not support //IGNORE, making it unusable for transcoding purposes. <br /></td></tr>
<tr class="separator:abba31caaa72f5cd8639d96326af31e4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a4903a5cfecda1c255647e87106cc686b" name="a4903a5cfecda1c255647e87106cc686b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4903a5cfecda1c255647e87106cc686b">&#9670;&#160;</a></span>cleanUTF8()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static HTMLPurifier_Encoder::cleanUTF8 </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$force_php</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Cleans a UTF-8 string for well-formedness and SGML validity. </p>
<p>It will parse according to UTF-8 and return a valid UTF8 string, with non-SGML codepoints excluded.</p>
<p>Specifically, it will permit: x{9}::x{A}::x{D}::x{20}-::x{7E}::x{A0}-::x{D7FF}::x{E000}-::x{FFFD}::x{10000}-::x{10FFFF} <a class="el" href="../../d8/d74/class_source.html" title="Handles &lt;atom:source&gt;">Source</a>: <a href="https://www.w3.org/TR/REC-xml/#NT-Char">https://www.w3.org/TR/REC-xml/#NT-Char</a> Arguably this function should be modernized to the <a class="el" href="../../de/d63/class_h_t_m_l5.html">HTML5</a> set of allowed characters: <a href="https://www.w3.org/TR/html5/syntax.html#preprocessing-the-input-stream">https://www.w3.org/TR/html5/syntax.html#preprocessing-the-input-stream</a> which simultaneously expand and restrict the set of allowed characters.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$str</td><td>The string to clean </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$force_php</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Just for reference, the non-SGML code points are 0 to 31 and 127 to 159, inclusive. However, we allow code points 9, 10 and 13, which are the tab, line feed and carriage return respectively. 128 and above the code points map to multibyte UTF-8 representations.</dd>
<dd>
Fallback code adapted from utf8ToUnicode by Henri Sivonen and <a href="#" onclick="location.href='mai'+'lto:'+'hsi'+'vo'+'nen'+'@i'+'ki.'+'fi'; return false;">hsivo<span class="obfuscator">.nosp@m.</span>nen@<span class="obfuscator">.nosp@m.</span>iki.f<span class="obfuscator">.nosp@m.</span>i</a> at <a href="http://iki.fi/hsivonen/php-utf8/">http://iki.fi/hsivonen/php-utf8/</a> under the LGPL license. Notes on what changed are inside, but in general, the original code transformed UTF-8 text into an array of integer Unicode codepoints. Understandably, transforming that back to a string would be somewhat expensive, so the function was modded to directly operate on the string. However, this discourages code reuse, and the logic enumerated here would be useful for any function that needs to be able to understand UTF-8 characters. As of right now, only smart lossless character encoding converters would need that, and I'm probably not going to implement them. </dd></dl>

</div>
</div>
<a id="a48bca7ecbdec1fde428a95fc2ec8fff9" name="a48bca7ecbdec1fde428a95fc2ec8fff9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48bca7ecbdec1fde428a95fc2ec8fff9">&#9670;&#160;</a></span>convertFromUTF8()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static HTMLPurifier_Encoder::convertFromUTF8 </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Converts a string from UTF-8 based on configuration. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$str</td><td>The string to convert </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../d5/d42/class_h_t_m_l_purifier___config.html">HTMLPurifier_Config</a></td><td class="paramname">$config</td><td></td></tr>
    <tr><td class="paramtype"><a class="el" href="../../da/d67/class_h_t_m_l_purifier___context.html">HTMLPurifier_Context</a></td><td class="paramname">$context</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Currently, this is a lossy conversion, with unexpressable characters being omitted. </dd></dl>

</div>
</div>
<a id="a60bc1be93b691bc03b1205103c839f7b" name="a60bc1be93b691bc03b1205103c839f7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60bc1be93b691bc03b1205103c839f7b">&#9670;&#160;</a></span>convertToASCIIDumbLossless()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static HTMLPurifier_Encoder::convertToASCIIDumbLossless </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$str</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Lossless (character-wise) conversion of HTML to ASCII. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$str</td><td>UTF-8 string to be converted to ASCII </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>ASCII encoded string with non-ASCII character entity-ized </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Adapted from MediaWiki, claiming fair use: this is a common algorithm. If you disagree with this license fudgery, implement it yourself. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Uses decimal numeric entities since they are best supported. </dd>
<dd>
This is a DUMB function: it has no concept of keeping character entities that the projected character encoding can allow. We could possibly implement a smart version but that would require it to also know which Unicode codepoints the charset supported (not an easy task). </dd>
<dd>
Sort of with <a class="el" href="../../da/d86/class_h_t_m_l_purifier___encoder.html#a4903a5cfecda1c255647e87106cc686b" title="Cleans a UTF-8 string for well-formedness and SGML validity.">cleanUTF8()</a> but it assumes that $str is well-formed UTF-8 </dd></dl>

</div>
</div>
<a id="a6876fc3fbf0ae1ce1d06bd127fb55886" name="a6876fc3fbf0ae1ce1d06bd127fb55886"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6876fc3fbf0ae1ce1d06bd127fb55886">&#9670;&#160;</a></span>convertToUTF8()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static HTMLPurifier_Encoder::convertToUTF8 </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert a string to UTF-8 based on configuration. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$str</td><td>The string to convert </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../d5/d42/class_h_t_m_l_purifier___config.html">HTMLPurifier_Config</a></td><td class="paramname">$config</td><td></td></tr>
    <tr><td class="paramtype"><a class="el" href="../../da/d67/class_h_t_m_l_purifier___context.html">HTMLPurifier_Context</a></td><td class="paramname">$context</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a149d8038f81dcd50f70598067b4444d8" name="a149d8038f81dcd50f70598067b4444d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a149d8038f81dcd50f70598067b4444d8">&#9670;&#160;</a></span>iconv()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static HTMLPurifier_Encoder::iconv </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$max_chunk_size</em> = <code>8000</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>iconv wrapper which mutes errors and works around bugs. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$in</td><td>Input encoding </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$out</td><td>Output encoding </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$text</td><td>The text to convert </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$max_chunk_size</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac9526f4471531a5455e5f0e560349226" name="ac9526f4471531a5455e5f0e560349226"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9526f4471531a5455e5f0e560349226">&#9670;&#160;</a></span>iconvAvailable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static HTMLPurifier_Encoder::iconvAvailable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7b50502a5abcacf711adb0f3b6bbcfb2" name="a7b50502a5abcacf711adb0f3b6bbcfb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b50502a5abcacf711adb0f3b6bbcfb2">&#9670;&#160;</a></span>testEncodingSupportsASCII()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static HTMLPurifier_Encoder::testEncodingSupportsASCII </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$encoding</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$bypass</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This expensive function tests whether or not a given character encoding supports ASCII. </p>
<p>7/8-bit encodings like Shift_JIS will fail this test, and require special processing. Variable width encodings shouldn't ever fail.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$encoding</td><td>Encoding name to test, as per iconv format </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$bypass</td><td>Whether or not to bypass the precompiled arrays. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Array</td><td>of UTF-8 characters to their corresponding ASCII, which can be used to "undo" any overzealous iconv action. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad491b38d38ff9d9cdb6ea7d67a841de2" name="ad491b38d38ff9d9cdb6ea7d67a841de2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad491b38d38ff9d9cdb6ea7d67a841de2">&#9670;&#160;</a></span>testIconvTruncateBug()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static HTMLPurifier_Encoder::testIconvTruncateBug </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>glibc iconv has a known bug where it doesn't handle the magic //IGNORE stanza correctly. </p>
<p>In particular, rather than ignore characters, it will return an EILSEQ after consuming some number of characters, and expect you to restart iconv as if it were an E2BIG. Old versions of PHP did not respect the errno, and returned the fragment, so as a result you would see iconv mysteriously truncating output. We can work around this by manually chopping our input into segments of about 8000 characters, as long as PHP ignores the error code. If PHP starts paying attention to the error code, iconv becomes unusable.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td>Error code indicating severity of bug. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1ce3abe9bf916a9ec35014f23255a408" name="a1ce3abe9bf916a9ec35014f23255a408"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ce3abe9bf916a9ec35014f23255a408">&#9670;&#160;</a></span>unichr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static HTMLPurifier_Encoder::unichr </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$code</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Translates a Unicode codepoint into its corresponding UTF-8 character. </p>
<dl class="section note"><dt>Note</dt><dd>Based on Feyd's function at <a href="http://forums.devnetwork.net/viewtopic.php?p=191404#191404">http://forums.devnetwork.net/viewtopic.php?p=191404#191404</a>, which is in public domain. </dd>
<dd>
While we're going to do code point parsing anyway, a good optimization would be to refuse to translate code points that are non-SGML characters. However, this could lead to duplication. </dd>
<dd>
This is very similar to the unichr function in maintenance/generate-entity-file.php (although this is superior, due to its sanity checks). </dd></dl>

</div>
</div>
<a id="ae177bdf5de75fd487d55fa87568366c8" name="ae177bdf5de75fd487d55fa87568366c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae177bdf5de75fd487d55fa87568366c8">&#9670;&#160;</a></span>unsafeIconv()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static HTMLPurifier_Encoder::unsafeIconv </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$text</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>iconv wrapper which mutes errors, but doesn't work around bugs. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$in</td><td>Input encoding </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$out</td><td>Output encoding </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$text</td><td>The text to convert </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>lib/htmlpurifier/HTMLPurifier/<b>Encoder.php</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Nov 19 2023 02:38:10 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
