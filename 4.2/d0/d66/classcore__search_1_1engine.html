<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: core_search\engine Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;4.2</span>
   </div>
   <div id="projectbrief">Moodle 4.2.1+ (Build: 20230804) (6f40d9ffd73)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d4/dbc/namespacecore__search.html">core_search</a></li><li class="navelem"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html">engine</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pro-static-attribs">Static Protected Attributes</a> &#124;
<a href="../../d8/d1d/classcore__search_1_1engine-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">core_search\engine Class Reference<div class="ingroups"><a class="el" href="../../dc/da9/group__core__search.html">core_search</a></div></div></div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="../../d9/da0/interface_base.html" title="Base for cache objects.">Base</a> class for search engines.  
 <a href="../../d0/d66/classcore__search_1_1engine.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for core_search\engine:</div>
<div class="dyncontent">
 <div class="center">
  <img src="../../d0/d66/classcore__search_1_1engine.png" usemap="#core_5Fsearch_5Cengine_map" alt=""/>
  <map id="core_5Fsearch_5Cengine_map" name="core_5Fsearch_5Cengine_map">
<area href="../../da/d4e/classsearch__simpledb_1_1engine.html" title="Simple moodle database engine." alt="search_simpledb\engine" shape="rect" coords="0,56,149,80"/>
<area href="../../d9/d9f/classsearch__solr_1_1engine.html" title="Solr engine." alt="search_solr\engine" shape="rect" coords="159,56,308,80"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac3098c4aff608bd83a1997fa1834d120"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#ac3098c4aff608bd83a1997fa1834d120">__construct</a> (bool $alternateconfiguration=false)</td></tr>
<tr class="memdesc:ac3098c4aff608bd83a1997fa1834d120"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialises the search engine configuration.  <br /></td></tr>
<tr class="separator:ac3098c4aff608bd83a1997fa1834d120"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb39369ed3a8e2be2fc85548cddecd64"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#adb39369ed3a8e2be2fc85548cddecd64">add_document</a> ($<a class="el" href="../../d3/d5d/classcore__search_1_1document.html">document</a>, $fileindexing=false)</td></tr>
<tr class="memdesc:adb39369ed3a8e2be2fc85548cddecd64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a document to the search engine.  <br /></td></tr>
<tr class="separator:adb39369ed3a8e2be2fc85548cddecd64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78f0c030c34167bb2dc43aa4ffdf6a6d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#a78f0c030c34167bb2dc43aa4ffdf6a6d">add_document_batch</a> (array $documents, bool $fileindexing=false)</td></tr>
<tr class="memdesc:a78f0c030c34167bb2dc43aa4ffdf6a6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds multiple documents to the search engine.  <br /></td></tr>
<tr class="separator:a78f0c030c34167bb2dc43aa4ffdf6a6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a234db07a50e7da10783e683220444c2d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#a234db07a50e7da10783e683220444c2d">add_documents</a> ($iterator, $searcharea, $options)</td></tr>
<tr class="memdesc:a234db07a50e7da10783e683220444c2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loop through given iterator of search documents and and have the search engine back end add them to the index.  <br /></td></tr>
<tr class="separator:a234db07a50e7da10783e683220444c2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d34aa912ba5ad3b9aa8d4482c98f64b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#a9d34aa912ba5ad3b9aa8d4482c98f64b">area_index_complete</a> ($searcharea, $numdocs=0, $fullindex=false)</td></tr>
<tr class="memdesc:a9d34aa912ba5ad3b9aa8d4482c98f64b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do any area cleanup needed, and do anything to confirm contents.  <br /></td></tr>
<tr class="separator:a9d34aa912ba5ad3b9aa8d4482c98f64b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe9b3a2ce39293f4652eaa82ce11e9df"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#abe9b3a2ce39293f4652eaa82ce11e9df">area_index_starting</a> ($searcharea, $fullindex=false)</td></tr>
<tr class="memdesc:abe9b3a2ce39293f4652eaa82ce11e9df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do anything that may need to be done before an area is indexed.  <br /></td></tr>
<tr class="separator:abe9b3a2ce39293f4652eaa82ce11e9df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b6a38b3536041fb87941a25a7858746"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#a5b6a38b3536041fb87941a25a7858746">check_latest_schema</a> ()</td></tr>
<tr class="memdesc:a5b6a38b3536041fb87941a25a7858746"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks that the schema is the latest version.  <br /></td></tr>
<tr class="separator:a5b6a38b3536041fb87941a25a7858746"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81657a35775d45e16949e1f85d5ace4f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#a81657a35775d45e16949e1f85d5ace4f">clear_query_error</a> ()</td></tr>
<tr class="memdesc:a81657a35775d45e16949e1f85d5ace4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clears the current query error value.  <br /></td></tr>
<tr class="separator:a81657a35775d45e16949e1f85d5ace4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55cd0c711f640fdf047c9baa5e73e400"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#a55cd0c711f640fdf047c9baa5e73e400">delete</a> ($areaid=null)</td></tr>
<tr class="memdesc:a55cd0c711f640fdf047c9baa5e73e400"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete all documents.  <br /></td></tr>
<tr class="separator:a55cd0c711f640fdf047c9baa5e73e400"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a306444949f7163a54f597ca1238af97c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#a306444949f7163a54f597ca1238af97c">delete_index_for_context</a> (int $oldcontextid)</td></tr>
<tr class="memdesc:a306444949f7163a54f597ca1238af97c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes information related to a specific context id.  <br /></td></tr>
<tr class="separator:a306444949f7163a54f597ca1238af97c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a938b221714b16fb9cd166436129a765e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#a938b221714b16fb9cd166436129a765e">delete_index_for_course</a> (int $oldcourseid)</td></tr>
<tr class="memdesc:a938b221714b16fb9cd166436129a765e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes information related to a specific course id.  <br /></td></tr>
<tr class="separator:a938b221714b16fb9cd166436129a765e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5f9e282c3d7b475a6ab16d03e45b3c4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#ac5f9e282c3d7b475a6ab16d03e45b3c4">execute_query</a> ($filters, $accessinfo, $limit=0)</td></tr>
<tr class="memdesc:ac5f9e282c3d7b475a6ab16d03e45b3c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes the query on the engine.  <br /></td></tr>
<tr class="separator:ac5f9e282c3d7b475a6ab16d03e45b3c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d49d307340048f074ff55178d906552"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#a1d49d307340048f074ff55178d906552">file_indexing_enabled</a> ()</td></tr>
<tr class="memdesc:a1d49d307340048f074ff55178d906552"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return true if file indexing is supported and enabled.  <br /></td></tr>
<tr class="separator:a1d49d307340048f074ff55178d906552"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3932e237dccb830eac3a1e1cccc49ca7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#a3932e237dccb830eac3a1e1cccc49ca7">get_batch_max_content</a> ()</td></tr>
<tr class="memdesc:a3932e237dccb830eac3a1e1cccc49ca7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the maximum size of document content to be included in a shared batch (if the document is bigger then it will be sent on its own; batching does not provide a performance improvement for big documents anyway).  <br /></td></tr>
<tr class="separator:a3932e237dccb830eac3a1e1cccc49ca7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff89dd3c8494e413d74d8da936eed21c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#aff89dd3c8494e413d74d8da936eed21c">get_batch_max_documents</a> ()</td></tr>
<tr class="memdesc:aff89dd3c8494e413d74d8da936eed21c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the maximum number of documents to send together in batch mode.  <br /></td></tr>
<tr class="separator:aff89dd3c8494e413d74d8da936eed21c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab995efd89c51efb67d5c17f7ade17187"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#ab995efd89c51efb67d5c17f7ade17187">get_document_classname</a> ()</td></tr>
<tr class="memdesc:ab995efd89c51efb67d5c17f7ade17187"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the document class used by this search engine.  <br /></td></tr>
<tr class="separator:ab995efd89c51efb67d5c17f7ade17187"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ec19dd01edb078cebbf42a097d582bf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#a4ec19dd01edb078cebbf42a097d582bf">get_plugin_name</a> ()</td></tr>
<tr class="memdesc:a4ec19dd01edb078cebbf42a097d582bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the plugin name.  <br /></td></tr>
<tr class="separator:a4ec19dd01edb078cebbf42a097d582bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10e4d6f34a47050e6245415986ae6979"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#a10e4d6f34a47050e6245415986ae6979">get_query_error</a> ()</td></tr>
<tr class="memdesc:a10e4d6f34a47050e6245415986ae6979"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns any error reported by the search engine when executing the provided query.  <br /></td></tr>
<tr class="separator:a10e4d6f34a47050e6245415986ae6979"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac47247dd80bec3472c820d8887b77c40"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#ac47247dd80bec3472c820d8887b77c40">get_query_total_count</a> ()</td></tr>
<tr class="memdesc:ac47247dd80bec3472c820d8887b77c40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the total number of documents available for the most recent call to execute_query.  <br /></td></tr>
<tr class="separator:ac47247dd80bec3472c820d8887b77c40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e70e3bed784dfee17400bd293f8ba85"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#a2e70e3bed784dfee17400bd293f8ba85">get_supported_orders</a> (\context $context)</td></tr>
<tr class="memdesc:a2e70e3bed784dfee17400bd293f8ba85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtain a list of results orders (and names for them) that are supported by this search engine in the given context.  <br /></td></tr>
<tr class="separator:a2e70e3bed784dfee17400bd293f8ba85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d9f7c412fbde2b64845db4d59049758"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#a2d9f7c412fbde2b64845db4d59049758">get_user</a> ($userid)</td></tr>
<tr class="memdesc:a2d9f7c412fbde2b64845db4d59049758"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns user data checking the internal static cache.  <br /></td></tr>
<tr class="separator:a2d9f7c412fbde2b64845db4d59049758"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14d9d6f4f08c9ce30afd39f5e31cc19b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#a14d9d6f4f08c9ce30afd39f5e31cc19b">has_alternate_configuration</a> ()</td></tr>
<tr class="memdesc:a14d9d6f4f08c9ce30afd39f5e31cc19b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the search engine has an alternate configuration.  <br /></td></tr>
<tr class="separator:a14d9d6f4f08c9ce30afd39f5e31cc19b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff048de31fb192865e6609f65493c214"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#aff048de31fb192865e6609f65493c214">index_complete</a> ($numdocs=0, $fullindex=false)</td></tr>
<tr class="memdesc:aff048de31fb192865e6609f65493c214"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run any post indexing operations.  <br /></td></tr>
<tr class="separator:aff048de31fb192865e6609f65493c214"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d90b2511e1fa69b4cb7ed20a833c3d8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#a9d90b2511e1fa69b4cb7ed20a833c3d8">index_starting</a> ($fullindex=false)</td></tr>
<tr class="memdesc:a9d90b2511e1fa69b4cb7ed20a833c3d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run any pre-indexing operations.  <br /></td></tr>
<tr class="separator:a9d90b2511e1fa69b4cb7ed20a833c3d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe026f1679e656208d6a2842cb802e20"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#afe026f1679e656208d6a2842cb802e20">is_installed</a> ()</td></tr>
<tr class="memdesc:afe026f1679e656208d6a2842cb802e20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Does the system satisfy all the requirements.  <br /></td></tr>
<tr class="separator:afe026f1679e656208d6a2842cb802e20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e1d119c0b55f696a5cb9091e3a7b8d2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#a6e1d119c0b55f696a5cb9091e3a7b8d2">is_server_ready</a> ()</td></tr>
<tr class="memdesc:a6e1d119c0b55f696a5cb9091e3a7b8d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is the server ready to use?  <br /></td></tr>
<tr class="separator:a6e1d119c0b55f696a5cb9091e3a7b8d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad35d1ce15ed20d37cb761a18b279f5f1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#ad35d1ce15ed20d37cb761a18b279f5f1">optimize</a> ()</td></tr>
<tr class="memdesc:ad35d1ce15ed20d37cb761a18b279f5f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Optimizes the search engine.  <br /></td></tr>
<tr class="separator:ad35d1ce15ed20d37cb761a18b279f5f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfe1f56b0ab42852fe5916a15b78cdff"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#abfe1f56b0ab42852fe5916a15b78cdff">record_applied_schema_version</a> ($version)</td></tr>
<tr class="memdesc:abfe1f56b0ab42852fe5916a15b78cdff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Usually called by the engine; marks that the schema has been updated.  <br /></td></tr>
<tr class="separator:abfe1f56b0ab42852fe5916a15b78cdff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07744a383f58ece1317bb140954f03a6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#a07744a383f58ece1317bb140954f03a6">skip_schema_check</a> ($skip=true)</td></tr>
<tr class="memdesc:a07744a383f58ece1317bb140954f03a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tells the search engine to skip any time-consuming checks that it might do as part of the is_server_ready function, and only carry out a basic check that it can contact the server.  <br /></td></tr>
<tr class="separator:a07744a383f58ece1317bb140954f03a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7eb7d21cb9242750ca91b8e04d66cca"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#ae7eb7d21cb9242750ca91b8e04d66cca">supports_add_document_batch</a> ()</td></tr>
<tr class="memdesc:ae7eb7d21cb9242750ca91b8e04d66cca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the search engine supports adding documents in a batch.  <br /></td></tr>
<tr class="separator:ae7eb7d21cb9242750ca91b8e04d66cca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfcac166f5550dff691c721415d83816"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#adfcac166f5550dff691c721415d83816">supports_group_filtering</a> ()</td></tr>
<tr class="memdesc:adfcac166f5550dff691c721415d83816"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if this search engine supports groups.  <br /></td></tr>
<tr class="separator:adfcac166f5550dff691c721415d83816"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbc7b72413ebe511fdc2463aa99b57de"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#afbc7b72413ebe511fdc2463aa99b57de">supports_users</a> ()</td></tr>
<tr class="memdesc:afbc7b72413ebe511fdc2463aa99b57de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the search engine supports searching by user.  <br /></td></tr>
<tr class="separator:afbc7b72413ebe511fdc2463aa99b57de"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a4f1b50cf10755a1acf9131022a73a906"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#a4f1b50cf10755a1acf9131022a73a906">clear_users_cache</a> ()</td></tr>
<tr class="memdesc:a4f1b50cf10755a1acf9131022a73a906"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clears the users cache.  <br /></td></tr>
<tr class="separator:a4f1b50cf10755a1acf9131022a73a906"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a2af2b3cc9b49757ff11604ca2f0788c6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#a2af2b3cc9b49757ff11604ca2f0788c6">get_course</a> ($courseid)</td></tr>
<tr class="memdesc:a2af2b3cc9b49757ff11604ca2f0788c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a course instance checking internal caching.  <br /></td></tr>
<tr class="separator:a2af2b3cc9b49757ff11604ca2f0788c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a516c8cab72324476170ec6274eca2b99"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#a516c8cab72324476170ec6274eca2b99">get_search_area</a> ($areaid)</td></tr>
<tr class="memdesc:a516c8cab72324476170ec6274eca2b99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a search instance of the specified area checking internal caching.  <br /></td></tr>
<tr class="separator:a516c8cab72324476170ec6274eca2b99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d7e47c8581d7b3acd802cb8336e679e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#a3d7e47c8581d7b3acd802cb8336e679e">should_skip_schema_check</a> ()</td></tr>
<tr class="memdesc:a3d7e47c8581d7b3acd802cb8336e679e"><td class="mdescLeft">&#160;</td><td class="mdescRight">For use by subclasses.  <br /></td></tr>
<tr class="separator:a3d7e47c8581d7b3acd802cb8336e679e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3241b8695ba90ee12900369e9a4c6a1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#ad3241b8695ba90ee12900369e9a4c6a1">to_document</a> (\<a class="el" href="../../d4/dd1/classcore__search_1_1base.html">core_search\base</a> $searcharea, $docdata)</td></tr>
<tr class="memdesc:ad3241b8695ba90ee12900369e9a4c6a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a document instance prepared to be rendered.  <br /></td></tr>
<tr class="separator:ad3241b8695ba90ee12900369e9a4c6a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4feaed0a38c119d739d35589ddda2a6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#ab4feaed0a38c119d739d35589ddda2a6">update_schema</a> ($oldversion, $newversion)</td></tr>
<tr class="memdesc:ab4feaed0a38c119d739d35589ddda2a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Requests the search engine to upgrade the schema.  <br /></td></tr>
<tr class="separator:ab4feaed0a38c119d739d35589ddda2a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a6d79528042f979f7d5d01c49a81d575e"><td class="memItemLeft" align="right" valign="top"><a id="a6d79528042f979f7d5d01c49a81d575e" name="a6d79528042f979f7d5d01c49a81d575e"></a>
array&#160;</td><td class="memItemRight" valign="bottom"><b>$cachedareas</b> = array()</td></tr>
<tr class="memdesc:a6d79528042f979f7d5d01c49a81d575e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal cache. <br /></td></tr>
<tr class="separator:a6d79528042f979f7d5d01c49a81d575e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a544e966f5122250e05afebe26b47d927"><td class="memItemLeft" align="right" valign="top"><a id="a544e966f5122250e05afebe26b47d927" name="a544e966f5122250e05afebe26b47d927"></a>
array&#160;</td><td class="memItemRight" valign="bottom"><b>$cachedcourses</b> = array()</td></tr>
<tr class="memdesc:a544e966f5122250e05afebe26b47d927"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal cache. <br /></td></tr>
<tr class="separator:a544e966f5122250e05afebe26b47d927"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe27c421db29f8a710dbfcc05c95bf2f"><td class="memItemLeft" align="right" valign="top"><a id="afe27c421db29f8a710dbfcc05c95bf2f" name="afe27c421db29f8a710dbfcc05c95bf2f"></a>
stdClass&#160;</td><td class="memItemRight" valign="bottom"><b>$config</b> = null</td></tr>
<tr class="memdesc:afe27c421db29f8a710dbfcc05c95bf2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The search engine configuration. <br /></td></tr>
<tr class="separator:afe27c421db29f8a710dbfcc05c95bf2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca210dfdf972c1e742100fb768127479"><td class="memItemLeft" align="right" valign="top"><a id="aca210dfdf972c1e742100fb768127479" name="aca210dfdf972c1e742100fb768127479"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>$pluginname</b> = null</td></tr>
<tr class="memdesc:aca210dfdf972c1e742100fb768127479"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frankenstyle plugin name. <br /></td></tr>
<tr class="separator:aca210dfdf972c1e742100fb768127479"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50fef94c1f9ad55b064836ead156ef19"><td class="memItemLeft" align="right" valign="top"><a id="a50fef94c1f9ad55b064836ead156ef19" name="a50fef94c1f9ad55b064836ead156ef19"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>$queryerror</b> = null</td></tr>
<tr class="memdesc:a50fef94c1f9ad55b064836ead156ef19"><td class="mdescLeft">&#160;</td><td class="mdescRight">Last executed query error, if there was any. <br /></td></tr>
<tr class="separator:a50fef94c1f9ad55b064836ead156ef19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa20d5dc09d6ab752c1939aa070f92a35"><td class="memItemLeft" align="right" valign="top"><a id="aa20d5dc09d6ab752c1939aa070f92a35" name="aa20d5dc09d6ab752c1939aa070f92a35"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>$skipschemacheck</b> = false</td></tr>
<tr class="memdesc:aa20d5dc09d6ab752c1939aa070f92a35"><td class="mdescLeft">&#160;</td><td class="mdescRight">If true, should skip schema validity check when checking the search engine is ready. <br /></td></tr>
<tr class="separator:aa20d5dc09d6ab752c1939aa070f92a35"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-static-attribs" name="pro-static-attribs"></a>
Static Protected Attributes</h2></td></tr>
<tr class="memitem:ab71dd596ba238da41beb9468c9167187"><td class="memItemLeft" align="right" valign="top">static stdClass[]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d66/classcore__search_1_1engine.html#ab71dd596ba238da41beb9468c9167187">$cachedusers</a> = array()</td></tr>
<tr class="memdesc:ab71dd596ba238da41beb9468c9167187"><td class="mdescLeft">&#160;</td><td class="mdescRight">User data required to show their fullnames.  <br /></td></tr>
<tr class="separator:ab71dd596ba238da41beb9468c9167187"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="../../d9/da0/interface_base.html" title="Base for cache objects.">Base</a> class for search engines. </p>
<p>All search engines must extend this class.</p>
<dl class="section copyright"><dt>Copyright</dt><dd>2015 Daniel Neis </dd></dl>
<dl class="section user"><dt>License</dt><dd><a href="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ac3098c4aff608bd83a1997fa1834d120" name="ac3098c4aff608bd83a1997fa1834d120"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3098c4aff608bd83a1997fa1834d120">&#9670;&#160;</a></span>__construct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_search\engine::__construct </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>$alternateconfiguration</em> = <code>false</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialises the search engine configuration. </p>
<p>Search engine availability should be checked separately.</p>
<p>The alternate configuration option is only used to construct a special second copy of the search engine object, as described in {</p><dl class="section see"><dt>See also</dt><dd>has_alternate_configuration}.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">bool</td><td class="paramname">$alternateconfiguration</td><td>If true, use alternate configuration settings </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../d9/d9f/classsearch__solr_1_1engine.html#aeaeb14304a0087d67f51f2668794dcb1">search_solr\engine</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="adb39369ed3a8e2be2fc85548cddecd64" name="adb39369ed3a8e2be2fc85548cddecd64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb39369ed3a8e2be2fc85548cddecd64">&#9670;&#160;</a></span>add_document()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_search\engine::add_document </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$document</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$fileindexing</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">abstract</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds a document to the search engine. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">document</td><td class="paramname">$document</td><td></td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$fileindexing</td><td>True if file indexing is to be used </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>False if the file was skipped or failed, true on success </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../da/d4e/classsearch__simpledb_1_1engine.html#ac1be7ebf7e09e9dfb047aa6e6db3f648">search_simpledb\engine</a>, and <a class="el" href="../../d9/d9f/classsearch__solr_1_1engine.html#a1a3f3ca4161f13acce02c0c7f160e3eb">search_solr\engine</a>.</p>

</div>
</div>
<a id="a78f0c030c34167bb2dc43aa4ffdf6a6d" name="a78f0c030c34167bb2dc43aa4ffdf6a6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78f0c030c34167bb2dc43aa4ffdf6a6d">&#9670;&#160;</a></span>add_document_batch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_search\engine::add_document_batch </td>
          <td>(</td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$documents</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>$fileindexing</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds multiple documents to the search engine. </p>
<p>It should return the number successfully processed, and the number of batches they were processed in (for example if you add 100 documents and there is an error processing one of those documents, and it took 4 batches, it would return [99, 1, 4]).</p>
<p>If the engine implements this, it should return true to {</p><dl class="section see"><dt>See also</dt><dd>supports_add_document_batch}.</dd></dl>
<p>The system will only call this function with up to {</p><dl class="section see"><dt>See also</dt><dd>get_batch_max_documents} documents, and each document in the batch will have content no larger than specified by {</dd>
<dd>
get_batch_max_content}.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">document[]</td><td class="paramname">$documents</td><td>Documents to add </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$fileindexing</td><td>True if file indexing is to be used </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int[]</td><td>Array of three elements, successfully processed, failed processed, batch count </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../d9/d9f/classsearch__solr_1_1engine.html#af983cd7a298f8efbce46994fce2c9d61">search_solr\engine</a>.</p>

</div>
</div>
<a id="a234db07a50e7da10783e683220444c2d" name="a234db07a50e7da10783e683220444c2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a234db07a50e7da10783e683220444c2d">&#9670;&#160;</a></span>add_documents()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_search\engine::add_documents </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$iterator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$searcharea</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loop through given iterator of search documents and and have the search engine back end add them to the index. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">iterator</td><td class="paramname">$iterator</td><td>the iterator of documents to index </td></tr>
    <tr><td class="paramtype">base</td><td class="paramname">$searcharea</td><td>the area for the documents to index </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$options</td><td>document indexing options </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>Processed document counts </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9d34aa912ba5ad3b9aa8d4482c98f64b" name="a9d34aa912ba5ad3b9aa8d4482c98f64b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d34aa912ba5ad3b9aa8d4482c98f64b">&#9670;&#160;</a></span>area_index_complete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_search\engine::area_index_complete </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$searcharea</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$numdocs</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$fullindex</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Do any area cleanup needed, and do anything to confirm contents. </p>
<p>Return false to prevent the search area completed time and stats from being updated.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d4/dd1/classcore__search_1_1base.html" title="Base search implementation.">core_search::base</a></td><td class="paramname">$searcharea</td><td>The search area that was complete </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$numdocs</td><td>The number of documents that were added to the index </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$fullindex</td><td>True if a full index is being performed </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>True means that data is considered indexed </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../d9/d9f/classsearch__solr_1_1engine.html#af2756126f73806a75d5c8cec8ac266c1">search_solr\engine</a>.</p>

</div>
</div>
<a id="abe9b3a2ce39293f4652eaa82ce11e9df" name="abe9b3a2ce39293f4652eaa82ce11e9df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe9b3a2ce39293f4652eaa82ce11e9df">&#9670;&#160;</a></span>area_index_starting()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_search\engine::area_index_starting </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$searcharea</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$fullindex</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Do anything that may need to be done before an area is indexed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d4/dd1/classcore__search_1_1base.html" title="Base search implementation.">core_search::base</a></td><td class="paramname">$searcharea</td><td>The search area that was complete </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$fullindex</td><td>True if a full index is being performed </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5b6a38b3536041fb87941a25a7858746" name="a5b6a38b3536041fb87941a25a7858746"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b6a38b3536041fb87941a25a7858746">&#9670;&#160;</a></span>check_latest_schema()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_search\engine::check_latest_schema </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks that the schema is the latest version. </p>
<p>If the version stored in config does not match the current, this function will attempt to upgrade the schema.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool|string</td><td>True if schema is OK, a string if user needs to take action </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a81657a35775d45e16949e1f85d5ace4f" name="a81657a35775d45e16949e1f85d5ace4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81657a35775d45e16949e1f85d5ace4f">&#9670;&#160;</a></span>clear_query_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_search\engine::clear_query_error </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clears the current query error value. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4f1b50cf10755a1acf9131022a73a906" name="a4f1b50cf10755a1acf9131022a73a906"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f1b50cf10755a1acf9131022a73a906">&#9670;&#160;</a></span>clear_users_cache()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_search\engine::clear_users_cache </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clears the users cache. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">null</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a55cd0c711f640fdf047c9baa5e73e400" name="a55cd0c711f640fdf047c9baa5e73e400"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55cd0c711f640fdf047c9baa5e73e400">&#9670;&#160;</a></span>delete()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_search\engine::delete </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$areaid</em> = <code>null</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">abstract</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Delete all documents. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$areaid</td><td>To filter by area </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../da/d4e/classsearch__simpledb_1_1engine.html#a006dcb800f0cf4cdb4c455ecb88a15e5">search_simpledb\engine</a>, and <a class="el" href="../../d9/d9f/classsearch__solr_1_1engine.html#a7b429dcce51df860aec982c26da23f22">search_solr\engine</a>.</p>

</div>
</div>
<a id="a306444949f7163a54f597ca1238af97c" name="a306444949f7163a54f597ca1238af97c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a306444949f7163a54f597ca1238af97c">&#9670;&#160;</a></span>delete_index_for_context()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_search\engine::delete_index_for_context </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>$oldcontextid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes information related to a specific context id. </p>
<p>This should be used when the context itself is deleted from <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a>.</p>
<p>This only deletes information for the specified context - not for any child contexts.</p>
<p>This function is optional; if not supported it will return false and the information will not be deleted from the search index.</p>
<p>If an engine implements this function it should also implement delete_index_for_course; otherwise, nothing will be deleted when users delete an entire course at once.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$oldcontextid</td><td>ID of context that has been deleted </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>True if implemented </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d7/d7c/classcore__search_1_1engine__exception.html" title="Dummy class to identify search engine exceptions.">core_search::engine_exception</a></td><td>Engines may throw this exception for any problem </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../da/d4e/classsearch__simpledb_1_1engine.html#a981fe1e97a69028b36d83876f0793b84">search_simpledb\engine</a>, and <a class="el" href="../../d9/d9f/classsearch__solr_1_1engine.html#ac527cc72ff5d031c3d7919c92e4972f0">search_solr\engine</a>.</p>

</div>
</div>
<a id="a938b221714b16fb9cd166436129a765e" name="a938b221714b16fb9cd166436129a765e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a938b221714b16fb9cd166436129a765e">&#9670;&#160;</a></span>delete_index_for_course()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_search\engine::delete_index_for_course </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>$oldcourseid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes information related to a specific course id. </p>
<p>This should be used when the course itself is deleted from <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a>.</p>
<p>This deletes all information relating to that course from the index, including all child contexts.</p>
<p>This function is optional; if not supported it will return false and the information will not be deleted from the search index.</p>
<p>If an engine implements this function then, ideally, it should also implement delete_index_for_context so that deletion of single activities/blocks also works.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$oldcourseid</td><td>ID of course that has been deleted </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>True if implemented </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d7/d7c/classcore__search_1_1engine__exception.html" title="Dummy class to identify search engine exceptions.">core_search::engine_exception</a></td><td>Engines may throw this exception for any problem </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../da/d4e/classsearch__simpledb_1_1engine.html#a314905c24f071524cc9e1684bf2cda7f">search_simpledb\engine</a>, and <a class="el" href="../../d9/d9f/classsearch__solr_1_1engine.html#a951ab4295eadc9d3e16ad291248d1df5">search_solr\engine</a>.</p>

</div>
</div>
<a id="ac5f9e282c3d7b475a6ab16d03e45b3c4" name="ac5f9e282c3d7b475a6ab16d03e45b3c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5f9e282c3d7b475a6ab16d03e45b3c4">&#9670;&#160;</a></span>execute_query()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_search\engine::execute_query </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$filters</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$accessinfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$limit</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">abstract</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Executes the query on the engine. </p>
<p>Implementations of this function should check user context array to limit the results to contexts where the user have access. They should also limit the owneruserid field to manger::NO_OWNER_ID or the current user's id. Engines must use area-&gt;check_access() to confirm user access.</p>
<p>Engines should reasonably attempt to fill up to limit with valid results if they are available.</p>
<p>The $filters object may include the following fields (optional except q):</p><ul>
<li>q: value of main search field; results should include this text</li>
<li>title: if included, title must match this search</li>
<li>areaids: array of search area id strings (only these areas will be searched)</li>
<li>courseids: array of course ids (only these courses will be searched)</li>
<li>groupids: array of group ids (only results specifically from these groupids will be searched) - this option will be ignored if the search engine doesn't support groups</li>
</ul>
<p>The $accessinfo parameter has two different values (for historical compatibility). If the engine returns false to supports_group_filtering then it is an array of user contexts, or true if the user can access all contexts. (This parameter used to be called $usercontexts.) If the engine returns true to supports_group_filtering then it will be an object containing these fields:</p><ul>
<li>everything (true if admin is searching with no restrictions)</li>
<li>usercontexts (same as above)</li>
<li>separategroupscontexts (array of context ids where separate groups are used)</li>
<li>visiblegroupscontextsareas (array of subset of those where some areas use visible groups)</li>
<li>usergroups (array of relevant group ids that user belongs to)</li>
</ul>
<p>The engine should apply group restrictions to those contexts listed in the 'separategroupscontexts' array. In these contexts, it shouled only include results if the groupid is not set, or if the groupid matches one of the values in USER_GROUPS array, or if the search area is one of those listed in 'visiblegroupscontextsareas' for that context.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$filters</td><td>Query and filters to apply. </td></tr>
    <tr><td class="paramtype">stdClass</td><td class="paramname">$accessinfo</td><td>Information about the contexts the user can access </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$limit</td><td>The maximum number of results to return. If empty, limit to manager::MAX_RESULTS. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">core_search::document[]</td><td>Results or false if no results </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../d9/d9f/classsearch__solr_1_1engine.html#a7e6c66cc8b8d9508ddca6bf55b6f81a4">search_solr\engine</a>, and <a class="el" href="../../da/d4e/classsearch__simpledb_1_1engine.html#acbac484adb1ff81f7ee2acf5998c6ed3">search_simpledb\engine</a>.</p>

</div>
</div>
<a id="a1d49d307340048f074ff55178d906552" name="a1d49d307340048f074ff55178d906552"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d49d307340048f074ff55178d906552">&#9670;&#160;</a></span>file_indexing_enabled()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_search\engine::file_indexing_enabled </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return true if file indexing is supported and enabled. </p>
<p>False otherwise.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../d9/d9f/classsearch__solr_1_1engine.html#a962168017ede23d047a7503946bf11d1">search_solr\engine</a>.</p>

</div>
</div>
<a id="a3932e237dccb830eac3a1e1cccc49ca7" name="a3932e237dccb830eac3a1e1cccc49ca7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3932e237dccb830eac3a1e1cccc49ca7">&#9670;&#160;</a></span>get_batch_max_content()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_search\engine::get_batch_max_content </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the maximum size of document content to be included in a shared batch (if the document is bigger then it will be sent on its own; batching does not provide a performance improvement for big documents anyway). </p>
<p>Only relevant if the engine returns true to {</p><dl class="section see"><dt>See also</dt><dd>supports_add_document_batch}.</dd></dl>
<p>Can be overridden by search engine if required.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td>Max size in bytes, default 1MB </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aff89dd3c8494e413d74d8da936eed21c" name="aff89dd3c8494e413d74d8da936eed21c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff89dd3c8494e413d74d8da936eed21c">&#9670;&#160;</a></span>get_batch_max_documents()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int core_search\engine::get_batch_max_documents </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the maximum number of documents to send together in batch mode. </p>
<p>Only relevant if the engine returns true to {</p><dl class="section see"><dt>See also</dt><dd>supports_add_document_batch}.</dd></dl>
<p>Can be overridden by search engine if required.</p>
<p>Number of documents to send together in batch mode, default 100. </p>

</div>
</div>
<a id="a2af2b3cc9b49757ff11604ca2f0788c6" name="a2af2b3cc9b49757ff11604ca2f0788c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2af2b3cc9b49757ff11604ca2f0788c6">&#9670;&#160;</a></span>get_course()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_search\engine::get_course </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$courseid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a course instance checking internal caching. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$courseid</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab995efd89c51efb67d5c17f7ade17187" name="ab995efd89c51efb67d5c17f7ade17187"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab995efd89c51efb67d5c17f7ade17187">&#9670;&#160;</a></span>get_document_classname()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_search\engine::get_document_classname </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the document class used by this search engine. </p>
<p>Search engines can overwrite <a class="el" href="../../d3/d5d/classcore__search_1_1document.html" title="Represents a document to index.">core_search::document</a> with search_ENGINENAME\document class.</p>
<p>Looks for a document class in the current search engine namespace, falling back to <a class="el" href="../../d3/d5d/classcore__search_1_1document.html" title="Represents a document to index.">core_search::document</a>.</p>
<p>Publicly available because search areas do not have access to the engine details, <a class="el" href="../../df/d6b/classcore__search_1_1document__factory.html" title="Search document factory.">core_search::document_factory</a> accesses this function.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4ec19dd01edb078cebbf42a097d582bf" name="a4ec19dd01edb078cebbf42a097d582bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ec19dd01edb078cebbf42a097d582bf">&#9670;&#160;</a></span>get_plugin_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_search\engine::get_plugin_name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the plugin name. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>Frankenstyle plugin name. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a10e4d6f34a47050e6245415986ae6979" name="a10e4d6f34a47050e6245415986ae6979"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10e4d6f34a47050e6245415986ae6979">&#9670;&#160;</a></span>get_query_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_search\engine::get_query_error </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns any error reported by the search engine when executing the provided query. </p>
<p>It should be called from static::execute_query when an exception is triggered.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac47247dd80bec3472c820d8887b77c40" name="ac47247dd80bec3472c820d8887b77c40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac47247dd80bec3472c820d8887b77c40">&#9670;&#160;</a></span>get_query_total_count()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_search\engine::get_query_total_count </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">abstract</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the total number of documents available for the most recent call to execute_query. </p>
<p>This can be an estimate, but should get more accurate the higher the limited passed to execute_query is. To do that, the engine can use (actual result returned count + count of unchecked documents), or (total possible docs - docs that have been checked and rejected).</p>
<p>Engine can limit to manager::MAX_RESULTS if there is cost to determining more. If this cannot be computed in a reasonable way, manager::MAX_RESULTS may be returned.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../da/d4e/classsearch__simpledb_1_1engine.html#a637e31c5a125dbdcc92893bdcaad9ece">search_simpledb\engine</a>, and <a class="el" href="../../d9/d9f/classsearch__solr_1_1engine.html#a8043e8e263d4d2aac3d85ae110d02129">search_solr\engine</a>.</p>

</div>
</div>
<a id="a516c8cab72324476170ec6274eca2b99" name="a516c8cab72324476170ec6274eca2b99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a516c8cab72324476170ec6274eca2b99">&#9670;&#160;</a></span>get_search_area()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_search\engine::get_search_area </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$areaid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a search instance of the specified area checking internal caching. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$areaid</td><td>Area id </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="../../d4/dd1/classcore__search_1_1base.html" title="Base search implementation.">core_search::base</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2e70e3bed784dfee17400bd293f8ba85" name="a2e70e3bed784dfee17400bd293f8ba85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e70e3bed784dfee17400bd293f8ba85">&#9670;&#160;</a></span>get_supported_orders()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_search\engine::get_supported_orders </td>
          <td>(</td>
          <td class="paramtype">\context&#160;</td>
          <td class="paramname"><em>$context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtain a list of results orders (and names for them) that are supported by this search engine in the given context. </p>
<p>By default, engines sort by relevance only.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">context</td><td class="paramname">$context</td><td>Context that the user requested search from </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>Array from order name =&gt; display text </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../d9/d9f/classsearch__solr_1_1engine.html#aef0779367fc84782c36ea69bf0c53188">search_solr\engine</a>.</p>

</div>
</div>
<a id="a2d9f7c412fbde2b64845db4d59049758" name="a2d9f7c412fbde2b64845db4d59049758"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d9f7c412fbde2b64845db4d59049758">&#9670;&#160;</a></span>get_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_search\engine::get_user </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$userid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns user data checking the internal static cache. </p>
<p>Including here the minimum required user information as this may grow big.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a14d9d6f4f08c9ce30afd39f5e31cc19b" name="a14d9d6f4f08c9ce30afd39f5e31cc19b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14d9d6f4f08c9ce30afd39f5e31cc19b">&#9670;&#160;</a></span>has_alternate_configuration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_search\engine::has_alternate_configuration </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if the search engine has an alternate configuration. </p>
<p>This is used where the same search engine class supports two different configurations, which are both shown on the settings screen. The alternate configuration is selected by passing 'true' parameter to the constructor.</p>
<p>The feature is used when a different connection is in use for indexing vs. querying the search engine.</p>
<p>This function should only return true if the engine supports an alternate configuration and the user has filled in the settings. (We do not need to test they are valid, that will happen as normal.)</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>True if an alternate configuration is defined </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../d9/d9f/classsearch__solr_1_1engine.html#a2c8610cd246bb29db622ddb930cd7de9">search_solr\engine</a>.</p>

</div>
</div>
<a id="aff048de31fb192865e6609f65493c214" name="aff048de31fb192865e6609f65493c214"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff048de31fb192865e6609f65493c214">&#9670;&#160;</a></span>index_complete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_search\engine::index_complete </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$numdocs</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$fullindex</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run any post indexing operations. </p>
<p>Should be overwritten if the search engine needs to do any post index cleanup.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$numdocs</td><td>The number of documents that were added to the index </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$fullindex</td><td>True if a full index was performed </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9d90b2511e1fa69b4cb7ed20a833c3d8" name="a9d90b2511e1fa69b4cb7ed20a833c3d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d90b2511e1fa69b4cb7ed20a833c3d8">&#9670;&#160;</a></span>index_starting()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_search\engine::index_starting </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$fullindex</em> = <code>false</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run any pre-indexing operations. </p>
<p>Should be overwritten if the search engine needs to do any pre index preparation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">bool</td><td class="paramname">$fullindex</td><td>True if a full index will be performed </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afe026f1679e656208d6a2842cb802e20" name="afe026f1679e656208d6a2842cb802e20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe026f1679e656208d6a2842cb802e20">&#9670;&#160;</a></span>is_installed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_search\engine::is_installed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Does the system satisfy all the requirements. </p>
<p>Should be overwritten if the search engine has any system dependencies that needs to be checked.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../da/d4e/classsearch__simpledb_1_1engine.html#a86508ef93e9ccd3cfcefc123972f5455">search_simpledb\engine</a>, and <a class="el" href="../../d9/d9f/classsearch__solr_1_1engine.html#ab4a9e062703adeb5448a4ba9728c89a9">search_solr\engine</a>.</p>

</div>
</div>
<a id="a6e1d119c0b55f696a5cb9091e3a7b8d2" name="a6e1d119c0b55f696a5cb9091e3a7b8d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e1d119c0b55f696a5cb9091e3a7b8d2">&#9670;&#160;</a></span>is_server_ready()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_search\engine::is_server_ready </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">abstract</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Is the server ready to use? </p>
<p>This should also check that the search engine configuration is ok.</p>
<p>If the function $this-&gt;should_skip_schema_check() returns true, then this function may leave out time-consuming checks that the schema is valid. (This allows for improved performance on critical pages such as the main search form.)</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true|string</td><td>Returns true if all good or an error string. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../da/d4e/classsearch__simpledb_1_1engine.html#a09398630fede64d2d13d746c575545e6">search_simpledb\engine</a>, and <a class="el" href="../../d9/d9f/classsearch__solr_1_1engine.html#aca7131b3aa93fdd11a2f61c832bfdd56">search_solr\engine</a>.</p>

</div>
</div>
<a id="ad35d1ce15ed20d37cb761a18b279f5f1" name="ad35d1ce15ed20d37cb761a18b279f5f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad35d1ce15ed20d37cb761a18b279f5f1">&#9670;&#160;</a></span>optimize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_search\engine::optimize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Optimizes the search engine. </p>
<p>Should be overwritten if the search engine can optimize its contents.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abfe1f56b0ab42852fe5916a15b78cdff" name="abfe1f56b0ab42852fe5916a15b78cdff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfe1f56b0ab42852fe5916a15b78cdff">&#9670;&#160;</a></span>record_applied_schema_version()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_search\engine::record_applied_schema_version </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$version</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Usually called by the engine; marks that the schema has been updated. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$version</td><td>Records the schema version now applied </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3d7e47c8581d7b3acd802cb8336e679e" name="a3d7e47c8581d7b3acd802cb8336e679e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d7e47c8581d7b3acd802cb8336e679e">&#9670;&#160;</a></span>should_skip_schema_check()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_search\engine::should_skip_schema_check </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For use by subclasses. </p>
<p>The engine can call this inside is_server_ready to check whether it should skip time-consuming schema checks.</p>
<dl class="section since"><dt>Since</dt><dd><a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 3.5 </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>True if schema checks should be skipped </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a07744a383f58ece1317bb140954f03a6" name="a07744a383f58ece1317bb140954f03a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07744a383f58ece1317bb140954f03a6">&#9670;&#160;</a></span>skip_schema_check()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_search\engine::skip_schema_check </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$skip</em> = <code>true</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tells the search engine to skip any time-consuming checks that it might do as part of the is_server_ready function, and only carry out a basic check that it can contact the server. </p>
<p>This setting is not remembered and applies only to the current request.</p>
<dl class="section since"><dt>Since</dt><dd><a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 3.5 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">bool</td><td class="paramname">$skip</td><td>True to skip the checks, false to start checking again </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae7eb7d21cb9242750ca91b8e04d66cca" name="ae7eb7d21cb9242750ca91b8e04d66cca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7eb7d21cb9242750ca91b8e04d66cca">&#9670;&#160;</a></span>supports_add_document_batch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_search\engine::supports_add_document_batch </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if the search engine supports adding documents in a batch. </p>
<p>If it returns true to this function, the search engine must implement the add_document_batch function.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>True if the search engine supports adding documents in a batch </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../d9/d9f/classsearch__solr_1_1engine.html#a4f1a310260f1ede742618134d2d61da0">search_solr\engine</a>.</p>

</div>
</div>
<a id="adfcac166f5550dff691c721415d83816" name="adfcac166f5550dff691c721415d83816"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfcac166f5550dff691c721415d83816">&#9670;&#160;</a></span>supports_group_filtering()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_search\engine::supports_group_filtering </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if this search engine supports groups. </p>
<p>Note that returning true to this function causes the parameters to execute_query to be passed differently!</p>
<p>In order to implement groups and return true to this function, the search engine should:</p>
<ol type="1">
<li>Handle the fields -&gt;separategroupscontexts and -&gt;usergroups in the $accessinfo parameter to execute_query (ideally, using these to automatically restrict search results).</li>
<li>Support the optional groupids parameter in the $filter parameter for execute_query to restrict results to only those where the stored groupid matches the given value.</li>
</ol>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>True if this engine supports searching by group id field </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../d9/d9f/classsearch__solr_1_1engine.html#a88091f39bdee636ff709b343617071f4">search_solr\engine</a>.</p>

</div>
</div>
<a id="afbc7b72413ebe511fdc2463aa99b57de" name="afbc7b72413ebe511fdc2463aa99b57de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbc7b72413ebe511fdc2463aa99b57de">&#9670;&#160;</a></span>supports_users()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_search\engine::supports_users </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if the search engine supports searching by user. </p>
<p>If it returns true to this function, the search engine should support the 'userids' option in the $filters value passed to execute_query(), returning only items where the userid in the search document matches one of those user ids.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>True if the search engine supports searching by user </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../d9/d9f/classsearch__solr_1_1engine.html#ada534d6db690e2764886b7c13ee64cd0">search_solr\engine</a>.</p>

</div>
</div>
<a id="ad3241b8695ba90ee12900369e9a4c6a1" name="ad3241b8695ba90ee12900369e9a4c6a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3241b8695ba90ee12900369e9a4c6a1">&#9670;&#160;</a></span>to_document()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_search\engine::to_document </td>
          <td>(</td>
          <td class="paramtype">\<a class="el" href="../../d4/dd1/classcore__search_1_1base.html">core_search\base</a>&#160;</td>
          <td class="paramname"><em>$searcharea</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$docdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a document instance prepared to be rendered. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d4/dd1/classcore__search_1_1base.html" title="Base search implementation.">core_search::base</a></td><td class="paramname">$searcharea</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$docdata</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="../../d3/d5d/classcore__search_1_1document.html" title="Represents a document to index.">core_search::document</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab4feaed0a38c119d739d35589ddda2a6" name="ab4feaed0a38c119d739d35589ddda2a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4feaed0a38c119d739d35589ddda2a6">&#9670;&#160;</a></span>update_schema()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_search\engine::update_schema </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$oldversion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$newversion</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Requests the search engine to upgrade the schema. </p>
<p>The engine should update the schema if possible/necessary, and should ensure that record_applied_schema_version is called as a result.</p>
<p>If it is not possible to upgrade the schema at the moment, it can do nothing and return; the function will be called again next time search is initialised.</p>
<p>The default implementation just returns, with a DEBUG_DEVELOPER warning.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$oldversion</td><td>Old schema version </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$newversion</td><td>New schema version </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool|string</td><td>True if schema is updated successfully, a string if it needs updating manually </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../d9/d9f/classsearch__solr_1_1engine.html#a12c3ace29c6207d4a53e55e2f71f4775">search_solr\engine</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ab71dd596ba238da41beb9468c9167187" name="ab71dd596ba238da41beb9468c9167187"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab71dd596ba238da41beb9468c9167187">&#9670;&#160;</a></span>$cachedusers</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">stdClass [] core_search\engine::$cachedusers = array()</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>User data required to show their fullnames. </p>
<p>Indexed by userid. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>search/classes/engine.php</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 6 2023 02:44:22 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>
