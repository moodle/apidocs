<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: core\task\manager Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;4.4</span>
   </div>
   <div id="projectbrief">Moodle 4.4dev (Build: 20240301) (debed3eace9)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d9/d0f/namespacecore.html">core</a></li><li class="navelem"><a class="el" href="../../d3/d37/namespacecore_1_1task.html">task</a></li><li class="navelem"><a class="el" href="../../db/d2e/classcore_1_1task_1_1manager.html">manager</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="#pro-static-attribs">Static Protected Attributes</a> &#124;
<a href="../../d3/d46/classcore_1_1task_1_1manager-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">core\task\manager Class Reference<div class="ingroups"><a class="el" href="../../d0/de1/group__core.html">core</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Collection of task related methods.  
 <a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a5a397d67dd1c16bb771f325d7436ed3a" id="r_a5a397d67dd1c16bb771f325d7436ed3a"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5a397d67dd1c16bb771f325d7436ed3a">adhoc_task_complete</a> (<a class="el" href="../../d4/d91/classcore_1_1task_1_1adhoc__task.html">adhoc_task</a> $task)</td></tr>
<tr class="memdesc:a5a397d67dd1c16bb771f325d7436ed3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function indicates that an adhoc task was completed successfully.  <br /></td></tr>
<tr class="separator:a5a397d67dd1c16bb771f325d7436ed3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdc0839e2d0ce6488de9f6ae9a96ce5a" id="r_abdc0839e2d0ce6488de9f6ae9a96ce5a"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abdc0839e2d0ce6488de9f6ae9a96ce5a">adhoc_task_failed</a> (<a class="el" href="../../d4/d91/classcore_1_1task_1_1adhoc__task.html">adhoc_task</a> $task)</td></tr>
<tr class="memdesc:abdc0839e2d0ce6488de9f6ae9a96ce5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function indicates that an adhoc task was not completed successfully and should be retried.  <br /></td></tr>
<tr class="separator:abdc0839e2d0ce6488de9f6ae9a96ce5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1197927e94fd2272bb1416b90572740" id="r_af1197927e94fd2272bb1416b90572740"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af1197927e94fd2272bb1416b90572740">adhoc_task_from_record</a> ($record)</td></tr>
<tr class="memdesc:af1197927e94fd2272bb1416b90572740"><td class="mdescLeft">&#160;</td><td class="mdescRight">Utility method to create an adhoc task from a <a class="el" href="../../d1/dc8/class_d_b.html" title="The main &quot;DB&quot; class is simply a container class with some static methods for creating DB objects as w...">DB</a> record.  <br /></td></tr>
<tr class="separator:af1197927e94fd2272bb1416b90572740"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01eb97bcb875ec679ee0db8c8aca192c" id="r_a01eb97bcb875ec679ee0db8c8aca192c"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a01eb97bcb875ec679ee0db8c8aca192c">adhoc_task_starting</a> (<a class="el" href="../../d4/d91/classcore_1_1task_1_1adhoc__task.html">adhoc_task</a> $task, int $time=0)</td></tr>
<tr class="memdesc:a01eb97bcb875ec679ee0db8c8aca192c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Records that a adhoc task is starting to run.  <br /></td></tr>
<tr class="separator:a01eb97bcb875ec679ee0db8c8aca192c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89743cb7520ccb1ac9bca5d572e155b2" id="r_a89743cb7520ccb1ac9bca5d572e155b2"><td class="memItemLeft" align="right" valign="top"><a id="a89743cb7520ccb1ac9bca5d572e155b2" name="a89743cb7520ccb1ac9bca5d572e155b2"></a>
static&#160;</td><td class="memItemRight" valign="bottom"><b>clean_failed_adhoc_tasks</b> ()</td></tr>
<tr class="memdesc:a89743cb7520ccb1ac9bca5d572e155b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clean up failed adhoc tasks. <br /></td></tr>
<tr class="separator:a89743cb7520ccb1ac9bca5d572e155b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb710305d64f4858e5b8c144bc76faa" id="r_a4fb710305d64f4858e5b8c144bc76faa"><td class="memItemLeft" align="right" valign="top"><a id="a4fb710305d64f4858e5b8c144bc76faa" name="a4fb710305d64f4858e5b8c144bc76faa"></a>
static&#160;</td><td class="memItemRight" valign="bottom"><b>cleanup_metadata</b> ()</td></tr>
<tr class="memdesc:a4fb710305d64f4858e5b8c144bc76faa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cleanup stale task metadata. <br /></td></tr>
<tr class="separator:a4fb710305d64f4858e5b8c144bc76faa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdcfd6dea80c72a870d647e3c0308436" id="r_afdcfd6dea80c72a870d647e3c0308436"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afdcfd6dea80c72a870d647e3c0308436">clear_fail_delay</a> (<a class="el" href="../../de/d87/classcore_1_1task_1_1scheduled__task.html">scheduled_task</a> $task)</td></tr>
<tr class="memdesc:afdcfd6dea80c72a870d647e3c0308436"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clears the fail delay for the given task and updates its next run time based on the schedule.  <br /></td></tr>
<tr class="separator:afdcfd6dea80c72a870d647e3c0308436"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5a1eb57378301726b12e8f2f8f95f77" id="r_ab5a1eb57378301726b12e8f2f8f95f77"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab5a1eb57378301726b12e8f2f8f95f77">clear_static_caches</a> ()</td></tr>
<tr class="memdesc:ab5a1eb57378301726b12e8f2f8f95f77"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is used to indicate that any long running cron processes should exit at the next opportunity and restart.  <br /></td></tr>
<tr class="separator:ab5a1eb57378301726b12e8f2f8f95f77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae297ee49d5f78767864fa8f844ffa9df" id="r_ae297ee49d5f78767864fa8f844ffa9df"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae297ee49d5f78767864fa8f844ffa9df">configure_scheduled_task</a> (<a class="el" href="../../de/d87/classcore_1_1task_1_1scheduled__task.html">scheduled_task</a> $task)</td></tr>
<tr class="memdesc:ae297ee49d5f78767864fa8f844ffa9df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change the default configuration for a scheduled task.  <br /></td></tr>
<tr class="separator:ae297ee49d5f78767864fa8f844ffa9df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2d4f07b103416e32fcb0d799153c34b" id="r_af2d4f07b103416e32fcb0d799153c34b"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af2d4f07b103416e32fcb0d799153c34b">ensure_adhoc_task_qos</a> (array $records)</td></tr>
<tr class="memdesc:af2d4f07b103416e32fcb0d799153c34b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ensure quality of service for the ad hoc task queue.  <br /></td></tr>
<tr class="separator:af2d4f07b103416e32fcb0d799153c34b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcca449f1ee3b9f370fdc8587913797e" id="r_abcca449f1ee3b9f370fdc8587913797e"><td class="memItemLeft" align="right" valign="top"><a id="abcca449f1ee3b9f370fdc8587913797e" name="abcca449f1ee3b9f370fdc8587913797e"></a>
static&#160;</td><td class="memItemRight" valign="bottom"><b>fail_running_task</b> ()</td></tr>
<tr class="memdesc:abcca449f1ee3b9f370fdc8587913797e"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function will fail the currently running task, if there is one. <br /></td></tr>
<tr class="separator:abcca449f1ee3b9f370fdc8587913797e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a423659fbf4bb113e98ebab0a56600727" id="r_a423659fbf4bb113e98ebab0a56600727"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a423659fbf4bb113e98ebab0a56600727">get_adhoc_task</a> (int $taskid)</td></tr>
<tr class="memdesc:a423659fbf4bb113e98ebab0a56600727"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function will get an adhoc task by id.  <br /></td></tr>
<tr class="separator:a423659fbf4bb113e98ebab0a56600727"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9af23d8d09e942d72b3a1fccd9010332" id="r_a9af23d8d09e942d72b3a1fccd9010332"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9af23d8d09e942d72b3a1fccd9010332">get_adhoc_tasks</a> (string $classname, bool $failedonly=false, bool $skiprunning=false)</td></tr>
<tr class="memdesc:a9af23d8d09e942d72b3a1fccd9010332"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function load the adhoc tasks for a given classname.  <br /></td></tr>
<tr class="separator:a9af23d8d09e942d72b3a1fccd9010332"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a087bb5ee04e2b5640695ae773682eee0" id="r_a087bb5ee04e2b5640695ae773682eee0"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a087bb5ee04e2b5640695ae773682eee0">get_adhoc_tasks_summary</a> ()</td></tr>
<tr class="memdesc:a087bb5ee04e2b5640695ae773682eee0"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function returns adhoc tasks summary per component classname.  <br /></td></tr>
<tr class="separator:a087bb5ee04e2b5640695ae773682eee0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36b595085f8fbfdcfa9327ddc653ed03" id="r_a36b595085f8fbfdcfa9327ddc653ed03"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a36b595085f8fbfdcfa9327ddc653ed03">get_all_scheduled_tasks</a> ()</td></tr>
<tr class="memdesc:a36b595085f8fbfdcfa9327ddc653ed03"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function will return a list of all the scheduled tasks that exist in the database.  <br /></td></tr>
<tr class="separator:a36b595085f8fbfdcfa9327ddc653ed03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fd88026f893a008e9161bb7f322098c" id="r_a6fd88026f893a008e9161bb7f322098c"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6fd88026f893a008e9161bb7f322098c">get_candidate_adhoc_tasks</a> (int $timestart, int $limit, ?int $runmax, array $pertasklimits=[])</td></tr>
<tr class="memdesc:a6fd88026f893a008e9161bb7f322098c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a list of candidate adhoc tasks to run.  <br /></td></tr>
<tr class="separator:a6fd88026f893a008e9161bb7f322098c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21692384ebcf9e99591ac1cafc76c0f5" id="r_a21692384ebcf9e99591ac1cafc76c0f5"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a21692384ebcf9e99591ac1cafc76c0f5">get_canonical_class_name</a> ($taskorstring)</td></tr>
<tr class="memdesc:a21692384ebcf9e99591ac1cafc76c0f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets class name for use in database table.  <br /></td></tr>
<tr class="separator:a21692384ebcf9e99591ac1cafc76c0f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9969f481bc58f670e02257b5419c9c19" id="r_a9969f481bc58f670e02257b5419c9c19"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9969f481bc58f670e02257b5419c9c19">get_default_scheduled_task</a> ($classname, $expandr=true)</td></tr>
<tr class="memdesc:a9969f481bc58f670e02257b5419c9c19"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function load the default scheduled task details for a given classname.  <br /></td></tr>
<tr class="separator:a9969f481bc58f670e02257b5419c9c19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1604684b4a4372160cd9d8c8892d98c" id="r_ac1604684b4a4372160cd9d8c8892d98c"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac1604684b4a4372160cd9d8c8892d98c">get_failed_adhoc_tasks</a> (int $delay=0)</td></tr>
<tr class="memdesc:ac1604684b4a4372160cd9d8c8892d98c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function will return a list of all adhoc tasks that have a faildelay.  <br /></td></tr>
<tr class="separator:ac1604684b4a4372160cd9d8c8892d98c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1a794a1517e071a4d0621a60c99b2cd" id="r_aa1a794a1517e071a4d0621a60c99b2cd"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa1a794a1517e071a4d0621a60c99b2cd">get_next_adhoc_task</a> (int $timestart, ?bool $checklimits=true, ?string $classname=null)</td></tr>
<tr class="memdesc:aa1a794a1517e071a4d0621a60c99b2cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function will dispatch the next adhoc task in the queue.  <br /></td></tr>
<tr class="separator:aa1a794a1517e071a4d0621a60c99b2cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a683948e2257af3519083594c88832526" id="r_a683948e2257af3519083594c88832526"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a683948e2257af3519083594c88832526">get_next_scheduled_task</a> ($timestart)</td></tr>
<tr class="memdesc:a683948e2257af3519083594c88832526"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function will dispatch the next scheduled task in the queue.  <br /></td></tr>
<tr class="separator:a683948e2257af3519083594c88832526"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89f79ec0e5542cadab7ac4ed95f080c1" id="r_a89f79ec0e5542cadab7ac4ed95f080c1"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a89f79ec0e5542cadab7ac4ed95f080c1">get_running_tasks</a> ($sort='')</td></tr>
<tr class="memdesc:a89f79ec0e5542cadab7ac4ed95f080c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a list of currently-running tasks.  <br /></td></tr>
<tr class="separator:a89f79ec0e5542cadab7ac4ed95f080c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a4052f6e6fc122d164acdf83f9676a6" id="r_a0a4052f6e6fc122d164acdf83f9676a6"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0a4052f6e6fc122d164acdf83f9676a6">get_scheduled_task</a> ($classname)</td></tr>
<tr class="memdesc:a0a4052f6e6fc122d164acdf83f9676a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function load the scheduled task details for a given classname.  <br /></td></tr>
<tr class="separator:a0a4052f6e6fc122d164acdf83f9676a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a636a6711d13e7ec8b078052628d3be0d" id="r_a636a6711d13e7ec8b078052628d3be0d"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a636a6711d13e7ec8b078052628d3be0d">is_runnable</a> ()</td></tr>
<tr class="memdesc:a636a6711d13e7ec8b078052628d3be0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns if <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> have access to PHP CLI binary or not.  <br /></td></tr>
<tr class="separator:a636a6711d13e7ec8b078052628d3be0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a427ecfa24b3854a94c194438dcb4a3d2" id="r_a427ecfa24b3854a94c194438dcb4a3d2"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a427ecfa24b3854a94c194438dcb4a3d2">load_default_scheduled_tasks_for_component</a> ($componentname, $expandr=true)</td></tr>
<tr class="memdesc:a427ecfa24b3854a94c194438dcb4a3d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a component name, will load the list of tasks in the db/tasks.php file for that component.  <br /></td></tr>
<tr class="separator:a427ecfa24b3854a94c194438dcb4a3d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a708c2c32bb554073c66772f9cd82268e" id="r_a708c2c32bb554073c66772f9cd82268e"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a708c2c32bb554073c66772f9cd82268e">load_scheduled_tasks_for_component</a> ($componentname)</td></tr>
<tr class="memdesc:a708c2c32bb554073c66772f9cd82268e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a component name, will load the list of tasks from the scheduled_tasks table for that component.  <br /></td></tr>
<tr class="separator:a708c2c32bb554073c66772f9cd82268e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66017831758fe5871a3dfb3a293e3ecd" id="r_a66017831758fe5871a3dfb3a293e3ecd"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a66017831758fe5871a3dfb3a293e3ecd">passthru_via_mtrace</a> (string $command)</td></tr>
<tr class="memdesc:a66017831758fe5871a3dfb3a293e3ecd"><td class="mdescLeft">&#160;</td><td class="mdescRight">This behaves similar to passthru but filters every line via the mtrace function so it can be post processed.  <br /></td></tr>
<tr class="separator:a66017831758fe5871a3dfb3a293e3ecd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2135dc09e1f28231e9c166ff96ad255" id="r_ad2135dc09e1f28231e9c166ff96ad255"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad2135dc09e1f28231e9c166ff96ad255">queue_adhoc_task</a> (<a class="el" href="../../d4/d91/classcore_1_1task_1_1adhoc__task.html">adhoc_task</a> $task, $checkforexisting=false)</td></tr>
<tr class="memdesc:ad2135dc09e1f28231e9c166ff96ad255"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queue an adhoc task to run in the background.  <br /></td></tr>
<tr class="separator:ad2135dc09e1f28231e9c166ff96ad255"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a683db89096b8d3b07ba30cff6a6836c7" id="r_a683db89096b8d3b07ba30cff6a6836c7"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a683db89096b8d3b07ba30cff6a6836c7">record_from_adhoc_task</a> ($task)</td></tr>
<tr class="memdesc:a683db89096b8d3b07ba30cff6a6836c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Utility method to create a <a class="el" href="../../d1/dc8/class_d_b.html" title="The main &quot;DB&quot; class is simply a container class with some static methods for creating DB objects as w...">DB</a> record from an adhoc task.  <br /></td></tr>
<tr class="separator:a683db89096b8d3b07ba30cff6a6836c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60cbce1692b27b3dec65e335f367c11d" id="r_a60cbce1692b27b3dec65e335f367c11d"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a60cbce1692b27b3dec65e335f367c11d">record_from_scheduled_task</a> ($task)</td></tr>
<tr class="memdesc:a60cbce1692b27b3dec65e335f367c11d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Utility method to create a <a class="el" href="../../d1/dc8/class_d_b.html" title="The main &quot;DB&quot; class is simply a container class with some static methods for creating DB objects as w...">DB</a> record from a scheduled task.  <br /></td></tr>
<tr class="separator:a60cbce1692b27b3dec65e335f367c11d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abec1abaf11e1b79abd777c8468e06052" id="r_abec1abaf11e1b79abd777c8468e06052"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abec1abaf11e1b79abd777c8468e06052">reschedule_or_queue_adhoc_task</a> (<a class="el" href="../../d4/d91/classcore_1_1task_1_1adhoc__task.html">adhoc_task</a> $task)</td></tr>
<tr class="memdesc:abec1abaf11e1b79abd777c8468e06052"><td class="mdescLeft">&#160;</td><td class="mdescRight">Schedule a new task, or reschedule an existing adhoc task which has matching data.  <br /></td></tr>
<tr class="separator:abec1abaf11e1b79abd777c8468e06052"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65321a674c4792d4c563a2d3e43027b5" id="r_a65321a674c4792d4c563a2d3e43027b5"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a65321a674c4792d4c563a2d3e43027b5">reset_scheduled_tasks_for_component</a> ($componentname)</td></tr>
<tr class="memdesc:a65321a674c4792d4c563a2d3e43027b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the database to contain a list of scheduled task for a component.  <br /></td></tr>
<tr class="separator:a65321a674c4792d4c563a2d3e43027b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a619769fa31a47279a471b9c2d4779350" id="r_a619769fa31a47279a471b9c2d4779350"><td class="memItemLeft" align="right" valign="top"><a id="a619769fa31a47279a471b9c2d4779350" name="a619769fa31a47279a471b9c2d4779350"></a>
static&#160;</td><td class="memItemRight" valign="bottom"><b>reset_state</b> ()</td></tr>
<tr class="memdesc:a619769fa31a47279a471b9c2d4779350"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the state of the task manager. <br /></td></tr>
<tr class="separator:a619769fa31a47279a471b9c2d4779350"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8e25ffd0bb3c1050bea3d6462564ed6" id="r_af8e25ffd0bb3c1050bea3d6462564ed6"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af8e25ffd0bb3c1050bea3d6462564ed6">run_adhoc_from_cli</a> (int $taskid)</td></tr>
<tr class="memdesc:af8e25ffd0bb3c1050bea3d6462564ed6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes an ad hoc task from web invocation using PHP CLI.  <br /></td></tr>
<tr class="separator:af8e25ffd0bb3c1050bea3d6462564ed6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a450a2edbbafed7656ffd4b941fe054f2" id="r_a450a2edbbafed7656ffd4b941fe054f2"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a450a2edbbafed7656ffd4b941fe054f2">run_all_adhoc_from_cli</a> (?bool $failedonly=false, ?string $classname=null)</td></tr>
<tr class="memdesc:a450a2edbbafed7656ffd4b941fe054f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes ad hoc tasks from web invocation using PHP CLI.  <br /></td></tr>
<tr class="separator:a450a2edbbafed7656ffd4b941fe054f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc48f57ee8437222ff9099607444cb8e" id="r_acc48f57ee8437222ff9099607444cb8e"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acc48f57ee8437222ff9099607444cb8e">run_from_cli</a> (<a class="el" href="../../de/d87/classcore_1_1task_1_1scheduled__task.html">scheduled_task</a> $task)</td></tr>
<tr class="memdesc:acc48f57ee8437222ff9099607444cb8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes a cron from web invocation using PHP CLI.  <br /></td></tr>
<tr class="separator:acc48f57ee8437222ff9099607444cb8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a436cf98af7c451c177ad73969a1492d4" id="r_a436cf98af7c451c177ad73969a1492d4"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a436cf98af7c451c177ad73969a1492d4">scheduled_task_complete</a> (<a class="el" href="../../de/d87/classcore_1_1task_1_1scheduled__task.html">scheduled_task</a> $task)</td></tr>
<tr class="memdesc:a436cf98af7c451c177ad73969a1492d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function indicates that a scheduled task was completed successfully and should be rescheduled.  <br /></td></tr>
<tr class="separator:a436cf98af7c451c177ad73969a1492d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad47dbe0a94d1a0519ec9a6a05d03c78a" id="r_ad47dbe0a94d1a0519ec9a6a05d03c78a"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad47dbe0a94d1a0519ec9a6a05d03c78a">scheduled_task_failed</a> (<a class="el" href="../../de/d87/classcore_1_1task_1_1scheduled__task.html">scheduled_task</a> $task)</td></tr>
<tr class="memdesc:ad47dbe0a94d1a0519ec9a6a05d03c78a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function indicates that a scheduled task was not completed successfully and should be retried.  <br /></td></tr>
<tr class="separator:ad47dbe0a94d1a0519ec9a6a05d03c78a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b3b25a3f6e378295ef3801f43c5b73f" id="r_a2b3b25a3f6e378295ef3801f43c5b73f"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2b3b25a3f6e378295ef3801f43c5b73f">scheduled_task_from_record</a> ($record, $expandr=true, $override=true)</td></tr>
<tr class="memdesc:a2b3b25a3f6e378295ef3801f43c5b73f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Utility method to create a task from a <a class="el" href="../../d1/dc8/class_d_b.html" title="The main &quot;DB&quot; class is simply a container class with some static methods for creating DB objects as w...">DB</a> record.  <br /></td></tr>
<tr class="separator:a2b3b25a3f6e378295ef3801f43c5b73f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa78726438d647a2f18de57869e1c9f8e" id="r_aa78726438d647a2f18de57869e1c9f8e"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa78726438d647a2f18de57869e1c9f8e">scheduled_task_get_override_key</a> (string $classname)</td></tr>
<tr class="memdesc:aa78726438d647a2f18de57869e1c9f8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the key within the scheduled tasks config object that for a classname.  <br /></td></tr>
<tr class="separator:aa78726438d647a2f18de57869e1c9f8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98436ea3a34e8d030cfaf6f73f03de61" id="r_a98436ea3a34e8d030cfaf6f73f03de61"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a98436ea3a34e8d030cfaf6f73f03de61">scheduled_task_has_override</a> (string $classname)</td></tr>
<tr class="memdesc:a98436ea3a34e8d030cfaf6f73f03de61"><td class="mdescLeft">&#160;</td><td class="mdescRight">This checks whether or not there is a value set in config for a scheduled task.  <br /></td></tr>
<tr class="separator:a98436ea3a34e8d030cfaf6f73f03de61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5cfc6ae9c3ddccf4dec23db82a57266" id="r_ab5cfc6ae9c3ddccf4dec23db82a57266"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab5cfc6ae9c3ddccf4dec23db82a57266">scheduled_task_starting</a> (<a class="el" href="../../de/d87/classcore_1_1task_1_1scheduled__task.html">scheduled_task</a> $task, int $time=0)</td></tr>
<tr class="memdesc:ab5cfc6ae9c3ddccf4dec23db82a57266"><td class="mdescLeft">&#160;</td><td class="mdescRight">Records that a scheduled task is starting to run.  <br /></td></tr>
<tr class="separator:ab5cfc6ae9c3ddccf4dec23db82a57266"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad05b282d3da9ac9d0aacfc8366e2ae2c" id="r_ad05b282d3da9ac9d0aacfc8366e2ae2c"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad05b282d3da9ac9d0aacfc8366e2ae2c">static_caches_cleared_since</a> ($starttime)</td></tr>
<tr class="memdesc:ad05b282d3da9ac9d0aacfc8366e2ae2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return true if the static caches have been cleared since $starttime.  <br /></td></tr>
<tr class="separator:ad05b282d3da9ac9d0aacfc8366e2ae2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:afd7b9e116cb7a2c2a17507b6dc6b20bc" id="r_afd7b9e116cb7a2c2a17507b6dc6b20bc"><td class="memItemLeft" align="right" valign="top">int const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afd7b9e116cb7a2c2a17507b6dc6b20bc">ADHOC_TASK_FAILED_RETENTION</a> = 4 * <a class="el" href="../../d0/de1/group__core.html#gac0706a63b936d6e5cc890fb08dcd10ce">WEEKSECS</a></td></tr>
<tr class="memdesc:afd7b9e116cb7a2c2a17507b6dc6b20bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to set the retention period for adhoc tasks that have failed and to be cleaned up.  <br /></td></tr>
<tr class="separator:afd7b9e116cb7a2c2a17507b6dc6b20bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16dbdd7f2008b99f7fc34b01289aaf47" id="r_a16dbdd7f2008b99f7fc34b01289aaf47"><td class="memItemLeft" align="right" valign="top"><a id="a16dbdd7f2008b99f7fc34b01289aaf47" name="a16dbdd7f2008b99f7fc34b01289aaf47"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>ADHOC_TASK_QUEUE_MODE_DISTRIBUTING</b> = 0</td></tr>
<tr class="memdesc:a16dbdd7f2008b99f7fc34b01289aaf47"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to tell the adhoc task queue to fairly distribute tasks. <br /></td></tr>
<tr class="separator:a16dbdd7f2008b99f7fc34b01289aaf47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5be4ac62f3386fceab0389b3c736c963" id="r_a5be4ac62f3386fceab0389b3c736c963"><td class="memItemLeft" align="right" valign="top"><a id="a5be4ac62f3386fceab0389b3c736c963" name="a5be4ac62f3386fceab0389b3c736c963"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>ADHOC_TASK_QUEUE_MODE_FILLING</b> = 1</td></tr>
<tr class="memdesc:a5be4ac62f3386fceab0389b3c736c963"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to tell the adhoc task queue to try and fill unused capacity. <br /></td></tr>
<tr class="separator:a5be4ac62f3386fceab0389b3c736c963"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ece4632beb250f1bee02b7b37afcd11" id="r_a8ece4632beb250f1bee02b7b37afcd11"><td class="memItemLeft" align="right" valign="top"><a id="a8ece4632beb250f1bee02b7b37afcd11" name="a8ece4632beb250f1bee02b7b37afcd11"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_RETRY</b> = 9</td></tr>
<tr class="memdesc:a8ece4632beb250f1bee02b7b37afcd11"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used for max retry. <br /></td></tr>
<tr class="separator:a8ece4632beb250f1bee02b7b37afcd11"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a9cba4df34f9d278ffd8f5267a60753b2" id="r_a9cba4df34f9d278ffd8f5267a60753b2"><td class="memItemLeft" align="right" valign="top"><a id="a9cba4df34f9d278ffd8f5267a60753b2" name="a9cba4df34f9d278ffd8f5267a60753b2"></a>
static bool bool&#160;</td><td class="memItemRight" valign="bottom"><b>$registeredshutdownhandler</b> = false</td></tr>
<tr class="memdesc:a9cba4df34f9d278ffd8f5267a60753b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to tell if the manager's shutdown callback has been registered. <br /></td></tr>
<tr class="separator:a9cba4df34f9d278ffd8f5267a60753b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab926df9690f6317d825681eedc68ded3" id="r_ab926df9690f6317d825681eedc68ded3"><td class="memItemLeft" align="right" valign="top"><a id="ab926df9690f6317d825681eedc68ded3" name="ab926df9690f6317d825681eedc68ded3"></a>
static <a class="el" href="../../db/dfa/classcore_1_1task_1_1task__base.html">task_base</a> <a class="el" href="../../db/dfa/classcore_1_1task_1_1task__base.html">task_base</a>&#160;</td><td class="memItemRight" valign="bottom"><b>$runningtask</b> = null</td></tr>
<tr class="memdesc:ab926df9690f6317d825681eedc68ded3"><td class="mdescLeft">&#160;</td><td class="mdescRight">$runningtask Used to tell what is the current running task in this process. <br /></td></tr>
<tr class="separator:ab926df9690f6317d825681eedc68ded3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-static-methods" name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr class="memitem:a63bd30ae72486b2241b23593e73f60f4" id="r_a63bd30ae72486b2241b23593e73f60f4"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a63bd30ae72486b2241b23593e73f60f4">find_php_cli_path</a> ()</td></tr>
<tr class="memdesc:a63bd30ae72486b2241b23593e73f60f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the path of PHP CLI binary.  <br /></td></tr>
<tr class="separator:a63bd30ae72486b2241b23593e73f60f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a3313591544e99f8e578bc6ef55237c" id="r_a9a3313591544e99f8e578bc6ef55237c"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9a3313591544e99f8e578bc6ef55237c">get_concurrent_task_lock</a> (<a class="el" href="../../d4/d91/classcore_1_1task_1_1adhoc__task.html">adhoc_task</a> $task)</td></tr>
<tr class="memdesc:a9a3313591544e99f8e578bc6ef55237c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the concurrent lock required to run an adhoc task.  <br /></td></tr>
<tr class="separator:a9a3313591544e99f8e578bc6ef55237c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83542c20281644b1c75d418e1648f188" id="r_a83542c20281644b1c75d418e1648f188"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a83542c20281644b1c75d418e1648f188">get_queued_adhoc_task_record</a> ($task)</td></tr>
<tr class="memdesc:a83542c20281644b1c75d418e1648f188"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the task with the same classname, component and customdata is already scheduled.  <br /></td></tr>
<tr class="separator:a83542c20281644b1c75d418e1648f188"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad454984e4b4624dd8cd10eada9c1a956" id="r_ad454984e4b4624dd8cd10eada9c1a956"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad454984e4b4624dd8cd10eada9c1a956">get_record_with_config_overrides</a> (\stdClass $record)</td></tr>
<tr class="memdesc:ad454984e4b4624dd8cd10eada9c1a956"><td class="mdescLeft">&#160;</td><td class="mdescRight">For a given scheduled task record, this method will check to see if any overrides have been applied in config and return a copy of the record with any overridden values.  <br /></td></tr>
<tr class="separator:ad454984e4b4624dd8cd10eada9c1a956"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa03cb85b2d7489b1736d16a396704840" id="r_aa03cb85b2d7489b1736d16a396704840"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa03cb85b2d7489b1736d16a396704840">task_is_scheduled</a> ($task)</td></tr>
<tr class="memdesc:aa03cb85b2d7489b1736d16a396704840"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the task with the same classname, component and customdata is already scheduled.  <br /></td></tr>
<tr class="separator:aa03cb85b2d7489b1736d16a396704840"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-static-attribs" name="pro-static-attribs"></a>
Static Protected Attributes</h2></td></tr>
<tr class="memitem:a9cd6972e06ee01c857c771a60cd42f5b" id="r_a9cd6972e06ee01c857c771a60cd42f5b"><td class="memItemLeft" align="right" valign="top"><a id="a9cd6972e06ee01c857c771a60cd42f5b" name="a9cd6972e06ee01c857c771a60cd42f5b"></a>
static array array&#160;</td><td class="memItemRight" valign="bottom"><b>$miniqueue</b> = []</td></tr>
<tr class="memdesc:a9cd6972e06ee01c857c771a60cd42f5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">A cached queue of adhoc tasks. <br /></td></tr>
<tr class="separator:a9cd6972e06ee01c857c771a60cd42f5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b78258bdef6a86582d7bc7ca65d5adf" id="r_a8b78258bdef6a86582d7bc7ca65d5adf"><td class="memItemLeft" align="right" valign="top"><a id="a8b78258bdef6a86582d7bc7ca65d5adf" name="a8b78258bdef6a86582d7bc7ca65d5adf"></a>
static null int int&#160;</td><td class="memItemRight" valign="bottom"><b>$mode</b> = null</td></tr>
<tr class="memdesc:a8b78258bdef6a86582d7bc7ca65d5adf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to determine if the adhoc task queue is distributing or filling capacity. <br /></td></tr>
<tr class="separator:a8b78258bdef6a86582d7bc7ca65d5adf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3d37606fc9229b89c629b7a9dde970f" id="r_aa3d37606fc9229b89c629b7a9dde970f"><td class="memItemLeft" align="right" valign="top"><a id="aa3d37606fc9229b89c629b7a9dde970f" name="aa3d37606fc9229b89c629b7a9dde970f"></a>
static int int&#160;</td><td class="memItemRight" valign="bottom"><b>$numtasks</b> = 0</td></tr>
<tr class="memdesc:aa3d37606fc9229b89c629b7a9dde970f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The last recorded number of unique adhoc tasks. <br /></td></tr>
<tr class="separator:aa3d37606fc9229b89c629b7a9dde970f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Collection of task related methods. </p>
<p>Some locking rules for this class: All changes to scheduled tasks must be protected with both - the global cron lock and the lock for the specific scheduled task (in that order). Locks must be released in the reverse order. </p><dl class="section copyright"><dt>Copyright</dt><dd>2013 Damyon Wiese </dd></dl>
<dl class="section user"><dt>License</dt><dd><a href="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later </dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a5a397d67dd1c16bb771f325d7436ed3a" name="a5a397d67dd1c16bb771f325d7436ed3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a397d67dd1c16bb771f325d7436ed3a">&#9670;&#160;</a></span>adhoc_task_complete()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::adhoc_task_complete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d91/classcore_1_1task_1_1adhoc__task.html">adhoc_task</a></td>          <td class="paramname"><span class="paramname"><em>$task</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function indicates that an adhoc task was completed successfully. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d4/d91/classcore_1_1task_1_1adhoc__task.html" title="Abstract class defining an adhoc task.">core::task::adhoc_task</a></td><td class="paramname">$task</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abdc0839e2d0ce6488de9f6ae9a96ce5a" name="abdc0839e2d0ce6488de9f6ae9a96ce5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdc0839e2d0ce6488de9f6ae9a96ce5a">&#9670;&#160;</a></span>adhoc_task_failed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::adhoc_task_failed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d91/classcore_1_1task_1_1adhoc__task.html">adhoc_task</a></td>          <td class="paramname"><span class="paramname"><em>$task</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function indicates that an adhoc task was not completed successfully and should be retried. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d4/d91/classcore_1_1task_1_1adhoc__task.html" title="Abstract class defining an adhoc task.">core::task::adhoc_task</a></td><td class="paramname">$task</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af1197927e94fd2272bb1416b90572740" name="af1197927e94fd2272bb1416b90572740"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1197927e94fd2272bb1416b90572740">&#9670;&#160;</a></span>adhoc_task_from_record()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::adhoc_task_from_record </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$record</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Utility method to create an adhoc task from a <a class="el" href="../../d1/dc8/class_d_b.html" title="The main &quot;DB&quot; class is simply a container class with some static methods for creating DB objects as w...">DB</a> record. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$record</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="../../d4/d91/classcore_1_1task_1_1adhoc__task.html" title="Abstract class defining an adhoc task.">core::task::adhoc_task</a></td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d6/da8/classmoodle__exception.html" title="Base Moodle Exception class.">moodle_exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a01eb97bcb875ec679ee0db8c8aca192c" name="a01eb97bcb875ec679ee0db8c8aca192c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01eb97bcb875ec679ee0db8c8aca192c">&#9670;&#160;</a></span>adhoc_task_starting()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::adhoc_task_starting </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d91/classcore_1_1task_1_1adhoc__task.html">adhoc_task</a></td>          <td class="paramname"><span class="paramname"><em>$task</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$time</em><span class="paramdefsep"> = </span><span class="paramdefval">0</span></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Records that a adhoc task is starting to run. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">adhoc_task</td><td class="paramname">$task</td><td>Task that is starting </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$time</td><td>Start time (leave blank for now) </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d5/d5c/classdml__exception.html">dml_exception</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="../../da/d34/classcoding__exception.html" title="Exception indicating programming error, must be fixed by a programer.">coding_exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afdcfd6dea80c72a870d647e3c0308436" name="afdcfd6dea80c72a870d647e3c0308436"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdcfd6dea80c72a870d647e3c0308436">&#9670;&#160;</a></span>clear_fail_delay()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::clear_fail_delay </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d87/classcore_1_1task_1_1scheduled__task.html">scheduled_task</a></td>          <td class="paramname"><span class="paramname"><em>$task</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clears the fail delay for the given task and updates its next run time based on the schedule. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">scheduled_task</td><td class="paramname">$task</td><td>Task to reset </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d5/d5c/classdml__exception.html">dml_exception</a></td><td>If there is a database error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab5a1eb57378301726b12e8f2f8f95f77" name="ab5a1eb57378301726b12e8f2f8f95f77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5a1eb57378301726b12e8f2f8f95f77">&#9670;&#160;</a></span>clear_static_caches()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::clear_static_caches </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function is used to indicate that any long running cron processes should exit at the next opportunity and restart. </p>
<p>This is because something (e.g. <a class="el" href="../../d1/dc8/class_d_b.html" title="The main &quot;DB&quot; class is simply a container class with some static methods for creating DB objects as w...">DB</a> changes) has changed and the static caches may be stale. </p>

</div>
</div>
<a id="ae297ee49d5f78767864fa8f844ffa9df" name="ae297ee49d5f78767864fa8f844ffa9df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae297ee49d5f78767864fa8f844ffa9df">&#9670;&#160;</a></span>configure_scheduled_task()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::configure_scheduled_task </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d87/classcore_1_1task_1_1scheduled__task.html">scheduled_task</a></td>          <td class="paramname"><span class="paramname"><em>$task</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Change the default configuration for a scheduled task. </p>
<p>The list of scheduled tasks is taken from <a class="el" href="">load_scheduled_tasks_for_component</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../de/d87/classcore_1_1task_1_1scheduled__task.html" title="Abstract class defining a scheduled task.">core::task::scheduled_task</a></td><td class="paramname">$task</td><td>- The new scheduled task information to store. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">boolean</td><td>- True if the config was saved. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af2d4f07b103416e32fcb0d799153c34b" name="af2d4f07b103416e32fcb0d799153c34b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2d4f07b103416e32fcb0d799153c34b">&#9670;&#160;</a></span>ensure_adhoc_task_qos()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::ensure_adhoc_task_qos </td>
          <td>(</td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$records</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Ensure quality of service for the ad hoc task queue. </p>
<p>This reshuffles the adhoc tasks queue to balance by type to ensure a level of quality of service per type, while still maintaining the relative order of tasks queued by timestamp.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$records</td><td>array of task records </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$records</td><td>array of same task records shuffled </td></tr>
  </table>
  </dd>
</dl>
<dl class="deprecated"><dt><b><a class="el" href="../../da/d58/deprecated.html#_deprecated000247">Deprecated</a></b></dt><dd>since <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 4.1 <a href="https://tracker.moodle.org/browse/MDL-67648" class="el">MDL-67648</a> - please do not use this method anymore. </dd></dl>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000098">Todo</a></b></dt><dd><a href="https://tracker.moodle.org/browse/MDL-74843" class="el">MDL-74843</a> This method will be deleted in <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 4.5 </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#aa1a794a1517e071a4d0621a60c99b2cd" title="This function will dispatch the next adhoc task in the queue.">core::task::manager::get_next_adhoc_task</a> </dd></dl>

</div>
</div>
<a id="a63bd30ae72486b2241b23593e73f60f4" name="a63bd30ae72486b2241b23593e73f60f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63bd30ae72486b2241b23593e73f60f4">&#9670;&#160;</a></span>find_php_cli_path()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::find_php_cli_path </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find the path of PHP CLI binary. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string|false</td><td>The PHP CLI executable PATH </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a423659fbf4bb113e98ebab0a56600727" name="a423659fbf4bb113e98ebab0a56600727"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a423659fbf4bb113e98ebab0a56600727">&#9670;&#160;</a></span>get_adhoc_task()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::get_adhoc_task </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$taskid</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function will get an adhoc task by id. </p>
<p>The task will be handed out with an open lock - possibly on the entire cron process. Make sure you call either {</p><dl class="section see"><dt>See also</dt><dd>::adhoc_task_failed} or {</dd>
<dd>
::adhoc_task_complete} to release the lock and reschedule the task.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$taskid</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">core::task::adhoc_task|null</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d6/da8/classmoodle__exception.html" title="Base Moodle Exception class.">moodle_exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9af23d8d09e942d72b3a1fccd9010332" name="a9af23d8d09e942d72b3a1fccd9010332"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9af23d8d09e942d72b3a1fccd9010332">&#9670;&#160;</a></span>get_adhoc_tasks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::get_adhoc_tasks </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$classname</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>$failedonly</em><span class="paramdefsep"> = </span><span class="paramdefval">false</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>$skiprunning</em><span class="paramdefsep"> = </span><span class="paramdefval">false</span></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function load the adhoc tasks for a given classname. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$classname</td><td></td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$failedonly</td><td></td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$skiprunning</td><td>do not return tasks that are in the running state </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a087bb5ee04e2b5640695ae773682eee0" name="a087bb5ee04e2b5640695ae773682eee0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a087bb5ee04e2b5640695ae773682eee0">&#9670;&#160;</a></span>get_adhoc_tasks_summary()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::get_adhoc_tasks_summary </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function returns adhoc tasks summary per component classname. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a36b595085f8fbfdcfa9327ddc653ed03" name="a36b595085f8fbfdcfa9327ddc653ed03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36b595085f8fbfdcfa9327ddc653ed03">&#9670;&#160;</a></span>get_all_scheduled_tasks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::get_all_scheduled_tasks </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function will return a list of all the scheduled tasks that exist in the database. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">core::task::scheduled_task[]</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6fd88026f893a008e9161bb7f322098c" name="a6fd88026f893a008e9161bb7f322098c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6fd88026f893a008e9161bb7f322098c">&#9670;&#160;</a></span>get_candidate_adhoc_tasks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::get_candidate_adhoc_tasks </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$timestart</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$limit</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?int</td>          <td class="paramname"><span class="paramname"><em>$runmax</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$pertasklimits</em><span class="paramdefsep"> = </span><span class="paramdefval">[]</span></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return a list of candidate adhoc tasks to run. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$timestart</td><td>Only return tasks where nextruntime is less than this value </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$limit</td><td>Limit the list to this many results </td></tr>
    <tr><td class="paramtype">int&#160;|&#160;null</td><td class="paramname">$runmax</td><td>Only return tasks that have less than this value currently running </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$pertasklimits</td><td>An array of classname =&gt; limit specifying how many instance of a task may be returned </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>Array of candidate tasks </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a21692384ebcf9e99591ac1cafc76c0f5" name="a21692384ebcf9e99591ac1cafc76c0f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21692384ebcf9e99591ac1cafc76c0f5">&#9670;&#160;</a></span>get_canonical_class_name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::get_canonical_class_name </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$taskorstring</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets class name for use in database table. </p>
<p>Always begins with a .</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string&#160;|&#160;task_base</td><td class="paramname">$taskorstring</td><td>Task object or a string </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9a3313591544e99f8e578bc6ef55237c" name="a9a3313591544e99f8e578bc6ef55237c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a3313591544e99f8e578bc6ef55237c">&#9670;&#160;</a></span>get_concurrent_task_lock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::get_concurrent_task_lock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d91/classcore_1_1task_1_1adhoc__task.html">adhoc_task</a></td>          <td class="paramname"><span class="paramname"><em>$task</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the concurrent lock required to run an adhoc task. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">adhoc_task</td><td class="paramname">$task</td><td>The task to obtain the lock for </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="../../d3/daf/classcore_1_1lock_1_1lock.html">core::lock::lock</a></td><td>The lock if one was obtained successfully </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../da/d34/classcoding__exception.html" title="Exception indicating programming error, must be fixed by a programer.">coding_exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9969f481bc58f670e02257b5419c9c19" name="a9969f481bc58f670e02257b5419c9c19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9969f481bc58f670e02257b5419c9c19">&#9670;&#160;</a></span>get_default_scheduled_task()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::get_default_scheduled_task </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$classname</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$expandr</em><span class="paramdefsep"> = </span><span class="paramdefval">true</span></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function load the default scheduled task details for a given classname. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$classname</td><td></td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$expandr</td><td>- if true (default) an 'R' value in a time is expanded to an appropriate int. If false, they are left as 'R' </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">core::task::scheduled_task|false</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac1604684b4a4372160cd9d8c8892d98c" name="ac1604684b4a4372160cd9d8c8892d98c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1604684b4a4372160cd9d8c8892d98c">&#9670;&#160;</a></span>get_failed_adhoc_tasks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::get_failed_adhoc_tasks </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$delay</em><span class="paramdefsep"> = </span><span class="paramdefval">0</span></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function will return a list of all adhoc tasks that have a faildelay. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$delay</td><td>filter how long the task has been delayed </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">core::task::adhoc_task[]</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa1a794a1517e071a4d0621a60c99b2cd" name="aa1a794a1517e071a4d0621a60c99b2cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1a794a1517e071a4d0621a60c99b2cd">&#9670;&#160;</a></span>get_next_adhoc_task()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::get_next_adhoc_task </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$timestart</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?bool</td>          <td class="paramname"><span class="paramname"><em>$checklimits</em><span class="paramdefsep"> = </span><span class="paramdefval">true</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?string</td>          <td class="paramname"><span class="paramname"><em>$classname</em><span class="paramdefsep"> = </span><span class="paramdefval">null</span></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function will dispatch the next adhoc task in the queue. </p>
<p>The task will be handed out with an open lock - possibly on the entire cron process. Make sure you call either <a class="el" href="">adhoc_task_failed</a> or <a class="el" href="">adhoc_task_complete</a> to release the lock and reschedule the task.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$timestart</td><td></td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$checklimits</td><td>Should we check limits? </td></tr>
    <tr><td class="paramtype">string&#160;|&#160;null</td><td class="paramname">$classname</td><td>Return only task of this class </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">core::task::adhoc_task|null</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d6/da8/classmoodle__exception.html" title="Base Moodle Exception class.">moodle_exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a683948e2257af3519083594c88832526" name="a683948e2257af3519083594c88832526"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a683948e2257af3519083594c88832526">&#9670;&#160;</a></span>get_next_scheduled_task()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::get_next_scheduled_task </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$timestart</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function will dispatch the next scheduled task in the queue. </p>
<p>The task will be handed out with an open lock - possibly on the entire cron process. Make sure you call either <a class="el" href="">scheduled_task_failed</a> or <a class="el" href="">scheduled_task_complete</a> to release the lock and reschedule the task.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$timestart</td><td>- The start of the cron process - do not repeat any tasks that have been run more recently than this. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="../../de/d87/classcore_1_1task_1_1scheduled__task.html" title="Abstract class defining a scheduled task.">core::task::scheduled_task</a></td><td>or null </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d6/da8/classmoodle__exception.html" title="Base Moodle Exception class.">moodle_exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a83542c20281644b1c75d418e1648f188" name="a83542c20281644b1c75d418e1648f188"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83542c20281644b1c75d418e1648f188">&#9670;&#160;</a></span>get_queued_adhoc_task_record()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::get_queued_adhoc_task_record </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$task</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if the task with the same classname, component and customdata is already scheduled. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">adhoc_task</td><td class="paramname">$task</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass|false</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad454984e4b4624dd8cd10eada9c1a956" name="ad454984e4b4624dd8cd10eada9c1a956"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad454984e4b4624dd8cd10eada9c1a956">&#9670;&#160;</a></span>get_record_with_config_overrides()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::get_record_with_config_overrides </td>
          <td>(</td>
          <td class="paramtype">\stdClass</td>          <td class="paramname"><span class="paramname"><em>$record</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For a given scheduled task record, this method will check to see if any overrides have been applied in config and return a copy of the record with any overridden values. </p>
<p>The format of the config value is: $CFG-&gt;scheduled_tasks = array( '$classname' =&gt; array( 'schedule' =&gt; '* * * * *', 'disabled' =&gt; 1, ), );</p>
<p>Where $classname is the value of the task's classname, i.e. '<a class="el" href="../../d3/d20/classcore_1_1task_1_1grade__cron__task.html" title="Simple task to run the grade cron.">core::task::grade_cron_task</a>'.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$record</td><td>scheduled task record </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass</td><td>scheduled task with any configured overrides </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a89f79ec0e5542cadab7ac4ed95f080c1" name="a89f79ec0e5542cadab7ac4ed95f080c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89f79ec0e5542cadab7ac4ed95f080c1">&#9670;&#160;</a></span>get_running_tasks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::get_running_tasks </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$sort</em><span class="paramdefsep"> = </span><span class="paramdefval">''</span></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets a list of currently-running tasks. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$sort</td><td>Sorting method </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>Array of scheduled and adhoc tasks </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d5/d5c/classdml__exception.html">dml_exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0a4052f6e6fc122d164acdf83f9676a6" name="a0a4052f6e6fc122d164acdf83f9676a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a4052f6e6fc122d164acdf83f9676a6">&#9670;&#160;</a></span>get_scheduled_task()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::get_scheduled_task </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$classname</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function load the scheduled task details for a given classname. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$classname</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="../../de/d87/classcore_1_1task_1_1scheduled__task.html" title="Abstract class defining a scheduled task.">core::task::scheduled_task</a></td><td>or false </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a636a6711d13e7ec8b078052628d3be0d" name="a636a6711d13e7ec8b078052628d3be0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a636a6711d13e7ec8b078052628d3be0d">&#9670;&#160;</a></span>is_runnable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::is_runnable </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns if <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> have access to PHP CLI binary or not. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a427ecfa24b3854a94c194438dcb4a3d2" name="a427ecfa24b3854a94c194438dcb4a3d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a427ecfa24b3854a94c194438dcb4a3d2">&#9670;&#160;</a></span>load_default_scheduled_tasks_for_component()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::load_default_scheduled_tasks_for_component </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$componentname</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$expandr</em><span class="paramdefsep"> = </span><span class="paramdefval">true</span></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given a component name, will load the list of tasks in the db/tasks.php file for that component. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$componentname</td><td>- The name of the component to fetch the tasks for. </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$expandr</td><td>- if true (default) an 'R' value in a time is expanded to an appropriate int. If false, they are left as 'R' </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">core::task::scheduled_task[]</td><td>- List of scheduled tasks for this component. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a708c2c32bb554073c66772f9cd82268e" name="a708c2c32bb554073c66772f9cd82268e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a708c2c32bb554073c66772f9cd82268e">&#9670;&#160;</a></span>load_scheduled_tasks_for_component()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::load_scheduled_tasks_for_component </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$componentname</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given a component name, will load the list of tasks from the scheduled_tasks table for that component. </p>
<p>Do not execute tasks loaded from this function - they have not been locked. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$componentname</td><td>- The name of the component to load the tasks for. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">core::task::scheduled_task[]</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a66017831758fe5871a3dfb3a293e3ecd" name="a66017831758fe5871a3dfb3a293e3ecd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66017831758fe5871a3dfb3a293e3ecd">&#9670;&#160;</a></span>passthru_via_mtrace()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::passthru_via_mtrace </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$command</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This behaves similar to passthru but filters every line via the mtrace function so it can be post processed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$command</td><td>to run </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad2135dc09e1f28231e9c166ff96ad255" name="ad2135dc09e1f28231e9c166ff96ad255"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2135dc09e1f28231e9c166ff96ad255">&#9670;&#160;</a></span>queue_adhoc_task()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::queue_adhoc_task </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d91/classcore_1_1task_1_1adhoc__task.html">adhoc_task</a></td>          <td class="paramname"><span class="paramname"><em>$task</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$checkforexisting</em><span class="paramdefsep"> = </span><span class="paramdefval">false</span></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Queue an adhoc task to run in the background. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d4/d91/classcore_1_1task_1_1adhoc__task.html" title="Abstract class defining an adhoc task.">core::task::adhoc_task</a></td><td class="paramname">$task</td><td>- The new adhoc task information to store. </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$checkforexisting</td><td>- If set to true and the task with the same user, classname, component and customdata is already scheduled then it will not schedule a new task. Can be used only for ASAP tasks. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">boolean</td><td>- True if the config was saved. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a683db89096b8d3b07ba30cff6a6836c7" name="a683db89096b8d3b07ba30cff6a6836c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a683db89096b8d3b07ba30cff6a6836c7">&#9670;&#160;</a></span>record_from_adhoc_task()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::record_from_adhoc_task </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$task</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Utility method to create a <a class="el" href="../../d1/dc8/class_d_b.html" title="The main &quot;DB&quot; class is simply a container class with some static methods for creating DB objects as w...">DB</a> record from an adhoc task. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d4/d91/classcore_1_1task_1_1adhoc__task.html" title="Abstract class defining an adhoc task.">core::task::adhoc_task</a></td><td class="paramname">$task</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a60cbce1692b27b3dec65e335f367c11d" name="a60cbce1692b27b3dec65e335f367c11d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60cbce1692b27b3dec65e335f367c11d">&#9670;&#160;</a></span>record_from_scheduled_task()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::record_from_scheduled_task </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$task</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Utility method to create a <a class="el" href="../../d1/dc8/class_d_b.html" title="The main &quot;DB&quot; class is simply a container class with some static methods for creating DB objects as w...">DB</a> record from a scheduled task. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../de/d87/classcore_1_1task_1_1scheduled__task.html" title="Abstract class defining a scheduled task.">core::task::scheduled_task</a></td><td class="paramname">$task</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abec1abaf11e1b79abd777c8468e06052" name="abec1abaf11e1b79abd777c8468e06052"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abec1abaf11e1b79abd777c8468e06052">&#9670;&#160;</a></span>reschedule_or_queue_adhoc_task()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::reschedule_or_queue_adhoc_task </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d91/classcore_1_1task_1_1adhoc__task.html">adhoc_task</a></td>          <td class="paramname"><span class="paramname"><em>$task</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Schedule a new task, or reschedule an existing adhoc task which has matching data. </p>
<p>Only a task matching the same user, classname, component, and customdata will be rescheduled. If these values do not match exactly then a new task is scheduled.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d4/d91/classcore_1_1task_1_1adhoc__task.html" title="Abstract class defining an adhoc task.">core::task::adhoc_task</a></td><td class="paramname">$task</td><td>- The new adhoc task information to store. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd><a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 3.7 </dd></dl>

</div>
</div>
<a id="a65321a674c4792d4c563a2d3e43027b5" name="a65321a674c4792d4c563a2d3e43027b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65321a674c4792d4c563a2d3e43027b5">&#9670;&#160;</a></span>reset_scheduled_tasks_for_component()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::reset_scheduled_tasks_for_component </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$componentname</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update the database to contain a list of scheduled task for a component. </p>
<p>The list of scheduled tasks is taken from @load_scheduled_tasks_for_component. Will throw exceptions for any errors.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$componentname</td><td>- The frankenstyle component name. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af8e25ffd0bb3c1050bea3d6462564ed6" name="af8e25ffd0bb3c1050bea3d6462564ed6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8e25ffd0bb3c1050bea3d6462564ed6">&#9670;&#160;</a></span>run_adhoc_from_cli()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::run_adhoc_from_cli </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$taskid</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Executes an ad hoc task from web invocation using PHP CLI. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$taskid</td><td>Task to execute via CLI. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d6/da8/classmoodle__exception.html" title="Base Moodle Exception class.">moodle_exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a450a2edbbafed7656ffd4b941fe054f2" name="a450a2edbbafed7656ffd4b941fe054f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a450a2edbbafed7656ffd4b941fe054f2">&#9670;&#160;</a></span>run_all_adhoc_from_cli()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::run_all_adhoc_from_cli </td>
          <td>(</td>
          <td class="paramtype">?bool</td>          <td class="paramname"><span class="paramname"><em>$failedonly</em><span class="paramdefsep"> = </span><span class="paramdefval">false</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?string</td>          <td class="paramname"><span class="paramname"><em>$classname</em><span class="paramdefsep"> = </span><span class="paramdefval">null</span></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Executes ad hoc tasks from web invocation using PHP CLI. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">bool&#160;|&#160;null</td><td class="paramname">$failedonly</td><td></td></tr>
    <tr><td class="paramtype">string&#160;|&#160;null</td><td class="paramname">$classname</td><td>Task class to execute via CLI. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d6/da8/classmoodle__exception.html" title="Base Moodle Exception class.">moodle_exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="acc48f57ee8437222ff9099607444cb8e" name="acc48f57ee8437222ff9099607444cb8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc48f57ee8437222ff9099607444cb8e">&#9670;&#160;</a></span>run_from_cli()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::run_from_cli </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d87/classcore_1_1task_1_1scheduled__task.html">scheduled_task</a></td>          <td class="paramname"><span class="paramname"><em>$task</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Executes a cron from web invocation using PHP CLI. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">scheduled_task</td><td class="paramname">$task</td><td>Task that be executed via CLI. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d6/da8/classmoodle__exception.html" title="Base Moodle Exception class.">moodle_exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a436cf98af7c451c177ad73969a1492d4" name="a436cf98af7c451c177ad73969a1492d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a436cf98af7c451c177ad73969a1492d4">&#9670;&#160;</a></span>scheduled_task_complete()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::scheduled_task_complete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d87/classcore_1_1task_1_1scheduled__task.html">scheduled_task</a></td>          <td class="paramname"><span class="paramname"><em>$task</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function indicates that a scheduled task was completed successfully and should be rescheduled. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../de/d87/classcore_1_1task_1_1scheduled__task.html" title="Abstract class defining a scheduled task.">core::task::scheduled_task</a></td><td class="paramname">$task</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad47dbe0a94d1a0519ec9a6a05d03c78a" name="ad47dbe0a94d1a0519ec9a6a05d03c78a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad47dbe0a94d1a0519ec9a6a05d03c78a">&#9670;&#160;</a></span>scheduled_task_failed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::scheduled_task_failed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d87/classcore_1_1task_1_1scheduled__task.html">scheduled_task</a></td>          <td class="paramname"><span class="paramname"><em>$task</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function indicates that a scheduled task was not completed successfully and should be retried. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../de/d87/classcore_1_1task_1_1scheduled__task.html" title="Abstract class defining a scheduled task.">core::task::scheduled_task</a></td><td class="paramname">$task</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2b3b25a3f6e378295ef3801f43c5b73f" name="a2b3b25a3f6e378295ef3801f43c5b73f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b3b25a3f6e378295ef3801f43c5b73f">&#9670;&#160;</a></span>scheduled_task_from_record()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::scheduled_task_from_record </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$record</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$expandr</em><span class="paramdefsep"> = </span><span class="paramdefval">true</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$override</em><span class="paramdefsep"> = </span><span class="paramdefval">true</span></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Utility method to create a task from a <a class="el" href="../../d1/dc8/class_d_b.html" title="The main &quot;DB&quot; class is simply a container class with some static methods for creating DB objects as w...">DB</a> record. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$record</td><td></td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$expandr</td><td>- if true (default) an 'R' value in a time is expanded to an appropriate int. If false, they are left as 'R' </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$override</td><td>- if true loads overridden settings from config. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">core::task::scheduled_task|false</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa78726438d647a2f18de57869e1c9f8e" name="aa78726438d647a2f18de57869e1c9f8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa78726438d647a2f18de57869e1c9f8e">&#9670;&#160;</a></span>scheduled_task_get_override_key()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::scheduled_task_get_override_key </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$classname</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the key within the scheduled tasks config object that for a classname. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$classname</td><td>the scheduled task classname to find </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>the key if found, otherwise null </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a98436ea3a34e8d030cfaf6f73f03de61" name="a98436ea3a34e8d030cfaf6f73f03de61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98436ea3a34e8d030cfaf6f73f03de61">&#9670;&#160;</a></span>scheduled_task_has_override()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::scheduled_task_has_override </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$classname</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This checks whether or not there is a value set in config for a scheduled task. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$classname</td><td>Scheduled task's classname </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>true if there is an entry in config </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab5cfc6ae9c3ddccf4dec23db82a57266" name="ab5cfc6ae9c3ddccf4dec23db82a57266"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5cfc6ae9c3ddccf4dec23db82a57266">&#9670;&#160;</a></span>scheduled_task_starting()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::scheduled_task_starting </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d87/classcore_1_1task_1_1scheduled__task.html">scheduled_task</a></td>          <td class="paramname"><span class="paramname"><em>$task</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$time</em><span class="paramdefsep"> = </span><span class="paramdefval">0</span></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Records that a scheduled task is starting to run. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">scheduled_task</td><td class="paramname">$task</td><td>Task that is starting </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$time</td><td>Start time (0 = current) </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d5/d5c/classdml__exception.html">dml_exception</a></td><td>If the task doesn't exist </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad05b282d3da9ac9d0aacfc8366e2ae2c" name="ad05b282d3da9ac9d0aacfc8366e2ae2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad05b282d3da9ac9d0aacfc8366e2ae2c">&#9670;&#160;</a></span>static_caches_cleared_since()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::static_caches_cleared_since </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$starttime</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return true if the static caches have been cleared since $starttime. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$starttime</td><td>The time this process started. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">boolean</td><td>True if static caches need resetting. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa03cb85b2d7489b1736d16a396704840" name="aa03cb85b2d7489b1736d16a396704840"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa03cb85b2d7489b1736d16a396704840">&#9670;&#160;</a></span>task_is_scheduled()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\task\manager::task_is_scheduled </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$task</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if the task with the same classname, component and customdata is already scheduled. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">adhoc_task</td><td class="paramname">$task</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="afd7b9e116cb7a2c2a17507b6dc6b20bc" name="afd7b9e116cb7a2c2a17507b6dc6b20bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd7b9e116cb7a2c2a17507b6dc6b20bc">&#9670;&#160;</a></span>ADHOC_TASK_FAILED_RETENTION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int const core\task\manager::ADHOC_TASK_FAILED_RETENTION = 4 * <a class="el" href="../../d0/de1/group__core.html#gac0706a63b936d6e5cc890fb08dcd10ce">WEEKSECS</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Used to set the retention period for adhoc tasks that have failed and to be cleaned up. </p>
<p>The number is in week unit. The default value is 4 weeks. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>lib/classes/task/<b>manager.php</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Mar 3 2024 02:32:35 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
