<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: ZipStream\ZipStream Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;4.5</span>
   </div>
   <div id="projectbrief">Moodle 4.5dev (Build: 20240524) (d32844ce296)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search',false);
  $(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d7/d48/namespace_zip_stream.html">ZipStream</a></li><li class="navelem"><a class="el" href="../../df/def/class_zip_stream_1_1_zip_stream.html">ZipStream</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="../../d5/d57/class_zip_stream_1_1_zip_stream-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">ZipStream\ZipStream Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:acd75b49175031a1d669c5e74152fd809" id="r_acd75b49175031a1d669c5e74152fd809"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acd75b49175031a1d669c5e74152fd809">__construct</a> (private <a class="el" href="../../d7/d48/namespace_zip_stream.html#aafda2a57977c06c4d21c0903a5f40282">OperationMode</a> $operationMode=OperationMode::NORMAL, private readonly string $<a class="el" href="../../da/d73/classcomment.html">comment</a>='', $outputStream=null, private readonly <a class="el" href="../../d7/d48/namespace_zip_stream.html#ab26fa2437a9958e1c779c5b8cc3e5cb3">CompressionMethod</a> $defaultCompressionMethod=<a class="el" href="../../d7/d48/namespace_zip_stream.html#ab26fa2437a9958e1c779c5b8cc3e5cb3a55a5616aa7586583152cccbc7cdc415c">CompressionMethod::DEFLATE</a>, private readonly int $defaultDeflateLevel=6, private readonly bool $enableZip64=true, private readonly bool $defaultEnableZeroHeader=true, private bool $sendHttpHeaders=true, ?Closure $httpHeaderCallback=null, private readonly ?string $outputName=null, private readonly string $contentDisposition='attachment', private readonly string $contentType='application/x-zip', private bool $flushOutput=false,)</td></tr>
<tr class="memdesc:acd75b49175031a1d669c5e74152fd809"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new <a class="el" href="../../d7/d48/namespace_zip_stream.html" title="&#160;">ZipStream</a> object.  <br /></td></tr>
<tr class="separator:acd75b49175031a1d669c5e74152fd809"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d4c442ab69a3b5ed0f438dce657d0b3" id="r_a9d4c442ab69a3b5ed0f438dce657d0b3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9d4c442ab69a3b5ed0f438dce657d0b3">addDirectory</a> (string $fileName, string $<a class="el" href="../../da/d73/classcomment.html">comment</a>='', ?DateTimeInterface $lastModificationDateTime=null,)</td></tr>
<tr class="memdesc:a9d4c442ab69a3b5ed0f438dce657d0b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a directory to the archive.  <br /></td></tr>
<tr class="separator:a9d4c442ab69a3b5ed0f438dce657d0b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd45f6a216a18379b607ff47d7bb067a" id="r_afd45f6a216a18379b607ff47d7bb067a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afd45f6a216a18379b607ff47d7bb067a">addFile</a> (string $fileName, string $data, string $<a class="el" href="../../da/d73/classcomment.html">comment</a>='', ?<a class="el" href="../../d7/d48/namespace_zip_stream.html#ab26fa2437a9958e1c779c5b8cc3e5cb3">CompressionMethod</a> $compressionMethod=null, ?int $deflateLevel=null, ?DateTimeInterface $lastModificationDateTime=null, ?int $maxSize=null, ?int $exactSize=null, ?bool $enableZeroHeader=null,)</td></tr>
<tr class="memdesc:afd45f6a216a18379b607ff47d7bb067a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a file to the archive.  <br /></td></tr>
<tr class="separator:afd45f6a216a18379b607ff47d7bb067a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad102c993700ee0f21257518b7095ed6a" id="r_ad102c993700ee0f21257518b7095ed6a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad102c993700ee0f21257518b7095ed6a">addFileFromCallback</a> (string $fileName, Closure $callback, string $<a class="el" href="../../da/d73/classcomment.html">comment</a>='', ?<a class="el" href="../../d7/d48/namespace_zip_stream.html#ab26fa2437a9958e1c779c5b8cc3e5cb3">CompressionMethod</a> $compressionMethod=null, ?int $deflateLevel=null, ?DateTimeInterface $lastModificationDateTime=null, ?int $maxSize=null, ?int $exactSize=null, ?bool $enableZeroHeader=null,)</td></tr>
<tr class="memdesc:ad102c993700ee0f21257518b7095ed6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a file based on a callback.  <br /></td></tr>
<tr class="separator:ad102c993700ee0f21257518b7095ed6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb7e7818eec7157e7cffe8d0552029ea" id="r_abb7e7818eec7157e7cffe8d0552029ea"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abb7e7818eec7157e7cffe8d0552029ea">addFileFromPath</a> (string $fileName, string $path, string $<a class="el" href="../../da/d73/classcomment.html">comment</a>='', ?<a class="el" href="../../d7/d48/namespace_zip_stream.html#ab26fa2437a9958e1c779c5b8cc3e5cb3">CompressionMethod</a> $compressionMethod=null, ?int $deflateLevel=null, ?DateTimeInterface $lastModificationDateTime=null, ?int $maxSize=null, ?int $exactSize=null, ?bool $enableZeroHeader=null,)</td></tr>
<tr class="memdesc:abb7e7818eec7157e7cffe8d0552029ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a file at path to the archive.  <br /></td></tr>
<tr class="separator:abb7e7818eec7157e7cffe8d0552029ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d21fc80c28d2ccacbb20a68694b3d68" id="r_a6d21fc80c28d2ccacbb20a68694b3d68"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6d21fc80c28d2ccacbb20a68694b3d68">addFileFromPsr7Stream</a> (string $fileName, <a class="el" href="../../d8/d24/interface_psr_1_1_http_1_1_message_1_1_stream_interface.html">StreamInterface</a> $stream, string $<a class="el" href="../../da/d73/classcomment.html">comment</a>='', ?<a class="el" href="../../d7/d48/namespace_zip_stream.html#ab26fa2437a9958e1c779c5b8cc3e5cb3">CompressionMethod</a> $compressionMethod=null, ?int $deflateLevel=null, ?DateTimeInterface $lastModificationDateTime=null, ?int $maxSize=null, ?int $exactSize=null, ?bool $enableZeroHeader=null,)</td></tr>
<tr class="memdesc:a6d21fc80c28d2ccacbb20a68694b3d68"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add an open stream to the archive.  <br /></td></tr>
<tr class="separator:a6d21fc80c28d2ccacbb20a68694b3d68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad9a302fa48ee72bc664ad0c85afd5f1" id="r_aad9a302fa48ee72bc664ad0c85afd5f1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aad9a302fa48ee72bc664ad0c85afd5f1">addFileFromStream</a> (string $fileName, $stream, string $<a class="el" href="../../da/d73/classcomment.html">comment</a>='', ?<a class="el" href="../../d7/d48/namespace_zip_stream.html#ab26fa2437a9958e1c779c5b8cc3e5cb3">CompressionMethod</a> $compressionMethod=null, ?int $deflateLevel=null, ?DateTimeInterface $lastModificationDateTime=null, ?int $maxSize=null, ?int $exactSize=null, ?bool $enableZeroHeader=null,)</td></tr>
<tr class="memdesc:aad9a302fa48ee72bc664ad0c85afd5f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add an open stream (resource) to the archive.  <br /></td></tr>
<tr class="separator:aad9a302fa48ee72bc664ad0c85afd5f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6952784957ec62bf751a29298825ee9d" id="r_a6952784957ec62bf751a29298825ee9d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6952784957ec62bf751a29298825ee9d">executeSimulation</a> ()</td></tr>
<tr class="memdesc:a6952784957ec62bf751a29298825ee9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes a previously calculated simulation.  <br /></td></tr>
<tr class="separator:a6952784957ec62bf751a29298825ee9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4fd8688236e33cd267fc2c634cb768c" id="r_ad4fd8688236e33cd267fc2c634cb768c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad4fd8688236e33cd267fc2c634cb768c">finish</a> ()</td></tr>
<tr class="memdesc:ad4fd8688236e33cd267fc2c634cb768c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write zip footer to stream.  <br /></td></tr>
<tr class="separator:ad4fd8688236e33cd267fc2c634cb768c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a18929f3b9f3a9e73fa1904ef9fba22d3" id="r_a18929f3b9f3a9e73fa1904ef9fba22d3"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a18929f3b9f3a9e73fa1904ef9fba22d3">ZIP_VERSION_MADE_BY</a> = 0x603</td></tr>
<tr class="memdesc:a18929f3b9f3a9e73fa1904ef9fba22d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">This number corresponds to the ZIP version/OS used (2 bytes) From: <a href="https://www.iana.org/assignments/media-types/application/zip">https://www.iana.org/assignments/media-types/application/zip</a> The upper byte (leftmost one) indicates the host system (OS) for the file.  <br /></td></tr>
<tr class="separator:a18929f3b9f3a9e73fa1904ef9fba22d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="acd75b49175031a1d669c5e74152fd809" name="acd75b49175031a1d669c5e74152fd809"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd75b49175031a1d669c5e74152fd809">&#9670;&#160;</a></span>__construct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ZipStream\ZipStream::__construct </td>
          <td>(</td>
          <td class="paramtype">private <a class="el" href="../../d7/d48/namespace_zip_stream.html#aafda2a57977c06c4d21c0903a5f40282">OperationMode</a></td>          <td class="paramname"><span class="paramname"><em>$operationMode</em></span><span class="paramdefsep"> = </span><span class="paramdefval">OperationMode::NORMAL</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">private readonly string</td>          <td class="paramname"><span class="paramname"><em>$comment</em></span><span class="paramdefsep"> = </span><span class="paramdefval">''</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$outputStream</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">private readonly <a class="el" href="../../d7/d48/namespace_zip_stream.html#ab26fa2437a9958e1c779c5b8cc3e5cb3">CompressionMethod</a></td>          <td class="paramname"><span class="paramname"><em>$defaultCompressionMethod</em></span><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="../../d7/d48/namespace_zip_stream.html#ab26fa2437a9958e1c779c5b8cc3e5cb3a55a5616aa7586583152cccbc7cdc415c">CompressionMethod::DEFLATE</a></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">private readonly int</td>          <td class="paramname"><span class="paramname"><em>$defaultDeflateLevel</em></span><span class="paramdefsep"> = </span><span class="paramdefval">6</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">private readonly bool</td>          <td class="paramname"><span class="paramname"><em>$enableZip64</em></span><span class="paramdefsep"> = </span><span class="paramdefval">true</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">private readonly bool</td>          <td class="paramname"><span class="paramname"><em>$defaultEnableZeroHeader</em></span><span class="paramdefsep"> = </span><span class="paramdefval">true</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">private bool</td>          <td class="paramname"><span class="paramname"><em>$sendHttpHeaders</em></span><span class="paramdefsep"> = </span><span class="paramdefval">true</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?Closure</td>          <td class="paramname"><span class="paramname"><em>$httpHeaderCallback</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">private readonly ?string</td>          <td class="paramname"><span class="paramname"><em>$outputName</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">private readonly string</td>          <td class="paramname"><span class="paramname"><em>$contentDisposition</em></span><span class="paramdefsep"> = </span><span class="paramdefval">'attachment'</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">private readonly string</td>          <td class="paramname"><span class="paramname"><em>$contentType</em></span><span class="paramdefsep"> = </span><span class="paramdefval">'application/x-zip'</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">private bool</td>          <td class="paramname"><span class="paramname"><em>$flushOutput</em></span><span class="paramdefsep"> = </span><span class="paramdefval">false</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new <a class="el" href="../../d7/d48/namespace_zip_stream.html" title="&#160;">ZipStream</a> object. </p>
<h5><a class="anchor" id="autotoc_md29"></a>
Examples</h5>
<div class="fragment"><div class="line"><span class="comment">// create a new zip file named &#39;foo.zip&#39;</span></div>
<div class="line">$zip = <span class="keyword">new</span> <a class="code hl_namespace" href="../../d7/d48/namespace_zip_stream.html">ZipStream</a>(outputName: <span class="stringliteral">&#39;foo.zip&#39;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// create a new zip file named &#39;bar.zip&#39; with a comment</span></div>
<div class="line">$zip = <span class="keyword">new</span> <a class="code hl_namespace" href="../../d7/d48/namespace_zip_stream.html">ZipStream</a>(</div>
<div class="line">  outputName: <span class="stringliteral">&#39;bar.zip&#39;</span>,</div>
<div class="line">  <a class="code hl_class" href="../../da/d73/classcomment.html">comment</a>: <span class="stringliteral">&#39;this is a comment for the zip file.&#39;</span>,</div>
<div class="line">);</div>
<div class="ttc" id="aclasscomment_html"><div class="ttname"><a href="../../da/d73/classcomment.html">comment</a></div><div class="ttdoc">Comment is helper class to add/delete comments anywhere in moodle.</div><div class="ttdef"><b>Definition</b> lib.php:34</div></div>
<div class="ttc" id="anamespace_zip_stream_html"><div class="ttname"><a href="../../d7/d48/namespace_zip_stream.html">ZipStream</a></div><div class="ttdoc">&amp;#160;</div><div class="ttdef"><b>Definition</b> CentralDirectoryFileHeader.php:5</div></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">OperationMode</td><td class="paramname">$operationMode</td><td>The mode can be used to switch between <code>NORMAL</code> and <code>SIMULATION_*</code> modes. For details see the <code>OperationMode</code> documentation.</td></tr>
  </table>
  </dd>
</dl>
<p>Default to <code>NORMAL</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$comment</td><td>Archive Level Comment</td></tr>
    <tr><td class="paramtype">StreamInterface&#160;|&#160;resource&#160;|&#160;null</td><td class="paramname">$outputStream</td><td>Override the output of the archive to a different target.</td></tr>
  </table>
  </dd>
</dl>
<p>By default the archive is sent to <code>STDOUT</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">CompressionMethod</td><td class="paramname">$defaultCompressionMethod</td><td>How to handle file compression. Legal values are <code>CompressionMethod\DEFLATE</code> (the default), or <code>CompressionMethod\STORE</code>. <code>STORE</code> sends the file raw and is significantly faster, while <code>DEFLATE</code> compresses the file and is much, much slower.</td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$defaultDeflateLevel</td><td>Default deflation level. Only relevant if <code>compressionMethod</code> is <code>DEFLATE</code>.</td></tr>
  </table>
  </dd>
</dl>
<p>See details of <a href="https://www.php.net/manual/en/function.deflate-init.php#refsect1-function.deflate-init-parameters"><code>deflate_init</code></a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">bool</td><td class="paramname">$enableZip64</td><td>Enable Zip64 extension, supporting very large archives (any size &gt; 4 GB or file count &gt; 64k)</td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$defaultEnableZeroHeader</td><td>Enable streaming files with single read.</td></tr>
  </table>
  </dd>
</dl>
<p>When the zero header is set, the file is streamed into the output and the size &amp; checksum are added at the end of the file. This is the fastest method and uses the least memory. Unfortunately not all ZIP clients fully support this and can lead to clients reporting the generated ZIP files as corrupted in combination with other circumstances. (Zip64 enabled, using UTF8 in comments / names etc.)</p>
<p>When the zero header is not set, the length &amp; checksum need to be defined before the file is actually added. To prevent loading all the data into memory, the data has to be read twice. If the data which is added is not seekable, this call will fail.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">bool</td><td class="paramname">$sendHttpHeaders</td><td>Boolean indicating whether or not to send the HTTP headers for this file.</td></tr>
    <tr><td class="paramtype">?Closure</td><td class="paramname">$httpHeaderCallback</td><td>The method called to send HTTP headers</td></tr>
    <tr><td class="paramtype">string&#160;|&#160;null</td><td class="paramname">$outputName</td><td>The name of the created archive.</td></tr>
  </table>
  </dd>
</dl>
<p>Only relevant if <code>$sendHttpHeaders = true</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$contentDisposition</td><td>HTTP Content-Disposition</td></tr>
  </table>
  </dd>
</dl>
<p>Only relevant if <code>sendHttpHeaders = true</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$contentType</td><td>HTTP Content Type</td></tr>
  </table>
  </dd>
</dl>
<p>Only relevant if <code>sendHttpHeaders = true</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">bool</td><td class="paramname">$flushOutput</td><td>Enable flush after every write to output stream.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">self</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a9d4c442ab69a3b5ed0f438dce657d0b3" name="a9d4c442ab69a3b5ed0f438dce657d0b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d4c442ab69a3b5ed0f438dce657d0b3">&#9670;&#160;</a></span>addDirectory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ZipStream\ZipStream::addDirectory </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$fileName</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$comment</em></span><span class="paramdefsep"> = </span><span class="paramdefval">''</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?DateTimeInterface</td>          <td class="paramname"><span class="paramname"><em>$lastModificationDateTime</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a directory to the archive. </p>
<h5><a class="anchor" id="autotoc_md37"></a>
File Options</h5>
<p>See {</p><dl class="section see"><dt>See also</dt><dd>addFileFromPsr7Stream()}</dd></dl>
<h5><a class="anchor" id="autotoc_md38"></a>
Examples</h5>
<div class="fragment"><div class="line"><span class="comment">// add a directory named &#39;world/&#39;</span></div>
<div class="line">$zip-&gt;addFile(fileName: <span class="stringliteral">&#39;world/&#39;</span>);</div>
</div><!-- fragment --> 
</div>
</div>
<a id="afd45f6a216a18379b607ff47d7bb067a" name="afd45f6a216a18379b607ff47d7bb067a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd45f6a216a18379b607ff47d7bb067a">&#9670;&#160;</a></span>addFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ZipStream\ZipStream::addFile </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$fileName</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$comment</em></span><span class="paramdefsep"> = </span><span class="paramdefval">''</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?<a class="el" href="../../d7/d48/namespace_zip_stream.html#ab26fa2437a9958e1c779c5b8cc3e5cb3">CompressionMethod</a></td>          <td class="paramname"><span class="paramname"><em>$compressionMethod</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?int</td>          <td class="paramname"><span class="paramname"><em>$deflateLevel</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?DateTimeInterface</td>          <td class="paramname"><span class="paramname"><em>$lastModificationDateTime</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?int</td>          <td class="paramname"><span class="paramname"><em>$maxSize</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?int</td>          <td class="paramname"><span class="paramname"><em>$exactSize</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?bool</td>          <td class="paramname"><span class="paramname"><em>$enableZeroHeader</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a file to the archive. </p>
<h5><a class="anchor" id="autotoc_md30"></a>
File Options</h5>
<p>See {</p><dl class="section see"><dt>See also</dt><dd>addFileFromPsr7Stream()}</dd></dl>
<h5><a class="anchor" id="autotoc_md31"></a>
Examples</h5>
<div class="fragment"><div class="line"><span class="comment">// add a file named &#39;world.txt&#39;</span></div>
<div class="line">$zip-&gt;addFile(fileName: <span class="stringliteral">&#39;world.txt&#39;</span>, data: <span class="stringliteral">&#39;Hello World!&#39;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// add a file named &#39;bar.jpg&#39; with a comment and a last-modified</span></div>
<div class="line"><span class="comment">// time of two hours ago</span></div>
<div class="line">$zip-&gt;addFile(</div>
<div class="line">  fileName: <span class="stringliteral">&#39;bar.jpg&#39;</span>,</div>
<div class="line">  data: $data,</div>
<div class="line">  <a class="code hl_class" href="../../da/d73/classcomment.html">comment</a>: <span class="stringliteral">&#39;this is a comment about bar.jpg&#39;</span>,</div>
<div class="line">  lastModificationDateTime: new DateTime(<span class="stringliteral">&#39;2 hours ago&#39;</span>),</div>
<div class="line">);</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$data</td><td></td></tr>
  </table>
  </dd>
</dl>
<p>contents of file </p>

</div>
</div>
<a id="ad102c993700ee0f21257518b7095ed6a" name="ad102c993700ee0f21257518b7095ed6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad102c993700ee0f21257518b7095ed6a">&#9670;&#160;</a></span>addFileFromCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ZipStream\ZipStream::addFileFromCallback </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$fileName</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Closure</td>          <td class="paramname"><span class="paramname"><em>$callback</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$comment</em></span><span class="paramdefsep"> = </span><span class="paramdefval">''</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?<a class="el" href="../../d7/d48/namespace_zip_stream.html#ab26fa2437a9958e1c779c5b8cc3e5cb3">CompressionMethod</a></td>          <td class="paramname"><span class="paramname"><em>$compressionMethod</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?int</td>          <td class="paramname"><span class="paramname"><em>$deflateLevel</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?DateTimeInterface</td>          <td class="paramname"><span class="paramname"><em>$lastModificationDateTime</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?int</td>          <td class="paramname"><span class="paramname"><em>$maxSize</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?int</td>          <td class="paramname"><span class="paramname"><em>$exactSize</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?bool</td>          <td class="paramname"><span class="paramname"><em>$enableZeroHeader</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a file based on a callback. </p>
<p>This is useful when you want to simulate a lot of files without keeping all of the file handles open at the same time.</p>
<h5><a class="anchor" id="autotoc_md36"></a>
Examples</h5>
<div class="fragment"><div class="line"><span class="keywordflow">foreach</span>($files as $name =&gt; $size) {</div>
<div class="line">  $archive-&gt;addFileFromPsr7Stream(</div>
<div class="line">    fileName: <span class="stringliteral">&#39;streamfile.txt&#39;</span>,</div>
<div class="line">    exactSize: $size,</div>
<div class="line">    callback: function() use($name): Psr::Http::Message::<a class="code hl_interface" href="../../d8/d24/interface_psr_1_1_http_1_1_message_1_1_stream_interface.html">StreamInterface</a> {</div>
<div class="line">      $response = download($name);</div>
<div class="line">      <span class="keywordflow">return</span> $response-&gt;getBody();</div>
<div class="line">    }</div>
<div class="line">  );</div>
<div class="line">}</div>
<div class="ttc" id="ainterface_psr_1_1_http_1_1_message_1_1_stream_interface_html"><div class="ttname"><a href="../../d8/d24/interface_psr_1_1_http_1_1_message_1_1_stream_interface.html">Psr\Http\Message\StreamInterface</a></div><div class="ttdef"><b>Definition</b> StreamInterface.php:13</div></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$fileName</td><td>path of file in archive (including directory)</td></tr>
    <tr><td class="paramtype">Closure</td><td class="paramname">$callback</td><td>@psalm-param Closure(): (resource|StreamInterface|string) $callback A callback to get the file contents in the shape of a PHP stream, a Psr StreamInterface implementation, or a string.</td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$comment</td><td>ZIP comment for this file</td></tr>
    <tr><td class="paramtype">?CompressionMethod</td><td class="paramname">$compressionMethod</td><td>Override <code>defaultCompressionMethod</code></td></tr>
  </table>
  </dd>
</dl>
<p>See {</p><dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d9/d9e/group__mnet.html#ga095c5d389db211932136b53f25f39685" title="Constructor creates and initialises parser resource and calls initialise.">__construct()</a>}</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">?int</td><td class="paramname">$deflateLevel</td><td>Override <code>defaultDeflateLevel</code></td></tr>
  </table>
  </dd>
</dl>
<p>See {</p><dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d9/d9e/group__mnet.html#ga095c5d389db211932136b53f25f39685" title="Constructor creates and initialises parser resource and calls initialise.">__construct()</a>}</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">?DateTimeInterface</td><td class="paramname">$lastModificationDateTime</td><td>Set last modification time of file.</td></tr>
  </table>
  </dd>
</dl>
<p>Default: <code>now</code></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">?int</td><td class="paramname">$maxSize</td><td>Only read <code>maxSize</code> bytes from file.</td></tr>
  </table>
  </dd>
</dl>
<p>The file is considered done when either reaching <code>EOF</code> or the <code>maxSize</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">?int</td><td class="paramname">$exactSize</td><td>Read exactly <code>exactSize</code> bytes from file. If <code>EOF</code> is reached before reading <code>exactSize</code> bytes, an error will be thrown. The parameter allows for faster size calculations if the <code>stream</code> does not support <code>fstat</code> size or is slow and otherwise known beforehand.</td></tr>
    <tr><td class="paramtype">?bool</td><td class="paramname">$enableZeroHeader</td><td>Override <code>defaultEnableZeroHeader</code></td></tr>
  </table>
  </dd>
</dl>
<p>See {</p><dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d9/d9e/group__mnet.html#ga095c5d389db211932136b53f25f39685" title="Constructor creates and initialises parser resource and calls initialise.">__construct()</a>} </dd></dl>

</div>
</div>
<a id="abb7e7818eec7157e7cffe8d0552029ea" name="abb7e7818eec7157e7cffe8d0552029ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb7e7818eec7157e7cffe8d0552029ea">&#9670;&#160;</a></span>addFileFromPath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ZipStream\ZipStream::addFileFromPath </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$fileName</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$path</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$comment</em></span><span class="paramdefsep"> = </span><span class="paramdefval">''</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?<a class="el" href="../../d7/d48/namespace_zip_stream.html#ab26fa2437a9958e1c779c5b8cc3e5cb3">CompressionMethod</a></td>          <td class="paramname"><span class="paramname"><em>$compressionMethod</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?int</td>          <td class="paramname"><span class="paramname"><em>$deflateLevel</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?DateTimeInterface</td>          <td class="paramname"><span class="paramname"><em>$lastModificationDateTime</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?int</td>          <td class="paramname"><span class="paramname"><em>$maxSize</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?int</td>          <td class="paramname"><span class="paramname"><em>$exactSize</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?bool</td>          <td class="paramname"><span class="paramname"><em>$enableZeroHeader</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a file at path to the archive. </p>
<h5><a class="anchor" id="autotoc_md32"></a>
File Options</h5>
<p>See {</p><dl class="section see"><dt>See also</dt><dd>addFileFromPsr7Stream()}</dd></dl>
<h6>Examples</h6>
<div class="fragment"><div class="line"><span class="comment">// add a file named &#39;foo.txt&#39; from the local file &#39;/tmp/foo.txt&#39;</span></div>
<div class="line">$zip-&gt;addFileFromPath(</div>
<div class="line">  fileName: <span class="stringliteral">&#39;foo.txt&#39;</span>,</div>
<div class="line">  path: <span class="stringliteral">&#39;/tmp/foo.txt&#39;</span>,</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// add a file named &#39;bigfile.rar&#39; from the local file</span></div>
<div class="line"><span class="comment">// &#39;/usr/share/bigfile.rar&#39; with a comment and a last-modified</span></div>
<div class="line"><span class="comment">// time of two hours ago</span></div>
<div class="line">$zip-&gt;addFile(</div>
<div class="line">  fileName: <span class="stringliteral">&#39;bigfile.rar&#39;</span>,</div>
<div class="line">  path: <span class="stringliteral">&#39;/usr/share/bigfile.rar&#39;</span>,</div>
<div class="line">  <a class="code hl_class" href="../../da/d73/classcomment.html">comment</a>: <span class="stringliteral">&#39;this is a comment about bigfile.rar&#39;</span>,</div>
<div class="line">  lastModificationDateTime: new DateTime(<span class="stringliteral">&#39;2 hours ago&#39;</span>),</div>
<div class="line">);</div>
</div><!-- fragment --><dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d3/d93/class_zip_stream_1_1_exception_1_1_file_not_found_exception.html">ZipStream\Exception\FileNotFoundException</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="../../d2/d0d/class_zip_stream_1_1_exception_1_1_file_not_readable_exception.html">ZipStream\Exception\FileNotReadableException</a></td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$fileName</td><td>name of file in archive (including directory path).  </td></tr>
    <tr><td class="paramname">$path</td><td>path to file on disk (note: paths should be encoded using UNIX-style forward slashes &ndash; e.g '/path/to/some/file'). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6d21fc80c28d2ccacbb20a68694b3d68" name="a6d21fc80c28d2ccacbb20a68694b3d68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d21fc80c28d2ccacbb20a68694b3d68">&#9670;&#160;</a></span>addFileFromPsr7Stream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ZipStream\ZipStream::addFileFromPsr7Stream </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$fileName</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/d24/interface_psr_1_1_http_1_1_message_1_1_stream_interface.html">StreamInterface</a></td>          <td class="paramname"><span class="paramname"><em>$stream</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$comment</em></span><span class="paramdefsep"> = </span><span class="paramdefval">''</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?<a class="el" href="../../d7/d48/namespace_zip_stream.html#ab26fa2437a9958e1c779c5b8cc3e5cb3">CompressionMethod</a></td>          <td class="paramname"><span class="paramname"><em>$compressionMethod</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?int</td>          <td class="paramname"><span class="paramname"><em>$deflateLevel</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?DateTimeInterface</td>          <td class="paramname"><span class="paramname"><em>$lastModificationDateTime</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?int</td>          <td class="paramname"><span class="paramname"><em>$maxSize</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?int</td>          <td class="paramname"><span class="paramname"><em>$exactSize</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?bool</td>          <td class="paramname"><span class="paramname"><em>$enableZeroHeader</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add an open stream to the archive. </p>
<h5><a class="anchor" id="autotoc_md35"></a>
Examples</h5>
<div class="fragment"><div class="line">$stream = $response-&gt;getBody();</div>
<div class="line"><span class="comment">// add a file named &#39;streamfile.txt&#39; from the content of the stream</span></div>
<div class="line">$archive-&gt;addFileFromPsr7Stream(</div>
<div class="line">  fileName: <span class="stringliteral">&#39;streamfile.txt&#39;</span>,</div>
<div class="line">  stream: $stream,</div>
<div class="line">);</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$fileName</td><td>path of file in archive (including directory)</td></tr>
    <tr><td class="paramtype">StreamInterface</td><td class="paramname">$stream</td><td>contents of file as a stream resource</td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$comment</td><td>ZIP comment for this file</td></tr>
    <tr><td class="paramtype">?CompressionMethod</td><td class="paramname">$compressionMethod</td><td>Override <code>defaultCompressionMethod</code></td></tr>
  </table>
  </dd>
</dl>
<p>See {</p><dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d9/d9e/group__mnet.html#ga095c5d389db211932136b53f25f39685" title="Constructor creates and initialises parser resource and calls initialise.">__construct()</a>}</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">?int</td><td class="paramname">$deflateLevel</td><td>Override <code>defaultDeflateLevel</code></td></tr>
  </table>
  </dd>
</dl>
<p>See {</p><dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d9/d9e/group__mnet.html#ga095c5d389db211932136b53f25f39685" title="Constructor creates and initialises parser resource and calls initialise.">__construct()</a>}</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">?DateTimeInterface</td><td class="paramname">$lastModificationDateTime</td><td>Set last modification time of file.</td></tr>
  </table>
  </dd>
</dl>
<p>Default: <code>now</code></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">?int</td><td class="paramname">$maxSize</td><td>Only read <code>maxSize</code> bytes from file.</td></tr>
  </table>
  </dd>
</dl>
<p>The file is considered done when either reaching <code>EOF</code> or the <code>maxSize</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">?int</td><td class="paramname">$exactSize</td><td>Read exactly <code>exactSize</code> bytes from file. If <code>EOF</code> is reached before reading <code>exactSize</code> bytes, an error will be thrown. The parameter allows for faster size calculations if the <code>stream</code> does not support <code>fstat</code> size or is slow and otherwise known beforehand.</td></tr>
    <tr><td class="paramtype">?bool</td><td class="paramname">$enableZeroHeader</td><td>Override <code>defaultEnableZeroHeader</code></td></tr>
  </table>
  </dd>
</dl>
<p>See {</p><dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d9/d9e/group__mnet.html#ga095c5d389db211932136b53f25f39685" title="Constructor creates and initialises parser resource and calls initialise.">__construct()</a>} </dd></dl>

</div>
</div>
<a id="aad9a302fa48ee72bc664ad0c85afd5f1" name="aad9a302fa48ee72bc664ad0c85afd5f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad9a302fa48ee72bc664ad0c85afd5f1">&#9670;&#160;</a></span>addFileFromStream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ZipStream\ZipStream::addFileFromStream </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$fileName</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$stream</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$comment</em></span><span class="paramdefsep"> = </span><span class="paramdefval">''</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?<a class="el" href="../../d7/d48/namespace_zip_stream.html#ab26fa2437a9958e1c779c5b8cc3e5cb3">CompressionMethod</a></td>          <td class="paramname"><span class="paramname"><em>$compressionMethod</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?int</td>          <td class="paramname"><span class="paramname"><em>$deflateLevel</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?DateTimeInterface</td>          <td class="paramname"><span class="paramname"><em>$lastModificationDateTime</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?int</td>          <td class="paramname"><span class="paramname"><em>$maxSize</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?int</td>          <td class="paramname"><span class="paramname"><em>$exactSize</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?bool</td>          <td class="paramname"><span class="paramname"><em>$enableZeroHeader</em></span><span class="paramdefsep"> = </span><span class="paramdefval">null</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add an open stream (resource) to the archive. </p>
<h5><a class="anchor" id="autotoc_md33"></a>
File Options</h5>
<p>See {</p><dl class="section see"><dt>See also</dt><dd>addFileFromPsr7Stream()}</dd></dl>
<h5><a class="anchor" id="autotoc_md34"></a>
Examples</h5>
<div class="fragment"><div class="line"><span class="comment">// create a temporary file stream and write text to it</span></div>
<div class="line">$filePointer = tmpfile();</div>
<div class="line">fwrite($filePointer, <span class="stringliteral">&#39;The quick brown fox jumped over the lazy dog.&#39;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// add a file named &#39;streamfile.txt&#39; from the content of the stream</span></div>
<div class="line">$archive-&gt;addFileFromStream(</div>
<div class="line">  fileName: <span class="stringliteral">&#39;streamfile.txt&#39;</span>,</div>
<div class="line">  stream: $filePointer,</div>
<div class="line">);</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">resource</td><td class="paramname">$stream</td><td>contents of file as a stream resource </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6952784957ec62bf751a29298825ee9d" name="a6952784957ec62bf751a29298825ee9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6952784957ec62bf751a29298825ee9d">&#9670;&#160;</a></span>executeSimulation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ZipStream\ZipStream::executeSimulation </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Executes a previously calculated simulation. </p>
<h5><a class="anchor" id="autotoc_md39"></a>
Example</h5>
<div class="fragment"><div class="line">$zip = <span class="keyword">new</span> <a class="code hl_namespace" href="../../d7/d48/namespace_zip_stream.html">ZipStream</a>(</div>
<div class="line">  outputName: <span class="stringliteral">&#39;foo.zip&#39;</span>,</div>
<div class="line">  operationMode: <a class="code hl_enumeration" href="../../d7/d48/namespace_zip_stream.html#aafda2a57977c06c4d21c0903a5f40282">OperationMode</a>::SIMULATE_STRICT,</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line">$zip-&gt;addFile(<span class="stringliteral">&#39;test.txt&#39;</span>, <span class="stringliteral">&#39;Hello World&#39;</span>);</div>
<div class="line"> </div>
<div class="line">$size = $zip-&gt;finish();</div>
<div class="line"> </div>
<div class="line">header(<span class="stringliteral">&#39;Content-Length: &#39;</span>. $size);</div>
<div class="line"> </div>
<div class="line">$zip-&gt;executeSimulation();</div>
<div class="ttc" id="anamespace_zip_stream_html_aafda2a57977c06c4d21c0903a5f40282"><div class="ttname"><a href="../../d7/d48/namespace_zip_stream.html#aafda2a57977c06c4d21c0903a5f40282">ZipStream\OperationMode</a></div><div class="ttdeci">OperationMode</div><div class="ttdef"><b>Definition</b> OperationMode.php:11</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="ad4fd8688236e33cd267fc2c634cb768c" name="ad4fd8688236e33cd267fc2c634cb768c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4fd8688236e33cd267fc2c634cb768c">&#9670;&#160;</a></span>finish()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ZipStream\ZipStream::finish </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write zip footer to stream. </p>
<p>The clase is left in an unusable state after <code>finish</code>.</p>
<h5><a class="anchor" id="autotoc_md40"></a>
Example</h5>
<div class="fragment"><div class="line"><span class="comment">// write footer to stream</span></div>
<div class="line">$zip-&gt;finish();</div>
</div><!-- fragment --> 
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a18929f3b9f3a9e73fa1904ef9fba22d3" name="a18929f3b9f3a9e73fa1904ef9fba22d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18929f3b9f3a9e73fa1904ef9fba22d3">&#9670;&#160;</a></span>ZIP_VERSION_MADE_BY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const ZipStream\ZipStream::ZIP_VERSION_MADE_BY = 0x603</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This number corresponds to the ZIP version/OS used (2 bytes) From: <a href="https://www.iana.org/assignments/media-types/application/zip">https://www.iana.org/assignments/media-types/application/zip</a> The upper byte (leftmost one) indicates the host system (OS) for the file. </p>
<p>Software can use this information to determine the line record format for text files etc. The current mappings are:</p>
<p>0 - MS-DOS and OS/2 (F.A.T. file systems) 1 - Amiga 2 - VAX/VMS 3 - *nix 4 - VM/CMS 5 - Atari ST 6 - OS/2 H.P.F.S. 7 - Macintosh 8 - Z-System 9 - CP/M 10 thru 255 - unused</p>
<p>The lower byte (rightmost one) indicates the version number of the software used to encode the file. The value/10 indicates the major version number, and the value mod 10 is the minor version number. Here we are using 6 for the OS, indicating OS/2 H.P.F.S. to prevent file permissions issues upon extract (see #84) 0x603 is 00000110 00000011 in binary, so 6 and 3 </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>lib/zipstream/src/<b>ZipStream.php</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun May 26 2024 02:52:16 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
