<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: stored_file Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;4.4</span>
   </div>
   <div id="projectbrief">Moodle 4.4dev (Build: 20240223) (e567c21d6ed)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="../../d0/dd4/classstored__file-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">stored_file Class Reference<div class="ingroups"><a class="el" href="../../d5/d09/group__core__files.html">core_files</a></div></div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a8e993566108b8e29c5ae8c644d0acab1" id="r_a8e993566108b8e29c5ae8c644d0acab1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8e993566108b8e29c5ae8c644d0acab1">__construct</a> (<a class="el" href="../../d3/ddd/classfile__storage.html">file_storage</a> $fs, stdClass $file_record, $deprecated=null)</td></tr>
<tr class="memdesc:a8e993566108b8e29c5ae8c644d0acab1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor, this constructor should be called ONLY from the <a class="el" href="../../d3/ddd/classfile__storage.html">file_storage</a> class!  <br /></td></tr>
<tr class="separator:a8e993566108b8e29c5ae8c644d0acab1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d13096e846b0c1d1133f4f85728407b" id="r_a6d13096e846b0c1d1133f4f85728407b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6d13096e846b0c1d1133f4f85728407b">__sleep</a> ()</td></tr>
<tr class="memdesc:a6d13096e846b0c1d1133f4f85728407b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Magic method, called during serialization.  <br /></td></tr>
<tr class="separator:a6d13096e846b0c1d1133f4f85728407b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcea847cf3d496568d4d0812091007f4" id="r_afcea847cf3d496568d4d0812091007f4"><td class="memItemLeft" align="right" valign="top"><a id="afcea847cf3d496568d4d0812091007f4" name="afcea847cf3d496568d4d0812091007f4"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>__wakeup</b> ()</td></tr>
<tr class="memdesc:afcea847cf3d496568d4d0812091007f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Magic method, called during unserialization. <br /></td></tr>
<tr class="separator:afcea847cf3d496568d4d0812091007f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07cf5750dcb4a650d6948bbe758a03a2" id="r_a07cf5750dcb4a650d6948bbe758a03a2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a07cf5750dcb4a650d6948bbe758a03a2">add_to_curl_request</a> (&amp;$curlrequest, $key)</td></tr>
<tr class="memdesc:a07cf5750dcb4a650d6948bbe758a03a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">adds this file path to a curl request (POST only)  <br /></td></tr>
<tr class="separator:a07cf5750dcb4a650d6948bbe758a03a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30fd65bf9d225d2e1d27989177dac7d5" id="r_a30fd65bf9d225d2e1d27989177dac7d5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a30fd65bf9d225d2e1d27989177dac7d5">archive_file</a> (<a class="el" href="../../d0/d59/classfile__archive.html">file_archive</a> $filearch, $archivepath)</td></tr>
<tr class="memdesc:a30fd65bf9d225d2e1d27989177dac7d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add file/directory into archive.  <br /></td></tr>
<tr class="separator:a30fd65bf9d225d2e1d27989177dac7d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6788d63cf90b5f94780426a206ab987e" id="r_a6788d63cf90b5f94780426a206ab987e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6788d63cf90b5f94780426a206ab987e">compare_to_path</a> ($path)</td></tr>
<tr class="memdesc:a6788d63cf90b5f94780426a206ab987e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether the supplied file is the same as this file.  <br /></td></tr>
<tr class="separator:a6788d63cf90b5f94780426a206ab987e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa46f5c12185de7af39f516af2881270b" id="r_aa46f5c12185de7af39f516af2881270b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa46f5c12185de7af39f516af2881270b">compare_to_string</a> ($content)</td></tr>
<tr class="memdesc:aa46f5c12185de7af39f516af2881270b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether the supplied content is the same as this file.  <br /></td></tr>
<tr class="separator:aa46f5c12185de7af39f516af2881270b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb43a2f0c53b99ed3f6c15e9547317c4" id="r_acb43a2f0c53b99ed3f6c15e9547317c4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acb43a2f0c53b99ed3f6c15e9547317c4">copy_content_to</a> ($pathname)</td></tr>
<tr class="memdesc:acb43a2f0c53b99ed3f6c15e9547317c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy content of file to given pathname.  <br /></td></tr>
<tr class="separator:acb43a2f0c53b99ed3f6c15e9547317c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3275b3884e7cbd6800cca034cd59e712" id="r_a3275b3884e7cbd6800cca034cd59e712"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3275b3884e7cbd6800cca034cd59e712">copy_content_to_temp</a> ($dir='files', $fileprefix='tempup_')</td></tr>
<tr class="memdesc:a3275b3884e7cbd6800cca034cd59e712"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy content of file to temporary folder and returns file path.  <br /></td></tr>
<tr class="separator:a3275b3884e7cbd6800cca034cd59e712"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abde8e64ff95ef11d3c77043376ec81eb" id="r_abde8e64ff95ef11d3c77043376ec81eb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abde8e64ff95ef11d3c77043376ec81eb">delete</a> ()</td></tr>
<tr class="memdesc:abde8e64ff95ef11d3c77043376ec81eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete file from files table.  <br /></td></tr>
<tr class="separator:abde8e64ff95ef11d3c77043376ec81eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91876050c8cd4246f16777c5a9876db8" id="r_a91876050c8cd4246f16777c5a9876db8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a91876050c8cd4246f16777c5a9876db8">delete_reference</a> ()</td></tr>
<tr class="memdesc:a91876050c8cd4246f16777c5a9876db8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlink the stored file from the referenced file.  <br /></td></tr>
<tr class="separator:a91876050c8cd4246f16777c5a9876db8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af11c1ae51e8b1031aa07f92bdcd6a27f" id="r_af11c1ae51e8b1031aa07f92bdcd6a27f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af11c1ae51e8b1031aa07f92bdcd6a27f">extract_to_pathname</a> (<a class="el" href="../../df/d4d/classfile__packer.html">file_packer</a> $packer, $pathname, <a class="el" href="../../d5/dd5/interfacefile__progress.html">file_progress</a> $progress=null)</td></tr>
<tr class="memdesc:af11c1ae51e8b1031aa07f92bdcd6a27f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extract file to given file path (real OS filesystem), existing files are overwritten.  <br /></td></tr>
<tr class="separator:af11c1ae51e8b1031aa07f92bdcd6a27f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af41761415bad4b78baa382a7a0875f4d" id="r_af41761415bad4b78baa382a7a0875f4d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af41761415bad4b78baa382a7a0875f4d">extract_to_storage</a> (<a class="el" href="../../df/d4d/classfile__packer.html">file_packer</a> $packer, $contextid, $component, $filearea, $itemid, $pathbase, $userid=null, <a class="el" href="../../d5/dd5/interfacefile__progress.html">file_progress</a> $progress=null)</td></tr>
<tr class="memdesc:af41761415bad4b78baa382a7a0875f4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extract file to given file path (real OS filesystem), existing files are overwritten.  <br /></td></tr>
<tr class="separator:af41761415bad4b78baa382a7a0875f4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67a97bf7342348cb0f768a642f30122d" id="r_a67a97bf7342348cb0f768a642f30122d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a67a97bf7342348cb0f768a642f30122d">generate_image_thumbnail</a> ($width, $height)</td></tr>
<tr class="memdesc:a67a97bf7342348cb0f768a642f30122d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates a thumbnail for this <a class="el" href="../../d0/d00/classstored__file.html">stored_file</a>.  <br /></td></tr>
<tr class="separator:a67a97bf7342348cb0f768a642f30122d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb7f0b9aced718e13a76e5a0441cb77b" id="r_abb7f0b9aced718e13a76e5a0441cb77b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abb7f0b9aced718e13a76e5a0441cb77b">get_author</a> ()</td></tr>
<tr class="memdesc:abb7f0b9aced718e13a76e5a0441cb77b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the author name of the file.  <br /></td></tr>
<tr class="separator:abb7f0b9aced718e13a76e5a0441cb77b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d472e8674bf40b41b52a745c62912ed" id="r_a3d472e8674bf40b41b52a745c62912ed"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3d472e8674bf40b41b52a745c62912ed">get_component</a> ()</td></tr>
<tr class="memdesc:a3d472e8674bf40b41b52a745c62912ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns component name - this is the owner of the areas, nothing else is allowed to read or modify the files directly!!  <br /></td></tr>
<tr class="separator:a3d472e8674bf40b41b52a745c62912ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6201e06dee7d4074767bf33dad3ec93c" id="r_a6201e06dee7d4074767bf33dad3ec93c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6201e06dee7d4074767bf33dad3ec93c">get_content</a> ()</td></tr>
<tr class="memdesc:a6201e06dee7d4074767bf33dad3ec93c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns file content as string.  <br /></td></tr>
<tr class="separator:a6201e06dee7d4074767bf33dad3ec93c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31fd7f845942925b6787956a1e9f7d04" id="r_a31fd7f845942925b6787956a1e9f7d04"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a31fd7f845942925b6787956a1e9f7d04">get_content_file_handle</a> ($type=self::FILE_HANDLE_FOPEN)</td></tr>
<tr class="memdesc:a31fd7f845942925b6787956a1e9f7d04"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns file handle - read only mode, no writing allowed into pool files!  <br /></td></tr>
<tr class="separator:a31fd7f845942925b6787956a1e9f7d04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fb1df69f493dfb6cf3d8ca9be4c98e7" id="r_a6fb1df69f493dfb6cf3d8ca9be4c98e7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6fb1df69f493dfb6cf3d8ca9be4c98e7">get_contenthash</a> ()</td></tr>
<tr class="memdesc:a6fb1df69f493dfb6cf3d8ca9be4c98e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns sha1 hash of file content.  <br /></td></tr>
<tr class="separator:a6fb1df69f493dfb6cf3d8ca9be4c98e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3bc3da86b259493d6de762c70632159" id="r_aa3bc3da86b259493d6de762c70632159"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa3bc3da86b259493d6de762c70632159">get_contextid</a> ()</td></tr>
<tr class="memdesc:aa3bc3da86b259493d6de762c70632159"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns context id of the file.  <br /></td></tr>
<tr class="separator:aa3bc3da86b259493d6de762c70632159"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee258cb4c03fea3fce9675cfdf39140c" id="r_aee258cb4c03fea3fce9675cfdf39140c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aee258cb4c03fea3fce9675cfdf39140c">get_filearea</a> ()</td></tr>
<tr class="memdesc:aee258cb4c03fea3fce9675cfdf39140c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns file area name, this divides files of one component into groups with different access control.  <br /></td></tr>
<tr class="separator:aee258cb4c03fea3fce9675cfdf39140c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0c38842b13c816df29e6022cf907aee" id="r_ab0c38842b13c816df29e6022cf907aee"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab0c38842b13c816df29e6022cf907aee">get_filename</a> ()</td></tr>
<tr class="memdesc:ab0c38842b13c816df29e6022cf907aee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns file name or '.  <br /></td></tr>
<tr class="separator:ab0c38842b13c816df29e6022cf907aee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a323bf134b16476894a780b0d81287479" id="r_a323bf134b16476894a780b0d81287479"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a323bf134b16476894a780b0d81287479">get_filepath</a> ()</td></tr>
<tr class="memdesc:a323bf134b16476894a780b0d81287479"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns file path - starts and ends with /, are not allowed.  <br /></td></tr>
<tr class="separator:a323bf134b16476894a780b0d81287479"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1920cc2375e76326854a32c4390c9f11" id="r_a1920cc2375e76326854a32c4390c9f11"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1920cc2375e76326854a32c4390c9f11">get_filesize</a> ()</td></tr>
<tr class="memdesc:a1920cc2375e76326854a32c4390c9f11"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the size of file in bytes.  <br /></td></tr>
<tr class="separator:a1920cc2375e76326854a32c4390c9f11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68dc68e1ca1036e1f788b91109bbb61b" id="r_a68dc68e1ca1036e1f788b91109bbb61b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a68dc68e1ca1036e1f788b91109bbb61b">get_id</a> ()</td></tr>
<tr class="memdesc:a68dc68e1ca1036e1f788b91109bbb61b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns file id.  <br /></td></tr>
<tr class="separator:a68dc68e1ca1036e1f788b91109bbb61b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7446a3d5c54e9f441e1cf7012d16ef1a" id="r_a7446a3d5c54e9f441e1cf7012d16ef1a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7446a3d5c54e9f441e1cf7012d16ef1a">get_imageinfo</a> ()</td></tr>
<tr class="memdesc:a7446a3d5c54e9f441e1cf7012d16ef1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns information about image, information is determined from the file content.  <br /></td></tr>
<tr class="separator:a7446a3d5c54e9f441e1cf7012d16ef1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92615564bd37483542d73581ef5ea4ce" id="r_a92615564bd37483542d73581ef5ea4ce"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a92615564bd37483542d73581ef5ea4ce">get_itemid</a> ()</td></tr>
<tr class="memdesc:a92615564bd37483542d73581ef5ea4ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns returns item id of file.  <br /></td></tr>
<tr class="separator:a92615564bd37483542d73581ef5ea4ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af12ab329e2aa78116e9df0b4e96dce97" id="r_af12ab329e2aa78116e9df0b4e96dce97"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af12ab329e2aa78116e9df0b4e96dce97">get_license</a> ()</td></tr>
<tr class="memdesc:af12ab329e2aa78116e9df0b4e96dce97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the license type of the file, it is a short name referred from license table.  <br /></td></tr>
<tr class="separator:af12ab329e2aa78116e9df0b4e96dce97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15cf8f24ed626d3cde2c5a278bcdc8f3" id="r_a15cf8f24ed626d3cde2c5a278bcdc8f3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a15cf8f24ed626d3cde2c5a278bcdc8f3">get_mimetype</a> ()</td></tr>
<tr class="memdesc:a15cf8f24ed626d3cde2c5a278bcdc8f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns mime type of file.  <br /></td></tr>
<tr class="separator:a15cf8f24ed626d3cde2c5a278bcdc8f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53ae28d76de519df5926e23f7637ede7" id="r_a53ae28d76de519df5926e23f7637ede7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a53ae28d76de519df5926e23f7637ede7">get_parent_directory</a> ()</td></tr>
<tr class="memdesc:a53ae28d76de519df5926e23f7637ede7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns parent directory, creates missing parents if needed.  <br /></td></tr>
<tr class="separator:a53ae28d76de519df5926e23f7637ede7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e69a939ab10d14d90021692857128a9" id="r_a2e69a939ab10d14d90021692857128a9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2e69a939ab10d14d90021692857128a9">get_pathnamehash</a> ()</td></tr>
<tr class="memdesc:a2e69a939ab10d14d90021692857128a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns sha1 hash of all file path components sha1("contextid/component/filearea/itemid/dir/dir/filename.ext").  <br /></td></tr>
<tr class="separator:a2e69a939ab10d14d90021692857128a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c10862e8589ef6c51d4b2947a7add4d" id="r_a6c10862e8589ef6c51d4b2947a7add4d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6c10862e8589ef6c51d4b2947a7add4d">get_psr_stream</a> ()</td></tr>
<tr class="memdesc:a6c10862e8589ef6c51d4b2947a7add4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a read-only PSR-7 stream for this file.  <br /></td></tr>
<tr class="separator:a6c10862e8589ef6c51d4b2947a7add4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe0985d5e1e54f3a72b2d5ce0ad1a954" id="r_afe0985d5e1e54f3a72b2d5ce0ad1a954"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afe0985d5e1e54f3a72b2d5ce0ad1a954">get_reference</a> ()</td></tr>
<tr class="memdesc:afe0985d5e1e54f3a72b2d5ce0ad1a954"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns file reference.  <br /></td></tr>
<tr class="separator:afe0985d5e1e54f3a72b2d5ce0ad1a954"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e8b7fd7fdce5c06660bcb83ea7ee170" id="r_a2e8b7fd7fdce5c06660bcb83ea7ee170"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2e8b7fd7fdce5c06660bcb83ea7ee170">get_reference_details</a> ()</td></tr>
<tr class="memdesc:a2e8b7fd7fdce5c06660bcb83ea7ee170"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get human readable file reference information.  <br /></td></tr>
<tr class="separator:a2e8b7fd7fdce5c06660bcb83ea7ee170"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a786a68553bef6c66f5de8f9ce788638a" id="r_a786a68553bef6c66f5de8f9ce788638a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a786a68553bef6c66f5de8f9ce788638a">get_referencefileid</a> ()</td></tr>
<tr class="memdesc:a786a68553bef6c66f5de8f9ce788638a"><td class="mdescLeft">&#160;</td><td class="mdescRight">get reference file id  <br /></td></tr>
<tr class="separator:a786a68553bef6c66f5de8f9ce788638a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e94cdc9b1890a4724b4c23a1292876d" id="r_a2e94cdc9b1890a4724b4c23a1292876d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2e94cdc9b1890a4724b4c23a1292876d">get_referencelastsync</a> ()</td></tr>
<tr class="memdesc:a2e94cdc9b1890a4724b4c23a1292876d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get reference last sync time.  <br /></td></tr>
<tr class="separator:a2e94cdc9b1890a4724b4c23a1292876d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a139c64df0a7694ab5047e1de5d46712c" id="r_a139c64df0a7694ab5047e1de5d46712c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a139c64df0a7694ab5047e1de5d46712c">get_referencelifetime</a> ()</td></tr>
<tr class="memdesc:a139c64df0a7694ab5047e1de5d46712c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function stored_file::get_referencelifetime() is deprecated as reference life time is no longer stored in <a class="el" href="../../d1/dc8/class_d_b.html" title="The main &quot;DB&quot; class is simply a container class with some static methods for creating DB objects as w...">DB</a> or returned by repository.  <br /></td></tr>
<tr class="separator:a139c64df0a7694ab5047e1de5d46712c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ed3cd2e837f3570bac8664591e6d217" id="r_a6ed3cd2e837f3570bac8664591e6d217"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6ed3cd2e837f3570bac8664591e6d217">get_repository_id</a> ()</td></tr>
<tr class="memdesc:a6ed3cd2e837f3570bac8664591e6d217"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns repository id.  <br /></td></tr>
<tr class="separator:a6ed3cd2e837f3570bac8664591e6d217"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dafe8269958ac0123cb735b461df918" id="r_a0dafe8269958ac0123cb735b461df918"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0dafe8269958ac0123cb735b461df918">get_repository_type</a> ()</td></tr>
<tr class="memdesc:a0dafe8269958ac0123cb735b461df918"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns repository type.  <br /></td></tr>
<tr class="separator:a0dafe8269958ac0123cb735b461df918"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23a114bcbd98792823c827be99ccf9e6" id="r_a23a114bcbd98792823c827be99ccf9e6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a23a114bcbd98792823c827be99ccf9e6">get_sortorder</a> ()</td></tr>
<tr class="memdesc:a23a114bcbd98792823c827be99ccf9e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the sort order of file.  <br /></td></tr>
<tr class="separator:a23a114bcbd98792823c827be99ccf9e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2974f331cedb06349ca8da5622f1c5d9" id="r_a2974f331cedb06349ca8da5622f1c5d9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2974f331cedb06349ca8da5622f1c5d9">get_source</a> ()</td></tr>
<tr class="memdesc:a2974f331cedb06349ca8da5622f1c5d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the source of the file, usually it is a url.  <br /></td></tr>
<tr class="separator:a2974f331cedb06349ca8da5622f1c5d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7f0b72a0e58dad5fd53dd365af9451a" id="r_af7f0b72a0e58dad5fd53dd365af9451a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af7f0b72a0e58dad5fd53dd365af9451a">get_status</a> ()</td></tr>
<tr class="memdesc:af7f0b72a0e58dad5fd53dd365af9451a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns file status flag.  <br /></td></tr>
<tr class="separator:af7f0b72a0e58dad5fd53dd365af9451a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7af0854b3ac43ef56427adfbe71232c" id="r_aa7af0854b3ac43ef56427adfbe71232c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa7af0854b3ac43ef56427adfbe71232c">get_timecreated</a> ()</td></tr>
<tr class="memdesc:aa7af0854b3ac43ef56427adfbe71232c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns unix timestamp of file creation date.  <br /></td></tr>
<tr class="separator:aa7af0854b3ac43ef56427adfbe71232c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb59b5ec7faacb2965293d28f536eed7" id="r_abb59b5ec7faacb2965293d28f536eed7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abb59b5ec7faacb2965293d28f536eed7">get_timemodified</a> ()</td></tr>
<tr class="memdesc:abb59b5ec7faacb2965293d28f536eed7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns unix timestamp of last file modification.  <br /></td></tr>
<tr class="separator:abb59b5ec7faacb2965293d28f536eed7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0930188c639f5fb1953930b5981298fc" id="r_a0930188c639f5fb1953930b5981298fc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0930188c639f5fb1953930b5981298fc">get_total_content_size</a> (<a class="el" href="../../df/d4d/classfile__packer.html">file_packer</a> $packer)</td></tr>
<tr class="memdesc:a0930188c639f5fb1953930b5981298fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the total size (in bytes) of the contents of an archive.  <br /></td></tr>
<tr class="separator:a0930188c639f5fb1953930b5981298fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accebf6ed36ce0977f55d3914acdadf47" id="r_accebf6ed36ce0977f55d3914acdadf47"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#accebf6ed36ce0977f55d3914acdadf47">get_userid</a> ()</td></tr>
<tr class="memdesc:accebf6ed36ce0977f55d3914acdadf47"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns id of user who created the file.  <br /></td></tr>
<tr class="separator:accebf6ed36ce0977f55d3914acdadf47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb11b8fdfd5bb970b4720eed825dc970" id="r_aeb11b8fdfd5bb970b4720eed825dc970"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aeb11b8fdfd5bb970b4720eed825dc970">import_external_file_contents</a> ($maxbytes=0)</td></tr>
<tr class="memdesc:aeb11b8fdfd5bb970b4720eed825dc970"><td class="mdescLeft">&#160;</td><td class="mdescRight">Imports the contents of an external file into moodle filepool.  <br /></td></tr>
<tr class="separator:aeb11b8fdfd5bb970b4720eed825dc970"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5d5f598941697170fa99c244616ae0c" id="r_aa5d5f598941697170fa99c244616ae0c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa5d5f598941697170fa99c244616ae0c">is_controlled_link</a> ()</td></tr>
<tr class="memdesc:aa5d5f598941697170fa99c244616ae0c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether or not this is a controlled link.  <br /></td></tr>
<tr class="separator:aa5d5f598941697170fa99c244616ae0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d60de6b8d9b4d118e0df0ecc87ad39b" id="r_a8d60de6b8d9b4d118e0df0ecc87ad39b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8d60de6b8d9b4d118e0df0ecc87ad39b">is_directory</a> ()</td></tr>
<tr class="memdesc:a8d60de6b8d9b4d118e0df0ecc87ad39b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is this a directory?  <br /></td></tr>
<tr class="separator:a8d60de6b8d9b4d118e0df0ecc87ad39b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a483285da5b7bfbfdbf00bdbce9cc9d24" id="r_a483285da5b7bfbfdbf00bdbce9cc9d24"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a483285da5b7bfbfdbf00bdbce9cc9d24">is_external_file</a> ()</td></tr>
<tr class="memdesc:a483285da5b7bfbfdbf00bdbce9cc9d24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether or not this is a external resource.  <br /></td></tr>
<tr class="separator:a483285da5b7bfbfdbf00bdbce9cc9d24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd13a10ec78d3b263b40ef7b3a37fb3a" id="r_abd13a10ec78d3b263b40ef7b3a37fb3a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abd13a10ec78d3b263b40ef7b3a37fb3a">is_valid_image</a> ()</td></tr>
<tr class="memdesc:abd13a10ec78d3b263b40ef7b3a37fb3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verifies the file is a valid web image - gif, png and jpeg only.  <br /></td></tr>
<tr class="separator:abd13a10ec78d3b263b40ef7b3a37fb3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06616ddb363e6b7f14d42e5eab1fdb11" id="r_a06616ddb363e6b7f14d42e5eab1fdb11"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a06616ddb363e6b7f14d42e5eab1fdb11">list_files</a> (<a class="el" href="../../df/d4d/classfile__packer.html">file_packer</a> $packer)</td></tr>
<tr class="memdesc:a06616ddb363e6b7f14d42e5eab1fdb11"><td class="mdescLeft">&#160;</td><td class="mdescRight">List contents of archive.  <br /></td></tr>
<tr class="separator:a06616ddb363e6b7f14d42e5eab1fdb11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e594db6c788df711d1d667132a439f2" id="r_a5e594db6c788df711d1d667132a439f2"><td class="memItemLeft" align="right" valign="top"><a id="a5e594db6c788df711d1d667132a439f2" name="a5e594db6c788df711d1d667132a439f2"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>readfile</b> ()</td></tr>
<tr class="memdesc:a5e594db6c788df711d1d667132a439f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dumps file content to page. <br /></td></tr>
<tr class="separator:a5e594db6c788df711d1d667132a439f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91cec28b2788b82b22ef0abe82831785" id="r_a91cec28b2788b82b22ef0abe82831785"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a91cec28b2788b82b22ef0abe82831785">rename</a> ($filepath, $filename)</td></tr>
<tr class="memdesc:a91cec28b2788b82b22ef0abe82831785"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rename filename.  <br /></td></tr>
<tr class="separator:a91cec28b2788b82b22ef0abe82831785"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a40f48411f4fb7473bfa725caf0dca2" id="r_a1a40f48411f4fb7473bfa725caf0dca2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1a40f48411f4fb7473bfa725caf0dca2">replace_content_with</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $storedfile)</td></tr>
<tr class="memdesc:a1a40f48411f4fb7473bfa725caf0dca2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function stored_file::replace_content_with() is deprecated.  <br /></td></tr>
<tr class="separator:a1a40f48411f4fb7473bfa725caf0dca2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd3695f9d711311cf37af3e6561c61ba" id="r_afd3695f9d711311cf37af3e6561c61ba"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afd3695f9d711311cf37af3e6561c61ba">replace_file_with</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $newfile)</td></tr>
<tr class="memdesc:afd3695f9d711311cf37af3e6561c61ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Replaces the fields that might have changed when file was overriden in filepicker: reference, contenthash, filesize, userid.  <br /></td></tr>
<tr class="separator:afd3695f9d711311cf37af3e6561c61ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c31a8673c981d8a61e315a95181f7c0" id="r_a4c31a8673c981d8a61e315a95181f7c0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4c31a8673c981d8a61e315a95181f7c0">resize_image</a> ($width, $height)</td></tr>
<tr class="memdesc:a4c31a8673c981d8a61e315a95181f7c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate a resized image for this <a class="el" href="../../d0/d00/classstored__file.html">stored_file</a>.  <br /></td></tr>
<tr class="separator:a4c31a8673c981d8a61e315a95181f7c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3822a2f45fefb253c024ff6951a42fa7" id="r_a3822a2f45fefb253c024ff6951a42fa7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3822a2f45fefb253c024ff6951a42fa7">rotate_image</a> ()</td></tr>
<tr class="memdesc:a3822a2f45fefb253c024ff6951a42fa7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate a rotated image for this <a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> based on exif information.  <br /></td></tr>
<tr class="separator:a3822a2f45fefb253c024ff6951a42fa7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2889cf58cb32f56cd5d46ae571620d3e" id="r_a2889cf58cb32f56cd5d46ae571620d3e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2889cf58cb32f56cd5d46ae571620d3e">send_file</a> ($lifetime, $filter, $forcedownload, $options)</td></tr>
<tr class="memdesc:a2889cf58cb32f56cd5d46ae571620d3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send file references.  <br /></td></tr>
<tr class="separator:a2889cf58cb32f56cd5d46ae571620d3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11eb7587fddd1d6e9c97e7c355bdd9e2" id="r_a11eb7587fddd1d6e9c97e7c355bdd9e2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a11eb7587fddd1d6e9c97e7c355bdd9e2">send_relative_file</a> ($relativepath)</td></tr>
<tr class="memdesc:a11eb7587fddd1d6e9c97e7c355bdd9e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a file relative to this file in the repository and sends it to the browser.  <br /></td></tr>
<tr class="separator:a11eb7587fddd1d6e9c97e7c355bdd9e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29f329949c749e65d5fe785094d8f941" id="r_a29f329949c749e65d5fe785094d8f941"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a29f329949c749e65d5fe785094d8f941">set_author</a> ($author)</td></tr>
<tr class="memdesc:a29f329949c749e65d5fe785094d8f941"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set author.  <br /></td></tr>
<tr class="separator:a29f329949c749e65d5fe785094d8f941"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a207236693ab10786bb29e29137356031" id="r_a207236693ab10786bb29e29137356031"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a207236693ab10786bb29e29137356031">set_filesize</a> ($filesize)</td></tr>
<tr class="memdesc:a207236693ab10786bb29e29137356031"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function stored_file::set_filesize() is deprecated.  <br /></td></tr>
<tr class="separator:a207236693ab10786bb29e29137356031"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15e37b9ec414a0bdf731a0d69e305fbe" id="r_a15e37b9ec414a0bdf731a0d69e305fbe"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a15e37b9ec414a0bdf731a0d69e305fbe">set_license</a> ($license)</td></tr>
<tr class="memdesc:a15e37b9ec414a0bdf731a0d69e305fbe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set license.  <br /></td></tr>
<tr class="separator:a15e37b9ec414a0bdf731a0d69e305fbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40034ca4e94b4c997bff5f07d74e2292" id="r_a40034ca4e94b4c997bff5f07d74e2292"><td class="memItemLeft" align="right" valign="top"><a id="a40034ca4e94b4c997bff5f07d74e2292" name="a40034ca4e94b4c997bff5f07d74e2292"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>set_missingsource</b> ()</td></tr>
<tr class="memdesc:a40034ca4e94b4c997bff5f07d74e2292"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the error status for a file that could not be synchronised. <br /></td></tr>
<tr class="separator:a40034ca4e94b4c997bff5f07d74e2292"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc0326ba086e81e3bd950d53625cf9c6" id="r_abc0326ba086e81e3bd950d53625cf9c6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abc0326ba086e81e3bd950d53625cf9c6">set_sortorder</a> ($sortorder)</td></tr>
<tr class="memdesc:abc0326ba086e81e3bd950d53625cf9c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set file sort order.  <br /></td></tr>
<tr class="separator:abc0326ba086e81e3bd950d53625cf9c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14b3af91e5ca7f40997eb5a1bde0e918" id="r_a14b3af91e5ca7f40997eb5a1bde0e918"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a14b3af91e5ca7f40997eb5a1bde0e918">set_source</a> ($source)</td></tr>
<tr class="memdesc:a14b3af91e5ca7f40997eb5a1bde0e918"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set license.  <br /></td></tr>
<tr class="separator:a14b3af91e5ca7f40997eb5a1bde0e918"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a074728b67a2c514f6533d1964aa4916b" id="r_a074728b67a2c514f6533d1964aa4916b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a074728b67a2c514f6533d1964aa4916b">set_synchronised_content_from_file</a> ($path)</td></tr>
<tr class="memdesc:a074728b67a2c514f6533d1964aa4916b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set synchronised content from file.  <br /></td></tr>
<tr class="separator:a074728b67a2c514f6533d1964aa4916b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a481a48a8267b97705534cf7cdf39891f" id="r_a481a48a8267b97705534cf7cdf39891f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a481a48a8267b97705534cf7cdf39891f">set_synchronised_content_from_string</a> ($content)</td></tr>
<tr class="memdesc:a481a48a8267b97705534cf7cdf39891f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set synchronised content from content.  <br /></td></tr>
<tr class="separator:a481a48a8267b97705534cf7cdf39891f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4db25a155749b6306c7eca51e3270799" id="r_a4db25a155749b6306c7eca51e3270799"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4db25a155749b6306c7eca51e3270799">set_synchronized</a> ($contenthash, $filesize, $status=0, $timemodified=null)</td></tr>
<tr class="memdesc:a4db25a155749b6306c7eca51e3270799"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called after reference-file has been synchronized with the repository.  <br /></td></tr>
<tr class="separator:a4db25a155749b6306c7eca51e3270799"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a709d34ccb2be8d4a5a19d9661867646e" id="r_a709d34ccb2be8d4a5a19d9661867646e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a709d34ccb2be8d4a5a19d9661867646e">set_timemodified</a> ($timemodified)</td></tr>
<tr class="memdesc:a709d34ccb2be8d4a5a19d9661867646e"><td class="mdescLeft">&#160;</td><td class="mdescRight">set timemodified  <br /></td></tr>
<tr class="separator:a709d34ccb2be8d4a5a19d9661867646e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55c9c8934e39e300b908653251b4e7f1" id="r_a55c9c8934e39e300b908653251b4e7f1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a55c9c8934e39e300b908653251b4e7f1">sync_external_file</a> ()</td></tr>
<tr class="memdesc:a55c9c8934e39e300b908653251b4e7f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronize file if it is a reference and needs synchronizing.  <br /></td></tr>
<tr class="separator:a55c9c8934e39e300b908653251b4e7f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a5eebe96673d6aa18540e0c813e7b8be6" id="r_a5eebe96673d6aa18540e0c813e7b8be6"><td class="memItemLeft" align="right" valign="top"><a id="a5eebe96673d6aa18540e0c813e7b8be6" name="a5eebe96673d6aa18540e0c813e7b8be6"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>FILE_HANDLE_FOPEN</b> = 0</td></tr>
<tr class="memdesc:a5eebe96673d6aa18540e0c813e7b8be6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates a file handle of the type returned by fopen. <br /></td></tr>
<tr class="separator:a5eebe96673d6aa18540e0c813e7b8be6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01f2d5a3edaa4579897b679817b2bb2c" id="r_a01f2d5a3edaa4579897b679817b2bb2c"><td class="memItemLeft" align="right" valign="top"><a id="a01f2d5a3edaa4579897b679817b2bb2c" name="a01f2d5a3edaa4579897b679817b2bb2c"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>FILE_HANDLE_GZOPEN</b> = 1</td></tr>
<tr class="memdesc:a01f2d5a3edaa4579897b679817b2bb2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates a file handle of the type returned by gzopen. <br /></td></tr>
<tr class="separator:a01f2d5a3edaa4579897b679817b2bb2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a19059c7e7ed073c4aa393bb60b04b049" id="r_a19059c7e7ed073c4aa393bb60b04b049"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a19059c7e7ed073c4aa393bb60b04b049">update</a> ($dataobject)</td></tr>
<tr class="memdesc:a19059c7e7ed073c4aa393bb60b04b049"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update some file record fields NOTE: Must remain protected.  <br /></td></tr>
<tr class="separator:a19059c7e7ed073c4aa393bb60b04b049"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a8e993566108b8e29c5ae8c644d0acab1" name="a8e993566108b8e29c5ae8c644d0acab1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e993566108b8e29c5ae8c644d0acab1">&#9670;&#160;</a></span>__construct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::__construct </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/ddd/classfile__storage.html">file_storage</a></td>          <td class="paramname"><span class="paramname"><em>$fs</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">stdClass</td>          <td class="paramname"><span class="paramname"><em>$file_record</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$deprecated</em><span class="paramdefsep"> = </span><span class="paramdefval">null</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor, this constructor should be called ONLY from the <a class="el" href="../../d3/ddd/classfile__storage.html">file_storage</a> class! </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d3/ddd/classfile__storage.html">file_storage</a></td><td class="paramname">$fs</td><td>file storage instance </td></tr>
    <tr><td class="paramtype">stdClass</td><td class="paramname">$file_record</td><td>description of file </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$deprecated</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a6d13096e846b0c1d1133f4f85728407b" name="a6d13096e846b0c1d1133f4f85728407b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d13096e846b0c1d1133f4f85728407b">&#9670;&#160;</a></span>__sleep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::__sleep </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Magic method, called during serialization. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a07cf5750dcb4a650d6948bbe758a03a2" name="a07cf5750dcb4a650d6948bbe758a03a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07cf5750dcb4a650d6948bbe758a03a2">&#9670;&#160;</a></span>add_to_curl_request()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::add_to_curl_request </td>
          <td>(</td>
          <td class="paramtype">&amp;</td>          <td class="paramname"><span class="paramname"><em>$curlrequest</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$key</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>adds this file path to a curl request (POST only) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">curl</td><td class="paramname">$curlrequest</td><td>the curl request object </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$key</td><td>what key to use in the POST request </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a30fd65bf9d225d2e1d27989177dac7d5" name="a30fd65bf9d225d2e1d27989177dac7d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30fd65bf9d225d2e1d27989177dac7d5">&#9670;&#160;</a></span>archive_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::archive_file </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d59/classfile__archive.html">file_archive</a></td>          <td class="paramname"><span class="paramname"><em>$filearch</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$archivepath</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add file/directory into archive. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d59/classfile__archive.html" title="Each file archive type must extend this class.">file_archive</a></td><td class="paramname">$filearch</td><td>file archive instance </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$archivepath</td><td>pathname in archive </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>success </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6788d63cf90b5f94780426a206ab987e" name="a6788d63cf90b5f94780426a206ab987e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6788d63cf90b5f94780426a206ab987e">&#9670;&#160;</a></span>compare_to_path()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::compare_to_path </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$path</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check whether the supplied file is the same as this file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$path</td><td>The path to the file on disk </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">boolean</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa46f5c12185de7af39f516af2881270b" name="aa46f5c12185de7af39f516af2881270b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa46f5c12185de7af39f516af2881270b">&#9670;&#160;</a></span>compare_to_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::compare_to_string </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$content</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check whether the supplied content is the same as this file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$content</td><td>The file content </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">boolean</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="acb43a2f0c53b99ed3f6c15e9547317c4" name="acb43a2f0c53b99ed3f6c15e9547317c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb43a2f0c53b99ed3f6c15e9547317c4">&#9670;&#160;</a></span>copy_content_to()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::copy_content_to </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$pathname</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copy content of file to given pathname. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$pathname</td><td>real path to the new file </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>success </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3275b3884e7cbd6800cca034cd59e712" name="a3275b3884e7cbd6800cca034cd59e712"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3275b3884e7cbd6800cca034cd59e712">&#9670;&#160;</a></span>copy_content_to_temp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::copy_content_to_temp </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$dir</em><span class="paramdefsep"> = </span><span class="paramdefval">'files'</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$fileprefix</em><span class="paramdefsep"> = </span><span class="paramdefval">'tempup_'</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copy content of file to temporary folder and returns file path. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$dir</td><td>name of the temporary directory </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$fileprefix</td><td>prefix of temporary file. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string|bool</td><td>path of temporary file or false. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abde8e64ff95ef11d3c77043376ec81eb" name="abde8e64ff95ef11d3c77043376ec81eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abde8e64ff95ef11d3c77043376ec81eb">&#9670;&#160;</a></span>delete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::delete </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete file from files table. </p>
<p>The content of files stored in sha1 pool is reclaimed later - the occupied disk space is reclaimed much later.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>always true or exception if error occurred </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a91876050c8cd4246f16777c5a9876db8" name="a91876050c8cd4246f16777c5a9876db8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91876050c8cd4246f16777c5a9876db8">&#9670;&#160;</a></span>delete_reference()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::delete_reference </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unlink the stored file from the referenced file. </p>
<p>This methods destroys the link to the record in files_reference table. This effectively turns the stored file from being an alias to a plain copy. However, the caller has to make sure that the actual file's content has beed synced prior to calling this method. </p>

</div>
</div>
<a id="af11c1ae51e8b1031aa07f92bdcd6a27f" name="af11c1ae51e8b1031aa07f92bdcd6a27f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af11c1ae51e8b1031aa07f92bdcd6a27f">&#9670;&#160;</a></span>extract_to_pathname()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::extract_to_pathname </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/d4d/classfile__packer.html">file_packer</a></td>          <td class="paramname"><span class="paramname"><em>$packer</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$pathname</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/dd5/interfacefile__progress.html">file_progress</a></td>          <td class="paramname"><span class="paramname"><em>$progress</em><span class="paramdefsep"> = </span><span class="paramdefval">null</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Extract file to given file path (real OS filesystem), existing files are overwritten. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../df/d4d/classfile__packer.html" title="Abstract class for archiving of files.">file_packer</a></td><td class="paramname">$packer</td><td>file packer instance </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$pathname</td><td>target directory </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../d5/dd5/interfacefile__progress.html">file_progress</a></td><td class="paramname">$progress</td><td>Progress indicator callback or null if not required </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array|bool</td><td>list of processed files; false if error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af41761415bad4b78baa382a7a0875f4d" name="af41761415bad4b78baa382a7a0875f4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af41761415bad4b78baa382a7a0875f4d">&#9670;&#160;</a></span>extract_to_storage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::extract_to_storage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/d4d/classfile__packer.html">file_packer</a></td>          <td class="paramname"><span class="paramname"><em>$packer</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$contextid</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$component</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$filearea</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$itemid</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$pathbase</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$userid</em><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/dd5/interfacefile__progress.html">file_progress</a></td>          <td class="paramname"><span class="paramname"><em>$progress</em><span class="paramdefsep"> = </span><span class="paramdefval">null</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Extract file to given file path (real OS filesystem), existing files are overwritten. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../df/d4d/classfile__packer.html" title="Abstract class for archiving of files.">file_packer</a></td><td class="paramname">$packer</td><td>file packer instance </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$contextid</td><td>context ID </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$component</td><td>component </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$filearea</td><td>file area </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$itemid</td><td>item ID </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$pathbase</td><td>path base </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td>user ID </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../d5/dd5/interfacefile__progress.html">file_progress</a></td><td class="paramname">$progress</td><td>Progress indicator callback or null if not required </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array|bool</td><td>list of processed files; false if error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a67a97bf7342348cb0f768a642f30122d" name="a67a97bf7342348cb0f768a642f30122d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67a97bf7342348cb0f768a642f30122d">&#9670;&#160;</a></span>generate_image_thumbnail()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::generate_image_thumbnail </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$width</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$height</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates a thumbnail for this <a class="el" href="../../d0/d00/classstored__file.html">stored_file</a>. </p>
<p>If the GD library has at least version 2 and PNG support is available, the returned data is the content of a transparent PNG file containing the thumbnail. Otherwise, the function returns contents of a JPEG file with black background containing the thumbnail.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$width</td><td>the width of the requested thumbnail </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$height</td><td>the height of the requested thumbnail </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string|bool</td><td>false if a problem occurs, the thumbnail image data otherwise </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abb7f0b9aced718e13a76e5a0441cb77b" name="abb7f0b9aced718e13a76e5a0441cb77b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb7f0b9aced718e13a76e5a0441cb77b">&#9670;&#160;</a></span>get_author()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::get_author </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the author name of the file. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3d472e8674bf40b41b52a745c62912ed" name="a3d472e8674bf40b41b52a745c62912ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d472e8674bf40b41b52a745c62912ed">&#9670;&#160;</a></span>get_component()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::get_component </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns component name - this is the owner of the areas, nothing else is allowed to read or modify the files directly!! </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6201e06dee7d4074767bf33dad3ec93c" name="a6201e06dee7d4074767bf33dad3ec93c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6201e06dee7d4074767bf33dad3ec93c">&#9670;&#160;</a></span>get_content()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::get_content </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns file content as string. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>content </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a31fd7f845942925b6787956a1e9f7d04" name="a31fd7f845942925b6787956a1e9f7d04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31fd7f845942925b6787956a1e9f7d04">&#9670;&#160;</a></span>get_content_file_handle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::get_content_file_handle </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$type</em><span class="paramdefsep"> = </span><span class="paramdefval">self::FILE_HANDLE_FOPEN</span></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns file handle - read only mode, no writing allowed into pool files! </p>
<p>When you want to modify a file, create a new file and delete the old one.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$type</td><td>Type of file handle (FILE_HANDLE_xx constant) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">resource</td><td>file handle </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6fb1df69f493dfb6cf3d8ca9be4c98e7" name="a6fb1df69f493dfb6cf3d8ca9be4c98e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6fb1df69f493dfb6cf3d8ca9be4c98e7">&#9670;&#160;</a></span>get_contenthash()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::get_contenthash </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns sha1 hash of file content. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa3bc3da86b259493d6de762c70632159" name="aa3bc3da86b259493d6de762c70632159"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3bc3da86b259493d6de762c70632159">&#9670;&#160;</a></span>get_contextid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::get_contextid </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns context id of the file. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td>context id </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aee258cb4c03fea3fce9675cfdf39140c" name="aee258cb4c03fea3fce9675cfdf39140c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee258cb4c03fea3fce9675cfdf39140c">&#9670;&#160;</a></span>get_filearea()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::get_filearea </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns file area name, this divides files of one component into groups with different access control. </p>
<p>All files in one area have the same access control.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab0c38842b13c816df29e6022cf907aee" name="ab0c38842b13c816df29e6022cf907aee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0c38842b13c816df29e6022cf907aee">&#9670;&#160;</a></span>get_filename()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::get_filename </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns file name or '. </p>
<p>' in case of directories.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a323bf134b16476894a780b0d81287479" name="a323bf134b16476894a780b0d81287479"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a323bf134b16476894a780b0d81287479">&#9670;&#160;</a></span>get_filepath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::get_filepath </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns file path - starts and ends with /, are not allowed. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1920cc2375e76326854a32c4390c9f11" name="a1920cc2375e76326854a32c4390c9f11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1920cc2375e76326854a32c4390c9f11">&#9670;&#160;</a></span>get_filesize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::get_filesize </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the size of file in bytes. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td>bytes </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a68dc68e1ca1036e1f788b91109bbb61b" name="a68dc68e1ca1036e1f788b91109bbb61b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68dc68e1ca1036e1f788b91109bbb61b">&#9670;&#160;</a></span>get_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::get_id </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns file id. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7446a3d5c54e9f441e1cf7012d16ef1a" name="a7446a3d5c54e9f441e1cf7012d16ef1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7446a3d5c54e9f441e1cf7012d16ef1a">&#9670;&#160;</a></span>get_imageinfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::get_imageinfo </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns information about image, information is determined from the file content. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">mixed</td><td>array with width, height and mimetype; false if not an image </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a92615564bd37483542d73581ef5ea4ce" name="a92615564bd37483542d73581ef5ea4ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92615564bd37483542d73581ef5ea4ce">&#9670;&#160;</a></span>get_itemid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::get_itemid </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns returns item id of file. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af12ab329e2aa78116e9df0b4e96dce97" name="af12ab329e2aa78116e9df0b4e96dce97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af12ab329e2aa78116e9df0b4e96dce97">&#9670;&#160;</a></span>get_license()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::get_license </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the license type of the file, it is a short name referred from license table. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a15cf8f24ed626d3cde2c5a278bcdc8f3" name="a15cf8f24ed626d3cde2c5a278bcdc8f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15cf8f24ed626d3cde2c5a278bcdc8f3">&#9670;&#160;</a></span>get_mimetype()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::get_mimetype </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns mime type of file. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a53ae28d76de519df5926e23f7637ede7" name="a53ae28d76de519df5926e23f7637ede7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53ae28d76de519df5926e23f7637ede7">&#9670;&#160;</a></span>get_parent_directory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::get_parent_directory </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns parent directory, creates missing parents if needed. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2e69a939ab10d14d90021692857128a9" name="a2e69a939ab10d14d90021692857128a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e69a939ab10d14d90021692857128a9">&#9670;&#160;</a></span>get_pathnamehash()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::get_pathnamehash </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns sha1 hash of all file path components sha1("contextid/component/filearea/itemid/dir/dir/filename.ext"). </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6c10862e8589ef6c51d4b2947a7add4d" name="a6c10862e8589ef6c51d4b2947a7add4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c10862e8589ef6c51d4b2947a7add4d">&#9670;&#160;</a></span>get_psr_stream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::get_psr_stream </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a read-only PSR-7 stream for this file. </p>
<p>Note: This stream is read-only. If you want to modify the file, create a new file and delete the old one. The <a class="el" href="../../d1/d31/class_file.html" title="Caches data to the filesystem.">File</a> API creates immutable files.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">StreamInterface</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afe0985d5e1e54f3a72b2d5ce0ad1a954" name="afe0985d5e1e54f3a72b2d5ce0ad1a954"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe0985d5e1e54f3a72b2d5ce0ad1a954">&#9670;&#160;</a></span>get_reference()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::get_reference </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns file reference. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2e8b7fd7fdce5c06660bcb83ea7ee170" name="a2e8b7fd7fdce5c06660bcb83ea7ee170"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e8b7fd7fdce5c06660bcb83ea7ee170">&#9670;&#160;</a></span>get_reference_details()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::get_reference_details </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get human readable file reference information. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a786a68553bef6c66f5de8f9ce788638a" name="a786a68553bef6c66f5de8f9ce788638a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a786a68553bef6c66f5de8f9ce788638a">&#9670;&#160;</a></span>get_referencefileid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::get_referencefileid </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>get reference file id </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2e94cdc9b1890a4724b4c23a1292876d" name="a2e94cdc9b1890a4724b4c23a1292876d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e94cdc9b1890a4724b4c23a1292876d">&#9670;&#160;</a></span>get_referencelastsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::get_referencelastsync </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get reference last sync time. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a139c64df0a7694ab5047e1de5d46712c" name="a139c64df0a7694ab5047e1de5d46712c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a139c64df0a7694ab5047e1de5d46712c">&#9670;&#160;</a></span>get_referencelifetime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::get_referencelifetime </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function stored_file::get_referencelifetime() is deprecated as reference life time is no longer stored in <a class="el" href="../../d1/dc8/class_d_b.html" title="The main &quot;DB&quot; class is simply a container class with some static methods for creating DB objects as w...">DB</a> or returned by repository. </p>
<p>Each repository should decide by itself when to synchronise the references.</p>
<dl class="deprecated"><dt><b><a class="el" href="../../da/d58/deprecated.html#_deprecated000635">Deprecated</a></b></dt><dd>since <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 2.6 <a href="https://tracker.moodle.org/browse/MDL-42016" class="el">MDL-42016</a> - please do not use this function any more. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../dc/d1a/classrepository.html#a176c4c95cbd9c2b362fb90ea14f4ce13" title="Performs synchronisation of an external file if the previous one has expired.">repository::sync_reference()</a> </dd></dl>

</div>
</div>
<a id="a6ed3cd2e837f3570bac8664591e6d217" name="a6ed3cd2e837f3570bac8664591e6d217"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ed3cd2e837f3570bac8664591e6d217">&#9670;&#160;</a></span>get_repository_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::get_repository_id </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns repository id. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int|null</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0dafe8269958ac0123cb735b461df918" name="a0dafe8269958ac0123cb735b461df918"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0dafe8269958ac0123cb735b461df918">&#9670;&#160;</a></span>get_repository_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::get_repository_type </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns repository type. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">mixed</td><td>str|null the repository type or null if is not an external file </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd><a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 3.3 </dd></dl>

</div>
</div>
<a id="a23a114bcbd98792823c827be99ccf9e6" name="a23a114bcbd98792823c827be99ccf9e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23a114bcbd98792823c827be99ccf9e6">&#9670;&#160;</a></span>get_sortorder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::get_sortorder </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the sort order of file. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2974f331cedb06349ca8da5622f1c5d9" name="a2974f331cedb06349ca8da5622f1c5d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2974f331cedb06349ca8da5622f1c5d9">&#9670;&#160;</a></span>get_source()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::get_source </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the source of the file, usually it is a url. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af7f0b72a0e58dad5fd53dd365af9451a" name="af7f0b72a0e58dad5fd53dd365af9451a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7f0b72a0e58dad5fd53dd365af9451a">&#9670;&#160;</a></span>get_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::get_status </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns file status flag. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td>0 means file OK, anything else is a problem and file can not be used </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa7af0854b3ac43ef56427adfbe71232c" name="aa7af0854b3ac43ef56427adfbe71232c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7af0854b3ac43ef56427adfbe71232c">&#9670;&#160;</a></span>get_timecreated()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::get_timecreated </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns unix timestamp of file creation date. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abb59b5ec7faacb2965293d28f536eed7" name="abb59b5ec7faacb2965293d28f536eed7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb59b5ec7faacb2965293d28f536eed7">&#9670;&#160;</a></span>get_timemodified()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::get_timemodified </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns unix timestamp of last file modification. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0930188c639f5fb1953930b5981298fc" name="a0930188c639f5fb1953930b5981298fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0930188c639f5fb1953930b5981298fc">&#9670;&#160;</a></span>get_total_content_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::get_total_content_size </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/d4d/classfile__packer.html">file_packer</a></td>          <td class="paramname"><span class="paramname"><em>$packer</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the total size (in bytes) of the contents of an archive. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../df/d4d/classfile__packer.html" title="Abstract class for archiving of files.">file_packer</a></td><td class="paramname">$packer</td><td>file packer instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int|null</td><td>total size in bytes </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="accebf6ed36ce0977f55d3914acdadf47" name="accebf6ed36ce0977f55d3914acdadf47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#accebf6ed36ce0977f55d3914acdadf47">&#9670;&#160;</a></span>get_userid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::get_userid </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns id of user who created the file. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aeb11b8fdfd5bb970b4720eed825dc970" name="aeb11b8fdfd5bb970b4720eed825dc970"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb11b8fdfd5bb970b4720eed825dc970">&#9670;&#160;</a></span>import_external_file_contents()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::import_external_file_contents </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$maxbytes</em><span class="paramdefsep"> = </span><span class="paramdefval">0</span></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Imports the contents of an external file into moodle filepool. </p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d6/da8/classmoodle__exception.html" title="Base Moodle Exception class.">moodle_exception</a></td><td>if file could not be downloaded or is too big </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$maxbytes</td><td>throw an exception if file size is bigger than $maxbytes (0 means no limit) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa5d5f598941697170fa99c244616ae0c" name="aa5d5f598941697170fa99c244616ae0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5d5f598941697170fa99c244616ae0c">&#9670;&#160;</a></span>is_controlled_link()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::is_controlled_link </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Whether or not this is a controlled link. </p>
<p>Note that repositories cannot support FILE_REFERENCE and FILE_CONTROLLED_LINK.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8d60de6b8d9b4d118e0df0ecc87ad39b" name="a8d60de6b8d9b4d118e0df0ecc87ad39b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d60de6b8d9b4d118e0df0ecc87ad39b">&#9670;&#160;</a></span>is_directory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::is_directory </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Is this a directory? </p>
<p>Directories are only emulated, internally they are stored as empty files with a "." instead of name - this means empty directory contains exactly one empty file with name dot.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>true means directory, false means file </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a483285da5b7bfbfdbf00bdbce9cc9d24" name="a483285da5b7bfbfdbf00bdbce9cc9d24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a483285da5b7bfbfdbf00bdbce9cc9d24">&#9670;&#160;</a></span>is_external_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::is_external_file </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Whether or not this is a external resource. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abd13a10ec78d3b263b40ef7b3a37fb3a" name="abd13a10ec78d3b263b40ef7b3a37fb3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd13a10ec78d3b263b40ef7b3a37fb3a">&#9670;&#160;</a></span>is_valid_image()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::is_valid_image </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Verifies the file is a valid web image - gif, png and jpeg only. </p>
<p>It should be ok to serve this image from server without any other security workarounds.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>true if file ok </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a06616ddb363e6b7f14d42e5eab1fdb11" name="a06616ddb363e6b7f14d42e5eab1fdb11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06616ddb363e6b7f14d42e5eab1fdb11">&#9670;&#160;</a></span>list_files()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::list_files </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/d4d/classfile__packer.html">file_packer</a></td>          <td class="paramname"><span class="paramname"><em>$packer</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>List contents of archive. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../df/d4d/classfile__packer.html" title="Abstract class for archiving of files.">file_packer</a></td><td class="paramname">$packer</td><td>file packer instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>of file infos </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a91cec28b2788b82b22ef0abe82831785" name="a91cec28b2788b82b22ef0abe82831785"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91cec28b2788b82b22ef0abe82831785">&#9670;&#160;</a></span>rename()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::rename </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$filepath</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$filename</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rename filename. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$filepath</td><td>file path </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$filename</td><td>file name </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1a40f48411f4fb7473bfa725caf0dca2" name="a1a40f48411f4fb7473bfa725caf0dca2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a40f48411f4fb7473bfa725caf0dca2">&#9670;&#160;</a></span>replace_content_with()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::replace_content_with </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td>          <td class="paramname"><span class="paramname"><em>$storedfile</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function stored_file::replace_content_with() is deprecated. </p>
<p>Please use stored_file::replace_file_with()</p>
<dl class="deprecated"><dt><b><a class="el" href="../../da/d58/deprecated.html#_deprecated000633">Deprecated</a></b></dt><dd>since <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 2.6 <a href="https://tracker.moodle.org/browse/MDL-42016" class="el">MDL-42016</a> - please do not use this function any more. </dd></dl>
<dl class="section see"><dt>See also</dt><dd>stored_file::replace_file_with() </dd></dl>

</div>
</div>
<a id="afd3695f9d711311cf37af3e6561c61ba" name="afd3695f9d711311cf37af3e6561c61ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd3695f9d711311cf37af3e6561c61ba">&#9670;&#160;</a></span>replace_file_with()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::replace_file_with </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td>          <td class="paramname"><span class="paramname"><em>$newfile</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Replaces the fields that might have changed when file was overriden in filepicker: reference, contenthash, filesize, userid. </p>
<p>Note that field 'source' must be updated separately because it has different format for draft and non-draft areas and this function will usually be used to replace non-draft area file with draft area file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$newfile</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../da/d34/classcoding__exception.html" title="Exception indicating programming error, must be fixed by a programer.">coding_exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4c31a8673c981d8a61e315a95181f7c0" name="a4c31a8673c981d8a61e315a95181f7c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c31a8673c981d8a61e315a95181f7c0">&#9670;&#160;</a></span>resize_image()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::resize_image </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$width</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$height</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate a resized image for this <a class="el" href="../../d0/d00/classstored__file.html">stored_file</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int&#160;|&#160;null</td><td class="paramname">$width</td><td>The desired width, or null to only use the height. </td></tr>
    <tr><td class="paramtype">int&#160;|&#160;null</td><td class="paramname">$height</td><td>The desired height, or null to only use the width. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string|false</td><td>False when a problem occurs, else the image data. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3822a2f45fefb253c024ff6951a42fa7" name="a3822a2f45fefb253c024ff6951a42fa7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3822a2f45fefb253c024ff6951a42fa7">&#9670;&#160;</a></span>rotate_image()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::rotate_image </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate a rotated image for this <a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> based on exif information. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array|false</td><td>False when a problem occurs, else the image data and image size. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd><a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 3.8 </dd></dl>

</div>
</div>
<a id="a2889cf58cb32f56cd5d46ae571620d3e" name="a2889cf58cb32f56cd5d46ae571620d3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2889cf58cb32f56cd5d46ae571620d3e">&#9670;&#160;</a></span>send_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::send_file </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$lifetime</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$filter</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$forcedownload</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$options</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send file references. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$lifetime</td><td>Number of seconds before the file should expire from caches (default 24 hours) </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$filter</td><td>0 (default)=no filtering, 1=all files, 2=html files only </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$forcedownload</td><td>If true (default false), forces download of file rather than view in browser/plugin </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$options</td><td>additional options affecting the file serving </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a11eb7587fddd1d6e9c97e7c355bdd9e2" name="a11eb7587fddd1d6e9c97e7c355bdd9e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11eb7587fddd1d6e9c97e7c355bdd9e2">&#9670;&#160;</a></span>send_relative_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::send_relative_file </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$relativepath</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets a file relative to this file in the repository and sends it to the browser. </p>
<p>Checks the function <a class="el" href="../../dc/d1a/classrepository.html#a4e8b1e4d4a80d8fa3d3e648d7b2d4365" title="helper function to check if the repository supports send_relative_file.">repository::supports_relative_file()</a> to make sure it can be used.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$relativepath</td><td>the relative path to the file we are trying to access </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a29f329949c749e65d5fe785094d8f941" name="a29f329949c749e65d5fe785094d8f941"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29f329949c749e65d5fe785094d8f941">&#9670;&#160;</a></span>set_author()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::set_author </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$author</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set author. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$author</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a207236693ab10786bb29e29137356031" name="a207236693ab10786bb29e29137356031"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a207236693ab10786bb29e29137356031">&#9670;&#160;</a></span>set_filesize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::set_filesize </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$filesize</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function stored_file::set_filesize() is deprecated. </p>
<p>Please use stored_file::replace_file_with</p>
<dl class="deprecated"><dt><b><a class="el" href="../../da/d58/deprecated.html#_deprecated000634">Deprecated</a></b></dt><dd>since <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 2.6 <a href="https://tracker.moodle.org/browse/MDL-42016" class="el">MDL-42016</a> - please do not use this function any more. </dd></dl>
<dl class="section see"><dt>See also</dt><dd>stored_file::replace_file_with() </dd></dl>

</div>
</div>
<a id="a15e37b9ec414a0bdf731a0d69e305fbe" name="a15e37b9ec414a0bdf731a0d69e305fbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15e37b9ec414a0bdf731a0d69e305fbe">&#9670;&#160;</a></span>set_license()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::set_license </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$license</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set license. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$license</td><td>license </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abc0326ba086e81e3bd950d53625cf9c6" name="abc0326ba086e81e3bd950d53625cf9c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc0326ba086e81e3bd950d53625cf9c6">&#9670;&#160;</a></span>set_sortorder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::set_sortorder </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$sortorder</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set file sort order. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$sortorder</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a14b3af91e5ca7f40997eb5a1bde0e918" name="a14b3af91e5ca7f40997eb5a1bde0e918"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14b3af91e5ca7f40997eb5a1bde0e918">&#9670;&#160;</a></span>set_source()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::set_source </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$source</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set license. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$license</td><td>license </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a074728b67a2c514f6533d1964aa4916b" name="a074728b67a2c514f6533d1964aa4916b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a074728b67a2c514f6533d1964aa4916b">&#9670;&#160;</a></span>set_synchronised_content_from_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::set_synchronised_content_from_file </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$path</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set synchronised content from file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$path</td><td>Path to the file. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a481a48a8267b97705534cf7cdf39891f" name="a481a48a8267b97705534cf7cdf39891f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a481a48a8267b97705534cf7cdf39891f">&#9670;&#160;</a></span>set_synchronised_content_from_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::set_synchronised_content_from_string </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$content</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set synchronised content from content. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$content</td><td><a class="el" href="../../d1/d31/class_file.html" title="Caches data to the filesystem.">File</a> content. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4db25a155749b6306c7eca51e3270799" name="a4db25a155749b6306c7eca51e3270799"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4db25a155749b6306c7eca51e3270799">&#9670;&#160;</a></span>set_synchronized()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::set_synchronized </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$contenthash</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$filesize</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$status</em><span class="paramdefsep"> = </span><span class="paramdefval">0</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$timemodified</em><span class="paramdefsep"> = </span><span class="paramdefval">null</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called after reference-file has been synchronized with the repository. </p>
<p>We update contenthash, filesize and status in files table if changed and we always update lastsync in files_reference table</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">null&#160;|&#160;string</td><td class="paramname">$contenthash</td><td>if set to null contenthash is not changed </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$filesize</td><td>new size of the file </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$status</td><td>new status of the file (0 means OK, 666 - source missing) </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$timemodified</td><td>last time modified of the source, if known </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a709d34ccb2be8d4a5a19d9661867646e" name="a709d34ccb2be8d4a5a19d9661867646e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a709d34ccb2be8d4a5a19d9661867646e">&#9670;&#160;</a></span>set_timemodified()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::set_timemodified </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$timemodified</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>set timemodified </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$timemodified</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a55c9c8934e39e300b908653251b4e7f1" name="a55c9c8934e39e300b908653251b4e7f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55c9c8934e39e300b908653251b4e7f1">&#9670;&#160;</a></span>sync_external_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::sync_external_file </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Synchronize file if it is a reference and needs synchronizing. </p>
<p>Updates contenthash and filesize </p>

</div>
</div>
<a id="a19059c7e7ed073c4aa393bb60b04b049" name="a19059c7e7ed073c4aa393bb60b04b049"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19059c7e7ed073c4aa393bb60b04b049">&#9670;&#160;</a></span>update()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">stored_file::update </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$dataobject</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update some file record fields NOTE: Must remain protected. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$dataobject</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>lib/filestorage/<b>stored_file.php</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Feb 25 2024 02:31:59 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
