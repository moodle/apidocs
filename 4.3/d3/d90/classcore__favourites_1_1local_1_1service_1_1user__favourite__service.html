<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: core_favourites\local\service\user_favourite_service Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;4.3</span>
   </div>
   <div id="projectbrief">Moodle 4.3.3+ (Build: 20240405) (cf01fd6befe)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d9/d36/namespacecore__favourites.html">core_favourites</a></li><li class="navelem"><b>local</b></li><li class="navelem"><a class="el" href="../../d0/d35/namespacecore__favourites_1_1local_1_1service.html">service</a></li><li class="navelem"><a class="el" href="../../d3/d90/classcore__favourites_1_1local_1_1service_1_1user__favourite__service.html">user_favourite_service</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="../../d3/d3a/classcore__favourites_1_1local_1_1service_1_1user__favourite__service-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">core_favourites\local\service\user_favourite_service Class Reference<div class="ingroups"><a class="el" href="../../da/dda/group__core__favourites.html">core_favourites</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Class service, providing an single API for interacting with the favourites subsystem for a SINGLE USER.  
 <a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac9992c39a93e0b5512a06a16e258d5cc" id="r_ac9992c39a93e0b5512a06a16e258d5cc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac9992c39a93e0b5512a06a16e258d5cc">__construct</a> (\context_user $usercontext, <a class="el" href="../../d5/dcd/interfacecore__favourites_1_1local_1_1repository_1_1favourite__repository__interface.html">favourite_repository_interface</a> $<a class="el" href="../../dc/d1a/classrepository.html">repository</a>)</td></tr>
<tr class="memdesc:ac9992c39a93e0b5512a06a16e258d5cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">The user_favourite_service constructor.  <br /></td></tr>
<tr class="separator:ac9992c39a93e0b5512a06a16e258d5cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8b8d7fc606799a8411631b2ad3d6fa2" id="r_ab8b8d7fc606799a8411631b2ad3d6fa2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab8b8d7fc606799a8411631b2ad3d6fa2">count_favourites_by_type</a> (string $component, string $itemtype, context $context=null)</td></tr>
<tr class="memdesc:ab8b8d7fc606799a8411631b2ad3d6fa2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Count the favourite by item type.  <br /></td></tr>
<tr class="separator:ab8b8d7fc606799a8411631b2ad3d6fa2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19d95cb654cce8e10410628721eed2d5" id="r_a19d95cb654cce8e10410628721eed2d5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a19d95cb654cce8e10410628721eed2d5">create_favourite</a> (string $component, string $itemtype, int $itemid, context $context, int $ordering=null)</td></tr>
<tr class="memdesc:a19d95cb654cce8e10410628721eed2d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Favourite an item defined by itemid/context, in the area defined by component/itemtype.  <br /></td></tr>
<tr class="separator:a19d95cb654cce8e10410628721eed2d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0046591cf7a917d537482d4a6c26fa1e" id="r_a0046591cf7a917d537482d4a6c26fa1e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0046591cf7a917d537482d4a6c26fa1e">delete_favourite</a> (string $component, string $itemtype, int $itemid, context $context)</td></tr>
<tr class="memdesc:a0046591cf7a917d537482d4a6c26fa1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a favourite item from an area and from within a context.  <br /></td></tr>
<tr class="separator:a0046591cf7a917d537482d4a6c26fa1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dffe57422f412ce51651a2ddd6fea4f" id="r_a2dffe57422f412ce51651a2ddd6fea4f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2dffe57422f412ce51651a2ddd6fea4f">favourite_exists</a> (string $component, string $itemtype, int $itemid, context $context)</td></tr>
<tr class="memdesc:a2dffe57422f412ce51651a2ddd6fea4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether an item has been marked as a favourite in the respective area.  <br /></td></tr>
<tr class="separator:a2dffe57422f412ce51651a2ddd6fea4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3caf9d8945cd9164a80964388f14c479" id="r_a3caf9d8945cd9164a80964388f14c479"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3caf9d8945cd9164a80964388f14c479">find_all_favourites</a> (string $component, array $itemtypes=[], int $limitfrom=0, int $limitnum=0)</td></tr>
<tr class="memdesc:a3caf9d8945cd9164a80964388f14c479"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find a list of favourites, by multiple types within a component.  <br /></td></tr>
<tr class="separator:a3caf9d8945cd9164a80964388f14c479"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f22cb2ed754026f95e35c1a16d05199" id="r_a9f22cb2ed754026f95e35c1a16d05199"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9f22cb2ed754026f95e35c1a16d05199">find_favourites_by_type</a> (string $component, string $itemtype, int $limitfrom=0, int $limitnum=0)</td></tr>
<tr class="memdesc:a9f22cb2ed754026f95e35c1a16d05199"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find a list of favourites, by type, where type is the component/itemtype pair.  <br /></td></tr>
<tr class="separator:a9f22cb2ed754026f95e35c1a16d05199"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95c9e44105d87aa738e03733c4a37dc1" id="r_a95c9e44105d87aa738e03733c4a37dc1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a95c9e44105d87aa738e03733c4a37dc1">get_favourite</a> (string $component, string $itemtype, int $itemid, context $context)</td></tr>
<tr class="memdesc:a95c9e44105d87aa738e03733c4a37dc1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the favourite.  <br /></td></tr>
<tr class="separator:a95c9e44105d87aa738e03733c4a37dc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5c0fcc7d4c6a910318344a47cd55917" id="r_af5c0fcc7d4c6a910318344a47cd55917"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af5c0fcc7d4c6a910318344a47cd55917">get_join_sql_by_type</a> (string $component, string $itemtype, string $tablealias, string $joinitemid)</td></tr>
<tr class="memdesc:af5c0fcc7d4c6a910318344a47cd55917"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the SQL required to include favourite information for a given component/itemtype combination.  <br /></td></tr>
<tr class="separator:af5c0fcc7d4c6a910318344a47cd55917"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a5108bb814a3c7178d3699d884a850ff2" id="r_a5108bb814a3c7178d3699d884a850ff2"><td class="memItemLeft" align="right" valign="top"><a id="a5108bb814a3c7178d3699d884a850ff2" name="a5108bb814a3c7178d3699d884a850ff2"></a>
<a class="el" href="../../d5/dcd/interfacecore__favourites_1_1local_1_1repository_1_1favourite__repository__interface.html">favourite_repository_interface</a>&#160;</td><td class="memItemRight" valign="bottom"><b>$repo</b></td></tr>
<tr class="memdesc:a5108bb814a3c7178d3699d884a850ff2"><td class="mdescLeft">&#160;</td><td class="mdescRight">$repo the favourite repository object. <br /></td></tr>
<tr class="separator:a5108bb814a3c7178d3699d884a850ff2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2586165cb517dfa7ac8e72897b3017ed" id="r_a2586165cb517dfa7ac8e72897b3017ed"><td class="memItemLeft" align="right" valign="top"><a id="a2586165cb517dfa7ac8e72897b3017ed" name="a2586165cb517dfa7ac8e72897b3017ed"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>$userid</b></td></tr>
<tr class="memdesc:a2586165cb517dfa7ac8e72897b3017ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">$userid the id of the user to which this favourites service is scoped. <br /></td></tr>
<tr class="separator:a2586165cb517dfa7ac8e72897b3017ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class service, providing an single API for interacting with the favourites subsystem for a SINGLE USER. </p>
<p>This class is responsible for exposing key operations (add, remove, find) and enforces any business logic necessary to validate authorization/data integrity for these operations.</p>
<p>All object persistence is delegated to the favourite_repository_interface object.</p>
<dl class="section copyright"><dt>Copyright</dt><dd>2018 Jake Dallimore <a href="#" onclick="location.href='mai'+'lto:'+'jrh'+'da'+'lli'+'mo'+'re@'+'gm'+'ail'+'.c'+'om'; return false;">jrhda<span class="obfuscator">.nosp@m.</span>llim<span class="obfuscator">.nosp@m.</span>ore@g<span class="obfuscator">.nosp@m.</span>mail<span class="obfuscator">.nosp@m.</span>.com</a> </dd></dl>
<dl class="section user"><dt>License</dt><dd><a href="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ac9992c39a93e0b5512a06a16e258d5cc" name="ac9992c39a93e0b5512a06a16e258d5cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9992c39a93e0b5512a06a16e258d5cc">&#9670;&#160;</a></span>__construct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_favourites\local\service\user_favourite_service::__construct </td>
          <td>(</td>
          <td class="paramtype">\context_user</td>          <td class="paramname"><span class="paramname"><em>$usercontext</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/dcd/interfacecore__favourites_1_1local_1_1repository_1_1favourite__repository__interface.html">favourite_repository_interface</a></td>          <td class="paramname"><span class="paramname"><em>$repository</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The user_favourite_service constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">context_user</td><td class="paramname">$usercontext</td><td>The context of the user to which this service operations are scoped. </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../d5/dcd/interfacecore__favourites_1_1local_1_1repository_1_1favourite__repository__interface.html" title="The favourite_repository interface, defining the basic CRUD operations for favourite type items withi...">core_favourites::local::repository::favourite_repository_interface</a></td><td class="paramname">$repository</td><td>a favourites repository. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ab8b8d7fc606799a8411631b2ad3d6fa2" name="ab8b8d7fc606799a8411631b2ad3d6fa2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8b8d7fc606799a8411631b2ad3d6fa2">&#9670;&#160;</a></span>count_favourites_by_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_favourites\local\service\user_favourite_service::count_favourites_by_type </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$component</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$itemtype</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">context</td>          <td class="paramname"><span class="paramname"><em>$context</em><span class="paramdefsep"> = </span><span class="paramdefval">null</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Count the favourite by item type. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$component</td><td>the frankenstyle component name. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$itemtype</td><td>the type of the favourited item. </td></tr>
    <tr><td class="paramtype">context&#160;|&#160;null</td><td class="paramname">$context</td><td>the context of the item which was favourited. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a19d95cb654cce8e10410628721eed2d5" name="a19d95cb654cce8e10410628721eed2d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19d95cb654cce8e10410628721eed2d5">&#9670;&#160;</a></span>create_favourite()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_favourites\local\service\user_favourite_service::create_favourite </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$component</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$itemtype</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$itemid</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">context</td>          <td class="paramname"><span class="paramname"><em>$context</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$ordering</em><span class="paramdefsep"> = </span><span class="paramdefval">null</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Favourite an item defined by itemid/context, in the area defined by component/itemtype. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$component</td><td>the frankenstyle component name. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$itemtype</td><td>the type of the item being favourited. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$itemid</td><td>the id of the item which is to be favourited. </td></tr>
    <tr><td class="paramtype">context</td><td class="paramname">$context</td><td>the context in which the item is to be favourited. </td></tr>
    <tr><td class="paramtype">int&#160;|&#160;null</td><td class="paramname">$ordering</td><td>optional ordering integer used for sorting the favourites in an area. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">favourite</td><td>the favourite, once created. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d6/da8/classmoodle__exception.html" title="Base Moodle Exception class.">moodle_exception</a></td><td>if the component name is invalid, or if the repository encounters any errors. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0046591cf7a917d537482d4a6c26fa1e" name="a0046591cf7a917d537482d4a6c26fa1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0046591cf7a917d537482d4a6c26fa1e">&#9670;&#160;</a></span>delete_favourite()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_favourites\local\service\user_favourite_service::delete_favourite </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$component</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$itemtype</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$itemid</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">context</td>          <td class="paramname"><span class="paramname"><em>$context</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a favourite item from an area and from within a context. </p>
<p>E.g. delete a favourite course from the area 'core_course', 'course' with itemid 3 and from within the CONTEXT_USER context.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$component</td><td>the frankenstyle component name. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$itemtype</td><td>the type of the favourited item. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$itemid</td><td>the id of the item which was favourited (not the favourite's id). </td></tr>
    <tr><td class="paramtype">context</td><td class="paramname">$context</td><td>the context of the item which was favourited. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d6/da8/classmoodle__exception.html" title="Base Moodle Exception class.">moodle_exception</a></td><td>if the user does not control the favourite, or it doesn't exist. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2dffe57422f412ce51651a2ddd6fea4f" name="a2dffe57422f412ce51651a2ddd6fea4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2dffe57422f412ce51651a2ddd6fea4f">&#9670;&#160;</a></span>favourite_exists()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_favourites\local\service\user_favourite_service::favourite_exists </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$component</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$itemtype</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$itemid</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">context</td>          <td class="paramname"><span class="paramname"><em>$context</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check whether an item has been marked as a favourite in the respective area. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$component</td><td>the frankenstyle component name. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$itemtype</td><td>the type of the favourited item. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$itemid</td><td>the id of the item which was favourited (not the favourite's id). </td></tr>
    <tr><td class="paramtype">context</td><td class="paramname">$context</td><td>the context of the item which was favourited. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>true if the item is favourited, false otherwise. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3caf9d8945cd9164a80964388f14c479" name="a3caf9d8945cd9164a80964388f14c479"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3caf9d8945cd9164a80964388f14c479">&#9670;&#160;</a></span>find_all_favourites()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_favourites\local\service\user_favourite_service::find_all_favourites </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$component</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$itemtypes</em><span class="paramdefsep"> = </span><span class="paramdefval">[]</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$limitfrom</em><span class="paramdefsep"> = </span><span class="paramdefval">0</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$limitnum</em><span class="paramdefsep"> = </span><span class="paramdefval">0</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find a list of favourites, by multiple types within a component. </p>
<p>E.g. "Find all favourites in the activity chooser" might result in: $favcourses = find_all_favourites('core_course', ['contentitem_mod_assign');</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$component</td><td>the frankenstyle component name. </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$itemtypes</td><td>optional the type of the favourited item. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$limitfrom</td><td>optional pagination control for returning a subset of records, starting at this point. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$limitnum</td><td>optional pagination control for returning a subset comprising this many records. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>the list of favourites found. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d6/da8/classmoodle__exception.html" title="Base Moodle Exception class.">moodle_exception</a></td><td>if the component name is invalid, or if the repository encounters any errors. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9f22cb2ed754026f95e35c1a16d05199" name="a9f22cb2ed754026f95e35c1a16d05199"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f22cb2ed754026f95e35c1a16d05199">&#9670;&#160;</a></span>find_favourites_by_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_favourites\local\service\user_favourite_service::find_favourites_by_type </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$component</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$itemtype</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$limitfrom</em><span class="paramdefsep"> = </span><span class="paramdefval">0</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$limitnum</em><span class="paramdefsep"> = </span><span class="paramdefval">0</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find a list of favourites, by type, where type is the component/itemtype pair. </p>
<p>E.g. "Find all favourite courses" might result in: $favcourses = find_favourites_by_type('core_course', 'course');</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$component</td><td>the frankenstyle component name. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$itemtype</td><td>the type of the favourited item. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$limitfrom</td><td>optional pagination control for returning a subset of records, starting at this point. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$limitnum</td><td>optional pagination control for returning a subset comprising this many records. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>the list of favourites found. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d6/da8/classmoodle__exception.html" title="Base Moodle Exception class.">moodle_exception</a></td><td>if the component name is invalid, or if the repository encounters any errors. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a95c9e44105d87aa738e03733c4a37dc1" name="a95c9e44105d87aa738e03733c4a37dc1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95c9e44105d87aa738e03733c4a37dc1">&#9670;&#160;</a></span>get_favourite()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_favourites\local\service\user_favourite_service::get_favourite </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$component</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$itemtype</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$itemid</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">context</td>          <td class="paramname"><span class="paramname"><em>$context</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the favourite. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$component</td><td>the frankenstyle component name. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$itemtype</td><td>the type of the favourited item. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$itemid</td><td>the id of the item which was favourited (not the favourite's id). </td></tr>
    <tr><td class="paramtype">context</td><td class="paramname">$context</td><td>the context of the item which was favourited. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">favourite|null</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af5c0fcc7d4c6a910318344a47cd55917" name="af5c0fcc7d4c6a910318344a47cd55917"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5c0fcc7d4c6a910318344a47cd55917">&#9670;&#160;</a></span>get_join_sql_by_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_favourites\local\service\user_favourite_service::get_join_sql_by_type </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$component</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$itemtype</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$tablealias</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$joinitemid</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the SQL required to include favourite information for a given component/itemtype combination. </p>
<p>Generally, find_favourites_by_type() is the recommended way to fetch favourites.</p>
<p>This method is used to include favourite information in external queries, for items identified by their component and itemtype, matching itemid to the $joinitemid, and for the user to which this service is scoped.</p>
<p>It uses a LEFT JOIN to preserve the original records. If you wish to restrict your records, please consider using a "WHERE {$tablealias}.id IS NOT NULL" in your query.</p>
<p>Example usage:</p>
<p>list($sql, $params) = $service-&gt;get_join_sql_by_type('<a class="el" href="../../d1/d29/namespacecore__message.html" title="&#160;">core_message</a>', 'message_conversations', 'myfavouritetablealias', 'conv.id'); Results in $sql: "LEFT JOIN {favourite} fav
            ON fav.component = :favouritecomponent
           AND fav.itemtype = :favouriteitemtype
           AND fav.userid = 1234
           AND fav.itemid = conv.id" and $params: ['favouritecomponent' =&gt; '<a class="el" href="../../d1/d29/namespacecore__message.html" title="&#160;">core_message</a>', 'favouriteitemtype' =&gt; 'message_conversations']</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$component</td><td>the frankenstyle component name. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$itemtype</td><td>the type of the favourited item. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$tablealias</td><td>the desired alias for the favourites table. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$joinitemid</td><td>the table and column identifier which the itemid is joined to. E.g. conversation.id. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>the list of sql and params, in the format [$sql, $params]. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>favourites/classes/local/service/<b>user_favourite_service.php</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Apr 7 2024 02:30:44 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
