<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: moodle1_converter Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;4.3</span>
   </div>
   <div id="projectbrief">Moodle 4.3.2+ (Build: 20240112) (076379a485b)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="../../d4/d5f/classmoodle1__converter-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">moodle1_converter Class Reference<div class="ingroups"><a class="el" href="../../d8/dc3/group__backup-convert.html">backup-convert</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Converter of <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 1.9 backup into <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 2.x format.  
 <a href="#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for moodle1_converter:</div>
<div class="dyncontent">
 <div class="center">
  <img src="../../d7/dee/classmoodle1__converter.png" usemap="#moodle1_5Fconverter_map" alt=""/>
  <map id="moodle1_5Fconverter_map" name="moodle1_5Fconverter_map">
<area href="../../d7/d9b/classbase__converter.html" title="Base converter class." alt="base_converter" shape="rect" coords="0,56,121,80"/>
<area href="../../d8/dda/interfaceloggable.html" title="Interface to apply to all the classes we want to be able to write to logs." alt="loggable" shape="rect" coords="0,0,121,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a179627ce6c3b6a90644b2594e93c4009" id="r_a179627ce6c3b6a90644b2594e93c4009"><td class="memItemLeft" align="right" valign="top"><a id="a179627ce6c3b6a90644b2594e93c4009" name="a179627ce6c3b6a90644b2594e93c4009"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>convert</b> ()</td></tr>
<tr class="memdesc:a179627ce6c3b6a90644b2594e93c4009"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts the backup directory. <br /></td></tr>
<tr class="separator:a179627ce6c3b6a90644b2594e93c4009"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8847a39e1cac294e944da27755af5cab" id="r_a8847a39e1cac294e944da27755af5cab"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8847a39e1cac294e944da27755af5cab">create_stash_storage</a> ()</td></tr>
<tr class="memdesc:a8847a39e1cac294e944da27755af5cab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates the temporary storage for stashed data.  <br /></td></tr>
<tr class="separator:a8847a39e1cac294e944da27755af5cab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55ad4fefc94ee163aadd5dc1ffd97361" id="r_a55ad4fefc94ee163aadd5dc1ffd97361"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a55ad4fefc94ee163aadd5dc1ffd97361">drop_stash_storage</a> ()</td></tr>
<tr class="memdesc:a55ad4fefc94ee163aadd5dc1ffd97361"><td class="mdescLeft">&#160;</td><td class="mdescRight">Drops the temporary storage of stashed data.  <br /></td></tr>
<tr class="separator:a55ad4fefc94ee163aadd5dc1ffd97361"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae74cc66a54712f2809072ba52300bcba" id="r_ae74cc66a54712f2809072ba52300bcba"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae74cc66a54712f2809072ba52300bcba">get_contextid</a> ($level, $instance=0)</td></tr>
<tr class="memdesc:ae74cc66a54712f2809072ba52300bcba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates an artificial context id.  <br /></td></tr>
<tr class="separator:ae74cc66a54712f2809072ba52300bcba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0e5d5ead6fd60c8c19d46a91a74df58" id="r_af0e5d5ead6fd60c8c19d46a91a74df58"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af0e5d5ead6fd60c8c19d46a91a74df58">get_file_manager</a> ($contextid=null, $component=null, $filearea=null, $itemid=0, $userid=null)</td></tr>
<tr class="memdesc:af0e5d5ead6fd60c8c19d46a91a74df58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates and returns new instance of the file manager.  <br /></td></tr>
<tr class="separator:af0e5d5ead6fd60c8c19d46a91a74df58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1dc6ff82bdb9d3d66ec2e245be12f671" id="r_a1dc6ff82bdb9d3d66ec2e245be12f671"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/classbase__converter.html#a1dc6ff82bdb9d3d66ec2e245be12f671">get_id</a> ()</td></tr>
<tr class="memdesc:a1dc6ff82bdb9d3d66ec2e245be12f671"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get instance identifier.  <br /></td></tr>
<tr class="separator:a1dc6ff82bdb9d3d66ec2e245be12f671"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f759d7d0f7904e4fe076c649aaf5934" id="r_a6f759d7d0f7904e4fe076c649aaf5934"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6f759d7d0f7904e4fe076c649aaf5934">get_inforef_manager</a> ($name, $id=0)</td></tr>
<tr class="memdesc:a6f759d7d0f7904e4fe076c649aaf5934"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates and returns new instance of the inforef manager.  <br /></td></tr>
<tr class="separator:a6f759d7d0f7904e4fe076c649aaf5934"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26984c71a2d28bf1c87baf00129fb1b1" id="r_a26984c71a2d28bf1c87baf00129fb1b1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/classbase__converter.html#a26984c71a2d28bf1c87baf00129fb1b1">get_name</a> ()</td></tr>
<tr class="memdesc:a26984c71a2d28bf1c87baf00129fb1b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get converter name.  <br /></td></tr>
<tr class="separator:a26984c71a2d28bf1c87baf00129fb1b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55cfc810d77b39697205cabde79cd8b7" id="r_a55cfc810d77b39697205cabde79cd8b7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a55cfc810d77b39697205cabde79cd8b7">get_nextid</a> ()</td></tr>
<tr class="memdesc:a55cfc810d77b39697205cabde79cd8b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Simple autoincrement generator.  <br /></td></tr>
<tr class="separator:a55cfc810d77b39697205cabde79cd8b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af321e85d8357ec745a7fe85dff2ca960" id="r_af321e85d8357ec745a7fe85dff2ca960"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af321e85d8357ec745a7fe85dff2ca960">get_stash</a> ($stashname, $itemid=0)</td></tr>
<tr class="memdesc:af321e85d8357ec745a7fe85dff2ca960"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restores a given stash stored previously by <a class="el" href="">self::set_stash()</a>.  <br /></td></tr>
<tr class="separator:af321e85d8357ec745a7fe85dff2ca960"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99ecb7a2b546cdcb9c18f39918d85012" id="r_a99ecb7a2b546cdcb9c18f39918d85012"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a99ecb7a2b546cdcb9c18f39918d85012">get_stash_itemids</a> ($stashname)</td></tr>
<tr class="memdesc:a99ecb7a2b546cdcb9c18f39918d85012"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the list of stashed $itemids in the given stash.  <br /></td></tr>
<tr class="separator:a99ecb7a2b546cdcb9c18f39918d85012"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74d847e24d4bc5c55eebf36c6b420964" id="r_a74d847e24d4bc5c55eebf36c6b420964"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a74d847e24d4bc5c55eebf36c6b420964">get_stash_names</a> ()</td></tr>
<tr class="memdesc:a74d847e24d4bc5c55eebf36c6b420964"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the list of existing stashes.  <br /></td></tr>
<tr class="separator:a74d847e24d4bc5c55eebf36c6b420964"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab44004dcdd65e85414676ac2b55431ed" id="r_ab44004dcdd65e85414676ac2b55431ed"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab44004dcdd65e85414676ac2b55431ed">get_stash_or_default</a> ($stashname, $itemid=0, $default=null)</td></tr>
<tr class="memdesc:ab44004dcdd65e85414676ac2b55431ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restores a given stash or returns the given default if there is no such stash.  <br /></td></tr>
<tr class="separator:ab44004dcdd65e85414676ac2b55431ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35cd7690b6e5310c03cd26455e395414" id="r_a35cd7690b6e5310c03cd26455e395414"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/classbase__converter.html#a35cd7690b6e5310c03cd26455e395414">get_tempdir_path</a> ()</td></tr>
<tr class="separator:a35cd7690b6e5310c03cd26455e395414"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5cfdcab04189f13096851850cdc4ca5" id="r_af5cfdcab04189f13096851850cdc4ca5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/classbase__converter.html#af5cfdcab04189f13096851850cdc4ca5">get_workdir_path</a> ()</td></tr>
<tr class="separator:af5cfdcab04189f13096851850cdc4ca5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08659812d2cf7f22644852038cbb73ff" id="r_a08659812d2cf7f22644852038cbb73ff"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a08659812d2cf7f22644852038cbb73ff">log</a> ($message, $level, $a=null, $depth=null, $display=false)</td></tr>
<tr class="memdesc:a08659812d2cf7f22644852038cbb73ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function will be responsible for handling the params, and to call to the corresponding logger-&gt;process() once all modifications in params have been performed.  <br /></td></tr>
<tr class="separator:a08659812d2cf7f22644852038cbb73ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9908feabfd24faf3bd0fbc905382940b" id="r_a9908feabfd24faf3bd0fbc905382940b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9908feabfd24faf3bd0fbc905382940b">path_end_reached</a> ($path)</td></tr>
<tr class="memdesc:a9908feabfd24faf3bd0fbc905382940b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes operations required at the end of a watched path.  <br /></td></tr>
<tr class="separator:a9908feabfd24faf3bd0fbc905382940b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70d4dfdebbba3f87f22cb13429846fe8" id="r_a70d4dfdebbba3f87f22cb13429846fe8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a70d4dfdebbba3f87f22cb13429846fe8">path_start_reached</a> ($path)</td></tr>
<tr class="memdesc:a70d4dfdebbba3f87f22cb13429846fe8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes operations required at the start of a watched path.  <br /></td></tr>
<tr class="separator:a70d4dfdebbba3f87f22cb13429846fe8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6495d60c49f324f3e0f9f13d3cedaede" id="r_a6495d60c49f324f3e0f9f13d3cedaede"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6495d60c49f324f3e0f9f13d3cedaede">process_chunk</a> ($data)</td></tr>
<tr class="memdesc:a6495d60c49f324f3e0f9f13d3cedaede"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process the data obtained from the XML parser processor.  <br /></td></tr>
<tr class="separator:a6495d60c49f324f3e0f9f13d3cedaede"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c7cc25e2a2e75d6daf7bf828b0f9d0a" id="r_a4c7cc25e2a2e75d6daf7bf828b0f9d0a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/classbase__converter.html#a4c7cc25e2a2e75d6daf7bf828b0f9d0a">set_logger</a> ($logger)</td></tr>
<tr class="memdesc:a4c7cc25e2a2e75d6daf7bf828b0f9d0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the logger to use during the conversion.  <br /></td></tr>
<tr class="separator:a4c7cc25e2a2e75d6daf7bf828b0f9d0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b0756c99993924428521b942594738a" id="r_a5b0756c99993924428521b942594738a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5b0756c99993924428521b942594738a">set_stash</a> ($stashname, $info, $itemid=0)</td></tr>
<tr class="memdesc:a5b0756c99993924428521b942594738a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores some information for later processing.  <br /></td></tr>
<tr class="separator:a5b0756c99993924428521b942594738a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ac8606a72eff6471c6e89b0131cb137db" id="r_ac8606a72eff6471c6e89b0131cb137db"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac8606a72eff6471c6e89b0131cb137db">description</a> ()</td></tr>
<tr class="separator:ac8606a72eff6471c6e89b0131cb137db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06bf613b3cf2ac7f92f24ab95de9760f" id="r_a06bf613b3cf2ac7f92f24ab95de9760f"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a06bf613b3cf2ac7f92f24ab95de9760f">detect_format</a> ($tempdir)</td></tr>
<tr class="memdesc:a06bf613b3cf2ac7f92f24ab95de9760f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detects the <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 1.9 format of the backup directory.  <br /></td></tr>
<tr class="separator:a06bf613b3cf2ac7f92f24ab95de9760f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8d354e3ba7a0da093a35babdbafb3bc" id="r_ae8d354e3ba7a0da093a35babdbafb3bc"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae8d354e3ba7a0da093a35babdbafb3bc">find_referenced_files</a> ($text)</td></tr>
<tr class="memdesc:ae8d354e3ba7a0da093a35babdbafb3bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detects all links to file.php encoded via $@FILEPHP$ and returns the files to migrate.  <br /></td></tr>
<tr class="separator:ae8d354e3ba7a0da093a35babdbafb3bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adafb849edcee6b9bfc304ff1948ab791" id="r_adafb849edcee6b9bfc304ff1948ab791"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/classbase__converter.html#adafb849edcee6b9bfc304ff1948ab791">is_available</a> ()</td></tr>
<tr class="memdesc:adafb849edcee6b9bfc304ff1948ab791"><td class="mdescLeft">&#160;</td><td class="mdescRight">public static methods //////////////////////////////////////////////////  <br /></td></tr>
<tr class="separator:adafb849edcee6b9bfc304ff1948ab791"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2ac5a717c1c6cb9895d0348050f73f0" id="r_ac2ac5a717c1c6cb9895d0348050f73f0"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac2ac5a717c1c6cb9895d0348050f73f0">migrate_referenced_files</a> ($text, <a class="el" href="../../d9/d52/classmoodle1__file__manager.html">moodle1_file_manager</a> $fileman)</td></tr>
<tr class="memdesc:ac2ac5a717c1c6cb9895d0348050f73f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Migrates all course files referenced from the hypertext using the given filemanager.  <br /></td></tr>
<tr class="separator:ac2ac5a717c1c6cb9895d0348050f73f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f1b1b398913e4ff2ffa23863f376e28" id="r_a1f1b1b398913e4ff2ffa23863f376e28"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1f1b1b398913e4ff2ffa23863f376e28">rewrite_filephp_usage</a> ($text, array $files)</td></tr>
<tr class="memdesc:a1f1b1b398913e4ff2ffa23863f376e28"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given the list of migrated files, rewrites references to them from $@FILEPHP$ form to the @PLUGINFILE@ one.  <br /></td></tr>
<tr class="separator:a1f1b1b398913e4ff2ffa23863f376e28"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a06596f27e93a9a98267ba25c5078b1b8" id="r_a06596f27e93a9a98267ba25c5078b1b8"><td class="memItemLeft" align="right" valign="top"><a id="a06596f27e93a9a98267ba25c5078b1b8" name="a06596f27e93a9a98267ba25c5078b1b8"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>SKIP_ALL_CHILDREN</b> = -991399</td></tr>
<tr class="memdesc:a06596f27e93a9a98267ba25c5078b1b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Instructs the dispatcher to ignore all children below path processor returning it. <br /></td></tr>
<tr class="separator:a06596f27e93a9a98267ba25c5078b1b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a65473f98248d77e05bb3ba4287fdc90e" id="r_a65473f98248d77e05bb3ba4287fdc90e"><td class="memItemLeft" align="right" valign="top"><a id="a65473f98248d77e05bb3ba4287fdc90e" name="a65473f98248d77e05bb3ba4287fdc90e"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>create_workdir</b> ()</td></tr>
<tr class="memdesc:a65473f98248d77e05bb3ba4287fdc90e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepares a new empty working directory. <br /></td></tr>
<tr class="separator:a65473f98248d77e05bb3ba4287fdc90e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a149b3f79df9a6e27ae071d65122d4f52" id="r_a149b3f79df9a6e27ae071d65122d4f52"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/classbase__converter.html#a149b3f79df9a6e27ae071d65122d4f52">destroy</a> ()</td></tr>
<tr class="memdesc:a149b3f79df9a6e27ae071d65122d4f52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cleans up stuff after the execution.  <br /></td></tr>
<tr class="separator:a149b3f79df9a6e27ae071d65122d4f52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ec9f2f94cc8a9880285d08b5ed91b85" id="r_a0ec9f2f94cc8a9880285d08b5ed91b85"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0ec9f2f94cc8a9880285d08b5ed91b85">execute</a> ()</td></tr>
<tr class="memdesc:a0ec9f2f94cc8a9880285d08b5ed91b85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts the contents of the tempdir into the target format in the workdir.  <br /></td></tr>
<tr class="separator:a0ec9f2f94cc8a9880285d08b5ed91b85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1cf4a5515e3c92152c3db101319e4fb" id="r_ad1cf4a5515e3c92152c3db101319e4fb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad1cf4a5515e3c92152c3db101319e4fb">grouped_parent_exists</a> ($pelement, $elements)</td></tr>
<tr class="memdesc:ad1cf4a5515e3c92152c3db101319e4fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper method used by <a class="el" href="">self::register_handler()</a>.  <br /></td></tr>
<tr class="separator:ad1cf4a5515e3c92152c3db101319e4fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39ebbf715b7b7ea23add55966d4232d9" id="r_a39ebbf715b7b7ea23add55966d4232d9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a39ebbf715b7b7ea23add55966d4232d9">init</a> ()</td></tr>
<tr class="memdesc:a39ebbf715b7b7ea23add55966d4232d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the instance if needed, called by the constructor.  <br /></td></tr>
<tr class="separator:a39ebbf715b7b7ea23add55966d4232d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73d025535e93880ba8a63fd2a6b331b7" id="r_a73d025535e93880ba8a63fd2a6b331b7"><td class="memItemLeft" align="right" valign="top"><a id="a73d025535e93880ba8a63fd2a6b331b7" name="a73d025535e93880ba8a63fd2a6b331b7"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>register_handler</b> (<a class="el" href="../../d4/dee/classmoodle1__handler.html">moodle1_handler</a> $handler, array $elements)</td></tr>
<tr class="memdesc:a73d025535e93880ba8a63fd2a6b331b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a handler for the given path elements. <br /></td></tr>
<tr class="separator:a73d025535e93880ba8a63fd2a6b331b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f65f217c8737b591bc23d3893eed0ab" id="r_a3f65f217c8737b591bc23d3893eed0ab"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/classbase__converter.html#a3f65f217c8737b591bc23d3893eed0ab">replace_tempdir</a> ()</td></tr>
<tr class="memdesc:a3f65f217c8737b591bc23d3893eed0ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Replaces the source backup directory with the converted version.  <br /></td></tr>
<tr class="separator:a3f65f217c8737b591bc23d3893eed0ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a24814232d20d5ddb1eebfa8e0516908c" id="r_a24814232d20d5ddb1eebfa8e0516908c"><td class="memItemLeft" align="right" valign="top"><a id="a24814232d20d5ddb1eebfa8e0516908c" name="a24814232d20d5ddb1eebfa8e0516908c"></a>
null string&#160;</td><td class="memItemRight" valign="bottom"><b>$currentblock</b> = null</td></tr>
<tr class="memdesc:a24814232d20d5ddb1eebfa8e0516908c"><td class="mdescLeft">&#160;</td><td class="mdescRight">the current block being processed - used to expand the BLOCK paths <br /></td></tr>
<tr class="separator:a24814232d20d5ddb1eebfa8e0516908c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ebae797055de26eb4c7f2be3685c5e8" id="r_a6ebae797055de26eb4c7f2be3685c5e8"><td class="memItemLeft" align="right" valign="top"><a id="a6ebae797055de26eb4c7f2be3685c5e8" name="a6ebae797055de26eb4c7f2be3685c5e8"></a>
null string&#160;</td><td class="memItemRight" valign="bottom"><b>$currentmod</b> = null</td></tr>
<tr class="memdesc:a6ebae797055de26eb4c7f2be3685c5e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">the current module being processed - used to expand the MOD paths <br /></td></tr>
<tr class="separator:a6ebae797055de26eb4c7f2be3685c5e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9615ef90d1c32455b21abdd03e2e0552" id="r_a9615ef90d1c32455b21abdd03e2e0552"><td class="memItemLeft" align="right" valign="top"><a id="a9615ef90d1c32455b21abdd03e2e0552" name="a9615ef90d1c32455b21abdd03e2e0552"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>$id</b></td></tr>
<tr class="memdesc:a9615ef90d1c32455b21abdd03e2e0552"><td class="mdescLeft">&#160;</td><td class="mdescRight">unique identifier of this converter instance <br /></td></tr>
<tr class="separator:a9615ef90d1c32455b21abdd03e2e0552"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac34a476d52882bf6f4232d1d3600db22" id="r_ac34a476d52882bf6f4232d1d3600db22"><td class="memItemLeft" align="right" valign="top"><a id="ac34a476d52882bf6f4232d1d3600db22" name="ac34a476d52882bf6f4232d1d3600db22"></a>
null <a class="el" href="../../df/d3c/classbase__logger.html">base_logger</a>&#160;</td><td class="memItemRight" valign="bottom"><b>$logger</b> = null</td></tr>
<tr class="memdesc:ac34a476d52882bf6f4232d1d3600db22"><td class="mdescLeft">&#160;</td><td class="mdescRight">logger to use during the conversion <br /></td></tr>
<tr class="separator:ac34a476d52882bf6f4232d1d3600db22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37680db8d9d622d8773ac01e91a47943" id="r_a37680db8d9d622d8773ac01e91a47943"><td class="memItemLeft" align="right" valign="top"><a id="a37680db8d9d622d8773ac01e91a47943" name="a37680db8d9d622d8773ac01e91a47943"></a>
array&#160;</td><td class="memItemRight" valign="bottom"><b>$pathelements</b> = array()</td></tr>
<tr class="memdesc:a37680db8d9d622d8773ac01e91a47943"><td class="mdescLeft">&#160;</td><td class="mdescRight">of <a class="el" href="../../d2/d3b/classconvert__path.html">convert_path</a> to process <br /></td></tr>
<tr class="separator:a37680db8d9d622d8773ac01e91a47943"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0053d400c1c48a016d74178f9e9af0d7" id="r_a0053d400c1c48a016d74178f9e9af0d7"><td class="memItemLeft" align="right" valign="top"><a id="a0053d400c1c48a016d74178f9e9af0d7" name="a0053d400c1c48a016d74178f9e9af0d7"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>$pathlock</b></td></tr>
<tr class="memdesc:a0053d400c1c48a016d74178f9e9af0d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">path currently locking processing of children <br /></td></tr>
<tr class="separator:a0053d400c1c48a016d74178f9e9af0d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9eedc205df83394891221eeb9ae74413" id="r_a9eedc205df83394891221eeb9ae74413"><td class="memItemLeft" align="right" valign="top"><a id="a9eedc205df83394891221eeb9ae74413" name="a9eedc205df83394891221eeb9ae74413"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>$tempdir</b></td></tr>
<tr class="memdesc:a9eedc205df83394891221eeb9ae74413"><td class="mdescLeft">&#160;</td><td class="mdescRight">the name of the directory containing the unpacked backup being converted <br /></td></tr>
<tr class="separator:a9eedc205df83394891221eeb9ae74413"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e2c39e153caf5a0efa2b530c63e0c19" id="r_a3e2c39e153caf5a0efa2b530c63e0c19"><td class="memItemLeft" align="right" valign="top"><a id="a3e2c39e153caf5a0efa2b530c63e0c19" name="a3e2c39e153caf5a0efa2b530c63e0c19"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>$workdir</b></td></tr>
<tr class="memdesc:a3e2c39e153caf5a0efa2b530c63e0c19"><td class="mdescLeft">&#160;</td><td class="mdescRight">the name of the directory where the backup is converted to <br /></td></tr>
<tr class="separator:a3e2c39e153caf5a0efa2b530c63e0c19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca93193fb14878d1c48a7b1a3694a4c6" id="r_aca93193fb14878d1c48a7b1a3694a4c6"><td class="memItemLeft" align="right" valign="top"><a id="aca93193fb14878d1c48a7b1a3694a4c6" name="aca93193fb14878d1c48a7b1a3694a4c6"></a>
<a class="el" href="../../d5/dbd/classprogressive__parser.html">progressive_parser</a>&#160;</td><td class="memItemRight" valign="bottom"><b>$xmlparser</b></td></tr>
<tr class="memdesc:aca93193fb14878d1c48a7b1a3694a4c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">moodle.xml file parser <br /></td></tr>
<tr class="separator:aca93193fb14878d1c48a7b1a3694a4c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32364213666735cb4c5e0b8a7ab77007" id="r_a32364213666735cb4c5e0b8a7ab77007"><td class="memItemLeft" align="right" valign="top"><a id="a32364213666735cb4c5e0b8a7ab77007" name="a32364213666735cb4c5e0b8a7ab77007"></a>
<a class="el" href="../../d0/d08/classmoodle1__parser__processor.html">moodle1_parser_processor</a>&#160;</td><td class="memItemRight" valign="bottom"><b>$xmlprocessor</b></td></tr>
<tr class="separator:a32364213666735cb4c5e0b8a7ab77007"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Converter of <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 1.9 backup into <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 2.x format. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a8847a39e1cac294e944da27755af5cab" name="a8847a39e1cac294e944da27755af5cab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8847a39e1cac294e944da27755af5cab">&#9670;&#160;</a></span>create_stash_storage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">moodle1_converter::create_stash_storage </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates the temporary storage for stashed data. </p>
<p>This implementation uses backup_ids_temp table. </p>

</div>
</div>
<a id="ac8606a72eff6471c6e89b0131cb137db" name="ac8606a72eff6471c6e89b0131cb137db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8606a72eff6471c6e89b0131cb137db">&#9670;&#160;</a></span>description()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static moodle1_converter::description </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section see"><dt>See also</dt><dd>parent::description() </dd></dl>

<p>Reimplemented from <a class="el" href="../../d7/d9b/classbase__converter.html#a08ccb41bb4755a0239a18399dba8d7cc">base_converter</a>.</p>

</div>
</div>
<a id="a149b3f79df9a6e27ae071d65122d4f52" name="a149b3f79df9a6e27ae071d65122d4f52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a149b3f79df9a6e27ae071d65122d4f52">&#9670;&#160;</a></span>destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">base_converter::destroy </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Cleans up stuff after the execution. </p>
<p>Note that we do not know if the execution was successful or not. An exception might have been thrown. </p>

</div>
</div>
<a id="a06bf613b3cf2ac7f92f24ab95de9760f" name="a06bf613b3cf2ac7f92f24ab95de9760f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06bf613b3cf2ac7f92f24ab95de9760f">&#9670;&#160;</a></span>detect_format()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static moodle1_converter::detect_format </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$tempdir</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Detects the <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 1.9 format of the backup directory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$tempdir</td><td>the name of the backup directory </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">null|string</td><td>backup::FORMAT_MOODLE1 if the <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 1.9 is detected, null otherwise </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../d7/d9b/classbase__converter.html#a5f7f8450538e058b7f76dd0daf6bdbf8">base_converter</a>.</p>

</div>
</div>
<a id="a55ad4fefc94ee163aadd5dc1ffd97361" name="a55ad4fefc94ee163aadd5dc1ffd97361"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55ad4fefc94ee163aadd5dc1ffd97361">&#9670;&#160;</a></span>drop_stash_storage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">moodle1_converter::drop_stash_storage </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Drops the temporary storage of stashed data. </p>
<p>This implementation uses backup_ids_temp table. </p>

</div>
</div>
<a id="a0ec9f2f94cc8a9880285d08b5ed91b85" name="a0ec9f2f94cc8a9880285d08b5ed91b85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ec9f2f94cc8a9880285d08b5ed91b85">&#9670;&#160;</a></span>execute()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">moodle1_converter::execute </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Converts the contents of the tempdir into the target format in the workdir. </p>

<p>Reimplemented from <a class="el" href="../../d7/d9b/classbase__converter.html#abb9dfc912ffbbec30cf1c42a3b19c497">base_converter</a>.</p>

</div>
</div>
<a id="ae8d354e3ba7a0da093a35babdbafb3bc" name="ae8d354e3ba7a0da093a35babdbafb3bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8d354e3ba7a0da093a35babdbafb3bc">&#9670;&#160;</a></span>find_referenced_files()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static moodle1_converter::find_referenced_files </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$text</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Detects all links to file.php encoded via $@FILEPHP$ and returns the files to migrate. </p>
<dl class="section see"><dt>See also</dt><dd>self::migrate_referenced_files() </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$text</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae74cc66a54712f2809072ba52300bcba" name="ae74cc66a54712f2809072ba52300bcba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae74cc66a54712f2809072ba52300bcba">&#9670;&#160;</a></span>get_contextid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">moodle1_converter::get_contextid </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$level</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$instance</em><span class="paramdefsep"> = </span><span class="paramdefval">0</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates an artificial context id. </p>
<p><a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 1.9 backups do not contain any context information. But we need them in <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 2.x format so here we generate fictive context id for every given context level + instance combo.</p>
<p>CONTEXT_SYSTEM and CONTEXT_COURSE ignore the $instance as they represent a single system or the course being restored.</p>
<dl class="section see"><dt>See also</dt><dd>context_system::instance() </dd>
<dd>
context_course::instance() </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$level</td><td>the context level, like CONTEXT_COURSE or CONTEXT_MODULE </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$instance</td><td>the instance id, for example $course-&gt;id for courses or $cm-&gt;id for activity modules </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td>the context id </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af0e5d5ead6fd60c8c19d46a91a74df58" name="af0e5d5ead6fd60c8c19d46a91a74df58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0e5d5ead6fd60c8c19d46a91a74df58">&#9670;&#160;</a></span>get_file_manager()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">moodle1_converter::get_file_manager </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$contextid</em><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$component</em><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$filearea</em><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$itemid</em><span class="paramdefsep"> = </span><span class="paramdefval">0</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$userid</em><span class="paramdefsep"> = </span><span class="paramdefval">null</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates and returns new instance of the file manager. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$contextid</td><td>the default context id of the files being migrated </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$component</td><td>the default component name of the files being migrated </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$filearea</td><td>the default file area of the files being migrated </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$itemid</td><td>the default item id of the files being migrated </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td>initial user id of the files being migrated </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="../../d9/d52/classmoodle1__file__manager.html" title="The class responsible for files migration.">moodle1_file_manager</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1dc6ff82bdb9d3d66ec2e245be12f671" name="a1dc6ff82bdb9d3d66ec2e245be12f671"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1dc6ff82bdb9d3d66ec2e245be12f671">&#9670;&#160;</a></span>get_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">base_converter::get_id </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get instance identifier. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>the unique identifier of this converter instance </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6f759d7d0f7904e4fe076c649aaf5934" name="a6f759d7d0f7904e4fe076c649aaf5934"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f759d7d0f7904e4fe076c649aaf5934">&#9670;&#160;</a></span>get_inforef_manager()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">moodle1_converter::get_inforef_manager </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$name</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$id</em><span class="paramdefsep"> = </span><span class="paramdefval">0</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates and returns new instance of the inforef manager. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$name</td><td>the name of the annotator (like course, section, activity, block) </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$id</td><td>the id of the annotator if required </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="../../d8/d53/classmoodle1__inforef__manager.html" title="Helper class that handles ids annotations for inforef.xml files.">moodle1_inforef_manager</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a26984c71a2d28bf1c87baf00129fb1b1" name="a26984c71a2d28bf1c87baf00129fb1b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26984c71a2d28bf1c87baf00129fb1b1">&#9670;&#160;</a></span>get_name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">base_converter::get_name </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get converter name. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>the system name of the converter </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a55cfc810d77b39697205cabde79cd8b7" name="a55cfc810d77b39697205cabde79cd8b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55cfc810d77b39697205cabde79cd8b7">&#9670;&#160;</a></span>get_nextid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">moodle1_converter::get_nextid </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Simple autoincrement generator. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td>the next number in a row of numbers </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af321e85d8357ec745a7fe85dff2ca960" name="af321e85d8357ec745a7fe85dff2ca960"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af321e85d8357ec745a7fe85dff2ca960">&#9670;&#160;</a></span>get_stash()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">moodle1_converter::get_stash </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$stashname</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$itemid</em><span class="paramdefsep"> = </span><span class="paramdefval">0</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Restores a given stash stored previously by <a class="el" href="">self::set_stash()</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$stashname</td><td>name of the stash </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$itemid</td><td>optional id for multiple infos within the same stashname </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d0/d33/classmoodle1__convert__empty__storage__exception.html" title="Exception thrown by the temporary storage subsystem of moodle1_converter.">moodle1_convert_empty_storage_exception</a></td><td>if the info has not been stashed previously </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">mixed</td><td>stashed data </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a99ecb7a2b546cdcb9c18f39918d85012" name="a99ecb7a2b546cdcb9c18f39918d85012"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99ecb7a2b546cdcb9c18f39918d85012">&#9670;&#160;</a></span>get_stash_itemids()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">moodle1_converter::get_stash_itemids </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$stashname</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the list of stashed $itemids in the given stash. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$stashname</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a74d847e24d4bc5c55eebf36c6b420964" name="a74d847e24d4bc5c55eebf36c6b420964"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74d847e24d4bc5c55eebf36c6b420964">&#9670;&#160;</a></span>get_stash_names()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">moodle1_converter::get_stash_names </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the list of existing stashes. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab44004dcdd65e85414676ac2b55431ed" name="ab44004dcdd65e85414676ac2b55431ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab44004dcdd65e85414676ac2b55431ed">&#9670;&#160;</a></span>get_stash_or_default()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">moodle1_converter::get_stash_or_default </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$stashname</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$itemid</em><span class="paramdefsep"> = </span><span class="paramdefval">0</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$default</em><span class="paramdefsep"> = </span><span class="paramdefval">null</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Restores a given stash or returns the given default if there is no such stash. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$stashname</td><td>name of the stash </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$itemid</td><td>optional id for multiple infos within the same stashname </td></tr>
    <tr><td class="paramtype">mixed</td><td class="paramname">$default</td><td>information to return if the info has not been stashed previously </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">mixed</td><td>stashed data or the default value </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a35cd7690b6e5310c03cd26455e395414" name="a35cd7690b6e5310c03cd26455e395414"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35cd7690b6e5310c03cd26455e395414">&#9670;&#160;</a></span>get_tempdir_path()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">base_converter::get_tempdir_path </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>the full path to the directory with the source backup </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af5cfdcab04189f13096851850cdc4ca5" name="af5cfdcab04189f13096851850cdc4ca5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5cfdcab04189f13096851850cdc4ca5">&#9670;&#160;</a></span>get_workdir_path()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">base_converter::get_workdir_path </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>the full path to the working directory </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad1cf4a5515e3c92152c3db101319e4fb" name="ad1cf4a5515e3c92152c3db101319e4fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1cf4a5515e3c92152c3db101319e4fb">&#9670;&#160;</a></span>grouped_parent_exists()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">moodle1_converter::grouped_parent_exists </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$pelement</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$elements</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper method used by <a class="el" href="">self::register_handler()</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d2/d3b/classconvert__path.html" title="Class representing a path to be converted from XML file.">convert_path</a></td><td class="paramname">$pelement</td><td>path element </td></tr>
    <tr><td class="paramtype"></td><td class="paramname">array</td><td>of <a class="el" href="../../d2/d3b/classconvert__path.html" title="Class representing a path to be converted from XML file.">convert_path</a> instances </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>true if grouped parent was found, false otherwise </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a39ebbf715b7b7ea23add55966d4232d9" name="a39ebbf715b7b7ea23add55966d4232d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39ebbf715b7b7ea23add55966d4232d9">&#9670;&#160;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">moodle1_converter::init </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize the instance if needed, called by the constructor. </p>
<p>Here we create objects we need before the execution. </p>

<p>Reimplemented from <a class="el" href="../../d7/d9b/classbase__converter.html#a75e9a36f2cb18a682c63980aff2ddced">base_converter</a>.</p>

</div>
</div>
<a id="adafb849edcee6b9bfc304ff1948ab791" name="adafb849edcee6b9bfc304ff1948ab791"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adafb849edcee6b9bfc304ff1948ab791">&#9670;&#160;</a></span>is_available()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static base_converter::is_available </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>public static methods ////////////////////////////////////////////////// </p>
<p>Makes sure that this converter is available at this site</p>
<p>This is intended for eventual PHP extensions check, environment check etc. All checks that do not depend on actual backup data should be done here.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">boolean</td><td>true if this converter should be considered as available </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../dc/def/classimscc1__export__converter.html#a4c03162b50674a851d4d9466ea2b6a39">imscc1_export_converter</a>, and <a class="el" href="../../d0/d64/classmoodle1__export__converter.html#a1b8ce40b32a9f8548b6a1a48094f93f2">moodle1_export_converter</a>.</p>

</div>
</div>
<a id="a08659812d2cf7f22644852038cbb73ff" name="a08659812d2cf7f22644852038cbb73ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08659812d2cf7f22644852038cbb73ff">&#9670;&#160;</a></span>log()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">moodle1_converter::log </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$message</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$level</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$a</em><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$depth</em><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$display</em><span class="paramdefsep"> = </span><span class="paramdefval">false</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function will be responsible for handling the params, and to call to the corresponding logger-&gt;process() once all modifications in params have been performed. </p>

<p>Reimplemented from <a class="el" href="../../d7/d9b/classbase__converter.html#a248c77865b7a8bc80f8832567a97f688">base_converter</a>.</p>

</div>
</div>
<a id="ac2ac5a717c1c6cb9895d0348050f73f0" name="ac2ac5a717c1c6cb9895d0348050f73f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2ac5a717c1c6cb9895d0348050f73f0">&#9670;&#160;</a></span>migrate_referenced_files()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static moodle1_converter::migrate_referenced_files </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$text</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d52/classmoodle1__file__manager.html">moodle1_file_manager</a></td>          <td class="paramname"><span class="paramname"><em>$fileman</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Migrates all course files referenced from the hypertext using the given filemanager. </p>
<p>This is typically used to convert images embedded into the intro fields.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$text</td><td>hypertext containing $@FILEPHP$ referenced </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../d9/d52/classmoodle1__file__manager.html" title="The class responsible for files migration.">moodle1_file_manager</a></td><td class="paramname">$fileman</td><td>file manager to use for the file migration </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>the original $text with $@FILEPHP$ references replaced with the new @PLUGINFILE@ </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9908feabfd24faf3bd0fbc905382940b" name="a9908feabfd24faf3bd0fbc905382940b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9908feabfd24faf3bd0fbc905382940b">&#9670;&#160;</a></span>path_end_reached()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">moodle1_converter::path_end_reached </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$path</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Executes operations required at the end of a watched path. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$path</td><td>in the original file </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a70d4dfdebbba3f87f22cb13429846fe8" name="a70d4dfdebbba3f87f22cb13429846fe8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70d4dfdebbba3f87f22cb13429846fe8">&#9670;&#160;</a></span>path_start_reached()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">moodle1_converter::path_start_reached </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$path</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Executes operations required at the start of a watched path. </p>
<p>For MOD and BLOCK paths, this is supported only for the sub-paths, not the root module/block element. For the illustration:</p>
<p>You CAN'T attach on_xxx_start() listener to a path like /MOODLE_BACKUP/COURSE/MODULES/MOD/WORKSHOP because the &lt;MOD&gt; must be processed first in <a class="el" href="">self::process_chunk()</a> where $this-&gt;currentmod is set.</p>
<p>You CAN attach some on_xxx_start() listener to a path like /MOODLE_BACKUP/COURSE/MODULES/MOD/WORKSHOP/SUBMISSIONS because it is a sub-path under &lt;MOD&gt; and we have $this-&gt;currentmod already set when the &lt;SUBMISSIONS&gt; is reached.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$path</td><td>in the original file </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6495d60c49f324f3e0f9f13d3cedaede" name="a6495d60c49f324f3e0f9f13d3cedaede"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6495d60c49f324f3e0f9f13d3cedaede">&#9670;&#160;</a></span>process_chunk()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">moodle1_converter::process_chunk </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$data</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process the data obtained from the XML parser processor. </p>
<p>This methods receives one chunk of information from the XML parser processor and dispatches it, following the naming rules. We are expanding the modules and blocks paths here to include the plugin's name.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$data</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3f65f217c8737b591bc23d3893eed0ab" name="a3f65f217c8737b591bc23d3893eed0ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f65f217c8737b591bc23d3893eed0ab">&#9670;&#160;</a></span>replace_tempdir()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">base_converter::replace_tempdir </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Replaces the source backup directory with the converted version. </p>
<p>If $CFG-&gt;keeptempdirectoriesonbackup is defined, the original source source backup directory is kept for debugging purposes. </p>

</div>
</div>
<a id="a1f1b1b398913e4ff2ffa23863f376e28" name="a1f1b1b398913e4ff2ffa23863f376e28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f1b1b398913e4ff2ffa23863f376e28">&#9670;&#160;</a></span>rewrite_filephp_usage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static moodle1_converter::rewrite_filephp_usage </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$text</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$files</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given the list of migrated files, rewrites references to them from $@FILEPHP$ form to the @PLUGINFILE@ one. </p>
<dl class="section see"><dt>See also</dt><dd>self::migrate_referenced_files() </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$text</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$files</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4c7cc25e2a2e75d6daf7bf828b0f9d0a" name="a4c7cc25e2a2e75d6daf7bf828b0f9d0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c7cc25e2a2e75d6daf7bf828b0f9d0a">&#9670;&#160;</a></span>set_logger()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">base_converter::set_logger </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$logger</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets the logger to use during the conversion. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">null&#160;|&#160;<a class="el" href="../../df/d3c/classbase__logger.html" title="Base abstract class for all the loggers to be used in backup/restore.">base_logger</a></td><td class="paramname">$logger</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5b0756c99993924428521b942594738a" name="a5b0756c99993924428521b942594738a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b0756c99993924428521b942594738a">&#9670;&#160;</a></span>set_stash()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">moodle1_converter::set_stash </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$stashname</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$info</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$itemid</em><span class="paramdefsep"> = </span><span class="paramdefval">0</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stores some information for later processing. </p>
<p>This implementation uses backup_ids_temp table to store data. Make sure that the $stashname + $itemid combo is unique.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$stashname</td><td>name of the stash </td></tr>
    <tr><td class="paramtype">mixed</td><td class="paramname">$info</td><td>information to stash </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$itemid</td><td>optional id for multiple infos within the same stashname </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>backup/converter/moodle1/<b>lib.php</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Jan 14 2024 02:40:56 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
