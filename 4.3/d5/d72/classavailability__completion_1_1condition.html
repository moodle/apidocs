<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: availability_completion\condition Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;4.3</span>
   </div>
   <div id="projectbrief">Moodle 4.3.3+ (Build: 20240308) (fde6c3c7efa)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dc/deb/namespaceavailability__completion.html">availability_completion</a></li><li class="navelem"><a class="el" href="../../d5/d72/classavailability__completion_1_1condition.html">condition</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pro-static-attribs">Static Protected Attributes</a> &#124;
<a href="../../d0/dc5/classavailability__completion_1_1condition-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">availability_completion\condition Class Reference<div class="ingroups"><a class="el" href="../../db/d60/group__availability__completion.html">availability_completion</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Activity completion condition.  
 <a href="#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for availability_completion\condition:</div>
<div class="dyncontent">
 <div class="center">
  <img src="../../d5/d72/classavailability__completion_1_1condition.png" usemap="#availability_5Fcompletion_5Ccondition_map" alt=""/>
  <map id="availability_5Fcompletion_5Ccondition_map" name="availability_5Fcompletion_5Ccondition_map">
<area href="../../d0/db0/classcore__availability_1_1condition.html" title="Base class for a single availability condition." alt="core_availability\condition" shape="rect" coords="0,56,194,80"/>
<area href="../../d6/dea/classcore__availability_1_1tree__node.html" title="Node (base class) used to construct a tree of availability conditions." alt="core_availability\tree_node" shape="rect" coords="0,0,194,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a30223c58812ae046b3d2a7a956afa10f" id="r_a30223c58812ae046b3d2a7a956afa10f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a30223c58812ae046b3d2a7a956afa10f">__construct</a> ($structure)</td></tr>
<tr class="memdesc:a30223c58812ae046b3d2a7a956afa10f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <br /></td></tr>
<tr class="separator:a30223c58812ae046b3d2a7a956afa10f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a140d11cbcfc805d9788a40938e7c09c8" id="r_a140d11cbcfc805d9788a40938e7c09c8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/db0/classcore__availability_1_1condition.html#a140d11cbcfc805d9788a40938e7c09c8">__toString</a> ()</td></tr>
<tr class="memdesc:a140d11cbcfc805d9788a40938e7c09c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Display a representation of this condition (used for debugging).  <br /></td></tr>
<tr class="separator:a140d11cbcfc805d9788a40938e7c09c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2662af051b024c24f2cb5515e63f25e5" id="r_a2662af051b024c24f2cb5515e63f25e5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dea/classcore__availability_1_1tree__node.html#a2662af051b024c24f2cb5515e63f25e5">check_available</a> ($not, <a class="el" href="../../d8/d46/classcore__availability_1_1info.html">core_availability\info</a> $<a class="el" href="../../d8/d46/classcore__availability_1_1info.html">info</a>, $grabthelot, $userid)</td></tr>
<tr class="memdesc:a2662af051b024c24f2cb5515e63f25e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines whether this particular item is currently available according to the availability criteria.  <br /></td></tr>
<tr class="separator:a2662af051b024c24f2cb5515e63f25e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adda6cd3f3023cb06427b7680c0d6e2e7" id="r_adda6cd3f3023cb06427b7680c0d6e2e7"><td class="memItemLeft" align="right" valign="top"><a id="adda6cd3f3023cb06427b7680c0d6e2e7" name="adda6cd3f3023cb06427b7680c0d6e2e7"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>check_available</b> ($not, <a class="el" href="../../d8/d46/classcore__availability_1_1info.html">info</a> $<a class="el" href="../../d8/d46/classcore__availability_1_1info.html">info</a>, $grabthelot, $userid)</td></tr>
<tr class="separator:adda6cd3f3023cb06427b7680c0d6e2e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf89db2faea8f16f5275b191e82394a9" id="r_acf89db2faea8f16f5275b191e82394a9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/db0/classcore__availability_1_1condition.html#acf89db2faea8f16f5275b191e82394a9">description_callback</a> (array $params)</td></tr>
<tr class="memdesc:acf89db2faea8f16f5275b191e82394a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a marker indicating that some of the description text should be computed at display time.  <br /></td></tr>
<tr class="separator:acf89db2faea8f16f5275b191e82394a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fdeb23d9151ac36695ee7aa9473cf4f" id="r_a7fdeb23d9151ac36695ee7aa9473cf4f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dea/classcore__availability_1_1tree__node.html#a7fdeb23d9151ac36695ee7aa9473cf4f">filter_user_list</a> (array $users, $not, <a class="el" href="../../d8/d46/classcore__availability_1_1info.html">core_availability\info</a> $<a class="el" href="../../d8/d46/classcore__availability_1_1info.html">info</a>, capability_checker $checker)</td></tr>
<tr class="memdesc:a7fdeb23d9151ac36695ee7aa9473cf4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tests this condition against a user list.  <br /></td></tr>
<tr class="separator:a7fdeb23d9151ac36695ee7aa9473cf4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af40e13d333581c5e2fba688b3035f330" id="r_af40e13d333581c5e2fba688b3035f330"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af40e13d333581c5e2fba688b3035f330">get_cmid</a> (stdClass $course, ?int $selfcmid, ?int $selfsectionid)</td></tr>
<tr class="memdesc:af40e13d333581c5e2fba688b3035f330"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the cmid referenced in the access restriction.  <br /></td></tr>
<tr class="separator:af40e13d333581c5e2fba688b3035f330"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66f4fe8fae788ed15249a536c9867a28" id="r_a66f4fe8fae788ed15249a536c9867a28"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a66f4fe8fae788ed15249a536c9867a28">get_description</a> ($full, $not, <a class="el" href="../../d8/d46/classcore__availability_1_1info.html">info</a> $<a class="el" href="../../d8/d46/classcore__availability_1_1info.html">info</a>)</td></tr>
<tr class="memdesc:a66f4fe8fae788ed15249a536c9867a28"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtains a string describing this restriction (whether or not it actually applies).  <br /></td></tr>
<tr class="separator:a66f4fe8fae788ed15249a536c9867a28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2373a7c91416b3c8c9a9a59416ce3061" id="r_a2373a7c91416b3c8c9a9a59416ce3061"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2373a7c91416b3c8c9a9a59416ce3061">get_selfids</a> (<a class="el" href="../../d8/d46/classcore__availability_1_1info.html">info</a> $<a class="el" href="../../d8/d46/classcore__availability_1_1info.html">info</a>)</td></tr>
<tr class="memdesc:a2373a7c91416b3c8c9a9a59416ce3061"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return current item IDs (cmid and sectionid).  <br /></td></tr>
<tr class="separator:a2373a7c91416b3c8c9a9a59416ce3061"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a044c345cf828c47b22b6816e902bbaa3" id="r_a044c345cf828c47b22b6816e902bbaa3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/db0/classcore__availability_1_1condition.html#a044c345cf828c47b22b6816e902bbaa3">get_standalone_description</a> ($full, $not, <a class="el" href="../../d8/d46/classcore__availability_1_1info.html">info</a> $<a class="el" href="../../d8/d46/classcore__availability_1_1info.html">info</a>)</td></tr>
<tr class="memdesc:a044c345cf828c47b22b6816e902bbaa3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtains a string describing this restriction, used when there is only a single restriction to display.  <br /></td></tr>
<tr class="separator:a044c345cf828c47b22b6816e902bbaa3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcdfd8dc9e493a341d6363917b33f9e3" id="r_afcdfd8dc9e493a341d6363917b33f9e3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dea/classcore__availability_1_1tree__node.html#afcdfd8dc9e493a341d6363917b33f9e3">get_user_list_sql</a> ($not, <a class="el" href="../../d8/d46/classcore__availability_1_1info.html">core_availability\info</a> $<a class="el" href="../../d8/d46/classcore__availability_1_1info.html">info</a>, $onlyactive)</td></tr>
<tr class="memdesc:afcdfd8dc9e493a341d6363917b33f9e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtains SQL that returns a list of enrolled users that has been filtered by the conditions applied in the availability API, similar to calling get_enrolled_users and then filter_user_list.  <br /></td></tr>
<tr class="separator:afcdfd8dc9e493a341d6363917b33f9e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff32aa7bf54d058cada78079b4bdcaa1" id="r_aff32aa7bf54d058cada78079b4bdcaa1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dea/classcore__availability_1_1tree__node.html#aff32aa7bf54d058cada78079b4bdcaa1">include_after_restore</a> ($restoreid, $courseid, <a class="el" href="../../df/d3c/classbase__logger.html">base_logger</a> $logger, $name, <a class="el" href="../../d2/de0/classbase__task.html">base_task</a> $task)</td></tr>
<tr class="memdesc:aff32aa7bf54d058cada78079b4bdcaa1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether this node should be included after restore or not.  <br /></td></tr>
<tr class="separator:aff32aa7bf54d058cada78079b4bdcaa1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1de470bfb2ad7eb00592b5b634832a04" id="r_a1de470bfb2ad7eb00592b5b634832a04"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dea/classcore__availability_1_1tree__node.html#a1de470bfb2ad7eb00592b5b634832a04">is_applied_to_user_lists</a> ()</td></tr>
<tr class="memdesc:a1de470bfb2ad7eb00592b5b634832a04"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether this condition applies to user lists.  <br /></td></tr>
<tr class="separator:a1de470bfb2ad7eb00592b5b634832a04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0250a2427829dd354df026daf6c9b0c0" id="r_a0250a2427829dd354df026daf6c9b0c0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0250a2427829dd354df026daf6c9b0c0">is_available</a> ($not, <a class="el" href="../../d8/d46/classcore__availability_1_1info.html">info</a> $<a class="el" href="../../d8/d46/classcore__availability_1_1info.html">info</a>, $grabthelot, $userid)</td></tr>
<tr class="memdesc:a0250a2427829dd354df026daf6c9b0c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines whether a particular item is currently available according to this availability condition.  <br /></td></tr>
<tr class="separator:a0250a2427829dd354df026daf6c9b0c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73a84059d3818e0fc8f7b8e8c099ae2f" id="r_a73a84059d3818e0fc8f7b8e8c099ae2f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/db0/classcore__availability_1_1condition.html#a73a84059d3818e0fc8f7b8e8c099ae2f">is_available_for_all</a> ($not=false)</td></tr>
<tr class="memdesc:a73a84059d3818e0fc8f7b8e8c099ae2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether this condition is actually going to be available for all users under normal circumstances.  <br /></td></tr>
<tr class="separator:a73a84059d3818e0fc8f7b8e8c099ae2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1add6e51281e30e78e036f947190b30" id="r_aa1add6e51281e30e78e036f947190b30"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa1add6e51281e30e78e036f947190b30">save</a> ()</td></tr>
<tr class="memdesc:aa1add6e51281e30e78e036f947190b30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Saves tree data back to a structure object.  <br /></td></tr>
<tr class="separator:aa1add6e51281e30e78e036f947190b30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d5994d4ee062602a01ca1fb7b9743da" id="r_a2d5994d4ee062602a01ca1fb7b9743da"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2d5994d4ee062602a01ca1fb7b9743da">update_after_restore</a> ($restoreid, $courseid, <a class="el" href="../../df/d3c/classbase__logger.html">base_logger</a> $logger, $name)</td></tr>
<tr class="memdesc:a2d5994d4ee062602a01ca1fb7b9743da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates this node after restore, returning true if anything changed.  <br /></td></tr>
<tr class="separator:a2d5994d4ee062602a01ca1fb7b9743da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa95c662397dcfb9bdac4fe222c3bd758" id="r_aa95c662397dcfb9bdac4fe222c3bd758"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa95c662397dcfb9bdac4fe222c3bd758">update_dependency_id</a> ($table, $oldid, $newid)</td></tr>
<tr class="memdesc:aa95c662397dcfb9bdac4fe222c3bd758"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates this node if it contains any references (dependencies) to the given table and id.  <br /></td></tr>
<tr class="separator:aa95c662397dcfb9bdac4fe222c3bd758"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a236697cefb6a80303df59475cda72363" id="r_a236697cefb6a80303df59475cda72363"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a236697cefb6a80303df59475cda72363">completion_value_used</a> ($course, $cmid)</td></tr>
<tr class="memdesc:a236697cefb6a80303df59475cda72363"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used in course/lib.php because we need to disable the completion JS if a completion value affects a conditional activity.  <br /></td></tr>
<tr class="separator:a236697cefb6a80303df59475cda72363"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e49a808e937a493edb94e471ede7321" id="r_a3e49a808e937a493edb94e471ede7321"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/db0/classcore__availability_1_1condition.html#a3e49a808e937a493edb94e471ede7321">description_cm_name</a> (int $cmid)</td></tr>
<tr class="memdesc:a3e49a808e937a493edb94e471ede7321"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a marker indicating that an activity name should be placed in a description.  <br /></td></tr>
<tr class="separator:a3e49a808e937a493edb94e471ede7321"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cb3a2e6a867f23ef1dc74df1f2181ba" id="r_a2cb3a2e6a867f23ef1dc74df1f2181ba"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/db0/classcore__availability_1_1condition.html#a2cb3a2e6a867f23ef1dc74df1f2181ba">description_format_string</a> (string $str)</td></tr>
<tr class="memdesc:a2cb3a2e6a867f23ef1dc74df1f2181ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a marker indicating that formatted text should be placed in a description.  <br /></td></tr>
<tr class="separator:a2cb3a2e6a867f23ef1dc74df1f2181ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad638704b210441af096c86857089fd46" id="r_ad638704b210441af096c86857089fd46"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad638704b210441af096c86857089fd46">get_json</a> (int $cmid, int $expectedcompletion)</td></tr>
<tr class="memdesc:ad638704b210441af096c86857089fd46"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a JSON object which corresponds to a condition of this type.  <br /></td></tr>
<tr class="separator:ad638704b210441af096c86857089fd46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5ab07cf7168cd143d18767f646c7795" id="r_af5ab07cf7168cd143d18767f646c7795"><td class="memItemLeft" align="right" valign="top"><a id="af5ab07cf7168cd143d18767f646c7795" name="af5ab07cf7168cd143d18767f646c7795"></a>
static&#160;</td><td class="memItemRight" valign="bottom"><b>wipe_static_cache</b> ()</td></tr>
<tr class="memdesc:af5ab07cf7168cd143d18767f646c7795"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wipes the static cache of modules used in a condition (for unit testing). <br /></td></tr>
<tr class="separator:af5ab07cf7168cd143d18767f646c7795"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a16f3a1589bb3932b7d4d0961af092e30" id="r_a16f3a1589bb3932b7d4d0961af092e30"><td class="memItemLeft" align="right" valign="top"><a id="a16f3a1589bb3932b7d4d0961af092e30" name="a16f3a1589bb3932b7d4d0961af092e30"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>OPTION_PREVIOUS</b> = -1</td></tr>
<tr class="memdesc:a16f3a1589bb3932b7d4d0961af092e30"><td class="mdescLeft">&#160;</td><td class="mdescRight">previous module cm value used to calculate relative completions <br /></td></tr>
<tr class="separator:a16f3a1589bb3932b7d4d0961af092e30"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:ae5793846e0ae1080dcc4d0e74f9da05f" id="r_ae5793846e0ae1080dcc4d0e74f9da05f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae5793846e0ae1080dcc4d0e74f9da05f">get_debug_string</a> ()</td></tr>
<tr class="memdesc:ae5793846e0ae1080dcc4d0e74f9da05f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtains a representation of the options of this condition as a string, for debugging.  <br /></td></tr>
<tr class="separator:ae5793846e0ae1080dcc4d0e74f9da05f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f7e136c68697bb88c0d6548b32ab85d" id="r_a5f7e136c68697bb88c0d6548b32ab85d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/db0/classcore__availability_1_1condition.html#a5f7e136c68697bb88c0d6548b32ab85d">get_type</a> ()</td></tr>
<tr class="memdesc:a5f7e136c68697bb88c0d6548b32ab85d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the type name (e.g.  <br /></td></tr>
<tr class="separator:a5f7e136c68697bb88c0d6548b32ab85d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-static-methods" name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr class="memitem:a509deee8a73aa219338a1820c877294e" id="r_a509deee8a73aa219338a1820c877294e"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a509deee8a73aa219338a1820c877294e">get_lang_string_keyword</a> (int $completionstate)</td></tr>
<tr class="memdesc:a509deee8a73aa219338a1820c877294e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a more readable keyword corresponding to a completion state.  <br /></td></tr>
<tr class="separator:a509deee8a73aa219338a1820c877294e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97ba6eab3b91bfddcbf90cd0e31de3bd" id="r_a97ba6eab3b91bfddcbf90cd0e31de3bd"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dea/classcore__availability_1_1tree__node.html#a97ba6eab3b91bfddcbf90cd0e31de3bd">unique_sql_parameter</a> (array &amp;$params, $value)</td></tr>
<tr class="memdesc:a97ba6eab3b91bfddcbf90cd0e31de3bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Utility function for generating SQL parameters (because we can't use ? parameters because get_enrolled_sql has infected us with horrible named parameters).  <br /></td></tr>
<tr class="separator:a97ba6eab3b91bfddcbf90cd0e31de3bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:af89079d3b46dd3bcd393d659c3718132" id="r_af89079d3b46dd3bcd393d659c3718132"><td class="memItemLeft" align="right" valign="top"><a id="af89079d3b46dd3bcd393d659c3718132" name="af89079d3b46dd3bcd393d659c3718132"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>$cmid</b></td></tr>
<tr class="memdesc:af89079d3b46dd3bcd393d659c3718132"><td class="mdescLeft">&#160;</td><td class="mdescRight">ID of module that this depends on. <br /></td></tr>
<tr class="separator:af89079d3b46dd3bcd393d659c3718132"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6b1b50032708e9b4da4f615c63c63f2" id="r_ae6b1b50032708e9b4da4f615c63c63f2"><td class="memItemLeft" align="right" valign="top"><a id="ae6b1b50032708e9b4da4f615c63c63f2" name="ae6b1b50032708e9b4da4f615c63c63f2"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>$expectedcompletion</b></td></tr>
<tr class="memdesc:ae6b1b50032708e9b4da4f615c63c63f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Expected completion type (one of the COMPLETE_xx constants) <br /></td></tr>
<tr class="separator:ae6b1b50032708e9b4da4f615c63c63f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0595ffae1d74d318dfa7ad6c781029c" id="r_ae0595ffae1d74d318dfa7ad6c781029c"><td class="memItemLeft" align="right" valign="top"><a id="ae0595ffae1d74d318dfa7ad6c781029c" name="ae0595ffae1d74d318dfa7ad6c781029c"></a>
array&#160;</td><td class="memItemRight" valign="bottom"><b>$modfastprevious</b> = []</td></tr>
<tr class="memdesc:ae0595ffae1d74d318dfa7ad6c781029c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Array of previous cmids used to calculate relative completions. <br /></td></tr>
<tr class="separator:ae0595ffae1d74d318dfa7ad6c781029c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6562ea980863d58808f0348324d870bd" id="r_a6562ea980863d58808f0348324d870bd"><td class="memItemLeft" align="right" valign="top"><a id="a6562ea980863d58808f0348324d870bd" name="a6562ea980863d58808f0348324d870bd"></a>
array&#160;</td><td class="memItemRight" valign="bottom"><b>$sectionfastprevious</b> = []</td></tr>
<tr class="memdesc:a6562ea980863d58808f0348324d870bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Array of cmids previous to each course section. <br /></td></tr>
<tr class="separator:a6562ea980863d58808f0348324d870bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a257ece3dbf072137840f9774d04d81e9" id="r_a257ece3dbf072137840f9774d04d81e9"><td class="memItemLeft" align="right" valign="top"><a id="a257ece3dbf072137840f9774d04d81e9" name="a257ece3dbf072137840f9774d04d81e9"></a>
array&#160;</td><td class="memItemRight" valign="bottom"><b>$selfids</b></td></tr>
<tr class="memdesc:a257ece3dbf072137840f9774d04d81e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">IDs of the current module and section. <br /></td></tr>
<tr class="separator:a257ece3dbf072137840f9774d04d81e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-static-attribs" name="pro-static-attribs"></a>
Static Protected Attributes</h2></td></tr>
<tr class="memitem:aed3420018f7507e73a421d70d7ff9c42" id="r_aed3420018f7507e73a421d70d7ff9c42"><td class="memItemLeft" align="right" valign="top"><a id="aed3420018f7507e73a421d70d7ff9c42" name="aed3420018f7507e73a421d70d7ff9c42"></a>
static array&#160;</td><td class="memItemRight" valign="bottom"><b>$modsusedincondition</b> = []</td></tr>
<tr class="memdesc:aed3420018f7507e73a421d70d7ff9c42"><td class="mdescLeft">&#160;</td><td class="mdescRight">Array of modules used in these conditions for course. <br /></td></tr>
<tr class="separator:aed3420018f7507e73a421d70d7ff9c42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4a32aa826eb99dad0d837e8ba681372" id="r_ad4a32aa826eb99dad0d837e8ba681372"><td class="memItemLeft" align="right" valign="top"><a id="ad4a32aa826eb99dad0d837e8ba681372" name="ad4a32aa826eb99dad0d837e8ba681372"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>$uniquesqlparametercounter</b> = 1</td></tr>
<tr class="memdesc:ad4a32aa826eb99dad0d837e8ba681372"><td class="mdescLeft">&#160;</td><td class="mdescRight">Counter to be used in <a class="el" href="">tree_node::unique_sql_parameter()</a>. <br /></td></tr>
<tr class="separator:ad4a32aa826eb99dad0d837e8ba681372"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Activity completion condition. </p>
<dl class="section copyright"><dt>Copyright</dt><dd>2014 The Open University </dd></dl>
<dl class="section user"><dt>License</dt><dd><a href="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a30223c58812ae046b3d2a7a956afa10f" name="a30223c58812ae046b3d2a7a956afa10f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30223c58812ae046b3d2a7a956afa10f">&#9670;&#160;</a></span>__construct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">availability_completion\condition::__construct </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$structure</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$structure</td><td>Data structure from JSON decode </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../da/d34/classcoding__exception.html" title="Exception indicating programming error, must be fixed by a programer.">coding_exception</a></td><td>If invalid data structure. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a140d11cbcfc805d9788a40938e7c09c8" name="a140d11cbcfc805d9788a40938e7c09c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a140d11cbcfc805d9788a40938e7c09c8">&#9670;&#160;</a></span>__toString()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_availability\condition::__toString </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Display a representation of this condition (used for debugging). </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td><a class="el" href="../../da/d0e/class_text.html">Text</a> representation of condition </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2662af051b024c24f2cb5515e63f25e5" name="a2662af051b024c24f2cb5515e63f25e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2662af051b024c24f2cb5515e63f25e5">&#9670;&#160;</a></span>check_available()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_availability\tree_node::check_available </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$not</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/d46/classcore__availability_1_1info.html">core_availability\info</a></td>          <td class="paramname"><span class="paramname"><em>$info</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$grabthelot</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$userid</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">abstract</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determines whether this particular item is currently available according to the availability criteria. </p>
<ul>
<li>This does not include the 'visible' setting (i.e. this might return true even if visible is false); visible is handled independently.</li>
<li>This does not take account of the viewhiddenactivities capability. That should apply later.</li>
</ul>
<p>The $not option is potentially confusing. This option always indicates the 'real' value of NOT. For example, a condition inside a 'NOT AND' group will get this called with $not = true, but if you put another 'NOT OR' group inside the first group, then a condition inside that will be called with $not = false. We need to use the real values, rather than the more natural use of the current value at this point inside the tree, so that the information displayed to users makes sense.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">bool</td><td class="paramname">$not</td><td>Set true if we are inverting the condition </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../d8/d46/classcore__availability_1_1info.html" title="Base class for conditional availability information (for module or section).">core_availability::info</a></td><td class="paramname">$info</td><td><a class="el" href="../../dc/d32/class_item.html" title="Manages all item-related data.">Item</a> we're checking </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$grabthelot</td><td>Performance hint: if true, caches information required for all course-modules, to make the front page and similar pages work more quickly (works only for current user) </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td>User ID to check availability for </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">result</td><td>Availability check result </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a236697cefb6a80303df59475cda72363" name="a236697cefb6a80303df59475cda72363"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a236697cefb6a80303df59475cda72363">&#9670;&#160;</a></span>completion_value_used()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static availability_completion\condition::completion_value_used </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$course</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$cmid</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Used in course/lib.php because we need to disable the completion JS if a completion value affects a conditional activity. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$course</td><td><a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> course object </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$cmid</td><td>Course-module id </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>True if this is used in a condition, false otherwise </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../d0/db0/classcore__availability_1_1condition.html#a7deeab1ac0eff3ceb2e0f640e340ce63">core_availability\condition</a>.</p>

</div>
</div>
<a id="acf89db2faea8f16f5275b191e82394a9" name="acf89db2faea8f16f5275b191e82394a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf89db2faea8f16f5275b191e82394a9">&#9670;&#160;</a></span>description_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_availability\condition::description_callback </td>
          <td>(</td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$params</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a marker indicating that some of the description text should be computed at display time. </p>
<p>This will result in a call to the get_description_callback_value static function within the condition class.</p>
<p>Gets placeholder text which will be decoded by info::format_info later when we can safely call most <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> functions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string[]</td><td class="paramname">$params</td><td>Array of arbitrary parameters </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>Placeholder text </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd><a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 4.0 </dd></dl>

</div>
</div>
<a id="a3e49a808e937a493edb94e471ede7321" name="a3e49a808e937a493edb94e471ede7321"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e49a808e937a493edb94e471ede7321">&#9670;&#160;</a></span>description_cm_name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_availability\condition::description_cm_name </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$cmid</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a marker indicating that an activity name should be placed in a description. </p>
<p>Gets placeholder text which will be decoded by info::format_info later when we can safely display names.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$cmid</td><td>Course-module id </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>Placeholder text </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd><a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 4.0 </dd></dl>

</div>
</div>
<a id="a2cb3a2e6a867f23ef1dc74df1f2181ba" name="a2cb3a2e6a867f23ef1dc74df1f2181ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cb3a2e6a867f23ef1dc74df1f2181ba">&#9670;&#160;</a></span>description_format_string()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_availability\condition::description_format_string </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$str</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a marker indicating that formatted text should be placed in a description. </p>
<p>Gets placeholder text which will be decoded by info::format_info later when we can safely call format_string.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$str</td><td><a class="el" href="../../da/d0e/class_text.html">Text</a> to be processed with format_string </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>Placeholder text </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd><a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 4.0 </dd></dl>

</div>
</div>
<a id="a7fdeb23d9151ac36695ee7aa9473cf4f" name="a7fdeb23d9151ac36695ee7aa9473cf4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fdeb23d9151ac36695ee7aa9473cf4f">&#9670;&#160;</a></span>filter_user_list()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_availability\tree_node::filter_user_list </td>
          <td>(</td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$users</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$not</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/d46/classcore__availability_1_1info.html">core_availability\info</a></td>          <td class="paramname"><span class="paramname"><em>$info</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d23/classcore__availability_1_1capability__checker.html">capability_checker</a></td>          <td class="paramname"><span class="paramname"><em>$checker</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tests this condition against a user list. </p>
<p>Users who do not meet the condition will be removed from the list, unless they have the ability to view hidden activities/sections.</p>
<p>This function must be implemented if is_applied_to_user_lists returns true. Otherwise it will not be called.</p>
<p>The function must operate efficiently, e.g. by using a fixed number of database queries regardless of how many users are in the list.</p>
<p>Within this function, if you need to check capabilities, please use the provided checker which caches results where possible.</p>
<p>Conditions do not need to check the viewhiddenactivities or viewhiddensections capabilities. These are handled by <a class="el" href="../../d8/d46/classcore__availability_1_1info.html#aafc49a6e08c01d79cdbaf31f98fd9cd7" title="Tests against a user list.">core_availability::info::filter_user_list</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$users</td><td>Array of userid =&gt; object </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$not</td><td>True if this condition is applying in negative mode </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../d8/d46/classcore__availability_1_1info.html" title="Base class for conditional availability information (for module or section).">core_availability::info</a></td><td class="paramname">$info</td><td><a class="el" href="../../dc/d32/class_item.html" title="Manages all item-related data.">Item</a> we're checking </td></tr>
    <tr><td class="paramtype">capability_checker</td><td class="paramname">$checker</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>Filtered version of input array </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../da/d34/classcoding__exception.html" title="Exception indicating programming error, must be fixed by a programer.">coding_exception</a></td><td>If called on a condition that doesn't apply to user lists </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af40e13d333581c5e2fba688b3035f330" name="af40e13d333581c5e2fba688b3035f330"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af40e13d333581c5e2fba688b3035f330">&#9670;&#160;</a></span>get_cmid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">availability_completion\condition::get_cmid </td>
          <td>(</td>
          <td class="paramtype">stdClass</td>          <td class="paramname"><span class="paramname"><em>$course</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?int</td>          <td class="paramname"><span class="paramname"><em>$selfcmid</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?int</td>          <td class="paramname"><span class="paramname"><em>$selfsectionid</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the cmid referenced in the access restriction. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$course</td><td>course object </td></tr>
    <tr><td class="paramtype">int&#160;|&#160;null</td><td class="paramname">$selfcmid</td><td>current course-module ID or null </td></tr>
    <tr><td class="paramtype">int&#160;|&#160;null</td><td class="paramname">$selfsectionid</td><td>current course-section ID or null </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int|null</td><td>cmid or null if no referenced cm is found </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae5793846e0ae1080dcc4d0e74f9da05f" name="ae5793846e0ae1080dcc4d0e74f9da05f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5793846e0ae1080dcc4d0e74f9da05f">&#9670;&#160;</a></span>get_debug_string()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">availability_completion\condition::get_debug_string </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Obtains a representation of the options of this condition as a string, for debugging. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td><a class="el" href="../../da/d0e/class_text.html">Text</a> representation of parameters </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../d0/db0/classcore__availability_1_1condition.html#aa1c1e8cae48e5d0f5ab76d11bcbecce7">core_availability\condition</a>.</p>

</div>
</div>
<a id="a66f4fe8fae788ed15249a536c9867a28" name="a66f4fe8fae788ed15249a536c9867a28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66f4fe8fae788ed15249a536c9867a28">&#9670;&#160;</a></span>get_description()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">availability_completion\condition::get_description </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$full</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$not</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/d46/classcore__availability_1_1info.html">info</a></td>          <td class="paramname"><span class="paramname"><em>$info</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtains a string describing this restriction (whether or not it actually applies). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">bool</td><td class="paramname">$full</td><td>Set true if this is the 'full information' view </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$not</td><td>Set true if we are inverting the condition </td></tr>
    <tr><td class="paramtype">info</td><td class="paramname">$info</td><td><a class="el" href="../../dc/d32/class_item.html" title="Manages all item-related data.">Item</a> we're checking </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>Information string (for admin) about all restrictions on this item </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../d0/db0/classcore__availability_1_1condition.html#aaa7ba7bd985a6f44082f6572e477d22d">core_availability\condition</a>.</p>

</div>
</div>
<a id="ad638704b210441af096c86857089fd46" name="ad638704b210441af096c86857089fd46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad638704b210441af096c86857089fd46">&#9670;&#160;</a></span>get_json()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static availability_completion\condition::get_json </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$cmid</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$expectedcompletion</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a JSON object which corresponds to a condition of this type. </p>
<p>Intended for unit testing, as normally the JSON values are constructed by JavaScript code.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$cmid</td><td>Course-module id of other activity </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$expectedcompletion</td><td>Expected completion value (COMPLETION_xx) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass</td><td>Object representing condition </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a509deee8a73aa219338a1820c877294e" name="a509deee8a73aa219338a1820c877294e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a509deee8a73aa219338a1820c877294e">&#9670;&#160;</a></span>get_lang_string_keyword()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static availability_completion\condition::get_lang_string_keyword </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$completionstate</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a more readable keyword corresponding to a completion state. </p>
<p>Used to make lang strings easier to read.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$completionstate</td><td>COMPLETION_xx constant </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>Readable keyword </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2373a7c91416b3c8c9a9a59416ce3061" name="a2373a7c91416b3c8c9a9a59416ce3061"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2373a7c91416b3c8c9a9a59416ce3061">&#9670;&#160;</a></span>get_selfids()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">availability_completion\condition::get_selfids </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d46/classcore__availability_1_1info.html">info</a></td>          <td class="paramname"><span class="paramname"><em>$info</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return current item IDs (cmid and sectionid). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">info</td><td class="paramname">$info</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int[]</td><td>with [0] =&gt; cmid/null, [1] =&gt; sectionid/null </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a044c345cf828c47b22b6816e902bbaa3" name="a044c345cf828c47b22b6816e902bbaa3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a044c345cf828c47b22b6816e902bbaa3">&#9670;&#160;</a></span>get_standalone_description()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_availability\condition::get_standalone_description </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$full</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$not</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/d46/classcore__availability_1_1info.html">info</a></td>          <td class="paramname"><span class="paramname"><em>$info</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Obtains a string describing this restriction, used when there is only a single restriction to display. </p>
<p>(I.e. this provides a 'short form' rather than showing in a list.)</p>
<p>Default behaviour sticks the prefix text, normally displayed above the list, in front of the standard get_description call.</p>
<p>If implementations require a course or modinfo, they should use the get methods in $info. They should not use any other functions that might rely on modinfo, such as format_string.</p>
<p>To work around this limitation, use the functions:</p>
<p>description_cm_name() description_format_string() description_callback()</p>
<p>These return special markers which will be added to the string and processed later after modinfo is complete.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">bool</td><td class="paramname">$full</td><td>Set true if this is the 'full information' view </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$not</td><td>Set true if we are inverting the condition </td></tr>
    <tr><td class="paramtype">info</td><td class="paramname">$info</td><td><a class="el" href="../../dc/d32/class_item.html" title="Manages all item-related data.">Item</a> we're checking </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>Information string (for admin) about all restrictions on this item </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../db/dab/classavailability__date_1_1condition.html#a455bf35ba4def74eb3aac74d22e5469d">availability_date\condition</a>.</p>

</div>
</div>
<a id="a5f7e136c68697bb88c0d6548b32ab85d" name="a5f7e136c68697bb88c0d6548b32ab85d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f7e136c68697bb88c0d6548b32ab85d">&#9670;&#160;</a></span>get_type()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_availability\condition::get_type </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the type name (e.g. </p>
<p>'date' for <a class="el" href="../../dd/d27/namespaceavailability__date.html" title="&#160;">availability_date</a>) of plugin.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>The type name for this plugin </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afcdfd8dc9e493a341d6363917b33f9e3" name="afcdfd8dc9e493a341d6363917b33f9e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcdfd8dc9e493a341d6363917b33f9e3">&#9670;&#160;</a></span>get_user_list_sql()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_availability\tree_node::get_user_list_sql </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$not</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/d46/classcore__availability_1_1info.html">core_availability\info</a></td>          <td class="paramname"><span class="paramname"><em>$info</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$onlyactive</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Obtains SQL that returns a list of enrolled users that has been filtered by the conditions applied in the availability API, similar to calling get_enrolled_users and then filter_user_list. </p>
<p>As for filter_user_list, this ONLY filters out users with conditions that are marked as applying to user lists. For example, group conditions are included but date conditions are not included.</p>
<p>The returned SQL is a query that returns a list of user IDs. It does not include brackets, so you neeed to add these to make it into a subquery. You would normally use it in an SQL phrase like "WHERE u.id IN ($sql)".</p>
<p>The SQL will be complex and may be slow. It uses named parameters (sorry, I know they are annoying, but it was unavoidable here).</p>
<p>If there are no conditions, the returned result is array('', array()).</p>
<p>Conditions do not need to check the viewhiddenactivities or viewhiddensections capabilities. These are handled by <a class="el" href="../../d8/d46/classcore__availability_1_1info.html#ad4b70f9f65e41467111c0d5e14984001" title="Obtains SQL that returns a list of enrolled users that has been filtered by the conditions applied in...">core_availability::info::get_user_list_sql</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">bool</td><td class="paramname">$not</td><td>True if this condition is applying in negative mode </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../d8/d46/classcore__availability_1_1info.html" title="Base class for conditional availability information (for module or section).">core_availability::info</a></td><td class="paramname">$info</td><td><a class="el" href="../../dc/d32/class_item.html" title="Manages all item-related data.">Item</a> we're checking </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$onlyactive</td><td>If true, only returns active enrolments </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>Array with two elements: SQL subquery and parameters array </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../da/d34/classcoding__exception.html" title="Exception indicating programming error, must be fixed by a programer.">coding_exception</a></td><td>If called on a condition that doesn't apply to user lists </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aff32aa7bf54d058cada78079b4bdcaa1" name="aff32aa7bf54d058cada78079b4bdcaa1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff32aa7bf54d058cada78079b4bdcaa1">&#9670;&#160;</a></span>include_after_restore()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_availability\tree_node::include_after_restore </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$restoreid</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$courseid</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/d3c/classbase__logger.html">base_logger</a></td>          <td class="paramname"><span class="paramname"><em>$logger</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$name</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/de0/classbase__task.html">base_task</a></td>          <td class="paramname"><span class="paramname"><em>$task</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks whether this node should be included after restore or not. </p>
<p>The node may be removed depending on restore settings, which you can get from the $task object.</p>
<p>By default nodes are still included after restore.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$restoreid</td><td>Restore ID </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$courseid</td><td>ID of target course </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../df/d3c/classbase__logger.html" title="Base abstract class for all the loggers to be used in backup/restore.">base_logger</a></td><td class="paramname">$logger</td><td>Logger for any warnings </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$name</td><td>Name of this item (for use in warning messages) </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../d2/de0/classbase__task.html" title="Abstract class defining the basis for one execution (backup/restore) task.">base_task</a></td><td class="paramname">$task</td><td>Current restore task </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>True if there was any change </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../dc/d3d/classavailability__group_1_1condition.html#af53ad13a6f150935676b5c56da1de374">availability_group\condition</a>, and <a class="el" href="../../d1/d5e/classavailability__grouping_1_1condition.html#a41973ff4d46016b0059bf813f43ef7f3">availability_grouping\condition</a>.</p>

</div>
</div>
<a id="a1de470bfb2ad7eb00592b5b634832a04" name="a1de470bfb2ad7eb00592b5b634832a04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1de470bfb2ad7eb00592b5b634832a04">&#9670;&#160;</a></span>is_applied_to_user_lists()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_availability\tree_node::is_applied_to_user_lists </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks whether this condition applies to user lists. </p>
<p>The default is false (the condition is used to control access, but does not prevent the student from appearing in lists).</p>
<p>For example, group conditions apply to user lists: we do not want to include a student in a list of users if they are prohibited from accessing the activity because they don't belong to a relevant group. However, date conditions do not apply - we still want to show users in a list of people who might have submitted an assignment, even if they are no longer able to access the assignment in question because there is a date restriction.</p>
<p>The general idea is that conditions which are likely to be permanent (group membership, user profile) apply to user lists. Conditions which are likely to be temporary (date, grade requirement) do not.</p>
<p>Conditions which do apply to user lists must implement the filter_user_list function.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>True if this condition applies to user lists </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../dc/dca/classcore__availability_1_1tree.html#a3623e6351497272e2a670a056b084103">core_availability\tree</a>, <a class="el" href="../../dc/d3d/classavailability__group_1_1condition.html#a3e2c4262d916c99dfa83b2c5052a1ab5">availability_group\condition</a>, <a class="el" href="../../d1/d5e/classavailability__grouping_1_1condition.html#a84bcabd1dec8c9807e009a348f08df5c">availability_grouping\condition</a>, and <a class="el" href="../../db/d6f/classavailability__profile_1_1condition.html#a07da09212dcb5d80077695b66112acc7">availability_profile\condition</a>.</p>

</div>
</div>
<a id="a0250a2427829dd354df026daf6c9b0c0" name="a0250a2427829dd354df026daf6c9b0c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0250a2427829dd354df026daf6c9b0c0">&#9670;&#160;</a></span>is_available()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">availability_completion\condition::is_available </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$not</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/d46/classcore__availability_1_1info.html">info</a></td>          <td class="paramname"><span class="paramname"><em>$info</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$grabthelot</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$userid</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determines whether a particular item is currently available according to this availability condition. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d6/dea/classcore__availability_1_1tree__node.html#af4e962c24efe4e703dd66ae5c548db0d" title="Updates this node after restore, returning true if anything changed.">core_availability::tree_node::update_after_restore</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">bool</td><td class="paramname">$not</td><td>Set true if we are inverting the condition </td></tr>
    <tr><td class="paramtype">info</td><td class="paramname">$info</td><td><a class="el" href="../../dc/d32/class_item.html" title="Manages all item-related data.">Item</a> we're checking </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$grabthelot</td><td>Performance hint: if true, caches information required for all course-modules, to make the front page and similar pages work more quickly (works only for current user) </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td>User ID to check availability for </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>True if available </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../d0/db0/classcore__availability_1_1condition.html#a97504231c2753f36df626518b0b85151">core_availability\condition</a>.</p>

</div>
</div>
<a id="a73a84059d3818e0fc8f7b8e8c099ae2f" name="a73a84059d3818e0fc8f7b8e8c099ae2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73a84059d3818e0fc8f7b8e8c099ae2f">&#9670;&#160;</a></span>is_available_for_all()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_availability\condition::is_available_for_all </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$not</em><span class="paramdefsep"> = </span><span class="paramdefval">false</span></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks whether this condition is actually going to be available for all users under normal circumstances. </p>
<p>Normally, if there are any conditions, then it may be hidden. However in the case of date conditions there are some conditions which will definitely not result in it being hidden for anyone.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">bool</td><td class="paramname">$not</td><td>Set true if we are inverting the condition </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>True if condition will return available for everyone </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../d6/dea/classcore__availability_1_1tree__node.html#ac14507c8a62880b2e0cca944c5a5c739">core_availability\tree_node</a>.</p>

<p>Reimplemented in <a class="el" href="../../db/dab/classavailability__date_1_1condition.html#a6d7efdf3b0d4e3d1666bec9075553333">availability_date\condition</a>.</p>

</div>
</div>
<a id="aa1add6e51281e30e78e036f947190b30" name="aa1add6e51281e30e78e036f947190b30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1add6e51281e30e78e036f947190b30">&#9670;&#160;</a></span>save()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">availability_completion\condition::save </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Saves tree data back to a structure object. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass</td><td>Structure object (ready to be made into JSON format) </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../d6/dea/classcore__availability_1_1tree__node.html#a3a56b6c220513de3d79c84e639b546da">core_availability\tree_node</a>.</p>

</div>
</div>
<a id="a97ba6eab3b91bfddcbf90cd0e31de3bd" name="a97ba6eab3b91bfddcbf90cd0e31de3bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97ba6eab3b91bfddcbf90cd0e31de3bd">&#9670;&#160;</a></span>unique_sql_parameter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_availability\tree_node::unique_sql_parameter </td>
          <td>(</td>
          <td class="paramtype">array &amp;</td>          <td class="paramname"><span class="paramname"><em>$params</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$value</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Utility function for generating SQL parameters (because we can't use ? parameters because get_enrolled_sql has infected us with horrible named parameters). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$params</td><td>Params array (value will be added to this array) </td></tr>
    <tr><td class="paramtype">string&#160;|&#160;int</td><td class="paramname">$value</td><td>Value </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">SQL</td><td>code for the parameter, e.g. ':pr1234' </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2d5994d4ee062602a01ca1fb7b9743da" name="a2d5994d4ee062602a01ca1fb7b9743da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d5994d4ee062602a01ca1fb7b9743da">&#9670;&#160;</a></span>update_after_restore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">availability_completion\condition::update_after_restore </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$restoreid</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$courseid</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/d3c/classbase__logger.html">base_logger</a></td>          <td class="paramname"><span class="paramname"><em>$logger</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$name</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates this node after restore, returning true if anything changed. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d6/dea/classcore__availability_1_1tree__node.html#af4e962c24efe4e703dd66ae5c548db0d" title="Updates this node after restore, returning true if anything changed.">core_availability::tree_node::update_after_restore</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$restoreid</td><td>Restore ID </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$courseid</td><td>ID of target course </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../df/d3c/classbase__logger.html" title="Base abstract class for all the loggers to be used in backup/restore.">base_logger</a></td><td class="paramname">$logger</td><td>Logger for any warnings </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$name</td><td>Name of this item (for use in warning messages) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>True if there was any change </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../d6/dea/classcore__availability_1_1tree__node.html#af4e962c24efe4e703dd66ae5c548db0d">core_availability\tree_node</a>.</p>

</div>
</div>
<a id="aa95c662397dcfb9bdac4fe222c3bd758" name="aa95c662397dcfb9bdac4fe222c3bd758"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa95c662397dcfb9bdac4fe222c3bd758">&#9670;&#160;</a></span>update_dependency_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">availability_completion\condition::update_dependency_id </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$table</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$oldid</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$newid</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates this node if it contains any references (dependencies) to the given table and id. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$table</td><td>Table name e.g. 'course_modules' </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$oldid</td><td>Previous ID </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$newid</td><td>New ID </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>True if it changed, otherwise false </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../d0/db0/classcore__availability_1_1condition.html#a6696c28f7f92866fe735b2c319c27233">core_availability\condition</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>availability/condition/completion/classes/<b>condition.php</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Mar 10 2024 02:30:32 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
