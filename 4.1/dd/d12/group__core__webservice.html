<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: core_webservice</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;4.1</span>
   </div>
   <div id="projectbrief">Moodle 4.1.9+ (Build: 20240322) (17ed404ccc1)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">core_webservice</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="namespaces" name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:d7/d45/namespacecore__webservice" id="r_d7/d45/namespacecore__webservice"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d45/namespacecore__webservice.html">core_webservice</a></td></tr>
<tr class="memdesc:d7/d45/namespacecore__webservice"><td class="mdescLeft">&#160;</td><td class="mdescRight">&#160; <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:dd/dcf/namespacecore__webservice_1_1privacy" id="r_dd/dcf/namespacecore__webservice_1_1privacy"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dcf/namespacecore__webservice_1_1privacy.html">core_webservice\privacy</a></td></tr>
<tr class="memdesc:dd/dcf/namespacecore__webservice_1_1privacy"><td class="mdescLeft">&#160;</td><td class="mdescRight">&#160; <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8e/classbehat__core__webservice__generator.html">behat_core_webservice_generator</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d46/classcore__course__create__categories__testclient__form.html">core_course_create_categories_testclient_form</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Form class for create_categories() web service function test.  <a href="../../d8/d46/classcore__course__create__categories__testclient__form.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d1d/classcore__course__delete__categories__testclient__form.html">core_course_delete_categories_testclient_form</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Form class for delete_categories() web service function test.  <a href="../../dd/d1d/classcore__course__delete__categories__testclient__form.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8c/classcore__course__update__categories__testclient__form.html">core_course_update_categories_testclient_form</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Form class for create_categories() web service function test.  <a href="../../df/d8c/classcore__course__update__categories__testclient__form.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/db0/classcore__external.html">core_external</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d74/classcore__fetch__notifications__testclient__form.html">core_fetch_notifications_testclient_form</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test class for WS function core_fetch_notifications.  <a href="../../d0/d74/classcore__fetch__notifications__testclient__form.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db4/classcore__get__string__testclient__form.html">core_get_string_testclient_form</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test class for WS function core_get_string.  <a href="../../df/db4/classcore__get__string__testclient__form.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/da8/classcore__webservice_1_1privacy_1_1provider.html">core_webservice\privacy\provider</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Data provider class.  <a href="../../d7/da8/classcore__webservice_1_1privacy_1_1provider.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d8e/classcore__webservice_1_1token__filter.html">core_webservice\token_filter</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Form allowing to filter displayed tokens.  <a href="../../db/d8e/classcore__webservice_1_1token__filter.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d38/classcore__webservice_1_1token__form.html">core_webservice\token_form</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Form to create and edit a web service token.  <a href="../../df/d38/classcore__webservice_1_1token__form.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d08/classcore__webservice_1_1token__table.html">core_webservice\token_table</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Class for the displaying the participants table.  <a href="../../d1/d08/classcore__webservice_1_1token__table.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/de7/classcore__webservice__external.html">core_webservice_external</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d06/classcore__webservice__generator.html">core_webservice_generator</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d23/classcore__webservice__get__site__info__testclient__form.html">core_webservice_get_site_info_testclient_form</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test class for WS function get_site_info.  <a href="../../dd/d23/classcore__webservice__get__site__info__testclient__form.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d37/classcore__webservice__renderer.html">core_webservice_renderer</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d0e/classexternal__api.html">external_api</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Base class for external api methods.  <a href="../../d9/d0e/classexternal__api.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9e/classexternal__description.html">external_description</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Common ancestor of all parameter description classes.  <a href="../../d5/d9e/classexternal__description.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dad/classexternal__files.html">external_files</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">External structure representing a set of files.  <a href="../../d4/dad/classexternal__files.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d45/classexternal__format__value.html">external_format_value</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A pre-filled <a class="el" href="../../dd/d2e/classexternal__value.html" title="Scalar value description class.">external_value</a> class for text format.  <a href="../../d8/d45/classexternal__format__value.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d9c/classexternal__function__parameters.html">external_function_parameters</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Description of top level - PHP function parameters.  <a href="../../d6/d9c/classexternal__function__parameters.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dd8/classexternal__multiple__structure.html">external_multiple_structure</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bulk array description class.  <a href="../../de/dd8/classexternal__multiple__structure.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dd8/classexternal__settings.html">external_settings</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Singleton to handle the external settings.  <a href="../../d7/dd8/classexternal__settings.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d12/classexternal__single__structure.html">external_single_structure</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Associative array description class.  <a href="../../d6/d12/classexternal__single__structure.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d38/classexternal__util.html">external_util</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Utility functions for the external API.  <a href="../../d9/d38/classexternal__util.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d2e/classexternal__value.html">external_value</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scalar value description class.  <a href="../../dd/d2e/classexternal__value.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d06/classexternal__warnings.html">external_warnings</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Standard <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> web service warnings.  <a href="../../d7/d06/classexternal__warnings.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d9a/classexternallib__advanced__testcase.html">externallib_advanced_testcase</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper base class for external tests.  <a href="../../d3/d9a/classexternallib__advanced__testcase.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dc7/classrestricted__context__exception.html">restricted_context_exception</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="../../df/d70/class_exception.html">Exception</a> indicating user is not allowed to use external function in the current context.  <a href="../../dd/dc7/classrestricted__context__exception.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbc/classwebservice.html">webservice</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">General web service library.  <a href="../../db/dbc/classwebservice.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d19/classwebservice__access__exception.html">webservice_access_exception</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="../../df/d70/class_exception.html">Exception</a> indicating access control problem in web service call This exception should return general errors about web service setup.  <a href="../../d2/d19/classwebservice__access__exception.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dc3/classwebservice__server.html">webservice_server</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Abstract web service base class.  <a href="../../dd/dc3/classwebservice__server.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">interface &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d75/interfacewebservice__server__interface.html">webservice_server_interface</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mandatory interface for all web service protocol classes.  <a href="../../dd/d75/interfacewebservice__server__interface.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/de9/classwebservice__test__client__base__form.html">webservice_test_client_base_form</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d1e/classwebservice__test__client__form.html">webservice_test_client_form</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">interface &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d01/interfacewebservice__test__client__interface.html">webservice_test_client_interface</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mandatory interface for all test client classes.  <a href="../../da/d01/interfacewebservice__test__client__interface.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga50b4feca2c635678c51583d9e81d120c" id="r_ga50b4feca2c635678c51583d9e81d120c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga50b4feca2c635678c51583d9e81d120c">webservice_server::__construct</a> ($authmethod)</td></tr>
<tr class="memdesc:ga50b4feca2c635678c51583d9e81d120c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <br /></td></tr>
<tr class="separator:ga50b4feca2c635678c51583d9e81d120c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae1359baeb19f9c5565ade71c1fc6df99" id="r_gae1359baeb19f9c5565ade71c1fc6df99"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae1359baeb19f9c5565ade71c1fc6df99">webservice_access_exception::__construct</a> ($debuginfo)</td></tr>
<tr class="memdesc:gae1359baeb19f9c5565ade71c1fc6df99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <br /></td></tr>
<tr class="separator:gae1359baeb19f9c5565ade71c1fc6df99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga480899c7dc9f88b1362a981e8b2119d1" id="r_ga480899c7dc9f88b1362a981e8b2119d1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga480899c7dc9f88b1362a981e8b2119d1">webservice::add_external_function_to_service</a> ($functionname, $serviceid)</td></tr>
<tr class="memdesc:ga480899c7dc9f88b1362a981e8b2119d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a function to a service.  <br /></td></tr>
<tr class="separator:ga480899c7dc9f88b1362a981e8b2119d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga614cded97e9ff9f71dff55dc53771acc" id="r_ga614cded97e9ff9f71dff55dc53771acc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga614cded97e9ff9f71dff55dc53771acc">webservice::add_external_service</a> ($service)</td></tr>
<tr class="memdesc:ga614cded97e9ff9f71dff55dc53771acc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a service It generates the timecreated field automatically.  <br /></td></tr>
<tr class="separator:ga614cded97e9ff9f71dff55dc53771acc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga746c56ab1dc843d3e2e5914995779aae" id="r_ga746c56ab1dc843d3e2e5914995779aae"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga746c56ab1dc843d3e2e5914995779aae">webservice::add_ws_authorised_user</a> ($user)</td></tr>
<tr class="memdesc:ga746c56ab1dc843d3e2e5914995779aae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allow user to call a service.  <br /></td></tr>
<tr class="separator:ga746c56ab1dc843d3e2e5914995779aae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac5a7eed48dad6983a5079678f6db9ac2" id="r_gac5a7eed48dad6983a5079678f6db9ac2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gac5a7eed48dad6983a5079678f6db9ac2">webservice_server::authenticate_by_token</a> ($tokentype)</td></tr>
<tr class="memdesc:gac5a7eed48dad6983a5079678f6db9ac2"><td class="mdescLeft">&#160;</td><td class="mdescRight">User authentication by token.  <br /></td></tr>
<tr class="separator:gac5a7eed48dad6983a5079678f6db9ac2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacc66590382a3439c9158388b6b71ce59" id="r_gacc66590382a3439c9158388b6b71ce59"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gacc66590382a3439c9158388b6b71ce59">webservice::authenticate_user</a> ($token)</td></tr>
<tr class="memdesc:gacc66590382a3439c9158388b6b71ce59"><td class="mdescLeft">&#160;</td><td class="mdescRight">Authenticate user (used by download/upload file scripts)  <br /></td></tr>
<tr class="separator:gacc66590382a3439c9158388b6b71ce59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4a4ac055b6fd8bbef4d8fce6372c33b1" id="r_ga4a4ac055b6fd8bbef4d8fce6372c33b1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga4a4ac055b6fd8bbef4d8fce6372c33b1">webservice_server::authenticate_user</a> ()</td></tr>
<tr class="memdesc:ga4a4ac055b6fd8bbef4d8fce6372c33b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Authenticate user using username+password or token.  <br /></td></tr>
<tr class="separator:ga4a4ac055b6fd8bbef4d8fce6372c33b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacb9d6656814547f02e1c736173673850" id="r_gacb9d6656814547f02e1c736173673850"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gacb9d6656814547f02e1c736173673850">webservice::delete_service</a> ($serviceid)</td></tr>
<tr class="memdesc:gacb9d6656814547f02e1c736173673850"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a service Also delete function references and authorised user references.  <br /></td></tr>
<tr class="separator:gacb9d6656814547f02e1c736173673850"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1592fcf94f7f75c0bbe938ca1778308c" id="r_ga1592fcf94f7f75c0bbe938ca1778308c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga1592fcf94f7f75c0bbe938ca1778308c">webservice::delete_user_ws_token</a> ($tokenid)</td></tr>
<tr class="memdesc:ga1592fcf94f7f75c0bbe938ca1778308c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a token.  <br /></td></tr>
<tr class="separator:ga1592fcf94f7f75c0bbe938ca1778308c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1413af5214caf16083897bdfb10f202a" id="r_ga1413af5214caf16083897bdfb10f202a"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga1413af5214caf16083897bdfb10f202a">webservice::delete_user_ws_tokens</a> ($userid)</td></tr>
<tr class="memdesc:ga1413af5214caf16083897bdfb10f202a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete all the tokens belonging to a user.  <br /></td></tr>
<tr class="separator:ga1413af5214caf16083897bdfb10f202a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga85a27bcfed8f7396258bc3b47c2787a5" id="r_ga85a27bcfed8f7396258bc3b47c2787a5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga85a27bcfed8f7396258bc3b47c2787a5">external_create_service_token</a> ($servicename, $<a class="el" href="../../da/d04/classcontext.html">context</a>)</td></tr>
<tr class="memdesc:ga85a27bcfed8f7396258bc3b47c2787a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create and return a session linked token.  <br /></td></tr>
<tr class="separator:ga85a27bcfed8f7396258bc3b47c2787a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab4642d946f4cd1f5cb5f52f4e8d7d0a6" id="r_gab4642d946f4cd1f5cb5f52f4e8d7d0a6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gab4642d946f4cd1f5cb5f52f4e8d7d0a6">external_delete_descriptions</a> ($component)</td></tr>
<tr class="memdesc:gab4642d946f4cd1f5cb5f52f4e8d7d0a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete all pre-built services (+ related tokens) and external functions information defined in the specified component.  <br /></td></tr>
<tr class="separator:gab4642d946f4cd1f5cb5f52f4e8d7d0a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga340a9e5cbffbf74ea99d8f414aed6f19" id="r_ga340a9e5cbffbf74ea99d8f414aed6f19"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga340a9e5cbffbf74ea99d8f414aed6f19">external_format_string</a> ($str, $contextorid, $striplinks=true, $options=array())</td></tr>
<tr class="memdesc:ga340a9e5cbffbf74ea99d8f414aed6f19"><td class="mdescLeft">&#160;</td><td class="mdescRight">Format the string to be returned properly as requested by the either the web service server, either by an internally call.  <br /></td></tr>
<tr class="separator:ga340a9e5cbffbf74ea99d8f414aed6f19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae4c9d973116fd3dc2baf4b59d881465c" id="r_gae4c9d973116fd3dc2baf4b59d881465c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae4c9d973116fd3dc2baf4b59d881465c">external_format_text</a> ($text, $textformat, $contextorid, $component=null, $filearea=null, $itemid=null, $options=null)</td></tr>
<tr class="memdesc:gae4c9d973116fd3dc2baf4b59d881465c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Format the text to be returned properly as requested by the either the web service server, either by an internally call.  <br /></td></tr>
<tr class="separator:gae4c9d973116fd3dc2baf4b59d881465c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa92cfc30cecdd7d5cd66fd8745d72e61" id="r_gaa92cfc30cecdd7d5cd66fd8745d72e61"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaa92cfc30cecdd7d5cd66fd8745d72e61">external_generate_token</a> ($tokentype, $serviceorid, $userid, $contextorid, $validuntil=0, $iprestriction='')</td></tr>
<tr class="memdesc:gaa92cfc30cecdd7d5cd66fd8745d72e61"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate a token.  <br /></td></tr>
<tr class="separator:gaa92cfc30cecdd7d5cd66fd8745d72e61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabe2d1ac03ede04f31a9b792b50d033e8" id="r_gabe2d1ac03ede04f31a9b792b50d033e8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gabe2d1ac03ede04f31a9b792b50d033e8">external_generate_token_for_current_user</a> ($service)</td></tr>
<tr class="memdesc:gabe2d1ac03ede04f31a9b792b50d033e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate or return an existing token for the current authenticated user.  <br /></td></tr>
<tr class="separator:gabe2d1ac03ede04f31a9b792b50d033e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaca4fbef7f0eb4aeff12487e12ec55e6f" id="r_gaca4fbef7f0eb4aeff12487e12ec55e6f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaca4fbef7f0eb4aeff12487e12ec55e6f">external_log_token_request</a> ($token)</td></tr>
<tr class="memdesc:gaca4fbef7f0eb4aeff12487e12ec55e6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the last time a token was sent and trigger the <a class="el" href="../../d4/d40/classcore_1_1event_1_1webservice__token__sent.html" title="Webservice token sent event class.">core::event::webservice_token_sent</a> event.  <br /></td></tr>
<tr class="separator:gaca4fbef7f0eb4aeff12487e12ec55e6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadab07a2ea702ff3f59d1ec39374ccdb4" id="r_gadab07a2ea702ff3f59d1ec39374ccdb4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gadab07a2ea702ff3f59d1ec39374ccdb4">external_validate_format</a> ($format)</td></tr>
<tr class="memdesc:gadab07a2ea702ff3f59d1ec39374ccdb4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validate text field format against known FORMAT_XXX.  <br /></td></tr>
<tr class="separator:gadab07a2ea702ff3f59d1ec39374ccdb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga45e8690f045dd628c929c0efa107c235" id="r_ga45e8690f045dd628c929c0efa107c235"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga45e8690f045dd628c929c0efa107c235">webservice::generate_user_ws_tokens</a> ($userid)</td></tr>
<tr class="memdesc:ga45e8690f045dd628c929c0efa107c235"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate all tokens of a specific user.  <br /></td></tr>
<tr class="separator:ga45e8690f045dd628c929c0efa107c235"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga07bda85224d13826ef0b4e2fb9d5268d" id="r_ga07bda85224d13826ef0b4e2fb9d5268d"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga07bda85224d13826ef0b4e2fb9d5268d">webservice::get_active_tokens</a> ($userid)</td></tr>
<tr class="memdesc:ga07bda85224d13826ef0b4e2fb9d5268d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a list with all the valid user tokens for the given user, it only excludes expired tokens.  <br /></td></tr>
<tr class="separator:ga07bda85224d13826ef0b4e2fb9d5268d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga682ac7b87c64c01f1d707a806452e1b7" id="r_ga682ac7b87c64c01f1d707a806452e1b7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga682ac7b87c64c01f1d707a806452e1b7">webservice::get_created_by_user_ws_token</a> ($userid, $tokenid)</td></tr>
<tr class="memdesc:ga682ac7b87c64c01f1d707a806452e1b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a token that has been created by the user (i.e.  <br /></td></tr>
<tr class="separator:ga682ac7b87c64c01f1d707a806452e1b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa4a967c0f147b2506fa29f89b0c736b8" id="r_gaa4a967c0f147b2506fa29f89b0c736b8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaa4a967c0f147b2506fa29f89b0c736b8">webservice::get_external_function_by_id</a> ($functionid, $strictness=<a class="el" href="../../d0/de1/group__core.html#gaffc7005a2da386334d76ec5f85ca2d48">IGNORE_MISSING</a>)</td></tr>
<tr class="memdesc:gaa4a967c0f147b2506fa29f89b0c736b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get an external function for a given function id.  <br /></td></tr>
<tr class="separator:gaa4a967c0f147b2506fa29f89b0c736b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2fa3b03d9b6aea019bcb5f54abe660f5" id="r_ga2fa3b03d9b6aea019bcb5f54abe660f5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga2fa3b03d9b6aea019bcb5f54abe660f5">webservice::get_external_functions</a> ($serviceids)</td></tr>
<tr class="memdesc:ga2fa3b03d9b6aea019bcb5f54abe660f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the functions list of a service list (by id)  <br /></td></tr>
<tr class="separator:ga2fa3b03d9b6aea019bcb5f54abe660f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gace131480bdaf2f7e0b15ee4f557a661f" id="r_gace131480bdaf2f7e0b15ee4f557a661f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gace131480bdaf2f7e0b15ee4f557a661f">webservice::get_external_functions_by_enabled_services</a> ($serviceshortnames, $enabledonly=true)</td></tr>
<tr class="memdesc:gace131480bdaf2f7e0b15ee4f557a661f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the functions of a service list (by shortname).  <br /></td></tr>
<tr class="separator:gace131480bdaf2f7e0b15ee4f557a661f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac5d4b5194193e8b2bdb56a423fcb9bfd" id="r_gac5d4b5194193e8b2bdb56a423fcb9bfd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gac5d4b5194193e8b2bdb56a423fcb9bfd">webservice::get_external_service_by_id</a> ($serviceid, $strictness=<a class="el" href="../../d0/de1/group__core.html#gaffc7005a2da386334d76ec5f85ca2d48">IGNORE_MISSING</a>)</td></tr>
<tr class="memdesc:gac5d4b5194193e8b2bdb56a423fcb9bfd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get an external service for a given service id.  <br /></td></tr>
<tr class="separator:gac5d4b5194193e8b2bdb56a423fcb9bfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0362e0841b4d31c9738cc08e9d67f711" id="r_ga0362e0841b4d31c9738cc08e9d67f711"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga0362e0841b4d31c9738cc08e9d67f711">webservice::get_external_service_by_shortname</a> ($shortname, $strictness=<a class="el" href="../../d0/de1/group__core.html#gaffc7005a2da386334d76ec5f85ca2d48">IGNORE_MISSING</a>)</td></tr>
<tr class="memdesc:ga0362e0841b4d31c9738cc08e9d67f711"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get an external service for a given shortname.  <br /></td></tr>
<tr class="separator:ga0362e0841b4d31c9738cc08e9d67f711"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae26f3e15f023331ce1779ad7c332bfa5" id="r_gae26f3e15f023331ce1779ad7c332bfa5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae26f3e15f023331ce1779ad7c332bfa5">webservice::get_missing_capabilities_by_users</a> (array $users, int $serviceid)</td></tr>
<tr class="memdesc:gae26f3e15f023331ce1779ad7c332bfa5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get missing user capabilities for the given service's functions.  <br /></td></tr>
<tr class="separator:gae26f3e15f023331ce1779ad7c332bfa5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga29dafbffe058e9c7b4031ace5a8c102b" id="r_ga29dafbffe058e9c7b4031ace5a8c102b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga29dafbffe058e9c7b4031ace5a8c102b">webservice::get_not_associated_external_functions</a> ($serviceid)</td></tr>
<tr class="memdesc:ga29dafbffe058e9c7b4031ace5a8c102b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get functions not included in a service.  <br /></td></tr>
<tr class="separator:ga29dafbffe058e9c7b4031ace5a8c102b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga635e239e4d82a1401f1720227063d101" id="r_ga635e239e4d82a1401f1720227063d101"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga635e239e4d82a1401f1720227063d101">webservice::get_service_required_capabilities</a> ($serviceid)</td></tr>
<tr class="memdesc:ga635e239e4d82a1401f1720227063d101"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get list of required capabilities of a service, sorted by functions Example of returned value: Array ( [core_group_create_groups] =&gt; Array ( [0] =&gt; moodle/course:managegroups )  <br /></td></tr>
<tr class="separator:ga635e239e4d82a1401f1720227063d101"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga23cf3d11b0fee6751d5f30aa886b1794" id="r_ga23cf3d11b0fee6751d5f30aa886b1794"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga23cf3d11b0fee6751d5f30aa886b1794">webservice::get_token_by_id</a> ($tokenid)</td></tr>
<tr class="memdesc:ga23cf3d11b0fee6751d5f30aa886b1794"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a database token record for a token id.  <br /></td></tr>
<tr class="separator:ga23cf3d11b0fee6751d5f30aa886b1794"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0ad1f1f1ffe93394aab102f94778f3af" id="r_ga0ad1f1f1ffe93394aab102f94778f3af"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga0ad1f1f1ffe93394aab102f94778f3af">webservice::get_token_by_id_with_details</a> ($tokenid)</td></tr>
<tr class="memdesc:ga0ad1f1f1ffe93394aab102f94778f3af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a token of an arbitrary user by tokenid, including details of the associated user and the service name.  <br /></td></tr>
<tr class="separator:ga0ad1f1f1ffe93394aab102f94778f3af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga105cddca1f1d2cd267bec900c1eb378d" id="r_ga105cddca1f1d2cd267bec900c1eb378d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga105cddca1f1d2cd267bec900c1eb378d">webservice::get_user_capabilities</a> ($userid)</td></tr>
<tr class="memdesc:ga105cddca1f1d2cd267bec900c1eb378d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get user capabilities (with context) Only useful for documentation purpose WARNING: do not use this "broken" function.  <br /></td></tr>
<tr class="separator:ga105cddca1f1d2cd267bec900c1eb378d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga05a25c8160b4243fccb0209401ae06ad" id="r_ga05a25c8160b4243fccb0209401ae06ad"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga05a25c8160b4243fccb0209401ae06ad">webservice::get_user_ws_token</a> ($token)</td></tr>
<tr class="memdesc:ga05a25c8160b4243fccb0209401ae06ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a full database token record for a given token value.  <br /></td></tr>
<tr class="separator:ga05a25c8160b4243fccb0209401ae06ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab1f0a7badbbbaa6ff395ed66cc23ef93" id="r_gab1f0a7badbbbaa6ff395ed66cc23ef93"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gab1f0a7badbbbaa6ff395ed66cc23ef93">webservice::get_user_ws_tokens</a> ($userid)</td></tr>
<tr class="memdesc:gab1f0a7badbbbaa6ff395ed66cc23ef93"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return all tokens of a specific user.  <br /></td></tr>
<tr class="separator:gab1f0a7badbbbaa6ff395ed66cc23ef93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae9ce3aa9634eaf2ea80a52f5cc6ca290" id="r_gae9ce3aa9634eaf2ea80a52f5cc6ca290"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae9ce3aa9634eaf2ea80a52f5cc6ca290">webservice::get_ws_authorised_user</a> ($serviceid, $userid)</td></tr>
<tr class="memdesc:gae9ce3aa9634eaf2ea80a52f5cc6ca290"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return an authorised user with their options (ip/timecreated / validuntil...)  <br /></td></tr>
<tr class="separator:gae9ce3aa9634eaf2ea80a52f5cc6ca290"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa5603a934a79eb0e31cc98dd3f959ecf" id="r_gaa5603a934a79eb0e31cc98dd3f959ecf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaa5603a934a79eb0e31cc98dd3f959ecf">webservice::get_ws_authorised_users</a> ($serviceid)</td></tr>
<tr class="memdesc:gaa5603a934a79eb0e31cc98dd3f959ecf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return list of allowed users with their options (ip/timecreated / validuntil...) for a given service.  <br /></td></tr>
<tr class="separator:gaa5603a934a79eb0e31cc98dd3f959ecf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga156a909c398998ccfc4c1aadecdf49c2" id="r_ga156a909c398998ccfc4c1aadecdf49c2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga156a909c398998ccfc4c1aadecdf49c2">webservice::remove_external_function_from_service</a> ($functionname, $serviceid)</td></tr>
<tr class="memdesc:ga156a909c398998ccfc4c1aadecdf49c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a function from a service.  <br /></td></tr>
<tr class="separator:ga156a909c398998ccfc4c1aadecdf49c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga23fe26c66314412cc16b289362f79700" id="r_ga23fe26c66314412cc16b289362f79700"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga23fe26c66314412cc16b289362f79700">webservice::remove_ws_authorised_user</a> ($user, $serviceid)</td></tr>
<tr class="memdesc:ga23fe26c66314412cc16b289362f79700"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disallow a user to call a service.  <br /></td></tr>
<tr class="separator:ga23fe26c66314412cc16b289362f79700"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac1564b2d1bfcac60f8440b11448db630" id="r_gac1564b2d1bfcac60f8440b11448db630"><td class="memItemLeft" align="right" valign="top"><a id="gac1564b2d1bfcac60f8440b11448db630" name="gac1564b2d1bfcac60f8440b11448db630"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>webservice_server_interface::run</b> ()</td></tr>
<tr class="memdesc:gac1564b2d1bfcac60f8440b11448db630"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process request from client. <br /></td></tr>
<tr class="separator:gac1564b2d1bfcac60f8440b11448db630"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab512f05683aa607e3af410695cf5f521" id="r_gab512f05683aa607e3af410695cf5f521"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gab512f05683aa607e3af410695cf5f521">webservice::service_function_exists</a> ($functionname, $serviceid)</td></tr>
<tr class="memdesc:gab512f05683aa607e3af410695cf5f521"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test whether an external function is already linked to a service.  <br /></td></tr>
<tr class="separator:gab512f05683aa607e3af410695cf5f521"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga09c57a0320e10470492d5a480a9576ec" id="r_ga09c57a0320e10470492d5a480a9576ec"><td class="memItemLeft" align="right" valign="top"><a id="ga09c57a0320e10470492d5a480a9576ec" name="ga09c57a0320e10470492d5a480a9576ec"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>webservice_server::set_web_service_call_settings</b> ()</td></tr>
<tr class="memdesc:ga09c57a0320e10470492d5a480a9576ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Intercept some moodlewssettingXXX $_GET and $_POST parameter that are related to the web service call and are not the function parameters. <br /></td></tr>
<tr class="separator:ga09c57a0320e10470492d5a480a9576ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa997e180b0b00f771b0676653f91c960" id="r_gaa997e180b0b00f771b0676653f91c960"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaa997e180b0b00f771b0676653f91c960">webservice_test_client_interface::simpletest</a> ($serverurl, $function, $params)</td></tr>
<tr class="memdesc:gaa997e180b0b00f771b0676653f91c960"><td class="mdescLeft">&#160;</td><td class="mdescRight">Execute test client WS request.  <br /></td></tr>
<tr class="separator:gaa997e180b0b00f771b0676653f91c960"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae565020dd2a9250fe1402274cefbae02" id="r_gae565020dd2a9250fe1402274cefbae02"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae565020dd2a9250fe1402274cefbae02">webservice::update_external_service</a> ($service)</td></tr>
<tr class="memdesc:gae565020dd2a9250fe1402274cefbae02"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update a service It modifies the timemodified automatically.  <br /></td></tr>
<tr class="separator:gae565020dd2a9250fe1402274cefbae02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacd6a7ef779f070b2843cca56866c92e1" id="r_gacd6a7ef779f070b2843cca56866c92e1"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gacd6a7ef779f070b2843cca56866c92e1">webservice::update_token_lastaccess</a> ($token, int $time=0)</td></tr>
<tr class="memdesc:gacd6a7ef779f070b2843cca56866c92e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the last access time for a token.  <br /></td></tr>
<tr class="separator:gacd6a7ef779f070b2843cca56866c92e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga131f7b30250ccca1e9687cbe2e970d8f" id="r_ga131f7b30250ccca1e9687cbe2e970d8f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga131f7b30250ccca1e9687cbe2e970d8f">webservice::update_ws_authorised_user</a> ($user)</td></tr>
<tr class="memdesc:ga131f7b30250ccca1e9687cbe2e970d8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update allowed user settings (ip restriction, valid until...)  <br /></td></tr>
<tr class="separator:ga131f7b30250ccca1e9687cbe2e970d8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7deed897047592d2fcfc3ebeba371a88" id="r_ga7deed897047592d2fcfc3ebeba371a88"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga7deed897047592d2fcfc3ebeba371a88">webservice_protocol_is_enabled</a> ($protocol)</td></tr>
<tr class="memdesc:ga7deed897047592d2fcfc3ebeba371a88"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if a protocol is enabled.  <br /></td></tr>
<tr class="separator:ga7deed897047592d2fcfc3ebeba371a88"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gafbef8ba6f0c65cc8498233736a3a3814" id="r_gafbef8ba6f0c65cc8498233736a3a3814"><td class="memItemLeft" align="right" valign="top"><a id="gafbef8ba6f0c65cc8498233736a3a3814" name="gafbef8ba6f0c65cc8498233736a3a3814"></a>
integer&#160;</td><td class="memItemRight" valign="bottom"><b>webservice_server::$authmethod</b></td></tr>
<tr class="memdesc:gafbef8ba6f0c65cc8498233736a3a3814"><td class="mdescLeft">&#160;</td><td class="mdescRight">Authentication method one of WEBSERVICE_AUTHMETHOD_*. <br /></td></tr>
<tr class="separator:gafbef8ba6f0c65cc8498233736a3a3814"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac5c2b68f4b60dac62c056953264d53aa" id="r_gac5c2b68f4b60dac62c056953264d53aa"><td class="memItemLeft" align="right" valign="top"><a id="gac5c2b68f4b60dac62c056953264d53aa" name="gac5c2b68f4b60dac62c056953264d53aa"></a>
global&#160;</td><td class="memItemRight" valign="bottom"><b>$CFG</b></td></tr>
<tr class="separator:gac5c2b68f4b60dac62c056953264d53aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa75daea491817f3b64daa2f51128bcdf" id="r_gaa75daea491817f3b64daa2f51128bcdf"><td class="memItemLeft" align="right" valign="top"><a id="gaa75daea491817f3b64daa2f51128bcdf" name="gaa75daea491817f3b64daa2f51128bcdf"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$functions</b></td></tr>
<tr class="separator:gaa75daea491817f3b64daa2f51128bcdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2d5318b8ab68dac45e5140fd4e989b08" id="r_ga2d5318b8ab68dac45e5140fd4e989b08"><td class="memItemLeft" align="right" valign="top"><a id="ga2d5318b8ab68dac45e5140fd4e989b08" name="ga2d5318b8ab68dac45e5140fd4e989b08"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>webservice_server::$password</b> = null</td></tr>
<tr class="memdesc:ga2d5318b8ab68dac45e5140fd4e989b08"><td class="mdescLeft">&#160;</td><td class="mdescRight">Password of the local user. <br /></td></tr>
<tr class="separator:ga2d5318b8ab68dac45e5140fd4e989b08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1bb5e0c7464f4776d8f83445b682d8c5" id="r_ga1bb5e0c7464f4776d8f83445b682d8c5"><td class="memItemLeft" align="right" valign="top"><a id="ga1bb5e0c7464f4776d8f83445b682d8c5" name="ga1bb5e0c7464f4776d8f83445b682d8c5"></a>
stdClass&#160;</td><td class="memItemRight" valign="bottom"><b>webservice_server::$restricted_context</b></td></tr>
<tr class="memdesc:ga1bb5e0c7464f4776d8f83445b682d8c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restricted context. <br /></td></tr>
<tr class="separator:ga1bb5e0c7464f4776d8f83445b682d8c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa8c134468dd7559e1a02febad615331e" id="r_gaa8c134468dd7559e1a02febad615331e"><td class="memItemLeft" align="right" valign="top"><a id="gaa8c134468dd7559e1a02febad615331e" name="gaa8c134468dd7559e1a02febad615331e"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>webservice_server::$restricted_serviceid</b> = null</td></tr>
<tr class="memdesc:gaa8c134468dd7559e1a02febad615331e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restrict call to one service id. <br /></td></tr>
<tr class="separator:gaa8c134468dd7559e1a02febad615331e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga23d6d124a35cf4b31e238cc34be9d653" id="r_ga23d6d124a35cf4b31e238cc34be9d653"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga23d6d124a35cf4b31e238cc34be9d653">$services</a></td></tr>
<tr class="separator:ga23d6d124a35cf4b31e238cc34be9d653"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab24d500ae75ef0a8fa1683be3e78a519" id="r_gab24d500ae75ef0a8fa1683be3e78a519"><td class="memItemLeft" align="right" valign="top"><a id="gab24d500ae75ef0a8fa1683be3e78a519" name="gab24d500ae75ef0a8fa1683be3e78a519"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>webservice_server::$token</b> = null</td></tr>
<tr class="memdesc:gab24d500ae75ef0a8fa1683be3e78a519"><td class="mdescLeft">&#160;</td><td class="mdescRight">Authentication token. <br /></td></tr>
<tr class="separator:gab24d500ae75ef0a8fa1683be3e78a519"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadac4bb4ffceb2260209fa1428242a92b" id="r_gadac4bb4ffceb2260209fa1428242a92b"><td class="memItemLeft" align="right" valign="top"><a id="gadac4bb4ffceb2260209fa1428242a92b" name="gadac4bb4ffceb2260209fa1428242a92b"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>webservice_server::$userid</b> = null</td></tr>
<tr class="memdesc:gadac4bb4ffceb2260209fa1428242a92b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The local user. <br /></td></tr>
<tr class="separator:gadac4bb4ffceb2260209fa1428242a92b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9f0fb6bf1833fd6227823b01d46b138e" id="r_ga9f0fb6bf1833fd6227823b01d46b138e"><td class="memItemLeft" align="right" valign="top"><a id="ga9f0fb6bf1833fd6227823b01d46b138e" name="ga9f0fb6bf1833fd6227823b01d46b138e"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>webservice_server::$username</b> = null</td></tr>
<tr class="memdesc:ga9f0fb6bf1833fd6227823b01d46b138e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Name of local user. <br /></td></tr>
<tr class="separator:ga9f0fb6bf1833fd6227823b01d46b138e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaad2ff5a81a07e34d216fce7902626661" id="r_gaad2ff5a81a07e34d216fce7902626661"><td class="memItemLeft" align="right" valign="top"><a id="gaad2ff5a81a07e34d216fce7902626661" name="gaad2ff5a81a07e34d216fce7902626661"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>webservice_server::$wsname</b> = null</td></tr>
<tr class="memdesc:gaad2ff5a81a07e34d216fce7902626661"><td class="mdescLeft">&#160;</td><td class="mdescRight">Name of the web server plugin. <br /></td></tr>
<tr class="separator:gaad2ff5a81a07e34d216fce7902626661"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga47290742733da0de285e0562624448df" id="r_ga47290742733da0de285e0562624448df"><td class="memItemLeft" align="right" valign="top">int const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga47290742733da0de285e0562624448df">webservice::TOKEN_LASTACCESS_UPDATE_SECS</a> = 60</td></tr>
<tr class="memdesc:ga47290742733da0de285e0562624448df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Only update token last access once per this many seconds.  <br /></td></tr>
<tr class="separator:ga47290742733da0de285e0562624448df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0616e2ca8a5415ef5a0f2856277f8849" id="r_ga0616e2ca8a5415ef5a0f2856277f8849"><td class="memItemLeft" align="right" valign="top"><a id="ga0616e2ca8a5415ef5a0f2856277f8849" name="ga0616e2ca8a5415ef5a0f2856277f8849"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>WEBSERVICE_AUTHMETHOD_PERMANENT_TOKEN</b> 1</td></tr>
<tr class="memdesc:ga0616e2ca8a5415ef5a0f2856277f8849"><td class="mdescLeft">&#160;</td><td class="mdescRight">WEBSERVICE_AUTHMETHOD_PERMANENT_TOKEN - most common token authentication (external app, mobile app...) <br /></td></tr>
<tr class="separator:ga0616e2ca8a5415ef5a0f2856277f8849"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4723465b3dbabf0393336a8a546e03a4" id="r_ga4723465b3dbabf0393336a8a546e03a4"><td class="memItemLeft" align="right" valign="top"><a id="ga4723465b3dbabf0393336a8a546e03a4" name="ga4723465b3dbabf0393336a8a546e03a4"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>WEBSERVICE_AUTHMETHOD_SESSION_TOKEN</b> 2</td></tr>
<tr class="memdesc:ga4723465b3dbabf0393336a8a546e03a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">WEBSERVICE_AUTHMETHOD_SESSION_TOKEN - token for embedded application (requires <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> session) <br /></td></tr>
<tr class="separator:ga4723465b3dbabf0393336a8a546e03a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab7b9d1b56949e5bc4cf8f14b28db6042" id="r_gab7b9d1b56949e5bc4cf8f14b28db6042"><td class="memItemLeft" align="right" valign="top"><a id="gab7b9d1b56949e5bc4cf8f14b28db6042" name="gab7b9d1b56949e5bc4cf8f14b28db6042"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>WEBSERVICE_AUTHMETHOD_USERNAME</b> 0</td></tr>
<tr class="memdesc:gab7b9d1b56949e5bc4cf8f14b28db6042"><td class="mdescLeft">&#160;</td><td class="mdescRight">WEBSERVICE_AUTHMETHOD_USERNAME - username/password authentication (also called simple authentication) <br /></td></tr>
<tr class="separator:gab7b9d1b56949e5bc4cf8f14b28db6042"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga50b4feca2c635678c51583d9e81d120c" name="ga50b4feca2c635678c51583d9e81d120c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga50b4feca2c635678c51583d9e81d120c">&#9670;&#160;</a></span>__construct() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">webservice_server::__construct </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$authmethod</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">integer</td><td class="paramname">$authmethod</td><td>authentication method one of WEBSERVICE_AUTHMETHOD_* </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gae1359baeb19f9c5565ade71c1fc6df99" name="gae1359baeb19f9c5565ade71c1fc6df99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae1359baeb19f9c5565ade71c1fc6df99">&#9670;&#160;</a></span>__construct() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">webservice_access_exception::__construct </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$debuginfo</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$debuginfo</td><td>the debug info </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga480899c7dc9f88b1362a981e8b2119d1" name="ga480899c7dc9f88b1362a981e8b2119d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga480899c7dc9f88b1362a981e8b2119d1">&#9670;&#160;</a></span>add_external_function_to_service()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">webservice::add_external_function_to_service </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$functionname</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$serviceid</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a function to a service. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$functionname</td><td>function name </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$serviceid</td><td>service id </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga614cded97e9ff9f71dff55dc53771acc" name="ga614cded97e9ff9f71dff55dc53771acc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga614cded97e9ff9f71dff55dc53771acc">&#9670;&#160;</a></span>add_external_service()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">webservice::add_external_service </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$service</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a service It generates the timecreated field automatically. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$service</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">serviceid</td><td>integer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga746c56ab1dc843d3e2e5914995779aae" name="ga746c56ab1dc843d3e2e5914995779aae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga746c56ab1dc843d3e2e5914995779aae">&#9670;&#160;</a></span>add_ws_authorised_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">webservice::add_ws_authorised_user </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$user</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allow user to call a service. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$user</td><td>a user </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gac5a7eed48dad6983a5079678f6db9ac2" name="gac5a7eed48dad6983a5079678f6db9ac2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac5a7eed48dad6983a5079678f6db9ac2">&#9670;&#160;</a></span>authenticate_by_token()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">webservice_server::authenticate_by_token </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$tokentype</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>User authentication by token. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$tokentype</td><td>token type (EXTERNAL_TOKEN_EMBEDDED or EXTERNAL_TOKEN_PERMANENT) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass</td><td>the authenticated user </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d2/d19/classwebservice__access__exception.html" title="Exception indicating access control problem in web service call This exception should return general ...">webservice_access_exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gacc66590382a3439c9158388b6b71ce59" name="gacc66590382a3439c9158388b6b71ce59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacc66590382a3439c9158388b6b71ce59">&#9670;&#160;</a></span>authenticate_user() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">webservice::authenticate_user </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$token</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Authenticate user (used by download/upload file scripts) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$token</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>- contains the authenticated user, token and service objects </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga4a4ac055b6fd8bbef4d8fce6372c33b1" name="ga4a4ac055b6fd8bbef4d8fce6372c33b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4a4ac055b6fd8bbef4d8fce6372c33b1">&#9670;&#160;</a></span>authenticate_user() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">webservice_server::authenticate_user </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Authenticate user using username+password or token. </p>
<p>This function sets up $USER global. It is safe to use has_capability() after this. This method also verifies user is allowed to use this server. </p>

</div>
</div>
<a id="gacb9d6656814547f02e1c736173673850" name="gacb9d6656814547f02e1c736173673850"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacb9d6656814547f02e1c736173673850">&#9670;&#160;</a></span>delete_service()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">webservice::delete_service </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$serviceid</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a service Also delete function references and authorised user references. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$serviceid</td><td>service id </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga1592fcf94f7f75c0bbe938ca1778308c" name="ga1592fcf94f7f75c0bbe938ca1778308c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1592fcf94f7f75c0bbe938ca1778308c">&#9670;&#160;</a></span>delete_user_ws_token()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">webservice::delete_user_ws_token </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$tokenid</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a token. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$tokenid</td><td>token id </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga1413af5214caf16083897bdfb10f202a" name="ga1413af5214caf16083897bdfb10f202a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1413af5214caf16083897bdfb10f202a">&#9670;&#160;</a></span>delete_user_ws_tokens()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static webservice::delete_user_ws_tokens </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$userid</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Delete all the tokens belonging to a user. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td>the user id whose tokens must be deleted </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga85a27bcfed8f7396258bc3b47c2787a5" name="ga85a27bcfed8f7396258bc3b47c2787a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga85a27bcfed8f7396258bc3b47c2787a5">&#9670;&#160;</a></span>external_create_service_token()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">external_create_service_token </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$servicename</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$context</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create and return a session linked token. </p>
<p>Token to be used for html embedded client apps that want to communicate with the <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> server through web services. The token is linked to the current session for the current page request. It is expected this will be called in the script generating the html page that is embedding the client app and that the returned token will be somehow passed into the client app being embedded in the page.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$servicename</td><td>name of the web service. Service name as defined in db/services.php </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$context</td><td>context within which the web service can operate. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td>returns token id. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd><a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 2.0 </dd></dl>

</div>
</div>
<a id="gab4642d946f4cd1f5cb5f52f4e8d7d0a6" name="gab4642d946f4cd1f5cb5f52f4e8d7d0a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab4642d946f4cd1f5cb5f52f4e8d7d0a6">&#9670;&#160;</a></span>external_delete_descriptions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">external_delete_descriptions </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$component</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete all pre-built services (+ related tokens) and external functions information defined in the specified component. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$component</td><td>name of component (moodle, mod_assignment, etc.) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga340a9e5cbffbf74ea99d8f414aed6f19" name="ga340a9e5cbffbf74ea99d8f414aed6f19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga340a9e5cbffbf74ea99d8f414aed6f19">&#9670;&#160;</a></span>external_format_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">external_format_string </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$str</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$contextorid</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$striplinks</em><span class="paramdefsep"> = </span><span class="paramdefval">true</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$options</em><span class="paramdefsep"> = </span><span class="paramdefval">array()</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Format the string to be returned properly as requested by the either the web service server, either by an internally call. </p>
<p>The caller can change the format (raw) with the <a class="el" href="../../d7/dd8/classexternal__settings.html" title="Singleton to handle the external settings.">external_settings</a> singleton All web service servers must set this singleton when parsing the $_GET and $_POST.</p>
<pre>
Options are the same that in <a class="el" href="../../d0/de1/group__core.html#ga5d853ba52ad6e416838c5dcc3680aa80"> </a> with some changes:
     filter      : Can be set to false to force filters off, else observes <a class="el" href="../../d7/dd8/classexternal__settings.html"> </a>.
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$str</td><td>The string to be filtered. Should be plain text, expect possibly for multilang tags. </td></tr>
    <tr><td class="paramtype">boolean</td><td class="paramname">$striplinks</td><td>To strip any link in the result text. <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 1.8 default changed from false to true! <a href="https://tracker.moodle.org/browse/MDL-8713" class="el">MDL-8713</a> </td></tr>
    <tr><td class="paramtype">context&#160;|&#160;int</td><td class="paramname">$contextorid</td><td>The id of the context for the string or the context (affects filters). </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$options</td><td>options array/object or courseid </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>text </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd><a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 3.0 </dd></dl>

</div>
</div>
<a id="gae4c9d973116fd3dc2baf4b59d881465c" name="gae4c9d973116fd3dc2baf4b59d881465c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae4c9d973116fd3dc2baf4b59d881465c">&#9670;&#160;</a></span>external_format_text()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">external_format_text </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$text</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$textformat</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$contextorid</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$component</em><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$filearea</em><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$itemid</em><span class="paramdefsep"> = </span><span class="paramdefval">null</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$options</em><span class="paramdefsep"> = </span><span class="paramdefval">null</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Format the text to be returned properly as requested by the either the web service server, either by an internally call. </p>
<p>The caller can change the format (raw, filter, file, fileurl) with the <a class="el" href="../../d7/dd8/classexternal__settings.html" title="Singleton to handle the external settings.">external_settings</a> singleton All web service servers must set this singleton when parsing the $_GET and $_POST.</p>
<pre>
Options are the same that in <a class="el" href="../../d0/de1/group__core.html#ga9cf34d3f4b1d8960c459d4a66144da8e"> </a> with some changes in defaults to provide backwards compatibility:
     trusted     :   If true the string won't be cleaned. Default false.
     noclean     :   If true the string won't be cleaned only if trusted is also true. Default false.
     nocache     :   If true the string will not be cached and will be formatted every call. Default false.
     filter      :   Can be set to false to force filters off, else observes <a class="el" href="../../d7/dd8/classexternal__settings.html"> </a>.
     para        :   If true then the returned string will be wrapped in div tags. Default (different from format_text) false.
                     Default changed because div tags are not commonly needed.
     newlines    :   If true then lines newline breaks will be converted to HTML newline breaks. Default true.
     context     :   Not used! Using contextid parameter instead.
     overflowdiv :   If set to true the formatted text will be encased in a div with the class no-overflow before being
                     returned. Default false.
     allowid     :   If true then id attributes will not be removed, even when using htmlpurifier. Default (different from
                     format_text) true. Default changed id attributes are commonly needed.
     blanktarget :   If true all  tags will have target="_blank" added unless target is explicitly specified.
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$text</td><td>The content that may contain ULRs in need of rewriting. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$textformat</td><td>The text format. </td></tr>
    <tr><td class="paramtype">context&#160;|&#160;int</td><td class="paramname">$contextorid</td><td>This parameter and the next two identify the file area to use. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$component</td><td></td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$filearea</td><td>helps identify the file area. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$itemid</td><td>helps identify the file area. </td></tr>
    <tr><td class="paramtype"></td><td class="paramname">object/array</td><td>$options text formatting options </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>text + textformat </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd><a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 2.3 </dd>
<dd>
<a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 3.2 component, filearea and itemid are optional parameters </dd></dl>

</div>
</div>
<a id="gaa92cfc30cecdd7d5cd66fd8745d72e61" name="gaa92cfc30cecdd7d5cd66fd8745d72e61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa92cfc30cecdd7d5cd66fd8745d72e61">&#9670;&#160;</a></span>external_generate_token()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">external_generate_token </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$tokentype</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$serviceorid</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$userid</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$contextorid</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$validuntil</em><span class="paramdefsep"> = </span><span class="paramdefval">0</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$iprestriction</em><span class="paramdefsep"> = </span><span class="paramdefval">''</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate a token. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$tokentype</td><td>EXTERNAL_TOKEN_EMBEDDED|EXTERNAL_TOKEN_PERMANENT </td></tr>
    <tr><td class="paramtype">stdClass&#160;|&#160;int</td><td class="paramname">$serviceorid</td><td>service linked to the token </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td>user linked to the token </td></tr>
    <tr><td class="paramtype">stdClass&#160;|&#160;int</td><td class="paramname">$contextorid</td><td></td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$validuntil</td><td>date when the token expired </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$iprestriction</td><td>allowed ip - if 0 or empty then all ips are allowed </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>generated token </td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>2010 Jamie Pratt </dd></dl>
<dl class="section since"><dt>Since</dt><dd><a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 2.0 </dd></dl>

</div>
</div>
<a id="gabe2d1ac03ede04f31a9b792b50d033e8" name="gabe2d1ac03ede04f31a9b792b50d033e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabe2d1ac03ede04f31a9b792b50d033e8">&#9670;&#160;</a></span>external_generate_token_for_current_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">external_generate_token_for_current_user </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$service</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate or return an existing token for the current authenticated user. </p>
<p>This function is used for creating a valid token for users authenticathing via login/token.php or admin/tool/mobile/launch.php.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$service</td><td>external service object </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass</td><td>token object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd><a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 3.2 </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d6/da8/classmoodle__exception.html" title="Base Moodle Exception class.">moodle_exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaca4fbef7f0eb4aeff12487e12ec55e6f" name="gaca4fbef7f0eb4aeff12487e12ec55e6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaca4fbef7f0eb4aeff12487e12ec55e6f">&#9670;&#160;</a></span>external_log_token_request()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">external_log_token_request </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$token</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the last time a token was sent and trigger the <a class="el" href="../../d4/d40/classcore_1_1event_1_1webservice__token__sent.html" title="Webservice token sent event class.">core::event::webservice_token_sent</a> event. </p>
<p>This function is used when a token is generated by the user via login/token.php or admin/tool/mobile/launch.php. In order to protect the privatetoken, we remove it from the event params.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$token</td><td>token object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd><a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 3.2 </dd></dl>

</div>
</div>
<a id="gadab07a2ea702ff3f59d1ec39374ccdb4" name="gadab07a2ea702ff3f59d1ec39374ccdb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadab07a2ea702ff3f59d1ec39374ccdb4">&#9670;&#160;</a></span>external_validate_format()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">external_validate_format </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$format</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Validate text field format against known FORMAT_XXX. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$format</td><td>the format to validate </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">the</td><td>validated format </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../da/d34/classcoding__exception.html" title="Exception indicating programming error, must be fixed by a programer.">coding_exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd><a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 2.3 </dd></dl>

</div>
</div>
<a id="ga45e8690f045dd628c929c0efa107c235" name="ga45e8690f045dd628c929c0efa107c235"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga45e8690f045dd628c929c0efa107c235">&#9670;&#160;</a></span>generate_user_ws_tokens()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">webservice::generate_user_ws_tokens </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$userid</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate all tokens of a specific user. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td>user id </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga07bda85224d13826ef0b4e2fb9d5268d" name="ga07bda85224d13826ef0b4e2fb9d5268d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga07bda85224d13826ef0b4e2fb9d5268d">&#9670;&#160;</a></span>get_active_tokens()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static webservice::get_active_tokens </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$userid</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return a list with all the valid user tokens for the given user, it only excludes expired tokens. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$userid</td><td>user id to retrieve tokens from </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>array of token entries </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd><a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 3.2 </dd></dl>

</div>
</div>
<a id="ga682ac7b87c64c01f1d707a806452e1b7" name="ga682ac7b87c64c01f1d707a806452e1b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga682ac7b87c64c01f1d707a806452e1b7">&#9670;&#160;</a></span>get_created_by_user_ws_token()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">webservice::get_created_by_user_ws_token </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$userid</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$tokenid</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return a token that has been created by the user (i.e. </p>
<p>to created by an admin) If no tokens exist an exception is thrown</p>
<p>The returned value is a stdClass: -&gt;id token id -&gt;token -&gt;firstname user firstname -&gt;lastname -&gt;name service name</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td>user id </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$tokenid</td><td>token id </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaa4a967c0f147b2506fa29f89b0c736b8" name="gaa4a967c0f147b2506fa29f89b0c736b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa4a967c0f147b2506fa29f89b0c736b8">&#9670;&#160;</a></span>get_external_function_by_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">webservice::get_external_function_by_id </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$functionid</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$strictness</em><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="../../d0/de1/group__core.html#gaffc7005a2da386334d76ec5f85ca2d48">IGNORE_MISSING</a></span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get an external function for a given function id. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$functionid</td><td>function id </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$strictness</td><td>IGNORE_MISSING, MUST_EXIST... </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass</td><td>external function </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga2fa3b03d9b6aea019bcb5f54abe660f5" name="ga2fa3b03d9b6aea019bcb5f54abe660f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2fa3b03d9b6aea019bcb5f54abe660f5">&#9670;&#160;</a></span>get_external_functions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">webservice::get_external_functions </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$serviceids</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the functions list of a service list (by id) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$serviceids</td><td>service ids </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>of functions </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gace131480bdaf2f7e0b15ee4f557a661f" name="gace131480bdaf2f7e0b15ee4f557a661f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gace131480bdaf2f7e0b15ee4f557a661f">&#9670;&#160;</a></span>get_external_functions_by_enabled_services()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">webservice::get_external_functions_by_enabled_services </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$serviceshortnames</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$enabledonly</em><span class="paramdefsep"> = </span><span class="paramdefval">true</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the functions of a service list (by shortname). </p>
<p>It can return only enabled functions if required.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$serviceshortnames</td><td>service shortnames </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$enabledonly</td><td>if true then only return functions for services that have been enabled </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>functions </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gac5d4b5194193e8b2bdb56a423fcb9bfd" name="gac5d4b5194193e8b2bdb56a423fcb9bfd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac5d4b5194193e8b2bdb56a423fcb9bfd">&#9670;&#160;</a></span>get_external_service_by_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">webservice::get_external_service_by_id </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$serviceid</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$strictness</em><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="../../d0/de1/group__core.html#gaffc7005a2da386334d76ec5f85ca2d48">IGNORE_MISSING</a></span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get an external service for a given service id. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$serviceid</td><td>service id </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$strictness</td><td>IGNORE_MISSING, MUST_EXIST... </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass</td><td>external service </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga0362e0841b4d31c9738cc08e9d67f711" name="ga0362e0841b4d31c9738cc08e9d67f711"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0362e0841b4d31c9738cc08e9d67f711">&#9670;&#160;</a></span>get_external_service_by_shortname()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">webservice::get_external_service_by_shortname </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$shortname</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$strictness</em><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="../../d0/de1/group__core.html#gaffc7005a2da386334d76ec5f85ca2d48">IGNORE_MISSING</a></span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get an external service for a given shortname. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$shortname</td><td>service shortname </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$strictness</td><td>IGNORE_MISSING, MUST_EXIST... </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass</td><td>external service </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gae26f3e15f023331ce1779ad7c332bfa5" name="gae26f3e15f023331ce1779ad7c332bfa5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae26f3e15f023331ce1779ad7c332bfa5">&#9670;&#160;</a></span>get_missing_capabilities_by_users()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">webservice::get_missing_capabilities_by_users </td>
          <td>(</td>
          <td class="paramtype">array</td>          <td class="paramname"><span class="paramname"><em>$users</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$serviceid</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get missing user capabilities for the given service's functions. </p>
<p>Every external function can declare some required capabilities to allow for easier setup of the web services. However, that is supposed to be used for informational admin report only. There is no automatic evaluation of the declared capabilities and the context of the capability evaluation is ignored. Also, actual capability evaluation is much more complex as it allows for overrides etc.</p>
<p>Returned are capabilities that the given users do not seem to have assigned anywhere at the site and that should be checked by the admin.</p>
<p>Do not use this method for anything else, particularly not for any security related checks. See <a href="https://tracker.moodle.org/browse/MDL-29962" class="el">MDL-29962</a> for the background of why we have this - there are arguments for dropping this feature completely.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$users</td><td>List of users to check, consisting of objects, arrays or integer ids. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$serviceid</td><td>The id of the external service to check. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>List of missing capabilities: (int)userid =&gt; array of (string)capabilitynames </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga29dafbffe058e9c7b4031ace5a8c102b" name="ga29dafbffe058e9c7b4031ace5a8c102b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga29dafbffe058e9c7b4031ace5a8c102b">&#9670;&#160;</a></span>get_not_associated_external_functions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">webservice::get_not_associated_external_functions </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$serviceid</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get functions not included in a service. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$serviceid</td><td>service id </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>functions </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga635e239e4d82a1401f1720227063d101" name="ga635e239e4d82a1401f1720227063d101"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga635e239e4d82a1401f1720227063d101">&#9670;&#160;</a></span>get_service_required_capabilities()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">webservice::get_service_required_capabilities </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$serviceid</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get list of required capabilities of a service, sorted by functions Example of returned value: Array ( [core_group_create_groups] =&gt; Array ( [0] =&gt; moodle/course:managegroups ) </p>
<p>[core_enrol_get_enrolled_users] =&gt; Array ( [0] =&gt; moodle/user:viewdetails [1] =&gt; moodle/user:viewhiddendetails [2] =&gt; moodle/course:useremail [3] =&gt; moodle/user:update [4] =&gt; moodle/site:accessallgroups ) ) </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$serviceid</td><td>service id </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga23cf3d11b0fee6751d5f30aa886b1794" name="ga23cf3d11b0fee6751d5f30aa886b1794"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga23cf3d11b0fee6751d5f30aa886b1794">&#9670;&#160;</a></span>get_token_by_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">webservice::get_token_by_id </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$tokenid</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return a database token record for a token id. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$tokenid</td><td>token id </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">object</td><td>token </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga0ad1f1f1ffe93394aab102f94778f3af" name="ga0ad1f1f1ffe93394aab102f94778f3af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0ad1f1f1ffe93394aab102f94778f3af">&#9670;&#160;</a></span>get_token_by_id_with_details()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">webservice::get_token_by_id_with_details </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$tokenid</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return a token of an arbitrary user by tokenid, including details of the associated user and the service name. </p>
<p>If no tokens exist an exception is thrown</p>
<p>The returned value is a stdClass: -&gt;id token id -&gt;token -&gt;firstname user firstname -&gt;lastname -&gt;name service name</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$tokenid</td><td>token id </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga105cddca1f1d2cd267bec900c1eb378d" name="ga105cddca1f1d2cd267bec900c1eb378d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga105cddca1f1d2cd267bec900c1eb378d">&#9670;&#160;</a></span>get_user_capabilities()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">webservice::get_user_capabilities </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$userid</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get user capabilities (with context) Only useful for documentation purpose WARNING: do not use this "broken" function. </p>
<p>It was created in the goal to display some capabilities required by users. In theory we should not need to display this kind of information as the front end does not display it itself. In pratice, admins would like the info, for more info you can follow: <a href="https://tracker.moodle.org/browse/MDL-29962" class="el">MDL-29962</a></p>
<dl class="deprecated"><dt><b><a class="el" href="../../da/d58/deprecated.html#_deprecated001082">Deprecated</a></b></dt><dd>since <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 3.11 in <a href="https://tracker.moodle.org/browse/MDL-67748" class="el">MDL-67748</a> without a replacement. </dd></dl>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000340">Todo</a></b></dt><dd><a href="https://tracker.moodle.org/browse/MDL-70187" class="el">MDL-70187</a> Please delete this method completely in <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 4.3, thank you. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td>user id </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga05a25c8160b4243fccb0209401ae06ad" name="ga05a25c8160b4243fccb0209401ae06ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga05a25c8160b4243fccb0209401ae06ad">&#9670;&#160;</a></span>get_user_ws_token()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">webservice::get_user_ws_token </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$token</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a full database token record for a given token value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$token</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d6/da8/classmoodle__exception.html" title="Base Moodle Exception class.">moodle_exception</a></td><td>if there is multiple result </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gab1f0a7badbbbaa6ff395ed66cc23ef93" name="gab1f0a7badbbbaa6ff395ed66cc23ef93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab1f0a7badbbbaa6ff395ed66cc23ef93">&#9670;&#160;</a></span>get_user_ws_tokens()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">webservice::get_user_ws_tokens </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$userid</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return all tokens of a specific user. </p>
<ul>
<li>the service state (enabled/disabled)</li>
<li>the authorised user mode (restricted/not restricted)</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td>user id </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gae9ce3aa9634eaf2ea80a52f5cc6ca290" name="gae9ce3aa9634eaf2ea80a52f5cc6ca290"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae9ce3aa9634eaf2ea80a52f5cc6ca290">&#9670;&#160;</a></span>get_ws_authorised_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">webservice::get_ws_authorised_user </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$serviceid</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$userid</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return an authorised user with their options (ip/timecreated / validuntil...) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$serviceid</td><td>the service id to search against </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td>the user to search against </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaa5603a934a79eb0e31cc98dd3f959ecf" name="gaa5603a934a79eb0e31cc98dd3f959ecf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa5603a934a79eb0e31cc98dd3f959ecf">&#9670;&#160;</a></span>get_ws_authorised_users()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">webservice::get_ws_authorised_users </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$serviceid</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return list of allowed users with their options (ip/timecreated / validuntil...) for a given service. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$serviceid</td><td>the service id to search against </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array::$users</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga156a909c398998ccfc4c1aadecdf49c2" name="ga156a909c398998ccfc4c1aadecdf49c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga156a909c398998ccfc4c1aadecdf49c2">&#9670;&#160;</a></span>remove_external_function_from_service()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">webservice::remove_external_function_from_service </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$functionname</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$serviceid</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove a function from a service. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$functionname</td><td>function name </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$serviceid</td><td>service id </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga23fe26c66314412cc16b289362f79700" name="ga23fe26c66314412cc16b289362f79700"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga23fe26c66314412cc16b289362f79700">&#9670;&#160;</a></span>remove_ws_authorised_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">webservice::remove_ws_authorised_user </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$user</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$serviceid</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disallow a user to call a service. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$user</td><td>a user </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$serviceid</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gab512f05683aa607e3af410695cf5f521" name="gab512f05683aa607e3af410695cf5f521"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab512f05683aa607e3af410695cf5f521">&#9670;&#160;</a></span>service_function_exists()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">webservice::service_function_exists </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$functionname</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$serviceid</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Test whether an external function is already linked to a service. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$functionname</td><td>function name </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$serviceid</td><td>service id </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>true if a matching function exists for the service, else false. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d5/d5c/classdml__exception.html">dml_exception</a></td><td>if error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaa997e180b0b00f771b0676653f91c960" name="gaa997e180b0b00f771b0676653f91c960"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa997e180b0b00f771b0676653f91c960">&#9670;&#160;</a></span>simpletest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">webservice_test_client_interface::simpletest </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$serverurl</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$function</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$params</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Execute test client WS request. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$serverurl</td><td>server url (including the token param) </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$function</td><td>web service function name </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$params</td><td>parameters of the web service function </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">mixed</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="../../d8/d91/classwebservice__rest__test__client.html#a0bf22f1dcc2c42af2aeed100570d5167">webservice_rest_test_client</a>, and <a class="el" href="../../d2/d88/classwebservice__soap__test__client.html#aaa039db19d59304600c63b49fffa0e75">webservice_soap_test_client</a>.</p>

</div>
</div>
<a id="gae565020dd2a9250fe1402274cefbae02" name="gae565020dd2a9250fe1402274cefbae02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae565020dd2a9250fe1402274cefbae02">&#9670;&#160;</a></span>update_external_service()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">webservice::update_external_service </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$service</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update a service It modifies the timemodified automatically. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$service</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gacd6a7ef779f070b2843cca56866c92e1" name="gacd6a7ef779f070b2843cca56866c92e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacd6a7ef779f070b2843cca56866c92e1">&#9670;&#160;</a></span>update_token_lastaccess()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static webservice::update_token_lastaccess </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$token</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>$time</em><span class="paramdefsep"> = </span><span class="paramdefval">0</span></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Updates the last access time for a token. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$token</td><td>Token object (must include id, lastaccess fields) </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$time</td><td>Time of access (0 = use current time) </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d5/d5c/classdml__exception.html">dml_exception</a></td><td>If database error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga131f7b30250ccca1e9687cbe2e970d8f" name="ga131f7b30250ccca1e9687cbe2e970d8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga131f7b30250ccca1e9687cbe2e970d8f">&#9670;&#160;</a></span>update_ws_authorised_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">webservice::update_ws_authorised_user </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$user</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update allowed user settings (ip restriction, valid until...) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$user</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga7deed897047592d2fcfc3ebeba371a88" name="ga7deed897047592d2fcfc3ebeba371a88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7deed897047592d2fcfc3ebeba371a88">&#9670;&#160;</a></span>webservice_protocol_is_enabled()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">webservice_protocol_is_enabled </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>$protocol</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if a protocol is enabled. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$protocol</td><td>name of WS protocol ('rest', 'soap', ...) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>true if the protocol is enabled </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ga23d6d124a35cf4b31e238cc34be9d653" name="ga23d6d124a35cf4b31e238cc34be9d653"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga23d6d124a35cf4b31e238cc34be9d653">&#9670;&#160;</a></span>$services</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$services</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= <a class="code hl_namespace" href="../../d7/df9/namespacearray.html">array</a>(</div>
<div class="line">   <span class="stringliteral">&#39;Moodle mobile web service&#39;</span>  =&gt; <a class="code hl_namespace" href="../../d7/df9/namespacearray.html">array</a>(</div>
<div class="line">        <span class="stringliteral">&#39;functions&#39;</span> =&gt; <a class="code hl_namespace" href="../../d7/df9/namespacearray.html">array</a>(), </div>
<div class="line">        <span class="stringliteral">&#39;enabled&#39;</span> =&gt; 0,</div>
<div class="line">        <span class="stringliteral">&#39;restrictedusers&#39;</span> =&gt; 0,</div>
<div class="line">        <span class="stringliteral">&#39;shortname&#39;</span> =&gt; <a class="code hl_variable" href="../../d0/de1/group__core.html#gaf6fb70f9486cdc497645d14d9afc9a89">MOODLE_OFFICIAL_MOBILE_SERVICE</a>,</div>
<div class="line">        <span class="stringliteral">&#39;downloadfiles&#39;</span> =&gt; 1,</div>
<div class="line">        <span class="stringliteral">&#39;uploadfiles&#39;</span> =&gt; 1</div>
<div class="line">    ),</div>
<div class="line">)</div>
<div class="ttc" id="agroup__core_html_gaf6fb70f9486cdc497645d14d9afc9a89"><div class="ttname"><a href="../../d0/de1/group__core.html#gaf6fb70f9486cdc497645d14d9afc9a89">MOODLE_OFFICIAL_MOBILE_SERVICE</a></div><div class="ttdeci">const MOODLE_OFFICIAL_MOBILE_SERVICE</div><div class="ttdoc">Moodle mobile app service name.</div><div class="ttdef"><b>Definition</b> moodlelib.php:530</div></div>
<div class="ttc" id="anamespacearray_html"><div class="ttname"><a href="../../d7/df9/namespacearray.html">array</a></div><div class="ttdoc">('') &amp;#160;</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga47290742733da0de285e0562624448df" name="ga47290742733da0de285e0562624448df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga47290742733da0de285e0562624448df">&#9670;&#160;</a></span>TOKEN_LASTACCESS_UPDATE_SECS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int const webservice::TOKEN_LASTACCESS_UPDATE_SECS = 60</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Only update token last access once per this many seconds. </p>
<p>(This constant controls update of the external tokens last access field. There is a similar define LASTACCESS_UPDATE_SECS which controls update of the web site last access fields.) </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Mar 24 2024 02:31:07 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
