<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: gradingform_instance Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;4.1</span>
   </div>
   <div id="projectbrief">Moodle 4.1.1+ (Build: 20230203) (cb6dc699b8e)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="../../d5/d2f/classgradingform__instance-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">gradingform_instance Class Reference<div class="ingroups"><a class="el" href="../../d5/d44/group__core__grading.html">core_grading</a></div></div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for gradingform_instance:</div>
<div class="dyncontent">
 <div class="center">
  <img src="../../dc/d63/classgradingform__instance.png" usemap="#gradingform_5Finstance_map" alt=""/>
  <map id="gradingform_5Finstance_map" name="gradingform_5Finstance_map">
<area href="../../d3/d08/classgradingform__guide__instance.html" title="Class to manage one guide grading instance." alt="gradingform_guide_instance" shape="rect" coords="0,56,175,80"/>
<area href="../../d3/d6e/classgradingform__rubric__instance.html" title="Class to manage one rubric grading instance." alt="gradingform_rubric_instance" shape="rect" coords="185,56,360,80"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6dae428d928533d53421f118be36f51a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d63/classgradingform__instance.html#a6dae428d928533d53421f118be36f51a">__construct</a> ($controller, $data)</td></tr>
<tr class="memdesc:a6dae428d928533d53421f118be36f51a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates an instance.  <br /></td></tr>
<tr class="separator:a6dae428d928533d53421f118be36f51a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a739020bed2751c371facc41251e5464f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d63/classgradingform__instance.html#a739020bed2751c371facc41251e5464f">cancel</a> ()</td></tr>
<tr class="memdesc:a739020bed2751c371facc41251e5464f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes this (INCOMPLETE) instance from database.  <br /></td></tr>
<tr class="separator:a739020bed2751c371facc41251e5464f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9247f726b53d4c0caa57b43b214679bc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d63/classgradingform__instance.html#a9247f726b53d4c0caa57b43b214679bc">clear_attempt</a> ($data)</td></tr>
<tr class="memdesc:a9247f726b53d4c0caa57b43b214679bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes the attempt from the gradingform_*_fillings table.  <br /></td></tr>
<tr class="separator:a9247f726b53d4c0caa57b43b214679bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6277d231e2eb8352f83ac287e320f6c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d63/classgradingform__instance.html#aa6277d231e2eb8352f83ac287e320f6c">copy</a> ($raterid, $itemid)</td></tr>
<tr class="memdesc:aa6277d231e2eb8352f83ac287e320f6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Duplicates the instance before editing (optionally substitutes raterid and/or itemid with the specified values) Plugins may want to override this function to copy data from additional tables as well.  <br /></td></tr>
<tr class="separator:aa6277d231e2eb8352f83ac287e320f6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c774ce008e91113dd5c9c68c8de07f2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d63/classgradingform__instance.html#a8c774ce008e91113dd5c9c68c8de07f2">default_validation_error_message</a> ()</td></tr>
<tr class="memdesc:a8c774ce008e91113dd5c9c68c8de07f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the error message displayed if validation failed.  <br /></td></tr>
<tr class="separator:a8c774ce008e91113dd5c9c68c8de07f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48f9531d77cb1e00a2508d876c34a598"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d63/classgradingform__instance.html#a48f9531d77cb1e00a2508d876c34a598">get_controller</a> ()</td></tr>
<tr class="memdesc:a48f9531d77cb1e00a2508d876c34a598"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the controller.  <br /></td></tr>
<tr class="separator:a48f9531d77cb1e00a2508d876c34a598"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10871bf157ebf2d32defcb6c507bdaa5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d63/classgradingform__instance.html#a10871bf157ebf2d32defcb6c507bdaa5">get_current_instance</a> ()</td></tr>
<tr class="memdesc:a10871bf157ebf2d32defcb6c507bdaa5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current (active or needupdate) instance for the same raterid and itemid as this instance.  <br /></td></tr>
<tr class="separator:a10871bf157ebf2d32defcb6c507bdaa5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cf7a50acf609e4829248ad283a868b8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d63/classgradingform__instance.html#a2cf7a50acf609e4829248ad283a868b8">get_data</a> ($key)</td></tr>
<tr class="memdesc:a2cf7a50acf609e4829248ad283a868b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the specified element from object $this-&gt;data.  <br /></td></tr>
<tr class="separator:a2cf7a50acf609e4829248ad283a868b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14dca6c12551e8dadff0a25166a90267"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d63/classgradingform__instance.html#a14dca6c12551e8dadff0a25166a90267">get_grade</a> ()</td></tr>
<tr class="memdesc:a14dca6c12551e8dadff0a25166a90267"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the grade to be pushed to the gradebook.  <br /></td></tr>
<tr class="separator:a14dca6c12551e8dadff0a25166a90267"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9edfcd2d113853ba931f08e07340bc6b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d63/classgradingform__instance.html#a9edfcd2d113853ba931f08e07340bc6b">get_id</a> ()</td></tr>
<tr class="memdesc:a9edfcd2d113853ba931f08e07340bc6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns instance id.  <br /></td></tr>
<tr class="separator:a9edfcd2d113853ba931f08e07340bc6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa91f077625f885124edf85419f24c274"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d63/classgradingform__instance.html#aa91f077625f885124edf85419f24c274">get_status</a> ()</td></tr>
<tr class="memdesc:aa91f077625f885124edf85419f24c274"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns instance status.  <br /></td></tr>
<tr class="separator:aa91f077625f885124edf85419f24c274"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee61a35735597e0c44555c8828dc4e6b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d63/classgradingform__instance.html#aee61a35735597e0c44555c8828dc4e6b">is_empty_form</a> ($elementvalue)</td></tr>
<tr class="memdesc:aee61a35735597e0c44555c8828dc4e6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines whether the submitted form was empty.  <br /></td></tr>
<tr class="separator:aee61a35735597e0c44555c8828dc4e6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50755cfd2ab7cca711bcb906030da6bf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d63/classgradingform__instance.html#a50755cfd2ab7cca711bcb906030da6bf">render_grading_element</a> ($page, $gradingformelement)</td></tr>
<tr class="memdesc:a50755cfd2ab7cca711bcb906030da6bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns html for form element of type 'grading'.  <br /></td></tr>
<tr class="separator:a50755cfd2ab7cca711bcb906030da6bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42f4ab6c29fa1c8f51b57f045078dfe6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d63/classgradingform__instance.html#a42f4ab6c29fa1c8f51b57f045078dfe6">submit_and_get_grade</a> ($elementvalue, $itemid)</td></tr>
<tr class="memdesc:a42f4ab6c29fa1c8f51b57f045078dfe6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when teacher submits the grading form: updates the instance in <a class="el" href="../../d1/dc8/class_d_b.html" title="The main &quot;DB&quot; class is simply a container class with some static methods for creating DB objects as w...">DB</a>, marks it as ACTIVE and returns the grade to be pushed to the gradebook.  <br /></td></tr>
<tr class="separator:a42f4ab6c29fa1c8f51b57f045078dfe6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a800d227a0f7dababa1f6cf99056f8631"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d63/classgradingform__instance.html#a800d227a0f7dababa1f6cf99056f8631">update</a> ($elementvalue)</td></tr>
<tr class="memdesc:a800d227a0f7dababa1f6cf99056f8631"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the instance with the data received from grading form.  <br /></td></tr>
<tr class="separator:a800d227a0f7dababa1f6cf99056f8631"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fe1e1c95be35e7964bddf44f2a32d23"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d63/classgradingform__instance.html#a7fe1e1c95be35e7964bddf44f2a32d23">validate_grading_element</a> ($elementvalue)</td></tr>
<tr class="memdesc:a7fe1e1c95be35e7964bddf44f2a32d23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Server-side validation of the data received from grading form.  <br /></td></tr>
<tr class="separator:a7fe1e1c95be35e7964bddf44f2a32d23"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:acb0a6d53795688d5cfac0df335940e19"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d63/classgradingform__instance.html#acb0a6d53795688d5cfac0df335940e19">create_new</a> ($definitionid, $raterid, $itemid)</td></tr>
<tr class="memdesc:acb0a6d53795688d5cfac0df335940e19"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new empty instance in <a class="el" href="../../d1/dc8/class_d_b.html" title="The main &quot;DB&quot; class is simply a container class with some static methods for creating DB objects as w...">DB</a> and mark its status as INCOMPLETE.  <br /></td></tr>
<tr class="separator:acb0a6d53795688d5cfac0df335940e19"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a75db56c9869f35ef5aeb202924a7f55d"><td class="memItemLeft" align="right" valign="top"><a id="a75db56c9869f35ef5aeb202924a7f55d" name="a75db56c9869f35ef5aeb202924a7f55d"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>INSTANCE_STATUS_ACTIVE</b> = 1</td></tr>
<tr class="memdesc:a75db56c9869f35ef5aeb202924a7f55d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Valid istance status. <br /></td></tr>
<tr class="separator:a75db56c9869f35ef5aeb202924a7f55d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfaaf47c6c6cbc0513a10b19e16c658b"><td class="memItemLeft" align="right" valign="top"><a id="adfaaf47c6c6cbc0513a10b19e16c658b" name="adfaaf47c6c6cbc0513a10b19e16c658b"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>INSTANCE_STATUS_ARCHIVE</b> = 3</td></tr>
<tr class="memdesc:adfaaf47c6c6cbc0513a10b19e16c658b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Grader re-graded the student and this is the status for previous grade stored as history. <br /></td></tr>
<tr class="separator:adfaaf47c6c6cbc0513a10b19e16c658b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab44c6fbf5255a36b7afc8ff1baef4128"><td class="memItemLeft" align="right" valign="top"><a id="ab44c6fbf5255a36b7afc8ff1baef4128" name="ab44c6fbf5255a36b7afc8ff1baef4128"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>INSTANCE_STATUS_INCOMPLETE</b> = 0</td></tr>
<tr class="memdesc:ab44c6fbf5255a36b7afc8ff1baef4128"><td class="mdescLeft">&#160;</td><td class="mdescRight">The grader started grading but did clicked neither submit nor cancel. <br /></td></tr>
<tr class="separator:ab44c6fbf5255a36b7afc8ff1baef4128"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c7428633e0ac312edf3989c7c6e8351"><td class="memItemLeft" align="right" valign="top"><a id="a8c7428633e0ac312edf3989c7c6e8351" name="a8c7428633e0ac312edf3989c7c6e8351"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>INSTANCE_STATUS_NEEDUPDATE</b> = 2</td></tr>
<tr class="memdesc:a8c7428633e0ac312edf3989c7c6e8351"><td class="mdescLeft">&#160;</td><td class="mdescRight">The grade needs to be updated by grader (usually because of changes is grading method) <br /></td></tr>
<tr class="separator:a8c7428633e0ac312edf3989c7c6e8351"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a3ba006a915f610a42eff1e788d4bb757"><td class="memItemLeft" align="right" valign="top"><a id="a3ba006a915f610a42eff1e788d4bb757" name="a3ba006a915f610a42eff1e788d4bb757"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>make_active</b> ()</td></tr>
<tr class="memdesc:a3ba006a915f610a42eff1e788d4bb757"><td class="mdescLeft">&#160;</td><td class="mdescRight">Marks the instance as ACTIVE and current active instance (if exists) as ARCHIVE. <br /></td></tr>
<tr class="separator:a3ba006a915f610a42eff1e788d4bb757"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:aef9e0d99404d57523a4bb62461f31316"><td class="memItemLeft" align="right" valign="top"><a id="aef9e0d99404d57523a4bb62461f31316" name="aef9e0d99404d57523a4bb62461f31316"></a>
<a class="el" href="../../d5/d31/classgradingform__controller.html">gradingform_controller</a>&#160;</td><td class="memItemRight" valign="bottom"><b>$controller</b></td></tr>
<tr class="memdesc:aef9e0d99404d57523a4bb62461f31316"><td class="mdescLeft">&#160;</td><td class="mdescRight">link to the corresponding controller <br /></td></tr>
<tr class="separator:aef9e0d99404d57523a4bb62461f31316"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabc2e163b156d87518b17c65d6830c1c"><td class="memItemLeft" align="right" valign="top"><a id="aabc2e163b156d87518b17c65d6830c1c" name="aabc2e163b156d87518b17c65d6830c1c"></a>
stdClass&#160;</td><td class="memItemRight" valign="bottom"><b>$data</b></td></tr>
<tr class="memdesc:aabc2e163b156d87518b17c65d6830c1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">record from table grading_instances <br /></td></tr>
<tr class="separator:aabc2e163b156d87518b17c65d6830c1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a6dae428d928533d53421f118be36f51a" name="a6dae428d928533d53421f118be36f51a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6dae428d928533d53421f118be36f51a">&#9670;&#160;</a></span>__construct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gradingform_instance::__construct </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$controller</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates an instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d5/d31/classgradingform__controller.html">gradingform_controller</a></td><td class="paramname">$controller</td><td></td></tr>
    <tr><td class="paramtype">stdClass</td><td class="paramname">$data</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a739020bed2751c371facc41251e5464f" name="a739020bed2751c371facc41251e5464f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a739020bed2751c371facc41251e5464f">&#9670;&#160;</a></span>cancel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gradingform_instance::cancel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes this (INCOMPLETE) instance from database. </p>
<p>This function is invoked on cancelling the grading form and/or during cron cleanup. Plugins using additional tables must override this method to remove additional data. Note that if the teacher just closes the window or presses 'Back' button of the browser, this function is not invoked. </p>

<p>Reimplemented in <a class="el" href="../../d3/d08/classgradingform__guide__instance.html#aeb312c85cf737aee2fe5cfaff4d38032">gradingform_guide_instance</a>, and <a class="el" href="../../d3/d6e/classgradingform__rubric__instance.html#a82038938d6e4913908b5467f961998e6">gradingform_rubric_instance</a>.</p>

</div>
</div>
<a id="a9247f726b53d4c0caa57b43b214679bc" name="a9247f726b53d4c0caa57b43b214679bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9247f726b53d4c0caa57b43b214679bc">&#9670;&#160;</a></span>clear_attempt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gradingform_instance::clear_attempt </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes the attempt from the gradingform_*_fillings table. </p>
<p>This function is not abstract as to not break plugins that might use advanced grading. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$data</td><td>the attempt data </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../d3/d08/classgradingform__guide__instance.html#a30af80bd871de9ec3a3d413538c095e7">gradingform_guide_instance</a>, and <a class="el" href="../../d3/d6e/classgradingform__rubric__instance.html#abbcc71004d50bd4a0b1f95724c210674">gradingform_rubric_instance</a>.</p>

</div>
</div>
<a id="aa6277d231e2eb8352f83ac287e320f6c" name="aa6277d231e2eb8352f83ac287e320f6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6277d231e2eb8352f83ac287e320f6c">&#9670;&#160;</a></span>copy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gradingform_instance::copy </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$raterid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$itemid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Duplicates the instance before editing (optionally substitutes raterid and/or itemid with the specified values) Plugins may want to override this function to copy data from additional tables as well. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$raterid</td><td>value for raterid in the duplicate </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$itemid</td><td>value for itemid in the duplicate </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td>id of the new instance </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../d3/d08/classgradingform__guide__instance.html#ab127f83a017d622e5cbd6845975a43f4">gradingform_guide_instance</a>, and <a class="el" href="../../d3/d6e/classgradingform__rubric__instance.html#aedc7dc3bc4be42a86212efaf1ac05d71">gradingform_rubric_instance</a>.</p>

</div>
</div>
<a id="acb0a6d53795688d5cfac0df335940e19" name="acb0a6d53795688d5cfac0df335940e19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb0a6d53795688d5cfac0df335940e19">&#9670;&#160;</a></span>create_new()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static gradingform_instance::create_new </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$definitionid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$raterid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$itemid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a new empty instance in <a class="el" href="../../d1/dc8/class_d_b.html" title="The main &quot;DB&quot; class is simply a container class with some static methods for creating DB objects as w...">DB</a> and mark its status as INCOMPLETE. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$definitionid</td><td></td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$raterid</td><td></td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$itemid</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td>id of the created instance </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8c774ce008e91113dd5c9c68c8de07f2" name="a8c774ce008e91113dd5c9c68c8de07f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c774ce008e91113dd5c9c68c8de07f2">&#9670;&#160;</a></span>default_validation_error_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gradingform_instance::default_validation_error_message </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the error message displayed if validation failed. </p>
<p>If plugin wants to display custom message, the empty string should be returned here and the custom message should be output in render_grading_element()</p>
<p>Please note that in assignments grading in 2.2 the grading form is not validated properly and this message is not being displayed.</p>
<dl class="section see"><dt>See also</dt><dd>validate_grading_element() </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a48f9531d77cb1e00a2508d876c34a598" name="a48f9531d77cb1e00a2508d876c34a598"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48f9531d77cb1e00a2508d876c34a598">&#9670;&#160;</a></span>get_controller()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gradingform_instance::get_controller </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the controller. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="../../d5/d31/classgradingform__controller.html">gradingform_controller</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a10871bf157ebf2d32defcb6c507bdaa5" name="a10871bf157ebf2d32defcb6c507bdaa5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10871bf157ebf2d32defcb6c507bdaa5">&#9670;&#160;</a></span>get_current_instance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gradingform_instance::get_current_instance </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the current (active or needupdate) instance for the same raterid and itemid as this instance. </p>
<p>This function is useful to find the status of the currently modified instance</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="../../dc/d63/classgradingform__instance.html">gradingform_instance</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2cf7a50acf609e4829248ad283a868b8" name="a2cf7a50acf609e4829248ad283a868b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cf7a50acf609e4829248ad283a868b8">&#9670;&#160;</a></span>get_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gradingform_instance::get_data </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the specified element from object $this-&gt;data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$key</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">mixed</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a14dca6c12551e8dadff0a25166a90267" name="a14dca6c12551e8dadff0a25166a90267"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14dca6c12551e8dadff0a25166a90267">&#9670;&#160;</a></span>get_grade()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">gradingform_instance::get_grade </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">abstract</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculates the grade to be pushed to the gradebook. </p>
<p>Returned grade must be in range $this-&gt;get_controller()-&gt;get_grade_range() Plugins must returned grade converted to int unless $this-&gt;get_controller()-&gt;get_allow_grade_decimals() is true.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">float|int</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../d3/d08/classgradingform__guide__instance.html#ae2b40f783ccdde91a1d1a534f98ceecd">gradingform_guide_instance</a>, and <a class="el" href="../../d3/d6e/classgradingform__rubric__instance.html#af3cb7ce53deb8f3f176d8a20a669d94d">gradingform_rubric_instance</a>.</p>

</div>
</div>
<a id="a9edfcd2d113853ba931f08e07340bc6b" name="a9edfcd2d113853ba931f08e07340bc6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9edfcd2d113853ba931f08e07340bc6b">&#9670;&#160;</a></span>get_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gradingform_instance::get_id </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns instance id. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa91f077625f885124edf85419f24c274" name="aa91f077625f885124edf85419f24c274"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa91f077625f885124edf85419f24c274">&#9670;&#160;</a></span>get_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gradingform_instance::get_status </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns instance status. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aee61a35735597e0c44555c8828dc4e6b" name="aee61a35735597e0c44555c8828dc4e6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee61a35735597e0c44555c8828dc4e6b">&#9670;&#160;</a></span>is_empty_form()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gradingform_instance::is_empty_form </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$elementvalue</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determines whether the submitted form was empty. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$elementvalue</td><td>value of element submitted from the form </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">boolean</td><td>true if the form is empty </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../d3/d08/classgradingform__guide__instance.html#af8aa8773771c00e9d10a8e9229ec5c1d">gradingform_guide_instance</a>, and <a class="el" href="../../d3/d6e/classgradingform__rubric__instance.html#a4ad6c30b38874c5cfc286d3aad5c3725">gradingform_rubric_instance</a>.</p>

</div>
</div>
<a id="a50755cfd2ab7cca711bcb906030da6bf" name="a50755cfd2ab7cca711bcb906030da6bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50755cfd2ab7cca711bcb906030da6bf">&#9670;&#160;</a></span>render_grading_element()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">gradingform_instance::render_grading_element </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$gradingformelement</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">abstract</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns html for form element of type 'grading'. </p>
<p>If there is a form input element it must have the name $gradingformelement-&gt;<a class="el" href="../../d7/d30/group___mime.html#ga91d46cff00473a3952fe7bbc10c4d78e" title="Get the name of this part.">getName()</a>. If there are more than one input elements they MUST be elements of array with name $gradingformelement-&gt;<a class="el" href="../../d7/d30/group___mime.html#ga91d46cff00473a3952fe7bbc10c4d78e" title="Get the name of this part.">getName()</a>. Example: {NAME}[myelement1], {NAME}[myelement2][sub1], {NAME}[myelement2][sub2], etc. ( {NAME} is a shortcut for $gradingformelement-&gt;<a class="el" href="../../d7/d30/group___mime.html#ga91d46cff00473a3952fe7bbc10c4d78e" title="Get the name of this part.">getName()</a> ) After submitting the form the value of $_POST[{NAME}] is passed to the functions validate_grading_element() and submit_and_get_grade()</p>
<p>Plugins may use $gradingformelement-&gt;getValue() to get the value passed on previous form submit</p>
<p>When forming html it is a plugin's responsibility to analyze flags $gradingformelement-&gt;_flagFrozen and $gradingformelement-&gt;_persistantFreeze:</p>
<p>(_flagFrozen == false) =&gt; form element is editable</p>
<p>(_flagFrozen == false &amp;&amp; _persistantFreeze == true) =&gt; form element is not editable but all values are passed as hidden elements</p>
<p>(_flagFrozen == false &amp;&amp; _persistantFreeze == false) =&gt; form element is not editable and no values are passed as hidden elements</p>
<p>Plugins are welcome to use AJAX in the form element. But it is strongly recommended that the grading only becomes active when teacher presses 'Submit' button (the method submit_and_get_grade() is invoked)</p>
<p>Also client-side JS validation may be implemented here</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d5/d40/class_moodle_quick_form__grading.html">MoodleQuickForm_grading</a> in lib/form/grading.php</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../dc/ded/classmoodle__page.html">moodle_page</a></td><td class="paramname">$page</td><td></td></tr>
    <tr><td class="paramtype"><a class="el" href="../../d5/d40/class_moodle_quick_form__grading.html">MoodleQuickForm_grading</a></td><td class="paramname">$gradingformelement</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../d3/d08/classgradingform__guide__instance.html#a6bcf118ec5e2f65589560dfe22ccf6f3">gradingform_guide_instance</a>, and <a class="el" href="../../d3/d6e/classgradingform__rubric__instance.html#a5f2a74f6c148c8f8f05ac2c5b0171fbc">gradingform_rubric_instance</a>.</p>

</div>
</div>
<a id="a42f4ab6c29fa1c8f51b57f045078dfe6" name="a42f4ab6c29fa1c8f51b57f045078dfe6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42f4ab6c29fa1c8f51b57f045078dfe6">&#9670;&#160;</a></span>submit_and_get_grade()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gradingform_instance::submit_and_get_grade </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$elementvalue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$itemid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called when teacher submits the grading form: updates the instance in <a class="el" href="../../d1/dc8/class_d_b.html" title="The main &quot;DB&quot; class is simply a container class with some static methods for creating DB objects as w...">DB</a>, marks it as ACTIVE and returns the grade to be pushed to the gradebook. </p>
<p>$itemid must be specified here (it was not required when the instance was created, because it might not existed in draft)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$elementvalue</td><td></td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$itemid</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td>the grade on 0-100 scale </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a800d227a0f7dababa1f6cf99056f8631" name="a800d227a0f7dababa1f6cf99056f8631"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a800d227a0f7dababa1f6cf99056f8631">&#9670;&#160;</a></span>update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gradingform_instance::update </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$elementvalue</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the instance with the data received from grading form. </p>
<p>This function may be called via AJAX when grading is not yet completed, so it does not change the status of the instance.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$elementvalue</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../d3/d08/classgradingform__guide__instance.html#a309688c8470929aa1e46f2328655d342">gradingform_guide_instance</a>, and <a class="el" href="../../d3/d6e/classgradingform__rubric__instance.html#abd157fb2ee823075f5dde77f0ee1635f">gradingform_rubric_instance</a>.</p>

</div>
</div>
<a id="a7fe1e1c95be35e7964bddf44f2a32d23" name="a7fe1e1c95be35e7964bddf44f2a32d23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fe1e1c95be35e7964bddf44f2a32d23">&#9670;&#160;</a></span>validate_grading_element()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gradingform_instance::validate_grading_element </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$elementvalue</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Server-side validation of the data received from grading form. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">mixed</td><td class="paramname">$elementvalue</td><td>is the scalar or array received in $_POST </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">boolean</td><td>true if the form data is validated and contains no errors </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../d3/d08/classgradingform__guide__instance.html#abe37db07c1c97edfd2f8aab5327f4584">gradingform_guide_instance</a>, and <a class="el" href="../../d3/d6e/classgradingform__rubric__instance.html#a17d9c2676f4deacf24482b3d1cb5be3b">gradingform_rubric_instance</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>grade/grading/form/lib.php</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Feb 5 2023 03:10:51 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
