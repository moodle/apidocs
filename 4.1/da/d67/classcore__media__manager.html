<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: core_media_manager Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;4.1</span>
   </div>
   <div id="projectbrief">Moodle 4.1+ (Build: 20221222) (178aa052272)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="../../da/dc6/classcore__media__manager-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">core_media_manager Class Reference<div class="ingroups"><a class="el" href="../../df/d9b/group__core__media.html">core_media</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Manager for media files.  
 <a href="../../da/d67/classcore__media__manager.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2c1c85024d7f3dccfed60e63230686b3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d67/classcore__media__manager.html#a2c1c85024d7f3dccfed60e63230686b3">can_embed_url</a> (<a class="el" href="../../dc/d31/classmoodle__url.html">moodle_url</a> $url, $options=array())</td></tr>
<tr class="memdesc:a2c1c85024d7f3dccfed60e63230686b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether a file can be embedded.  <a href="../../da/d67/classcore__media__manager.html#a2c1c85024d7f3dccfed60e63230686b3">More...</a><br /></td></tr>
<tr class="separator:a2c1c85024d7f3dccfed60e63230686b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21917d1e2ea05913e54dc6df48761910"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d67/classcore__media__manager.html#a21917d1e2ea05913e54dc6df48761910">can_embed_urls</a> (array $urls, $options=array())</td></tr>
<tr class="memdesc:a21917d1e2ea05913e54dc6df48761910"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether a file can be embedded.  <a href="../../da/d67/classcore__media__manager.html#a21917d1e2ea05913e54dc6df48761910">More...</a><br /></td></tr>
<tr class="separator:a21917d1e2ea05913e54dc6df48761910"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5556f7a3d57582a8b75cf5d0b786e1e0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d67/classcore__media__manager.html#a5556f7a3d57582a8b75cf5d0b786e1e0">embed_alternatives</a> ($alternatives, $name='', $width=0, $height=0, $options=array())</td></tr>
<tr class="memdesc:a5556f7a3d57582a8b75cf5d0b786e1e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Renders media files (audio or video) using suitable embedded player.  <a href="../../da/d67/classcore__media__manager.html#a5556f7a3d57582a8b75cf5d0b786e1e0">More...</a><br /></td></tr>
<tr class="separator:a5556f7a3d57582a8b75cf5d0b786e1e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9439d4b950346572b344155ed034eb4e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d67/classcore__media__manager.html#a9439d4b950346572b344155ed034eb4e">embed_url</a> (<a class="el" href="../../dc/d31/classmoodle__url.html">moodle_url</a> $url, $name='', $width=0, $height=0, $options=array())</td></tr>
<tr class="memdesc:a9439d4b950346572b344155ed034eb4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Renders a media file (audio or video) using suitable embedded player.  <a href="../../da/d67/classcore__media__manager.html#a9439d4b950346572b344155ed034eb4e">More...</a><br /></td></tr>
<tr class="separator:a9439d4b950346572b344155ed034eb4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7d98824ff7f14704654242679a805f7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d67/classcore__media__manager.html#aa7d98824ff7f14704654242679a805f7">get_embeddable_markers</a> ()</td></tr>
<tr class="memdesc:aa7d98824ff7f14704654242679a805f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtains a list of markers that can be used in a regular expression when searching for URLs that can be embedded by any player type.  <a href="../../da/d67/classcore__media__manager.html#aa7d98824ff7f14704654242679a805f7">More...</a><br /></td></tr>
<tr class="separator:aa7d98824ff7f14704654242679a805f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb806f11b7de869f2bea7668c87cc4f2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d67/classcore__media__manager.html#abb806f11b7de869f2bea7668c87cc4f2">get_extension</a> (<a class="el" href="../../dc/d31/classmoodle__url.html">moodle_url</a> $url)</td></tr>
<tr class="memdesc:abb806f11b7de869f2bea7668c87cc4f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the file extension for a URL.  <a href="../../da/d67/classcore__media__manager.html#abb806f11b7de869f2bea7668c87cc4f2">More...</a><br /></td></tr>
<tr class="separator:abb806f11b7de869f2bea7668c87cc4f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a555a890929581fce475a446277f65311"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d67/classcore__media__manager.html#a555a890929581fce475a446277f65311">get_filename</a> (<a class="el" href="../../dc/d31/classmoodle__url.html">moodle_url</a> $url)</td></tr>
<tr class="memdesc:a555a890929581fce475a446277f65311"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtains the filename from the <a class="el" href="../../dc/d31/classmoodle__url.html" title="Class for creating and manipulating urls.">moodle_url</a>.  <a href="../../da/d67/classcore__media__manager.html#a555a890929581fce475a446277f65311">More...</a><br /></td></tr>
<tr class="separator:a555a890929581fce475a446277f65311"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e6b88e6c5ef5d468db0201d66c3dee7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d67/classcore__media__manager.html#a1e6b88e6c5ef5d468db0201d66c3dee7">get_mimetype</a> (<a class="el" href="../../dc/d31/classmoodle__url.html">moodle_url</a> $url)</td></tr>
<tr class="memdesc:a1e6b88e6c5ef5d468db0201d66c3dee7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Guesses MIME type for a <a class="el" href="../../dc/d31/classmoodle__url.html" title="Class for creating and manipulating urls.">moodle_url</a> based on file extension.  <a href="../../da/d67/classcore__media__manager.html#a1e6b88e6c5ef5d468db0201d66c3dee7">More...</a><br /></td></tr>
<tr class="separator:a1e6b88e6c5ef5d468db0201d66c3dee7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1044bc4d68f795be4d9eb5462d07250"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d67/classcore__media__manager.html#ac1044bc4d68f795be4d9eb5462d07250">setup</a> ()</td></tr>
<tr class="separator:ac1044bc4d68f795be4d9eb5462d07250"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e93630e524a5ea34c76d09a6c69f58f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d67/classcore__media__manager.html#a9e93630e524a5ea34c76d09a6c69f58f">split_alternatives</a> ($combinedurl, &amp;$width, &amp;$height)</td></tr>
<tr class="memdesc:a9e93630e524a5ea34c76d09a6c69f58f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a string containing multiple URLs separated by #, this will split it into an array of <a class="el" href="../../dc/d31/classmoodle__url.html" title="Class for creating and manipulating urls.">moodle_url</a> objects suitable for using when calling embed_alternatives.  <a href="../../da/d67/classcore__media__manager.html#a9e93630e524a5ea34c76d09a6c69f58f">More...</a><br /></td></tr>
<tr class="separator:a9e93630e524a5ea34c76d09a6c69f58f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a7a325476ea0d27694914c41f66fbb20c"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d67/classcore__media__manager.html#a7a325476ea0d27694914c41f66fbb20c">instance</a> ($page=null)</td></tr>
<tr class="memdesc:a7a325476ea0d27694914c41f66fbb20c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a singleton instance of a manager.  <a href="../../da/d67/classcore__media__manager.html#a7a325476ea0d27694914c41f66fbb20c">More...</a><br /></td></tr>
<tr class="separator:a7a325476ea0d27694914c41f66fbb20c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a825cc30d1500342bb8e9b5d55fc952ee"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d67/classcore__media__manager.html#a825cc30d1500342bb8e9b5d55fc952ee">reset_caches</a> ()</td></tr>
<tr class="memdesc:a825cc30d1500342bb8e9b5d55fc952ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets cached singleton instance.  <a href="../../da/d67/classcore__media__manager.html#a825cc30d1500342bb8e9b5d55fc952ee">More...</a><br /></td></tr>
<tr class="separator:a825cc30d1500342bb8e9b5d55fc952ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a7e5161f2f5b4a97c44ed8a7759633496"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d67/classcore__media__manager.html#a7e5161f2f5b4a97c44ed8a7759633496">OPTION_BLOCK</a> = 'block'</td></tr>
<tr class="memdesc:a7e5161f2f5b4a97c44ed8a7759633496"><td class="mdescLeft">&#160;</td><td class="mdescRight">Option: Put a div around the output (if not blank) so that it displays as a block using the 'resourcecontent' CSS class.  <a href="../../da/d67/classcore__media__manager.html#a7e5161f2f5b4a97c44ed8a7759633496">More...</a><br /></td></tr>
<tr class="separator:a7e5161f2f5b4a97c44ed8a7759633496"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3db6dc50fefd579b76361bf7260c5b31"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d67/classcore__media__manager.html#a3db6dc50fefd579b76361bf7260c5b31">OPTION_FALLBACK_TO_BLANK</a> = 'embedorblank'</td></tr>
<tr class="memdesc:a3db6dc50fefd579b76361bf7260c5b31"><td class="mdescLeft">&#160;</td><td class="mdescRight">Option: When embedding, if there is no matching embed, do not use the default link fallback player; instead return blank.  <a href="../../da/d67/classcore__media__manager.html#a3db6dc50fefd579b76361bf7260c5b31">More...</a><br /></td></tr>
<tr class="separator:a3db6dc50fefd579b76361bf7260c5b31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4fb90e674a29ad060173e3122e32f1f"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d67/classcore__media__manager.html#ab4fb90e674a29ad060173e3122e32f1f">OPTION_NO_LINK</a> = 'nolink'</td></tr>
<tr class="memdesc:ab4fb90e674a29ad060173e3122e32f1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Option: Disable text link fallback.  <a href="../../da/d67/classcore__media__manager.html#ab4fb90e674a29ad060173e3122e32f1f">More...</a><br /></td></tr>
<tr class="separator:ab4fb90e674a29ad060173e3122e32f1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa065932dd217a6c94876362ea50c3143"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d67/classcore__media__manager.html#aa065932dd217a6c94876362ea50c3143">OPTION_ORIGINAL_TEXT</a> = 'originaltext'</td></tr>
<tr class="memdesc:aa065932dd217a6c94876362ea50c3143"><td class="mdescLeft">&#160;</td><td class="mdescRight">Option: When the request for media players came from a text filter this option will contain the original HTML snippet, usually one of the tags:  or &lt;video&gt; or &lt;audio&gt;  <a href="../../da/d67/classcore__media__manager.html#aa065932dd217a6c94876362ea50c3143">More...</a><br /></td></tr>
<tr class="separator:aa065932dd217a6c94876362ea50c3143"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c88d581bf15ff98f7b4feec3b75a613"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d67/classcore__media__manager.html#a2c88d581bf15ff98f7b4feec3b75a613">OPTION_TRUSTED</a> = 'trusted'</td></tr>
<tr class="memdesc:a2c88d581bf15ff98f7b4feec3b75a613"><td class="mdescLeft">&#160;</td><td class="mdescRight">Option: Enable players which are only suitable for use when we trust the user who embedded the content.  <a href="../../da/d67/classcore__media__manager.html#a2c88d581bf15ff98f7b4feec3b75a613">More...</a><br /></td></tr>
<tr class="separator:a2c88d581bf15ff98f7b4feec3b75a613"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Manager for media files. </p>
<p >Used in file resources, media filter, and any other places that need to output embedded media.</p>
<p >Usage: $manager = <a class="el" href="../../da/d67/classcore__media__manager.html#a7a325476ea0d27694914c41f66fbb20c" title="Returns a singleton instance of a manager.">core_media_manager::instance()</a>;</p>
<dl class="section copyright"><dt>Copyright</dt><dd>2016 Marina Glancy </dd></dl>
<dl class="section author"><dt>Author</dt><dd>2011 The Open University </dd></dl>
<dl class="section user"><dt>License</dt><dd><a href="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later </dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a2c1c85024d7f3dccfed60e63230686b3" name="a2c1c85024d7f3dccfed60e63230686b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c1c85024d7f3dccfed60e63230686b3">&#9670;&#160;</a></span>can_embed_url()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_media_manager::can_embed_url </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d31/classmoodle__url.html">moodle_url</a>&#160;</td>
          <td class="paramname"><em>$url</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$options</em> = <code>array()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks whether a file can be embedded. </p>
<p >If this returns true you will get an embedded player; if this returns false, you will just get a download link.</p>
<p >This is a wrapper for can_embed_urls.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../dc/d31/classmoodle__url.html" title="Class for creating and manipulating urls.">moodle_url</a></td><td class="paramname">$url</td><td>URL of media file </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$options</td><td>Options (same as when embedding) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>True if file can be embedded </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a21917d1e2ea05913e54dc6df48761910" name="a21917d1e2ea05913e54dc6df48761910"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21917d1e2ea05913e54dc6df48761910">&#9670;&#160;</a></span>can_embed_urls()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_media_manager::can_embed_urls </td>
          <td>(</td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$urls</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$options</em> = <code>array()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks whether a file can be embedded. </p>
<p >If this returns true you will get an embedded player; if this returns false, you will just get a download link.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$urls</td><td>URL of media file and any alternatives (<a class="el" href="../../dc/d31/classmoodle__url.html" title="Class for creating and manipulating urls.">moodle_url</a>) </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$options</td><td>Options (same as when embedding) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>True if file can be embedded </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5556f7a3d57582a8b75cf5d0b786e1e0" name="a5556f7a3d57582a8b75cf5d0b786e1e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5556f7a3d57582a8b75cf5d0b786e1e0">&#9670;&#160;</a></span>embed_alternatives()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_media_manager::embed_alternatives </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$alternatives</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$name</em> = <code>''</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$width</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$height</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$options</em> = <code>array()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Renders media files (audio or video) using suitable embedded player. </p>
<p >The list of URLs should be alternative versions of the same content in multiple formats. If there is only one format it should have a single entry.</p>
<p >If the media files are not in a supported format, this will give students a download link to each format. The download link uses the filename unless you supply the optional name parameter.</p>
<p >Width and height are optional. If specified, these are suggested sizes and should be the exact values supplied by the user, if they come from user input. These will be treated as relating to the size of the video content, not including any player control bar.</p>
<p >For audio files, height will be ignored. For video files, a few formats work if you specify only width, but in general if you specify width you must specify height as well.</p>
<p >The $options array is passed through to the <a class="el" href="../../d7/d6a/classcore__media__player.html" title="Base class for media players.">core_media_player</a> classes that render the object tag. The keys can contain values from core_media::OPTION_xx.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$alternatives</td><td>Array of <a class="el" href="../../dc/d31/classmoodle__url.html" title="Class for creating and manipulating urls.">moodle_url</a> to media files </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$name</td><td>Optional user-readable name to display in download link </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$width</td><td>Width in pixels (optional) </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$height</td><td>Height in pixels (optional) </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$options</td><td>Array of key/value pairs </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>HTML content of embed </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9439d4b950346572b344155ed034eb4e" name="a9439d4b950346572b344155ed034eb4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9439d4b950346572b344155ed034eb4e">&#9670;&#160;</a></span>embed_url()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_media_manager::embed_url </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d31/classmoodle__url.html">moodle_url</a>&#160;</td>
          <td class="paramname"><em>$url</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$name</em> = <code>''</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$width</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$height</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$options</em> = <code>array()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Renders a media file (audio or video) using suitable embedded player. </p>
<p >See embed_alternatives function for full description of parameters. This function calls through to that one.</p>
<p >When using this function you can also specify width and height in the URL by including ?d=100x100 at the end. If specified in the URL, this will override the $width and $height parameters.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../dc/d31/classmoodle__url.html" title="Class for creating and manipulating urls.">moodle_url</a></td><td class="paramname">$url</td><td>Full URL of media file </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$name</td><td>Optional user-readable name to display in download link </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$width</td><td>Width in pixels (optional) </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$height</td><td>Height in pixels (optional) </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$options</td><td>Array of key/value pairs </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>HTML content of embed </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa7d98824ff7f14704654242679a805f7" name="aa7d98824ff7f14704654242679a805f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7d98824ff7f14704654242679a805f7">&#9670;&#160;</a></span>get_embeddable_markers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_media_manager::get_embeddable_markers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtains a list of markers that can be used in a regular expression when searching for URLs that can be embedded by any player type. </p>
<p >This string is used to improve peformance of regex matching by ensuring that the (presumably C) regex code can do a quick keyword check on the URL part of a link to see if it matches one of these, rather than having to go into PHP code for every single link to see if it can be embedded.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>String suitable for use in regex such as '(::.mp4|.flv)' </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abb806f11b7de869f2bea7668c87cc4f2" name="abb806f11b7de869f2bea7668c87cc4f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb806f11b7de869f2bea7668c87cc4f2">&#9670;&#160;</a></span>get_extension()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_media_manager::get_extension </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d31/classmoodle__url.html">moodle_url</a>&#160;</td>
          <td class="paramname"><em>$url</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the file extension for a URL. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../dc/d31/classmoodle__url.html" title="Class for creating and manipulating urls.">moodle_url</a></td><td class="paramname">$url</td><td>URL </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a555a890929581fce475a446277f65311" name="a555a890929581fce475a446277f65311"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a555a890929581fce475a446277f65311">&#9670;&#160;</a></span>get_filename()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_media_manager::get_filename </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d31/classmoodle__url.html">moodle_url</a>&#160;</td>
          <td class="paramname"><em>$url</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtains the filename from the <a class="el" href="../../dc/d31/classmoodle__url.html" title="Class for creating and manipulating urls.">moodle_url</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../dc/d31/classmoodle__url.html" title="Class for creating and manipulating urls.">moodle_url</a></td><td class="paramname">$url</td><td>URL </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>Filename only (not escaped) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1e6b88e6c5ef5d468db0201d66c3dee7" name="a1e6b88e6c5ef5d468db0201d66c3dee7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e6b88e6c5ef5d468db0201d66c3dee7">&#9670;&#160;</a></span>get_mimetype()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_media_manager::get_mimetype </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d31/classmoodle__url.html">moodle_url</a>&#160;</td>
          <td class="paramname"><em>$url</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Guesses MIME type for a <a class="el" href="../../dc/d31/classmoodle__url.html" title="Class for creating and manipulating urls.">moodle_url</a> based on file extension. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../dc/d31/classmoodle__url.html" title="Class for creating and manipulating urls.">moodle_url</a></td><td class="paramname">$url</td><td>URL </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>MIME type </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7a325476ea0d27694914c41f66fbb20c" name="a7a325476ea0d27694914c41f66fbb20c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a325476ea0d27694914c41f66fbb20c">&#9670;&#160;</a></span>instance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_media_manager::instance </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$page</em> = <code>null</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a singleton instance of a manager. </p>
<p >Note as of <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 3.3, this will call setup for you.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="../../da/d67/classcore__media__manager.html" title="Manager for media files.">core_media_manager</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a825cc30d1500342bb8e9b5d55fc952ee" name="a825cc30d1500342bb8e9b5d55fc952ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a825cc30d1500342bb8e9b5d55fc952ee">&#9670;&#160;</a></span>reset_caches()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_media_manager::reset_caches </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Resets cached singleton instance. </p>
<p >To be used after $CFG-&gt;media_plugins_sortorder is modified </p>

</div>
</div>
<a id="ac1044bc4d68f795be4d9eb5462d07250" name="ac1044bc4d68f795be4d9eb5462d07250"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1044bc4d68f795be4d9eb5462d07250">&#9670;&#160;</a></span>setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_media_manager::setup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="deprecated"><dt><b><a class="el" href="../../da/d58/deprecated.html#_deprecated000818">Deprecated:</a></b></dt><dd>since <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 3.3. The setup is now done in ::instance() so there is no need to call this. </dd></dl>

</div>
</div>
<a id="a9e93630e524a5ea34c76d09a6c69f58f" name="a9e93630e524a5ea34c76d09a6c69f58f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e93630e524a5ea34c76d09a6c69f58f">&#9670;&#160;</a></span>split_alternatives()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_media_manager::split_alternatives </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$combinedurl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;&#160;</td>
          <td class="paramname"><em>$width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;&#160;</td>
          <td class="paramname"><em>$height</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given a string containing multiple URLs separated by #, this will split it into an array of <a class="el" href="../../dc/d31/classmoodle__url.html" title="Class for creating and manipulating urls.">moodle_url</a> objects suitable for using when calling embed_alternatives. </p>
<p >Note that the input string should NOT be html-escaped (i.e. if it comes from html, call html_entity_decode first).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$combinedurl</td><td>String of 1 or more alternatives separated by # </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$width</td><td>Output variable: width (will be set to 0 if not specified) </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$height</td><td>Output variable: height (0 if not specified) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>Array of 1 or more <a class="el" href="../../dc/d31/classmoodle__url.html" title="Class for creating and manipulating urls.">moodle_url</a> objects </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a7e5161f2f5b4a97c44ed8a7759633496" name="a7e5161f2f5b4a97c44ed8a7759633496"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e5161f2f5b4a97c44ed8a7759633496">&#9670;&#160;</a></span>OPTION_BLOCK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const core_media_manager::OPTION_BLOCK = 'block'</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Option: Put a div around the output (if not blank) so that it displays as a block using the 'resourcecontent' CSS class. </p>
<p >To enable, set value to true. </p>

</div>
</div>
<a id="a3db6dc50fefd579b76361bf7260c5b31" name="a3db6dc50fefd579b76361bf7260c5b31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3db6dc50fefd579b76361bf7260c5b31">&#9670;&#160;</a></span>OPTION_FALLBACK_TO_BLANK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const core_media_manager::OPTION_FALLBACK_TO_BLANK = 'embedorblank'</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Option: When embedding, if there is no matching embed, do not use the default link fallback player; instead return blank. </p>
<p >This is different from OPTION_NO_LINK because this option still uses the fallback link if there is some kind of embedding. Use this option if you are going to check if the return value is blank and handle it specially.</p>
<p >To enable, set value to true. </p>

</div>
</div>
<a id="ab4fb90e674a29ad060173e3122e32f1f" name="ab4fb90e674a29ad060173e3122e32f1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4fb90e674a29ad060173e3122e32f1f">&#9670;&#160;</a></span>OPTION_NO_LINK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const core_media_manager::OPTION_NO_LINK = 'nolink'</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Option: Disable text link fallback. </p>
<p >Use this option if you are going to print a visible link anyway so it is pointless to have one as fallback.</p>
<p >To enable, set value to true. </p>

</div>
</div>
<a id="aa065932dd217a6c94876362ea50c3143" name="aa065932dd217a6c94876362ea50c3143"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa065932dd217a6c94876362ea50c3143">&#9670;&#160;</a></span>OPTION_ORIGINAL_TEXT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const core_media_manager::OPTION_ORIGINAL_TEXT = 'originaltext'</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Option: When the request for media players came from a text filter this option will contain the original HTML snippet, usually one of the tags:  or &lt;video&gt; or &lt;audio&gt; </p>
<p >Players that support other <a class="el" href="../../de/d63/class_h_t_m_l5.html">HTML5</a> features such as tracks may find them in this option. </p>

</div>
</div>
<a id="a2c88d581bf15ff98f7b4feec3b75a613" name="a2c88d581bf15ff98f7b4feec3b75a613"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c88d581bf15ff98f7b4feec3b75a613">&#9670;&#160;</a></span>OPTION_TRUSTED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const core_media_manager::OPTION_TRUSTED = 'trusted'</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Option: Enable players which are only suitable for use when we trust the user who embedded the content. </p>
<p >In the past, this option enabled the SWF player (which was removed). However, this setting will remain because it might be used by third-party plugins.</p>
<p >To enable, set value to true. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>media/classes/manager.php</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Dec 25 2022 03:01:13 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
