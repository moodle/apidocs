<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: completion_info Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;4.1</span>
   </div>
   <div id="projectbrief">Moodle 4.1.6+ (Build: 20231102) (dd115e572a0)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="../../db/d26/classcompletion__info-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">completion_info Class Reference<div class="ingroups"><a class="el" href="../../df/d9d/group__core__completion.html">core_completion</a></div></div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4f6355460528b6142be5ebb9f5ba2767" id="r_a4f6355460528b6142be5ebb9f5ba2767"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#a4f6355460528b6142be5ebb9f5ba2767">__construct</a> ($course)</td></tr>
<tr class="memdesc:a4f6355460528b6142be5ebb9f5ba2767"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs with course details.  <br /></td></tr>
<tr class="separator:a4f6355460528b6142be5ebb9f5ba2767"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf0212bb68351d4cce791bc7ca9cd413" id="r_abf0212bb68351d4cce791bc7ca9cd413"><td class="memItemLeft" align="right" valign="top"><a id="abf0212bb68351d4cce791bc7ca9cd413" name="abf0212bb68351d4cce791bc7ca9cd413"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>clear_criteria</b> ()</td></tr>
<tr class="memdesc:abf0212bb68351d4cce791bc7ca9cd413"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear old course completion criteria. <br /></td></tr>
<tr class="separator:abf0212bb68351d4cce791bc7ca9cd413"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a094825af112d1925db14752fda1b0659" id="r_a094825af112d1925db14752fda1b0659"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#a094825af112d1925db14752fda1b0659">count_course_user_data</a> ($user_id=null)</td></tr>
<tr class="memdesc:a094825af112d1925db14752fda1b0659"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines how much course completion data exists for a course.  <br /></td></tr>
<tr class="separator:a094825af112d1925db14752fda1b0659"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d2727a26927058ae191e8c72405c41f" id="r_a2d2727a26927058ae191e8c72405c41f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#a2d2727a26927058ae191e8c72405c41f">count_user_data</a> ($cm)</td></tr>
<tr class="memdesc:a2d2727a26927058ae191e8c72405c41f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines how much completion data exists for an activity.  <br /></td></tr>
<tr class="separator:a2d2727a26927058ae191e8c72405c41f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c15e392654ee3971a8a370ce36fe2a8" id="r_a8c15e392654ee3971a8a370ce36fe2a8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#a8c15e392654ee3971a8a370ce36fe2a8">delete_all_completion_data</a> ()</td></tr>
<tr class="memdesc:a8c15e392654ee3971a8a370ce36fe2a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes all activity and course completion data for an entire course (the below delete_all_state function does this for a single activity).  <br /></td></tr>
<tr class="separator:a8c15e392654ee3971a8a370ce36fe2a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16584f464ab92905f676ff44e700f3b2" id="r_a16584f464ab92905f676ff44e700f3b2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#a16584f464ab92905f676ff44e700f3b2">delete_all_state</a> ($cm)</td></tr>
<tr class="memdesc:a16584f464ab92905f676ff44e700f3b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes completion state related to an activity for all users.  <br /></td></tr>
<tr class="separator:a16584f464ab92905f676ff44e700f3b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff3595ff765d9bffa0ffeef641b5180e" id="r_aff3595ff765d9bffa0ffeef641b5180e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#aff3595ff765d9bffa0ffeef641b5180e">delete_course_completion_data</a> ()</td></tr>
<tr class="memdesc:aff3595ff765d9bffa0ffeef641b5180e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes all course completion completion data.  <br /></td></tr>
<tr class="separator:aff3595ff765d9bffa0ffeef641b5180e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed120400e68b54c12c27cd02b6296cba" id="r_aed120400e68b54c12c27cd02b6296cba"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#aed120400e68b54c12c27cd02b6296cba">display_help_icon</a> ()</td></tr>
<tr class="memdesc:aed120400e68b54c12c27cd02b6296cba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the 'Your progress' help icon, if completion tracking is enabled.  <br /></td></tr>
<tr class="separator:aed120400e68b54c12c27cd02b6296cba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa686725ac64a3ee77ba7cad5cec0a25" id="r_aaa686725ac64a3ee77ba7cad5cec0a25"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#aaa686725ac64a3ee77ba7cad5cec0a25">get_activities</a> ()</td></tr>
<tr class="memdesc:aaa686725ac64a3ee77ba7cad5cec0a25"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtains a list of activities for which completion is enabled on the course.  <br /></td></tr>
<tr class="separator:aaa686725ac64a3ee77ba7cad5cec0a25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a654abdd890eca0babeadc6f85ee23834" id="r_a654abdd890eca0babeadc6f85ee23834"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#a654abdd890eca0babeadc6f85ee23834">get_aggregation_method</a> ($criteriatype=null)</td></tr>
<tr class="memdesc:a654abdd890eca0babeadc6f85ee23834"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get aggregation method.  <br /></td></tr>
<tr class="separator:a654abdd890eca0babeadc6f85ee23834"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f6f79175bfdb7d1f7391778e693b6cf" id="r_a7f6f79175bfdb7d1f7391778e693b6cf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#a7f6f79175bfdb7d1f7391778e693b6cf">get_completion</a> ($user_id, $criteriatype)</td></tr>
<tr class="memdesc:a7f6f79175bfdb7d1f7391778e693b6cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a course completion for a user.  <br /></td></tr>
<tr class="separator:a7f6f79175bfdb7d1f7391778e693b6cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7a4cd01624e0eb49c55a10554800f61" id="r_ae7a4cd01624e0eb49c55a10554800f61"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#ae7a4cd01624e0eb49c55a10554800f61">get_completion_data</a> (int $coursemoduleid, int $userid, array $defaultdata)</td></tr>
<tr class="memdesc:ae7a4cd01624e0eb49c55a10554800f61"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get completion data include viewed field.  <br /></td></tr>
<tr class="separator:ae7a4cd01624e0eb49c55a10554800f61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb2a098420def28423a677fc92a32f05" id="r_abb2a098420def28423a677fc92a32f05"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#abb2a098420def28423a677fc92a32f05">get_completions</a> ($user_id, $criteriatype=null)</td></tr>
<tr class="memdesc:abb2a098420def28423a677fc92a32f05"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get all course criteria's completion objects for a user.  <br /></td></tr>
<tr class="separator:abb2a098420def28423a677fc92a32f05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f057cfb10122adda0464c62fe2a6f20" id="r_a3f057cfb10122adda0464c62fe2a6f20"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#a3f057cfb10122adda0464c62fe2a6f20">get_core_completion_state</a> (<a class="el" href="../../df/db9/classcm__info.html">cm_info</a> $cm, int $userid)</td></tr>
<tr class="memdesc:a3f057cfb10122adda0464c62fe2a6f20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the latest completion state for each criteria used in the module.  <br /></td></tr>
<tr class="separator:a3f057cfb10122adda0464c62fe2a6f20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a391f429a4b41d46337dbe8f47973a8d7" id="r_a391f429a4b41d46337dbe8f47973a8d7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#a391f429a4b41d46337dbe8f47973a8d7">get_criteria</a> ($criteriatype=null)</td></tr>
<tr class="memdesc:a391f429a4b41d46337dbe8f47973a8d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get course completion criteria.  <br /></td></tr>
<tr class="separator:a391f429a4b41d46337dbe8f47973a8d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a596ad99202c447153a78c521ec7956bf" id="r_a596ad99202c447153a78c521ec7956bf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#a596ad99202c447153a78c521ec7956bf">get_data</a> ($cm, $wholecourse=false, $userid=0, $unused=null)</td></tr>
<tr class="memdesc:a596ad99202c447153a78c521ec7956bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtains completion data for a particular activity and user (from the completion cache if available, or by SQL query)  <br /></td></tr>
<tr class="separator:a596ad99202c447153a78c521ec7956bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fc90bdcb3b43226d6549936c7c804fd" id="r_a7fc90bdcb3b43226d6549936c7c804fd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#a7fc90bdcb3b43226d6549936c7c804fd">get_grade_completion</a> (<a class="el" href="../../df/db9/classcm__info.html">cm_info</a> $cm, int $userid)</td></tr>
<tr class="memdesc:a7fc90bdcb3b43226d6549936c7c804fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetches the completion state for an activity completion's require grade completion requirement.  <br /></td></tr>
<tr class="separator:a7fc90bdcb3b43226d6549936c7c804fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af658b25372c90c460e6345b4428abbf5" id="r_af658b25372c90c460e6345b4428abbf5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#af658b25372c90c460e6345b4428abbf5">get_incomplete_criteria</a> ()</td></tr>
<tr class="separator:af658b25372c90c460e6345b4428abbf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4167024a9a10437cdea44ab04ecf89b" id="r_ab4167024a9a10437cdea44ab04ecf89b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#ab4167024a9a10437cdea44ab04ecf89b">get_num_tracked_users</a> ($where='', $whereparams=array(), $groupid=0)</td></tr>
<tr class="memdesc:ab4167024a9a10437cdea44ab04ecf89b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the number of users whose progress is tracked in this course.  <br /></td></tr>
<tr class="separator:ab4167024a9a10437cdea44ab04ecf89b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e237dd430c7517fffd29cd4e2e9d2cb" id="r_a4e237dd430c7517fffd29cd4e2e9d2cb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#a4e237dd430c7517fffd29cd4e2e9d2cb">get_progress_all</a> ($where='', $where_params=array(), $groupid=0, $<a class="el" href="../../dc/d71/group___imap___client.html#ga4bd31bcedb7b4943aac2da78d0d84afe">sort</a>='', $pagesize='', $start='', <a class="el" href="../../da/d04/classcontext.html">context</a> $extracontext=null)</td></tr>
<tr class="memdesc:a4e237dd430c7517fffd29cd4e2e9d2cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtains progress information across a course for all users on that course, or for all users in a specific group.  <br /></td></tr>
<tr class="separator:a4e237dd430c7517fffd29cd4e2e9d2cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78ae1c75c8395da2420a98670c5c2fdf" id="r_a78ae1c75c8395da2420a98670c5c2fdf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#a78ae1c75c8395da2420a98670c5c2fdf">get_tracked_users</a> ($where='', $whereparams=array(), $groupid=0, $<a class="el" href="../../dc/d71/group___imap___client.html#ga4bd31bcedb7b4943aac2da78d0d84afe">sort</a>='', $limitfrom='', $limitnum='', <a class="el" href="../../da/d04/classcontext.html">context</a> $extracontext=null)</td></tr>
<tr class="memdesc:a78ae1c75c8395da2420a98670c5c2fdf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return array of users whose progress is tracked in this course.  <br /></td></tr>
<tr class="separator:a78ae1c75c8395da2420a98670c5c2fdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55bbc5d27ca03f3efea3ad89f0ffec03" id="r_a55bbc5d27ca03f3efea3ad89f0ffec03"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#a55bbc5d27ca03f3efea3ad89f0ffec03">get_user_completion</a> ($user_id, $criteria)</td></tr>
<tr class="memdesc:a55bbc5d27ca03f3efea3ad89f0ffec03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get completion object for a user and a criteria.  <br /></td></tr>
<tr class="separator:a55bbc5d27ca03f3efea3ad89f0ffec03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae23d32d11d4c2c95310551eba3b473c6" id="r_ae23d32d11d4c2c95310551eba3b473c6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#ae23d32d11d4c2c95310551eba3b473c6">has_activities</a> ()</td></tr>
<tr class="memdesc:ae23d32d11d4c2c95310551eba3b473c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return whether or not the course has activities with completion enabled.  <br /></td></tr>
<tr class="separator:ae23d32d11d4c2c95310551eba3b473c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69372e660b65d42c2a0a6abb9053ff3c" id="r_a69372e660b65d42c2a0a6abb9053ff3c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#a69372e660b65d42c2a0a6abb9053ff3c">has_criteria</a> ()</td></tr>
<tr class="memdesc:a69372e660b65d42c2a0a6abb9053ff3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if course has completion criteria set.  <br /></td></tr>
<tr class="separator:a69372e660b65d42c2a0a6abb9053ff3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7faec9bb23556672ca6f57697918d2f4" id="r_a7faec9bb23556672ca6f57697918d2f4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#a7faec9bb23556672ca6f57697918d2f4">inform_grade_changed</a> ($cm, $item, $grade, $deleted, $isbulkupdate=false)</td></tr>
<tr class="memdesc:a7faec9bb23556672ca6f57697918d2f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called by grade code to inform the completion system when a grade has been changed.  <br /></td></tr>
<tr class="separator:a7faec9bb23556672ca6f57697918d2f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a252fde51fd4a9707725ea82664023a32" id="r_a252fde51fd4a9707725ea82664023a32"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#a252fde51fd4a9707725ea82664023a32">internal_get_state</a> ($cm, $userid, $current)</td></tr>
<tr class="memdesc:a252fde51fd4a9707725ea82664023a32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the completion state for an activity and user.  <br /></td></tr>
<tr class="separator:a252fde51fd4a9707725ea82664023a32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30037bd261b41e8b884dfe9d088f6b52" id="r_a30037bd261b41e8b884dfe9d088f6b52"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#a30037bd261b41e8b884dfe9d088f6b52">internal_set_data</a> ($cm, $data, $isbulkupdate=false)</td></tr>
<tr class="memdesc:a30037bd261b41e8b884dfe9d088f6b52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates completion data for a particular coursemodule and user (user is determined from $data).  <br /></td></tr>
<tr class="separator:a30037bd261b41e8b884dfe9d088f6b52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d299f998663cb6e51b372cdf7226705" id="r_a6d299f998663cb6e51b372cdf7226705"><td class="memItemLeft" align="right" valign="top">type&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#a6d299f998663cb6e51b372cdf7226705">internal_systemerror</a> ($<a class="el" href="../../d0/de1/group__core.html#ga43b8d30b879d4f09ceb059b02af2bc02">error</a>)</td></tr>
<tr class="memdesc:a6d299f998663cb6e51b372cdf7226705"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is to be used only for system errors (things that shouldn't happen) and not user-level errors.  <br /></td></tr>
<tr class="separator:a6d299f998663cb6e51b372cdf7226705"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af03c51287312ed0fef3a471d763c8931" id="r_af03c51287312ed0fef3a471d763c8931"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#af03c51287312ed0fef3a471d763c8931">is_course_complete</a> ($user_id)</td></tr>
<tr class="memdesc:af03c51287312ed0fef3a471d763c8931"><td class="mdescLeft">&#160;</td><td class="mdescRight">Has the supplied user completed this course.  <br /></td></tr>
<tr class="separator:af03c51287312ed0fef3a471d763c8931"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2bafbcf4b7a0c4bf8948945776f9277" id="r_ac2bafbcf4b7a0c4bf8948945776f9277"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#ac2bafbcf4b7a0c4bf8948945776f9277">is_course_locked</a> ()</td></tr>
<tr class="memdesc:ac2bafbcf4b7a0c4bf8948945776f9277"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if this course's completion criteria should be locked.  <br /></td></tr>
<tr class="separator:ac2bafbcf4b7a0c4bf8948945776f9277"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2a1efbfdd98e6c947a11f73530332f7" id="r_aa2a1efbfdd98e6c947a11f73530332f7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#aa2a1efbfdd98e6c947a11f73530332f7">is_enabled</a> ($cm=null)</td></tr>
<tr class="memdesc:aa2a1efbfdd98e6c947a11f73530332f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether completion is enabled in a particular course and possibly activity.  <br /></td></tr>
<tr class="separator:aa2a1efbfdd98e6c947a11f73530332f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd6a183ba259966f99c16bfd802fe014" id="r_acd6a183ba259966f99c16bfd802fe014"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#acd6a183ba259966f99c16bfd802fe014">is_tracked_user</a> ($userid)</td></tr>
<tr class="memdesc:acd6a183ba259966f99c16bfd802fe014"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks to see if the userid supplied has a tracked role in this course.  <br /></td></tr>
<tr class="separator:acd6a183ba259966f99c16bfd802fe014"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf6195b404ceb80ad0f914973fb79f2f" id="r_aaf6195b404ceb80ad0f914973fb79f2f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#aaf6195b404ceb80ad0f914973fb79f2f">print_help_icon</a> ()</td></tr>
<tr class="memdesc:aaf6195b404ceb80ad0f914973fb79f2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Displays the 'Your progress' help icon, if completion tracking is enabled.  <br /></td></tr>
<tr class="separator:aaf6195b404ceb80ad0f914973fb79f2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c98c211b2b059905b871f2dda40c452" id="r_a8c98c211b2b059905b871f2dda40c452"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#a8c98c211b2b059905b871f2dda40c452">reset_all_state</a> ($cm)</td></tr>
<tr class="memdesc:a8c98c211b2b059905b871f2dda40c452"><td class="mdescLeft">&#160;</td><td class="mdescRight">Recalculates completion state related to an activity for all users.  <br /></td></tr>
<tr class="separator:a8c98c211b2b059905b871f2dda40c452"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a189a0914ef1059d845f3502fa67d80" id="r_a3a189a0914ef1059d845f3502fa67d80"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#a3a189a0914ef1059d845f3502fa67d80">set_module_viewed</a> ($cm, $userid=0)</td></tr>
<tr class="memdesc:a3a189a0914ef1059d845f3502fa67d80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Marks a module as viewed.  <br /></td></tr>
<tr class="separator:a3a189a0914ef1059d845f3502fa67d80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae18ebb2a61462b3ad9885cb077f45a1d" id="r_ae18ebb2a61462b3ad9885cb077f45a1d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#ae18ebb2a61462b3ad9885cb077f45a1d">update_state</a> ($cm, $possibleresult=<a class="el" href="../../df/d9d/group__core__completion.html#ga9369f75bba1c04f19a6466d80793022d">COMPLETION_UNKNOWN</a>, $userid=0, $override=false, $isbulkupdate=false)</td></tr>
<tr class="memdesc:ae18ebb2a61462b3ad9885cb077f45a1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates (if necessary) the completion state of activity $cm for the given user.  <br /></td></tr>
<tr class="separator:ae18ebb2a61462b3ad9885cb077f45a1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a255959f99b6bf186b68ca99b4f0bc520" id="r_a255959f99b6bf186b68ca99b4f0bc520"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#a255959f99b6bf186b68ca99b4f0bc520">user_can_override_completion</a> ($user)</td></tr>
<tr class="memdesc:a255959f99b6bf186b68ca99b4f0bc520"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether the supplied user can override the activity completion statuses within the current course.  <br /></td></tr>
<tr class="separator:a255959f99b6bf186b68ca99b4f0bc520"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a7620ed3f4dc78770d7573f667286e5ea" id="r_a7620ed3f4dc78770d7573f667286e5ea"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#a7620ed3f4dc78770d7573f667286e5ea">aggregate_completion_states</a> ($type, $old, $new)</td></tr>
<tr class="memdesc:a7620ed3f4dc78770d7573f667286e5ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Aggregate activity completion state.  <br /></td></tr>
<tr class="separator:a7620ed3f4dc78770d7573f667286e5ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f97559669b59fa556cabfd9c88661b7" id="r_a8f97559669b59fa556cabfd9c88661b7"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#a8f97559669b59fa556cabfd9c88661b7">get_aggregation_methods</a> ()</td></tr>
<tr class="memdesc:a8f97559669b59fa556cabfd9c88661b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return array of aggregation methods.  <br /></td></tr>
<tr class="separator:a8f97559669b59fa556cabfd9c88661b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addb5285747b9ea095072741b762f0662" id="r_addb5285747b9ea095072741b762f0662"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#addb5285747b9ea095072741b762f0662">internal_get_grade_state</a> ($item, $grade, bool $returnpassfail=false)</td></tr>
<tr class="memdesc:addb5285747b9ea095072741b762f0662"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the completion state that would result from a graded item (where grade-based completion is turned on) based on the actual grade and settings.  <br /></td></tr>
<tr class="separator:addb5285747b9ea095072741b762f0662"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a334ff0b67bc166f9afcec1dc3815d448" id="r_a334ff0b67bc166f9afcec1dc3815d448"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#a334ff0b67bc166f9afcec1dc3815d448">is_enabled_for_site</a> ()</td></tr>
<tr class="memdesc:a334ff0b67bc166f9afcec1dc3815d448"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines whether completion is enabled across entire site.  <br /></td></tr>
<tr class="separator:a334ff0b67bc166f9afcec1dc3815d448"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a20a4c8334ab4f9abd0df1ae10d65f3ca" id="r_a20a4c8334ab4f9abd0df1ae10d65f3ca"><td class="memItemLeft" align="right" valign="top"><a id="a20a4c8334ab4f9abd0df1ae10d65f3ca" name="a20a4c8334ab4f9abd0df1ae10d65f3ca"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>$course_id</b></td></tr>
<tr class="separator:a20a4c8334ab4f9abd0df1ae10d65f3ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:aaebe5a60d395ffb5807454d96d87f5b6" id="r_aaebe5a60d395ffb5807454d96d87f5b6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dd8/classcompletion__info.html#aaebe5a60d395ffb5807454d96d87f5b6">get_other_cm_completion_data</a> (<a class="el" href="../../df/db9/classcm__info.html">cm_info</a> $cm, int $userid)</td></tr>
<tr class="memdesc:aaebe5a60d395ffb5807454d96d87f5b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds the user's custom completion data on the given course module.  <br /></td></tr>
<tr class="separator:aaebe5a60d395ffb5807454d96d87f5b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a4f6355460528b6142be5ebb9f5ba2767" name="a4f6355460528b6142be5ebb9f5ba2767"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f6355460528b6142be5ebb9f5ba2767">&#9670;&#160;</a></span>__construct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">completion_info::__construct </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$course</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructs with course details. </p>
<p>When instantiating a new completion info object you must provide a course object with at least id, and enablecompletion properties. Property cacherev is needed if you check completion of the current user since it is used for cache validation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$course</td><td><a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> course object. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a7620ed3f4dc78770d7573f667286e5ea" name="a7620ed3f4dc78770d7573f667286e5ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7620ed3f4dc78770d7573f667286e5ea">&#9670;&#160;</a></span>aggregate_completion_states()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static completion_info::aggregate_completion_states </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$old</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$new</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Aggregate activity completion state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$type</td><td>Aggregation type (COMPLETION_* constant) </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$old</td><td>Old state </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$new</td><td>New state </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a094825af112d1925db14752fda1b0659" name="a094825af112d1925db14752fda1b0659"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a094825af112d1925db14752fda1b0659">&#9670;&#160;</a></span>count_course_user_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">completion_info::count_course_user_data </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$user_id</em> = <code>null</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determines how much course completion data exists for a course. </p>
<p>This is used when deciding whether completion information should be 'locked' in the completion settings form and activity completion settings.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$user_id</td><td>Optionally only get course completion data for a single user </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td>The number of users who have completion data stored for this course, 0 if none </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2d2727a26927058ae191e8c72405c41f" name="a2d2727a26927058ae191e8c72405c41f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d2727a26927058ae191e8c72405c41f">&#9670;&#160;</a></span>count_user_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">completion_info::count_user_data </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$cm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determines how much completion data exists for an activity. </p>
<p>This is used when deciding whether completion information should be 'locked' in the module editing form.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../df/db9/classcm__info.html">cm_info</a></td><td class="paramname">$cm</td><td>Activity </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td>The number of users who have completion data stored for this activity, 0 if none </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8c15e392654ee3971a8a370ce36fe2a8" name="a8c15e392654ee3971a8a370ce36fe2a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c15e392654ee3971a8a370ce36fe2a8">&#9670;&#160;</a></span>delete_all_completion_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">completion_info::delete_all_completion_data </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes all activity and course completion data for an entire course (the below delete_all_state function does this for a single activity). </p>
<p>Used by course reset page. </p>

</div>
</div>
<a id="a16584f464ab92905f676ff44e700f3b2" name="a16584f464ab92905f676ff44e700f3b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16584f464ab92905f676ff44e700f3b2">&#9670;&#160;</a></span>delete_all_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">completion_info::delete_all_state </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$cm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes completion state related to an activity for all users. </p>
<p>Intended for use only when the activity itself is deleted.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass&#160;|&#160;<a class="el" href="../../df/db9/classcm__info.html">cm_info</a></td><td class="paramname">$cm</td><td>Activity </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aff3595ff765d9bffa0ffeef641b5180e" name="aff3595ff765d9bffa0ffeef641b5180e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff3595ff765d9bffa0ffeef641b5180e">&#9670;&#160;</a></span>delete_course_completion_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">completion_info::delete_course_completion_data </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes all course completion completion data. </p>
<p>Intended to be used when unlocking completion criteria settings. </p>

</div>
</div>
<a id="aed120400e68b54c12c27cd02b6296cba" name="aed120400e68b54c12c27cd02b6296cba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed120400e68b54c12c27cd02b6296cba">&#9670;&#160;</a></span>display_help_icon()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">completion_info::display_help_icon </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the 'Your progress' help icon, if completion tracking is enabled. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>HTML code for help icon, or blank if not needed </td></tr>
  </table>
  </dd>
</dl>
<dl class="deprecated"><dt><b><a class="el" href="../../da/d58/deprecated.html#_deprecated000213">Deprecated:</a></b></dt><dd>since <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 4.0 - The 'Your progress' info isn't displayed any more. </dd></dl>

</div>
</div>
<a id="aaa686725ac64a3ee77ba7cad5cec0a25" name="aaa686725ac64a3ee77ba7cad5cec0a25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa686725ac64a3ee77ba7cad5cec0a25">&#9670;&#160;</a></span>get_activities()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">completion_info::get_activities </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtains a list of activities for which completion is enabled on the course. </p>
<p>The list is ordered by the section order of those activities.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">cm_info[]</td><td>Array from $cmid =&gt; $cm of all activities with completion enabled, empty array if none </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a654abdd890eca0babeadc6f85ee23834" name="a654abdd890eca0babeadc6f85ee23834"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a654abdd890eca0babeadc6f85ee23834">&#9670;&#160;</a></span>get_aggregation_method()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">completion_info::get_aggregation_method </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$criteriatype</em> = <code>null</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get aggregation method. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$criteriatype</td><td>If none supplied, get overall aggregation method (optional) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td>One of COMPLETION_AGGREGATION_ALL or COMPLETION_AGGREGATION_ANY </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8f97559669b59fa556cabfd9c88661b7" name="a8f97559669b59fa556cabfd9c88661b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f97559669b59fa556cabfd9c88661b7">&#9670;&#160;</a></span>get_aggregation_methods()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static completion_info::get_aggregation_methods </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return array of aggregation methods. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7f6f79175bfdb7d1f7391778e693b6cf" name="a7f6f79175bfdb7d1f7391778e693b6cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f6f79175bfdb7d1f7391778e693b6cf">&#9670;&#160;</a></span>get_completion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">completion_info::get_completion </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$user_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$criteriatype</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a course completion for a user. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$user_id</td><td>User id </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$criteriatype</td><td>Specific criteria type to return </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool|completion_criteria_completion</td><td>returns false on fail </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae7a4cd01624e0eb49c55a10554800f61" name="ae7a4cd01624e0eb49c55a10554800f61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7a4cd01624e0eb49c55a10554800f61">&#9670;&#160;</a></span>get_completion_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">completion_info::get_completion_data </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>$coursemoduleid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>$userid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$defaultdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get completion data include viewed field. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$coursemoduleid</td><td>The course module id. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td>The User ID. </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$defaultdata</td><td>Default data completion. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>Data completion retrieved. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abb2a098420def28423a677fc92a32f05" name="abb2a098420def28423a677fc92a32f05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb2a098420def28423a677fc92a32f05">&#9670;&#160;</a></span>get_completions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">completion_info::get_completions </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$user_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$criteriatype</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get all course criteria's completion objects for a user. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$user_id</td><td>User id </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$criteriatype</td><td>Specific criteria type to return (optional) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3f057cfb10122adda0464c62fe2a6f20" name="a3f057cfb10122adda0464c62fe2a6f20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f057cfb10122adda0464c62fe2a6f20">&#9670;&#160;</a></span>get_core_completion_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">completion_info::get_core_completion_state </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/db9/classcm__info.html">cm_info</a>&#160;</td>
          <td class="paramname"><em>$cm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>$userid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the latest completion state for each criteria used in the module. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../df/db9/classcm__info.html">cm_info</a></td><td class="paramname">$cm</td><td>The corresponding module's information </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td>The id for the user we are calculating core completion state </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array::$data</td><td>The individualised core completion state used in the module. Consists of the following keys completiongrade, passgrade, viewed </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a391f429a4b41d46337dbe8f47973a8d7" name="a391f429a4b41d46337dbe8f47973a8d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a391f429a4b41d46337dbe8f47973a8d7">&#9670;&#160;</a></span>get_criteria()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">completion_info::get_criteria </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$criteriatype</em> = <code>null</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get course completion criteria. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$criteriatype</td><td>Specific criteria type to return (optional) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a596ad99202c447153a78c521ec7956bf" name="a596ad99202c447153a78c521ec7956bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a596ad99202c447153a78c521ec7956bf">&#9670;&#160;</a></span>get_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">completion_info::get_data </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$cm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$wholecourse</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$userid</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$unused</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtains completion data for a particular activity and user (from the completion cache if available, or by SQL query) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass&#160;|&#160;<a class="el" href="../../df/db9/classcm__info.html">cm_info</a></td><td class="paramname">$cm</td><td>Activity; only required field is -&gt;id </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$wholecourse</td><td>If true (default false) then, when necessary to fill the cache, retrieves information from the entire course not just for this one activity </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td>User ID or 0 (default) for current user </td></tr>
    <tr><td class="paramtype">null</td><td class="paramname">$unused</td><td>This parameter has been deprecated since 4.0 and should not be used anymore. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">object</td><td>Completion data. Record from course_modules_completion plus other completion statuses such as<ul>
<li>Completion status for 'must-receive-grade' completion rule.</li>
<li>Custom completion statuses defined by the activity module plugin. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7fc90bdcb3b43226d6549936c7c804fd" name="a7fc90bdcb3b43226d6549936c7c804fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fc90bdcb3b43226d6549936c7c804fd">&#9670;&#160;</a></span>get_grade_completion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">completion_info::get_grade_completion </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/db9/classcm__info.html">cm_info</a>&#160;</td>
          <td class="paramname"><em>$cm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>$userid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fetches the completion state for an activity completion's require grade completion requirement. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../df/db9/classcm__info.html">cm_info</a></td><td class="paramname">$cm</td><td>The course module information. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td>The user ID. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td>The completion state. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af658b25372c90c460e6345b4428abbf5" name="af658b25372c90c460e6345b4428abbf5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af658b25372c90c460e6345b4428abbf5">&#9670;&#160;</a></span>get_incomplete_criteria()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">completion_info::get_incomplete_criteria </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="deprecated"><dt><b><a class="el" href="../../da/d58/deprecated.html#_deprecated000214">Deprecated:</a></b></dt><dd>since <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 2.8 <a href="https://tracker.moodle.org/browse/MDL-46290" class="el">MDL-46290</a>. </dd></dl>

</div>
</div>
<a id="ab4167024a9a10437cdea44ab04ecf89b" name="ab4167024a9a10437cdea44ab04ecf89b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4167024a9a10437cdea44ab04ecf89b">&#9670;&#160;</a></span>get_num_tracked_users()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">completion_info::get_num_tracked_users </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$where</em> = <code>''</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$whereparams</em> = <code>array()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$groupid</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the number of users whose progress is tracked in this course. </p>
<p>Optionally supply a search's where clause, or a group id.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$where</td><td>Where clause sql (use 'u.whatever' for user table fields) </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$whereparams</td><td>Where clause params </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$groupid</td><td>Group id </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td>Number of tracked users </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aaebe5a60d395ffb5807454d96d87f5b6" name="aaebe5a60d395ffb5807454d96d87f5b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaebe5a60d395ffb5807454d96d87f5b6">&#9670;&#160;</a></span>get_other_cm_completion_data()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">completion_info::get_other_cm_completion_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/db9/classcm__info.html">cm_info</a>&#160;</td>
          <td class="paramname"><em>$cm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>$userid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds the user's custom completion data on the given course module. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../df/db9/classcm__info.html">cm_info</a></td><td class="paramname">$cm</td><td>The course module information. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td>The user ID. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>The additional completion data. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4e237dd430c7517fffd29cd4e2e9d2cb" name="a4e237dd430c7517fffd29cd4e2e9d2cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e237dd430c7517fffd29cd4e2e9d2cb">&#9670;&#160;</a></span>get_progress_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">completion_info::get_progress_all </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$where</em> = <code>''</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$where_params</em> = <code>array()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$groupid</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sort</em> = <code>''</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$pagesize</em> = <code>''</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$start</em> = <code>''</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d04/classcontext.html">context</a>&#160;</td>
          <td class="paramname"><em>$extracontext</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtains progress information across a course for all users on that course, or for all users in a specific group. </p>
<p>Intended for use when displaying progress.</p>
<p>This includes only users who, in course context, have one of the roles for which progress is tracked (the gradebookroles admin option) and are enrolled in course.</p>
<p>Users are included (in the first array) even if they do not have completion progress for any course-module.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">bool</td><td class="paramname">$sortfirstname</td><td>If true, sort by first name, otherwise sort by last name </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$where</td><td>Where clause sql (optional) </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$where_params</td><td>Where clause params (optional) </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$groupid</td><td>Group ID or 0 (default)/false for all groups </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$pagesize</td><td>Number of users to actually return (optional) </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$start</td><td>User to start at if paging (optional) </td></tr>
    <tr><td class="paramtype">context</td><td class="paramname">$extracontext</td><td>If set, includes extra user information fields as appropriate to display for current user in this context </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass</td><td>with -&gt;total and -&gt;start (same as $start) and -&gt;users; an array of user objects (like mdl_user id, firstname, lastname) containing an additional -&gt;progress array of coursemoduleid =&gt; completionstate </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a78ae1c75c8395da2420a98670c5c2fdf" name="a78ae1c75c8395da2420a98670c5c2fdf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78ae1c75c8395da2420a98670c5c2fdf">&#9670;&#160;</a></span>get_tracked_users()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">completion_info::get_tracked_users </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$where</em> = <code>''</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$whereparams</em> = <code>array()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$groupid</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sort</em> = <code>''</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$limitfrom</em> = <code>''</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$limitnum</em> = <code>''</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d04/classcontext.html">context</a>&#160;</td>
          <td class="paramname"><em>$extracontext</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return array of users whose progress is tracked in this course. </p>
<p>Optionally supply a search's where clause, group id, sorting, paging.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$where</td><td>Where clause sql, referring to 'u.' fields (optional) </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$whereparams</td><td>Where clause params (optional) </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$groupid</td><td>Group ID to restrict to (optional) </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$sort</td><td>Order by clause (optional) </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$limitfrom</td><td>Result start (optional) </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$limitnum</td><td>Result max size (optional) </td></tr>
    <tr><td class="paramtype">context</td><td class="paramname">$extracontext</td><td>If set, includes extra user information fields as appropriate to display for current user in this context </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>Array of user objects with user fields (including all identity fields) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a55bbc5d27ca03f3efea3ad89f0ffec03" name="a55bbc5d27ca03f3efea3ad89f0ffec03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55bbc5d27ca03f3efea3ad89f0ffec03">&#9670;&#160;</a></span>get_user_completion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">completion_info::get_user_completion </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$user_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$criteria</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get completion object for a user and a criteria. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$user_id</td><td>User id </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../d1/dc4/classcompletion__criteria.html">completion_criteria</a></td><td class="paramname">$criteria</td><td>Criteria object </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="../../db/d4f/classcompletion__criteria__completion.html">completion_criteria_completion</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae23d32d11d4c2c95310551eba3b473c6" name="ae23d32d11d4c2c95310551eba3b473c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae23d32d11d4c2c95310551eba3b473c6">&#9670;&#160;</a></span>has_activities()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">completion_info::has_activities </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return whether or not the course has activities with completion enabled. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">boolean</td><td>true when there is at least one activity with completion enabled. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a69372e660b65d42c2a0a6abb9053ff3c" name="a69372e660b65d42c2a0a6abb9053ff3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69372e660b65d42c2a0a6abb9053ff3c">&#9670;&#160;</a></span>has_criteria()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">completion_info::has_criteria </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if course has completion criteria set. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>Returns true if there are criteria </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7faec9bb23556672ca6f57697918d2f4" name="a7faec9bb23556672ca6f57697918d2f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7faec9bb23556672ca6f57697918d2f4">&#9670;&#160;</a></span>inform_grade_changed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">completion_info::inform_grade_changed </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$cm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$item</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$grade</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$deleted</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$isbulkupdate</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called by grade code to inform the completion system when a grade has been changed. </p>
<p>If the changed grade is used to determine completion for the course-module, then the completion status will be updated.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass&#160;|&#160;<a class="el" href="../../df/db9/classcm__info.html">cm_info</a></td><td class="paramname">$cm</td><td>Course-module for item that owns grade </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../d0/d8b/classgrade__item.html">grade_item</a></td><td class="paramname">$item</td><td>Grade item </td></tr>
    <tr><td class="paramtype">stdClass</td><td class="paramname">$grade</td><td></td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$deleted</td><td></td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$isbulkupdate</td><td>If bulk grade update is happening. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="addb5285747b9ea095072741b762f0662" name="addb5285747b9ea095072741b762f0662"></a>
<h2 class="memtitle"><span class="permalink"><a href="#addb5285747b9ea095072741b762f0662">&#9670;&#160;</a></span>internal_get_grade_state()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static completion_info::internal_get_grade_state </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$item</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$grade</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>$returnpassfail</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculates the completion state that would result from a graded item (where grade-based completion is turned on) based on the actual grade and settings. </p>
<p>Internal function. Not private, so we can unit-test it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d8b/classgrade__item.html">grade_item</a></td><td class="paramname">$item</td><td>an instance of <a class="el" href="../../d0/d8b/classgrade__item.html">grade_item</a> </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../dc/df3/classgrade__grade.html">grade_grade</a></td><td class="paramname">$grade</td><td>an instance of <a class="el" href="../../dc/df3/classgrade__grade.html">grade_grade</a> </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$returnpassfail</td><td>If course module has pass grade completion criteria </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td>Completion state e.g. COMPLETION_INCOMPLETE </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a252fde51fd4a9707725ea82664023a32" name="a252fde51fd4a9707725ea82664023a32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a252fde51fd4a9707725ea82664023a32">&#9670;&#160;</a></span>internal_get_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">completion_info::internal_get_state </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$cm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$userid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$current</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculates the completion state for an activity and user. </p>
<p>Internal function. Not private, so we can unit-test it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass&#160;|&#160;<a class="el" href="../../df/db9/classcm__info.html">cm_info</a></td><td class="paramname">$cm</td><td>Activity </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td>ID of user </td></tr>
    <tr><td class="paramtype">stdClass</td><td class="paramname">$current</td><td>Previous completion information from database </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">mixed</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a30037bd261b41e8b884dfe9d088f6b52" name="a30037bd261b41e8b884dfe9d088f6b52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30037bd261b41e8b884dfe9d088f6b52">&#9670;&#160;</a></span>internal_set_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">completion_info::internal_set_data </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$cm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$isbulkupdate</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates completion data for a particular coursemodule and user (user is determined from $data). </p>
<p>(Internal function. Not private, so we can unit-test it.)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass&#160;|&#160;<a class="el" href="../../df/db9/classcm__info.html">cm_info</a></td><td class="paramname">$cm</td><td>Activity </td></tr>
    <tr><td class="paramtype">stdClass</td><td class="paramname">$data</td><td>Data about completion for that user </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$isbulkupdate</td><td>If bulk grade update is happening. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6d299f998663cb6e51b372cdf7226705" name="a6d299f998663cb6e51b372cdf7226705"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d299f998663cb6e51b372cdf7226705">&#9670;&#160;</a></span>internal_systemerror()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">type completion_info::internal_systemerror </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$error</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is to be used only for system errors (things that shouldn't happen) and not user-level errors. </p>
<p>$CFG </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$error</td><td>Error string (will not be displayed to user unless debugging is enabled) </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d6/da8/classmoodle__exception.html" title="Base Moodle Exception class.">moodle_exception</a></td><td><a class="el" href="../../df/d70/class_exception.html">Exception</a> with the error string as debug info </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af03c51287312ed0fef3a471d763c8931" name="af03c51287312ed0fef3a471d763c8931"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af03c51287312ed0fef3a471d763c8931">&#9670;&#160;</a></span>is_course_complete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">completion_info::is_course_complete </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$user_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Has the supplied user completed this course. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$user_id</td><td>User's id </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">boolean</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac2bafbcf4b7a0c4bf8948945776f9277" name="ac2bafbcf4b7a0c4bf8948945776f9277"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2bafbcf4b7a0c4bf8948945776f9277">&#9670;&#160;</a></span>is_course_locked()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">completion_info::is_course_locked </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if this course's completion criteria should be locked. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">boolean</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa2a1efbfdd98e6c947a11f73530332f7" name="aa2a1efbfdd98e6c947a11f73530332f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2a1efbfdd98e6c947a11f73530332f7">&#9670;&#160;</a></span>is_enabled()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">completion_info::is_enabled </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$cm</em> = <code>null</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks whether completion is enabled in a particular course and possibly activity. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass&#160;|&#160;<a class="el" href="../../df/db9/classcm__info.html">cm_info</a></td><td class="paramname">$cm</td><td>Course-module object. If not specified, returns the course completion enable state. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">mixed</td><td>COMPLETION_ENABLED or COMPLETION_DISABLED (==0) in the case of site and course; COMPLETION_TRACKING_MANUAL, _AUTOMATIC or _NONE (==0) for a course-module. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a334ff0b67bc166f9afcec1dc3815d448" name="a334ff0b67bc166f9afcec1dc3815d448"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a334ff0b67bc166f9afcec1dc3815d448">&#9670;&#160;</a></span>is_enabled_for_site()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static completion_info::is_enabled_for_site </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determines whether completion is enabled across entire site. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>COMPLETION_ENABLED (true) if completion is enabled for the site, COMPLETION_DISABLED (false) if it's complete </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="acd6a183ba259966f99c16bfd802fe014" name="acd6a183ba259966f99c16bfd802fe014"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd6a183ba259966f99c16bfd802fe014">&#9670;&#160;</a></span>is_tracked_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">completion_info::is_tracked_user </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$userid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks to see if the userid supplied has a tracked role in this course. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td>User id </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aaf6195b404ceb80ad0f914973fb79f2f" name="aaf6195b404ceb80ad0f914973fb79f2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf6195b404ceb80ad0f914973fb79f2f">&#9670;&#160;</a></span>print_help_icon()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">completion_info::print_help_icon </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Displays the 'Your progress' help icon, if completion tracking is enabled. </p>
<p>Just prints the result of display_help_icon().</p>
<dl class="deprecated"><dt><b><a class="el" href="../../da/d58/deprecated.html#_deprecated000212">Deprecated:</a></b></dt><dd>since <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 2.0 - Use display_help_icon instead. </dd></dl>

</div>
</div>
<a id="a8c98c211b2b059905b871f2dda40c452" name="a8c98c211b2b059905b871f2dda40c452"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c98c211b2b059905b871f2dda40c452">&#9670;&#160;</a></span>reset_all_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">completion_info::reset_all_state </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$cm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Recalculates completion state related to an activity for all users. </p>
<p>Intended for use if completion conditions change. (This should be avoided as it may cause some things to become incomplete when they were previously complete, with the effect - for example - of hiding a later activity that was previously available.)</p>
<p>Resetting state of manual tickbox has same result as deleting state for it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stcClass&#160;|&#160;<a class="el" href="../../df/db9/classcm__info.html">cm_info</a></td><td class="paramname">$cm</td><td>Activity </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3a189a0914ef1059d845f3502fa67d80" name="a3a189a0914ef1059d845f3502fa67d80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a189a0914ef1059d845f3502fa67d80">&#9670;&#160;</a></span>set_module_viewed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">completion_info::set_module_viewed </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$cm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$userid</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Marks a module as viewed. </p>
<p>Should be called whenever a module is 'viewed' (it is up to the module how to determine that). Has no effect if viewing is not set as a completion condition.</p>
<p>Note that this function must be called before you print the page header because it is possible that the navigation block may depend on it. If you call it after printing the header, it shows a developer debug warning.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass&#160;|&#160;<a class="el" href="../../df/db9/classcm__info.html">cm_info</a></td><td class="paramname">$cm</td><td>Activity </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td>User ID or 0 (default) for current user </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae18ebb2a61462b3ad9885cb077f45a1d" name="ae18ebb2a61462b3ad9885cb077f45a1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae18ebb2a61462b3ad9885cb077f45a1d">&#9670;&#160;</a></span>update_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">completion_info::update_state </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$cm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$possibleresult</em> = <code><a class="el" href="../../df/d9d/group__core__completion.html#ga9369f75bba1c04f19a6466d80793022d">COMPLETION_UNKNOWN</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$userid</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$override</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$isbulkupdate</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates (if necessary) the completion state of activity $cm for the given user. </p>
<p>For manual completion, this function is called when completion is toggled with $possibleresult set to the target state.</p>
<p>For automatic completion, this function should be called every time a module does something which might influence a user's completion state. For example, if a forum provides options for marking itself 'completed' once a user makes N posts, this function should be called every time a user makes a new post. [After the post has been saved to the database]. When calling, you do not need to pass in the new completion state. Instead this function carries out completion calculation by checking grades and viewed state itself, and calling the involved module via mod_{modulename}::::completion::::custom_completion::get_overall_completion_state() to check module-specific conditions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass&#160;|&#160;<a class="el" href="../../df/db9/classcm__info.html">cm_info</a></td><td class="paramname">$cm</td><td>Course-module </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$possibleresult</td><td>Expected completion result. If the event that has just occurred (e.g. add post) can only result in making the activity complete when it wasn't before, use COMPLETION_COMPLETE. If the event that has just occurred (e.g. delete post) can only result in making the activity not complete when it was previously complete, use COMPLETION_INCOMPLETE. Otherwise use COMPLETION_UNKNOWN. Setting this value to something other than COMPLETION_UNKNOWN significantly improves performance because it will abandon processing early if the user's completion state already matches the expected result. For manual events, COMPLETION_COMPLETE or COMPLETION_INCOMPLETE must be used; these directly set the specified state. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td>User ID to be updated. Default 0 = current user </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$override</td><td>Whether manually overriding the existing completion state. </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$isbulkupdate</td><td>If bulk grade update is happening. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d6/da8/classmoodle__exception.html" title="Base Moodle Exception class.">moodle_exception</a></td><td>if trying to override without permission. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a255959f99b6bf186b68ca99b4f0bc520" name="a255959f99b6bf186b68ca99b4f0bc520"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a255959f99b6bf186b68ca99b4f0bc520">&#9670;&#160;</a></span>user_can_override_completion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">completion_info::user_can_override_completion </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$user</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check whether the supplied user can override the activity completion statuses within the current course. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$user</td><td>The user object. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>True if the user can override, false otherwise. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>lib/<b>completionlib.php</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Nov 5 2023 02:47:40 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
