<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: core\session\manager Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;4.1</span>
   </div>
   <div id="projectbrief">Moodle 4.1+ (Build: 20221209) (6b24f593029)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d9/d0f/namespacecore.html">core</a></li><li class="navelem"><a class="el" href="../../d3/d00/namespacecore_1_1session.html">session</a></li><li class="navelem"><a class="el" href="../../d0/dcb/classcore_1_1session_1_1manager.html">manager</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="#pro-static-attribs">Static Protected Attributes</a> &#124;
<a href="../../dd/de4/classcore_1_1session_1_1manager-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">core\session\manager Class Reference<div class="ingroups"><a class="el" href="../../d0/de1/group__core.html">core</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Session manager, this is the public <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> API for sessions.  
 <a href="../../d0/dcb/classcore_1_1session_1_1manager.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a07e878b6ec750d885942f0a914146fe0"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dcb/classcore_1_1session_1_1manager.html#a07e878b6ec750d885942f0a914146fe0">apply_concurrent_login_limit</a> ($userid, $sid=null)</td></tr>
<tr class="memdesc:a07e878b6ec750d885942f0a914146fe0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Terminate other sessions of current user depending on $CFG-&gt;limitconcurrentlogins restriction.  <a href="../../d0/dcb/classcore_1_1session_1_1manager.html#a07e878b6ec750d885942f0a914146fe0">More...</a><br /></td></tr>
<tr class="separator:a07e878b6ec750d885942f0a914146fe0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ddc7c9e3e2e8077a5f9c150e60177e8"><td class="memItemLeft" align="right" valign="top"><a id="a5ddc7c9e3e2e8077a5f9c150e60177e8" name="a5ddc7c9e3e2e8077a5f9c150e60177e8"></a>
static&#160;</td><td class="memItemRight" valign="bottom"><b>cleanup_recent_session_locks</b> ()</td></tr>
<tr class="memdesc:a5ddc7c9e3e2e8077a5f9c150e60177e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset recent session locks array if there is a time gap more than SESSION_RESET_GAP_THRESHOLD. <br /></td></tr>
<tr class="separator:a5ddc7c9e3e2e8077a5f9c150e60177e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acefcadc05977dd68b1398b18349bd4d3"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dcb/classcore_1_1session_1_1manager.html#acefcadc05977dd68b1398b18349bd4d3">display_blocking_page</a> ()</td></tr>
<tr class="memdesc:acefcadc05977dd68b1398b18349bd4d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Display the page which blocks other pages.  <a href="../../d0/dcb/classcore_1_1session_1_1manager.html#acefcadc05977dd68b1398b18349bd4d3">More...</a><br /></td></tr>
<tr class="separator:acefcadc05977dd68b1398b18349bd4d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82d6af4056d461ba32d5a05d1eedf372"><td class="memItemLeft" align="right" valign="top"><a id="a82d6af4056d461ba32d5a05d1eedf372" name="a82d6af4056d461ba32d5a05d1eedf372"></a>
static&#160;</td><td class="memItemRight" valign="bottom"><b>gc</b> ()</td></tr>
<tr class="memdesc:a82d6af4056d461ba32d5a05d1eedf372"><td class="mdescLeft">&#160;</td><td class="mdescRight">Periodic timed-out session cleanup. <br /></td></tr>
<tr class="separator:a82d6af4056d461ba32d5a05d1eedf372"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afec945e46f0dfb826e66c1e909b10e4a"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dcb/classcore_1_1session_1_1manager.html#afec945e46f0dfb826e66c1e909b10e4a">get_handler_class</a> ()</td></tr>
<tr class="memdesc:afec945e46f0dfb826e66c1e909b10e4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get fully qualified name of session handler class.  <a href="../../d0/dcb/classcore_1_1session_1_1manager.html#afec945e46f0dfb826e66c1e909b10e4a">More...</a><br /></td></tr>
<tr class="separator:afec945e46f0dfb826e66c1e909b10e4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca952b8e9d4baf457de8322be0cf9e42"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dcb/classcore_1_1session_1_1manager.html#aca952b8e9d4baf457de8322be0cf9e42">get_locked_page_at</a> ($time)</td></tr>
<tr class="memdesc:aca952b8e9d4baf457de8322be0cf9e42"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the page that blocks other pages at a specific timestamp.  <a href="../../d0/dcb/classcore_1_1session_1_1manager.html#aca952b8e9d4baf457de8322be0cf9e42">More...</a><br /></td></tr>
<tr class="separator:aca952b8e9d4baf457de8322be0cf9e42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a895a3b892c552ebefd67b143c8713351"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dcb/classcore_1_1session_1_1manager.html#a895a3b892c552ebefd67b143c8713351">get_login_token</a> ()</td></tr>
<tr class="memdesc:a895a3b892c552ebefd67b143c8713351"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current login token or generate a new one.  <a href="../../d0/dcb/classcore_1_1session_1_1manager.html#a895a3b892c552ebefd67b143c8713351">More...</a><br /></td></tr>
<tr class="separator:a895a3b892c552ebefd67b143c8713351"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf708f1ceb856eb64d626176bfa18ec3"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dcb/classcore_1_1session_1_1manager.html#acf708f1ceb856eb64d626176bfa18ec3">get_performance_info</a> ()</td></tr>
<tr class="memdesc:acf708f1ceb856eb64d626176bfa18ec3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns current page performance info.  <a href="../../d0/dcb/classcore_1_1session_1_1manager.html#acf708f1ceb856eb64d626176bfa18ec3">More...</a><br /></td></tr>
<tr class="separator:acf708f1ceb856eb64d626176bfa18ec3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af66dde82284169161d25e22e7a2b8f40"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dcb/classcore_1_1session_1_1manager.html#af66dde82284169161d25e22e7a2b8f40">get_realuser</a> ()</td></tr>
<tr class="memdesc:af66dde82284169161d25e22e7a2b8f40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the $USER object ignoring current login-as session.  <a href="../../d0/dcb/classcore_1_1session_1_1manager.html#af66dde82284169161d25e22e7a2b8f40">More...</a><br /></td></tr>
<tr class="separator:af66dde82284169161d25e22e7a2b8f40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a008def12208ed79ca5ab49bfa32b8047"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dcb/classcore_1_1session_1_1manager.html#a008def12208ed79ca5ab49bfa32b8047">get_recent_session_locks</a> ()</td></tr>
<tr class="memdesc:a008def12208ed79ca5ab49bfa32b8047"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the recent session locks array.  <a href="../../d0/dcb/classcore_1_1session_1_1manager.html#a008def12208ed79ca5ab49bfa32b8047">More...</a><br /></td></tr>
<tr class="separator:a008def12208ed79ca5ab49bfa32b8047"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa7087cf0bc2b90457e80c7e2dcd3f99"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dcb/classcore_1_1session_1_1manager.html#afa7087cf0bc2b90457e80c7e2dcd3f99">get_session_lock_info</a> ()</td></tr>
<tr class="memdesc:afa7087cf0bc2b90457e80c7e2dcd3f99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get session lock info of the current page.  <a href="../../d0/dcb/classcore_1_1session_1_1manager.html#afa7087cf0bc2b90457e80c7e2dcd3f99">More...</a><br /></td></tr>
<tr class="separator:afa7087cf0bc2b90457e80c7e2dcd3f99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85a6ea9dbb6d263832d40e7219d6fd2a"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dcb/classcore_1_1session_1_1manager.html#a85a6ea9dbb6d263832d40e7219d6fd2a">init_empty_session</a> (?bool $newsid=null)</td></tr>
<tr class="memdesc:a85a6ea9dbb6d263832d40e7219d6fd2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Empty current session, fill it with not-logged-in user info.  <a href="../../d0/dcb/classcore_1_1session_1_1manager.html#a85a6ea9dbb6d263832d40e7219d6fd2a">More...</a><br /></td></tr>
<tr class="separator:a85a6ea9dbb6d263832d40e7219d6fd2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64ebc652d26e5b9791073a2124c12e9e"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dcb/classcore_1_1session_1_1manager.html#a64ebc652d26e5b9791073a2124c12e9e">is_loggedinas</a> ()</td></tr>
<tr class="memdesc:a64ebc652d26e5b9791073a2124c12e9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is current $USER logged-in-as somebody else?  <a href="../../d0/dcb/classcore_1_1session_1_1manager.html#a64ebc652d26e5b9791073a2124c12e9e">More...</a><br /></td></tr>
<tr class="separator:a64ebc652d26e5b9791073a2124c12e9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c426e5b9e0fdc68aeb75754968157ba"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dcb/classcore_1_1session_1_1manager.html#a6c426e5b9e0fdc68aeb75754968157ba">keepalive</a> ($identifier='sessionerroruser', $component='<a class="el" href="../../d0/de1/group__core.html#ga43b8d30b879d4f09ceb059b02af2bc02">error</a>', $frequency=null, $timeout=0)</td></tr>
<tr class="memdesc:a6c426e5b9e0fdc68aeb75754968157ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a JS session keepalive to the page.  <a href="../../d0/dcb/classcore_1_1session_1_1manager.html#a6c426e5b9e0fdc68aeb75754968157ba">More...</a><br /></td></tr>
<tr class="separator:a6c426e5b9e0fdc68aeb75754968157ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afac9e6f1b1885c97b03ac7fe9c225fc0"><td class="memItemLeft" align="right" valign="top"><a id="afac9e6f1b1885c97b03ac7fe9c225fc0" name="afac9e6f1b1885c97b03ac7fe9c225fc0"></a>
static&#160;</td><td class="memItemRight" valign="bottom"><b>kill_all_sessions</b> ()</td></tr>
<tr class="memdesc:afac9e6f1b1885c97b03ac7fe9c225fc0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Terminate all sessions unconditionally. <br /></td></tr>
<tr class="separator:afac9e6f1b1885c97b03ac7fe9c225fc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96392daae41faf8e0fd77fab1ec22821"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dcb/classcore_1_1session_1_1manager.html#a96392daae41faf8e0fd77fab1ec22821">kill_session</a> ($sid)</td></tr>
<tr class="memdesc:a96392daae41faf8e0fd77fab1ec22821"><td class="mdescLeft">&#160;</td><td class="mdescRight">Terminate give session unconditionally.  <a href="../../d0/dcb/classcore_1_1session_1_1manager.html#a96392daae41faf8e0fd77fab1ec22821">More...</a><br /></td></tr>
<tr class="separator:a96392daae41faf8e0fd77fab1ec22821"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af430a6f02d024c47591054a2270c30c9"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dcb/classcore_1_1session_1_1manager.html#af430a6f02d024c47591054a2270c30c9">kill_user_sessions</a> ($userid, $keepsid=null)</td></tr>
<tr class="memdesc:af430a6f02d024c47591054a2270c30c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Terminate all sessions of given user unconditionally.  <a href="../../d0/dcb/classcore_1_1session_1_1manager.html#af430a6f02d024c47591054a2270c30c9">More...</a><br /></td></tr>
<tr class="separator:af430a6f02d024c47591054a2270c30c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa64cad81c56b3e9aa96860f1b5a732ba"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dcb/classcore_1_1session_1_1manager.html#aa64cad81c56b3e9aa96860f1b5a732ba">login_user</a> (\stdClass $user)</td></tr>
<tr class="memdesc:aa64cad81c56b3e9aa96860f1b5a732ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Login user, to be called from <a class="el" href="../../d0/de1/group__core.html#ga4acb6121854c6a3cd8c99c31fa2c4275" title="Call to complete the user login process after authenticate_user_login() has succeeded.">complete_user_login()</a> only.  <a href="../../d0/dcb/classcore_1_1session_1_1manager.html#aa64cad81c56b3e9aa96860f1b5a732ba">More...</a><br /></td></tr>
<tr class="separator:aa64cad81c56b3e9aa96860f1b5a732ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c5a804ee360f710bccc7734fc9619f3"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dcb/classcore_1_1session_1_1manager.html#a7c5a804ee360f710bccc7734fc9619f3">loginas</a> ($userid, <a class="el" href="../../da/d04/classcontext.html">context</a> $<a class="el" href="../../da/d04/classcontext.html">context</a>, $generateevent=true)</td></tr>
<tr class="memdesc:a7c5a804ee360f710bccc7734fc9619f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Login as another user - no security checks here.  <a href="../../d0/dcb/classcore_1_1session_1_1manager.html#a7c5a804ee360f710bccc7734fc9619f3">More...</a><br /></td></tr>
<tr class="separator:a7c5a804ee360f710bccc7734fc9619f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af47d84412411a56087551bf6aba3685a"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dcb/classcore_1_1session_1_1manager.html#af47d84412411a56087551bf6aba3685a">restart_with_write_lock</a> (bool $readonlysession)</td></tr>
<tr class="memdesc:af47d84412411a56087551bf6aba3685a"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the current session is not writeable, abort it, and re-open it requesting (and blocking) until a write lock is acquired.  <a href="../../d0/dcb/classcore_1_1session_1_1manager.html#af47d84412411a56087551bf6aba3685a">More...</a><br /></td></tr>
<tr class="separator:af47d84412411a56087551bf6aba3685a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09951a2b97868a3c82e3f6f198779984"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dcb/classcore_1_1session_1_1manager.html#a09951a2b97868a3c82e3f6f198779984">session_exists</a> ($sid)</td></tr>
<tr class="memdesc:a09951a2b97868a3c82e3f6f198779984"><td class="mdescLeft">&#160;</td><td class="mdescRight">Does the PHP session with given id exist?  <a href="../../d0/dcb/classcore_1_1session_1_1manager.html#a09951a2b97868a3c82e3f6f198779984">More...</a><br /></td></tr>
<tr class="separator:a09951a2b97868a3c82e3f6f198779984"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e8c85665baea9b94f2a05927248b85b"><td class="memItemLeft" align="right" valign="top"><a id="a0e8c85665baea9b94f2a05927248b85b" name="a0e8c85665baea9b94f2a05927248b85b"></a>
static&#160;</td><td class="memItemRight" valign="bottom"><b>sessionlock_debugging</b> ()</td></tr>
<tr class="memdesc:a0e8c85665baea9b94f2a05927248b85b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Display debugging info about slow and blocked script. <br /></td></tr>
<tr class="separator:a0e8c85665baea9b94f2a05927248b85b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40ddab7d9e7aef89bf2cb4b233b60429"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dcb/classcore_1_1session_1_1manager.html#a40ddab7d9e7aef89bf2cb4b233b60429">set_user</a> (\stdClass $user)</td></tr>
<tr class="memdesc:a40ddab7d9e7aef89bf2cb4b233b60429"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set current user.  <a href="../../d0/dcb/classcore_1_1session_1_1manager.html#a40ddab7d9e7aef89bf2cb4b233b60429">More...</a><br /></td></tr>
<tr class="separator:a40ddab7d9e7aef89bf2cb4b233b60429"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa67c59fdd86d1d88741f97a5e1c3898b"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dcb/classcore_1_1session_1_1manager.html#aa67c59fdd86d1d88741f97a5e1c3898b">start</a> ()</td></tr>
<tr class="memdesc:aa67c59fdd86d1d88741f97a5e1c3898b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start user session.  <a href="../../d0/dcb/classcore_1_1session_1_1manager.html#aa67c59fdd86d1d88741f97a5e1c3898b">More...</a><br /></td></tr>
<tr class="separator:aa67c59fdd86d1d88741f97a5e1c3898b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85d56e9e90eab4e333eeb8ea41eb3459"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dcb/classcore_1_1session_1_1manager.html#a85d56e9e90eab4e333eeb8ea41eb3459">terminate_current</a> ()</td></tr>
<tr class="memdesc:a85d56e9e90eab4e333eeb8ea41eb3459"><td class="mdescLeft">&#160;</td><td class="mdescRight">Terminate current user session.  <a href="../../d0/dcb/classcore_1_1session_1_1manager.html#a85d56e9e90eab4e333eeb8ea41eb3459">More...</a><br /></td></tr>
<tr class="separator:a85d56e9e90eab4e333eeb8ea41eb3459"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5343f1374666fe3fe978649403ddc9f8"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dcb/classcore_1_1session_1_1manager.html#a5343f1374666fe3fe978649403ddc9f8">time_remaining</a> ($sid)</td></tr>
<tr class="memdesc:a5343f1374666fe3fe978649403ddc9f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the number of seconds remaining in the current session.  <a href="../../d0/dcb/classcore_1_1session_1_1manager.html#a5343f1374666fe3fe978649403ddc9f8">More...</a><br /></td></tr>
<tr class="separator:a5343f1374666fe3fe978649403ddc9f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab335ee85f73e9cd22d33cf2879199b36"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dcb/classcore_1_1session_1_1manager.html#ab335ee85f73e9cd22d33cf2879199b36">touch_session</a> ($sid)</td></tr>
<tr class="memdesc:ab335ee85f73e9cd22d33cf2879199b36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fake last access for given session, this prevents session timeout.  <a href="../../d0/dcb/classcore_1_1session_1_1manager.html#ab335ee85f73e9cd22d33cf2879199b36">More...</a><br /></td></tr>
<tr class="separator:ab335ee85f73e9cd22d33cf2879199b36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab43992ae2ebbeac1f85c8fc6ae65fc93"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dcb/classcore_1_1session_1_1manager.html#ab43992ae2ebbeac1f85c8fc6ae65fc93">update_recent_session_locks</a> ($sessionlock)</td></tr>
<tr class="memdesc:ab43992ae2ebbeac1f85c8fc6ae65fc93"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the recent session locks.  <a href="../../d0/dcb/classcore_1_1session_1_1manager.html#ab43992ae2ebbeac1f85c8fc6ae65fc93">More...</a><br /></td></tr>
<tr class="separator:ab43992ae2ebbeac1f85c8fc6ae65fc93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc2ea9b2bc901deacf247646d24893ba"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dcb/classcore_1_1session_1_1manager.html#abc2ea9b2bc901deacf247646d24893ba">validate_login_token</a> ($token=false)</td></tr>
<tr class="memdesc:abc2ea9b2bc901deacf247646d24893ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check the submitted value against the stored login token.  <a href="../../d0/dcb/classcore_1_1session_1_1manager.html#abc2ea9b2bc901deacf247646d24893ba">More...</a><br /></td></tr>
<tr class="separator:abc2ea9b2bc901deacf247646d24893ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e0d3b70cc2af2f0dcc3751d82591933"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dcb/classcore_1_1session_1_1manager.html#a7e0d3b70cc2af2f0dcc3751d82591933">write_close</a> ()</td></tr>
<tr class="memdesc:a7e0d3b70cc2af2f0dcc3751d82591933"><td class="mdescLeft">&#160;</td><td class="mdescRight">No more changes in session expected.  <a href="../../d0/dcb/classcore_1_1session_1_1manager.html#a7e0d3b70cc2af2f0dcc3751d82591933">More...</a><br /></td></tr>
<tr class="separator:a7e0d3b70cc2af2f0dcc3751d82591933"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:ae8f528c6c8475c99aaaf5eab556e9380"><td class="memItemLeft" align="right" valign="top"><a id="ae8f528c6c8475c99aaaf5eab556e9380" name="ae8f528c6c8475c99aaaf5eab556e9380"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>MAXIMUM_STORED_SESSION_HISTORY</b> = 50</td></tr>
<tr class="memdesc:ae8f528c6c8475c99aaaf5eab556e9380"><td class="mdescLeft">&#160;</td><td class="mdescRight">A hard cutoff of maximum stored history. <br /></td></tr>
<tr class="separator:ae8f528c6c8475c99aaaf5eab556e9380"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ad0097217d012fcd8ff66550516a1b3"><td class="memItemLeft" align="right" valign="top"><a id="a5ad0097217d012fcd8ff66550516a1b3" name="a5ad0097217d012fcd8ff66550516a1b3"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>SESSION_RESET_GAP_THRESHOLD</b> = 1</td></tr>
<tr class="memdesc:a5ad0097217d012fcd8ff66550516a1b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">The recent session locks array is reset if there is a time gap more than this value in seconds. <br /></td></tr>
<tr class="separator:a5ad0097217d012fcd8ff66550516a1b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-static-methods" name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr class="memitem:abe6a3fa2149fc75c2541a5d0c7b3cfe0"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dcb/classcore_1_1session_1_1manager.html#abe6a3fa2149fc75c2541a5d0c7b3cfe0">add_session_record</a> ($userid)</td></tr>
<tr class="memdesc:abe6a3fa2149fc75c2541a5d0c7b3cfe0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Insert new empty session record.  <a href="../../d0/dcb/classcore_1_1session_1_1manager.html#abe6a3fa2149fc75c2541a5d0c7b3cfe0">More...</a><br /></td></tr>
<tr class="separator:abe6a3fa2149fc75c2541a5d0c7b3cfe0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfc68196c1f6a0e8445dc8d9d04961f2"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dcb/classcore_1_1session_1_1manager.html#adfc68196c1f6a0e8445dc8d9d04961f2">check_security</a> ()</td></tr>
<tr class="memdesc:adfc68196c1f6a0e8445dc8d9d04961f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do various session security checks.  <a href="../../d0/dcb/classcore_1_1session_1_1manager.html#adfc68196c1f6a0e8445dc8d9d04961f2">More...</a><br /></td></tr>
<tr class="separator:adfc68196c1f6a0e8445dc8d9d04961f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfff87faf8a43a3e36a9a759d72a1587"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dcb/classcore_1_1session_1_1manager.html#adfff87faf8a43a3e36a9a759d72a1587">initialise_user_session</a> ($newsid)</td></tr>
<tr class="memdesc:adfff87faf8a43a3e36a9a759d72a1587"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise $_SESSION, handles google access and sets up not-logged-in user properly.  <a href="../../d0/dcb/classcore_1_1session_1_1manager.html#adfff87faf8a43a3e36a9a759d72a1587">More...</a><br /></td></tr>
<tr class="separator:adfff87faf8a43a3e36a9a759d72a1587"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a793541d2d93ad18d5db530c50aa616bb"><td class="memItemLeft" align="right" valign="top"><a id="a793541d2d93ad18d5db530c50aa616bb" name="a793541d2d93ad18d5db530c50aa616bb"></a>
static&#160;</td><td class="memItemRight" valign="bottom"><b>load_handler</b> ()</td></tr>
<tr class="memdesc:a793541d2d93ad18d5db530c50aa616bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create handler instance. <br /></td></tr>
<tr class="separator:a793541d2d93ad18d5db530c50aa616bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad085b7ef35338ed1ddfa4dbfe3d68a13"><td class="memItemLeft" align="right" valign="top"><a id="ad085b7ef35338ed1ddfa4dbfe3d68a13" name="ad085b7ef35338ed1ddfa4dbfe3d68a13"></a>
static&#160;</td><td class="memItemRight" valign="bottom"><b>prepare_cookies</b> ()</td></tr>
<tr class="memdesc:ad085b7ef35338ed1ddfa4dbfe3d68a13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make sure all cookie and session related stuff is configured properly before session start. <br /></td></tr>
<tr class="separator:ad085b7ef35338ed1ddfa4dbfe3d68a13"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-static-attribs" name="pro-static-attribs"></a>
Static Protected Attributes</h2></td></tr>
<tr class="memitem:a1c0f9aabe03f8827e95ca7b0ee543a2e"><td class="memItemLeft" align="right" valign="top"><a id="a1c0f9aabe03f8827e95ca7b0ee543a2e" name="a1c0f9aabe03f8827e95ca7b0ee543a2e"></a>
static <a class="el" href="../../d8/d2e/classcore_1_1session_1_1handler.html">handler</a>&#160;</td><td class="memItemRight" valign="bottom"><b>$handler</b></td></tr>
<tr class="memdesc:a1c0f9aabe03f8827e95ca7b0ee543a2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">$handler active session handler instance <br /></td></tr>
<tr class="separator:a1c0f9aabe03f8827e95ca7b0ee543a2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad18a1d5065253f89d0322f35ff45d2b9"><td class="memItemLeft" align="right" valign="top"><a id="ad18a1d5065253f89d0322f35ff45d2b9" name="ad18a1d5065253f89d0322f35ff45d2b9"></a>
static string&#160;</td><td class="memItemRight" valign="bottom"><b>$logintokenkey</b> = 'core_auth_login'</td></tr>
<tr class="memdesc:ad18a1d5065253f89d0322f35ff45d2b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">$logintokenkey Key used to get and store request protection for login form. <br /></td></tr>
<tr class="separator:ad18a1d5065253f89d0322f35ff45d2b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade4b62a1721ed804eb5528d7224eaa25"><td class="memItemLeft" align="right" valign="top"><a id="ade4b62a1721ed804eb5528d7224eaa25" name="ade4b62a1721ed804eb5528d7224eaa25"></a>
static bool&#160;</td><td class="memItemRight" valign="bottom"><b>$sessionactive</b> = null</td></tr>
<tr class="memdesc:ade4b62a1721ed804eb5528d7224eaa25"><td class="mdescLeft">&#160;</td><td class="mdescRight">$sessionactive Is the session active? <br /></td></tr>
<tr class="separator:ade4b62a1721ed804eb5528d7224eaa25"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Session manager, this is the public <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> API for sessions. </p>
<p >Following PHP functions MUST NOT be used directly:</p><ul>
<li>session_start() - not necessary, lib/setup.php starts session automatically, use define('NO_MOODLE_COOKIE', true) if session not necessary.</li>
<li>session_write_close() - use <a class="el" href="../../d0/dcb/classcore_1_1session_1_1manager.html#a7e0d3b70cc2af2f0dcc3751d82591933" title="No more changes in session expected.">core::session::manager::write_close()</a> instead.</li>
<li>session_destroy() - use require_logout() instead.</li>
</ul>
<dl class="section copyright"><dt>Copyright</dt><dd>2013 Petr Skoda <a href="http://skodak.org" class="el externalurl"></a> </dd></dl>
<dl class="section user"><dt>License</dt><dd><a href="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later </dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="abe6a3fa2149fc75c2541a5d0c7b3cfe0" name="abe6a3fa2149fc75c2541a5d0c7b3cfe0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe6a3fa2149fc75c2541a5d0c7b3cfe0">&#9670;&#160;</a></span>add_session_record()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\session\manager::add_session_record </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$userid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Insert new empty session record. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass</td><td>the new record </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a07e878b6ec750d885942f0a914146fe0" name="a07e878b6ec750d885942f0a914146fe0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07e878b6ec750d885942f0a914146fe0">&#9670;&#160;</a></span>apply_concurrent_login_limit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\session\manager::apply_concurrent_login_limit </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$userid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sid</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Terminate other sessions of current user depending on $CFG-&gt;limitconcurrentlogins restriction. </p>
<p >This is expected to be called right after <a class="el" href="../../d0/de1/group__core.html#ga4acb6121854c6a3cd8c99c31fa2c4275" title="Call to complete the user login process after authenticate_user_login() has succeeded.">complete_user_login()</a>.</p>
<p >NOTE:</p><ul>
<li>Do not use from SSO auth plugins, this would not work.</li>
<li>Do not use from web services because they do not have sessions.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td></td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$sid</td><td>session id to be always keep, usually the current one </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adfc68196c1f6a0e8445dc8d9d04961f2" name="adfc68196c1f6a0e8445dc8d9d04961f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfc68196c1f6a0e8445dc8d9d04961f2">&#9670;&#160;</a></span>check_security()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\session\manager::check_security </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Do various session security checks. </p>
<p >WARNING: $USER and $SESSION are set up later, do not use them yet! </p><dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d5/dd0/classcore_1_1session_1_1exception.html" title="Session related exception class.">core::session::exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="acefcadc05977dd68b1398b18349bd4d3" name="acefcadc05977dd68b1398b18349bd4d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acefcadc05977dd68b1398b18349bd4d3">&#9670;&#160;</a></span>display_blocking_page()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\session\manager::display_blocking_page </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Display the page which blocks other pages. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afec945e46f0dfb826e66c1e909b10e4a" name="afec945e46f0dfb826e66c1e909b10e4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afec945e46f0dfb826e66c1e909b10e4a">&#9670;&#160;</a></span>get_handler_class()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\session\manager::get_handler_class </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get fully qualified name of session handler class. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>The name of the handler class </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aca952b8e9d4baf457de8322be0cf9e42" name="aca952b8e9d4baf457de8322be0cf9e42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca952b8e9d4baf457de8322be0cf9e42">&#9670;&#160;</a></span>get_locked_page_at()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\session\manager::get_locked_page_at </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the page that blocks other pages at a specific timestamp. </p>
<p >Look for a page whose lock was gained before that timestamp, and released after that timestamp.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">float</td><td class="paramname">$time</td><td>Time before session lock starts. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array|null</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a895a3b892c552ebefd67b143c8713351" name="a895a3b892c552ebefd67b143c8713351"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a895a3b892c552ebefd67b143c8713351">&#9670;&#160;</a></span>get_login_token()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\session\manager::get_login_token </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the current login token or generate a new one. </p>
<p >All login forms generated from <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> must include a login token named "logintoken" with the value being the result of this function. Logins will be rejected if they do not include this token as well as the username and password fields.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>The current login token. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="acf708f1ceb856eb64d626176bfa18ec3" name="acf708f1ceb856eb64d626176bfa18ec3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf708f1ceb856eb64d626176bfa18ec3">&#9670;&#160;</a></span>get_performance_info()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\session\manager::get_performance_info </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns current page performance info. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>perf info </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af66dde82284169161d25e22e7a2b8f40" name="af66dde82284169161d25e22e7a2b8f40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af66dde82284169161d25e22e7a2b8f40">&#9670;&#160;</a></span>get_realuser()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\session\manager::get_realuser </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the $USER object ignoring current login-as session. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass</td><td>user object </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a008def12208ed79ca5ab49bfa32b8047" name="a008def12208ed79ca5ab49bfa32b8047"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a008def12208ed79ca5ab49bfa32b8047">&#9670;&#160;</a></span>get_recent_session_locks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\session\manager::get_recent_session_locks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the recent session locks array. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>Recent session locks array. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afa7087cf0bc2b90457e80c7e2dcd3f99" name="afa7087cf0bc2b90457e80c7e2dcd3f99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa7087cf0bc2b90457e80c7e2dcd3f99">&#9670;&#160;</a></span>get_session_lock_info()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\session\manager::get_session_lock_info </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get session lock info of the current page. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a85a6ea9dbb6d263832d40e7219d6fd2a" name="a85a6ea9dbb6d263832d40e7219d6fd2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85a6ea9dbb6d263832d40e7219d6fd2a">&#9670;&#160;</a></span>init_empty_session()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\session\manager::init_empty_session </td>
          <td>(</td>
          <td class="paramtype">?bool&#160;</td>
          <td class="paramname"><em>$newsid</em> = <code>null</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Empty current session, fill it with not-logged-in user info. </p>
<p >This is intended for installation scripts, unit tests and other special areas. Do NOT use for logout and session termination in normal requests!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">mixed</td><td class="paramname">$newsid</td><td>only used after initialising a user session, is this a new user session? </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adfff87faf8a43a3e36a9a759d72a1587" name="adfff87faf8a43a3e36a9a759d72a1587"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfff87faf8a43a3e36a9a759d72a1587">&#9670;&#160;</a></span>initialise_user_session()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\session\manager::initialise_user_session </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$newsid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialise $_SESSION, handles google access and sets up not-logged-in user properly. </p>
<p >WARNING: $USER and $SESSION are set up later, do not use them yet!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">bool</td><td class="paramname">$newsid</td><td>is this a new session in first http request? </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a64ebc652d26e5b9791073a2124c12e9e" name="a64ebc652d26e5b9791073a2124c12e9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64ebc652d26e5b9791073a2124c12e9e">&#9670;&#160;</a></span>is_loggedinas()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\session\manager::is_loggedinas </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Is current $USER logged-in-as somebody else? </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6c426e5b9e0fdc68aeb75754968157ba" name="a6c426e5b9e0fdc68aeb75754968157ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c426e5b9e0fdc68aeb75754968157ba">&#9670;&#160;</a></span>keepalive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\session\manager::keepalive </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$identifier</em> = <code>'sessionerroruser'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$component</em> = <code>'<a class="el" href="../../d0/de1/group__core.html#ga43b8d30b879d4f09ceb059b02af2bc02">error</a>'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$frequency</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$timeout</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add a JS session keepalive to the page. </p>
<p >A JS session keepalive script will be called to update the session modification time every $frequency seconds.</p>
<p >Upon failure, the specified error message will be shown to the user.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$identifier</td><td>The string identifier for the message to show on failure. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$component</td><td>The string component for the message to show on failure. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$frequency</td><td>The update frequency in seconds. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$timeout</td><td>The timeout of each request in seconds. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../da/d34/classcoding__exception.html" title="Exception indicating programming error, must be fixed by a programer.">coding_exception</a></td><td>IF the frequency is longer than the session lifetime. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a96392daae41faf8e0fd77fab1ec22821" name="a96392daae41faf8e0fd77fab1ec22821"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96392daae41faf8e0fd77fab1ec22821">&#9670;&#160;</a></span>kill_session()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\session\manager::kill_session </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Terminate give session unconditionally. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$sid</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af430a6f02d024c47591054a2270c30c9" name="af430a6f02d024c47591054a2270c30c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af430a6f02d024c47591054a2270c30c9">&#9670;&#160;</a></span>kill_user_sessions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\session\manager::kill_user_sessions </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$userid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$keepsid</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Terminate all sessions of given user unconditionally. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td></td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$keepsid</td><td>keep this sid if present </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa64cad81c56b3e9aa96860f1b5a732ba" name="aa64cad81c56b3e9aa96860f1b5a732ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa64cad81c56b3e9aa96860f1b5a732ba">&#9670;&#160;</a></span>login_user()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\session\manager::login_user </td>
          <td>(</td>
          <td class="paramtype">\stdClass&#160;</td>
          <td class="paramname"><em>$user</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Login user, to be called from <a class="el" href="../../d0/de1/group__core.html#ga4acb6121854c6a3cd8c99c31fa2c4275" title="Call to complete the user login process after authenticate_user_login() has succeeded.">complete_user_login()</a> only. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$user</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7c5a804ee360f710bccc7734fc9619f3" name="a7c5a804ee360f710bccc7734fc9619f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c5a804ee360f710bccc7734fc9619f3">&#9670;&#160;</a></span>loginas()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\session\manager::loginas </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$userid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d04/classcontext.html">context</a>&#160;</td>
          <td class="paramname"><em>$context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$generateevent</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Login as another user - no security checks here. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td></td></tr>
    <tr><td class="paramtype">context</td><td class="paramname">$context</td><td></td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$generateevent</td><td>Set to false to prevent the loginas event to be generated </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af47d84412411a56087551bf6aba3685a" name="af47d84412411a56087551bf6aba3685a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af47d84412411a56087551bf6aba3685a">&#9670;&#160;</a></span>restart_with_write_lock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\session\manager::restart_with_write_lock </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>$readonlysession</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If the current session is not writeable, abort it, and re-open it requesting (and blocking) until a write lock is acquired. </p>
<p >If current session was already opened with an intentional write lock, this call will not do anything. NOTE: Even when using a session handler that does not support non-locking sessions, if the original session was not opened with the explicit intention of being locked, this will still restart your session so that code behaviour matches as closely as practical across environments.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">bool</td><td class="paramname">$readonlysession</td><td>Used by debugging logic to determine if whatever triggered the restart (e.g., a webservice) declared itself as read only. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a09951a2b97868a3c82e3f6f198779984" name="a09951a2b97868a3c82e3f6f198779984"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09951a2b97868a3c82e3f6f198779984">&#9670;&#160;</a></span>session_exists()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\session\manager::session_exists </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Does the PHP session with given id exist? </p>
<p >The session must exist both in session table and actual session backend and the session must not be timed out.</p>
<p >Timeout evaluation is simplified, the auth hooks are not executed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$sid</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a40ddab7d9e7aef89bf2cb4b233b60429" name="a40ddab7d9e7aef89bf2cb4b233b60429"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40ddab7d9e7aef89bf2cb4b233b60429">&#9670;&#160;</a></span>set_user()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\session\manager::set_user </td>
          <td>(</td>
          <td class="paramtype">\stdClass&#160;</td>
          <td class="paramname"><em>$user</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set current user. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$user</td><td>record </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa67c59fdd86d1d88741f97a5e1c3898b" name="aa67c59fdd86d1d88741f97a5e1c3898b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa67c59fdd86d1d88741f97a5e1c3898b">&#9670;&#160;</a></span>start()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\session\manager::start </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Start user session. </p>
<p >Note: This is intended to be called only from lib/setup.php! </p>

</div>
</div>
<a id="a85d56e9e90eab4e333eeb8ea41eb3459" name="a85d56e9e90eab4e333eeb8ea41eb3459"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85d56e9e90eab4e333eeb8ea41eb3459">&#9670;&#160;</a></span>terminate_current()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\session\manager::terminate_current </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Terminate current user session. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5343f1374666fe3fe978649403ddc9f8" name="a5343f1374666fe3fe978649403ddc9f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5343f1374666fe3fe978649403ddc9f8">&#9670;&#160;</a></span>time_remaining()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\session\manager::time_remaining </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the number of seconds remaining in the current session. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$sid</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab335ee85f73e9cd22d33cf2879199b36" name="ab335ee85f73e9cd22d33cf2879199b36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab335ee85f73e9cd22d33cf2879199b36">&#9670;&#160;</a></span>touch_session()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\session\manager::touch_session </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fake last access for given session, this prevents session timeout. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$sid</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab43992ae2ebbeac1f85c8fc6ae65fc93" name="ab43992ae2ebbeac1f85c8fc6ae65fc93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab43992ae2ebbeac1f85c8fc6ae65fc93">&#9670;&#160;</a></span>update_recent_session_locks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\session\manager::update_recent_session_locks </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sessionlock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Updates the recent session locks. </p>
<p >This function will store session lock info of all the pages visited.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$sessionlock</td><td>Session lock array. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abc2ea9b2bc901deacf247646d24893ba" name="abc2ea9b2bc901deacf247646d24893ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc2ea9b2bc901deacf247646d24893ba">&#9670;&#160;</a></span>validate_login_token()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\session\manager::validate_login_token </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$token</em> = <code>false</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check the submitted value against the stored login token. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">mixed</td><td class="paramname">$token</td><td>The value submitted in the login form that we are validating. If false is passed for the token, this function will always return true. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">boolean</td><td>If the submitted token is valid. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7e0d3b70cc2af2f0dcc3751d82591933" name="a7e0d3b70cc2af2f0dcc3751d82591933"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e0d3b70cc2af2f0dcc3751d82591933">&#9670;&#160;</a></span>write_close()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\session\manager::write_close </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>No more changes in session expected. </p>
<p >Unblocks the sessions, other scripts may start executing in parallel. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>lib/classes/session/manager.php</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Dec 11 2022 03:14:52 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
