<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: enrol_mnet_mnetservice_enrol Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;4.1</span>
   </div>
   <div id="projectbrief">Moodle 4.1.2+ (Build: 20230406) (f8e24455138)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../d9/d2b/classenrol__mnet__mnetservice__enrol-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">enrol_mnet_mnetservice_enrol Class Reference<div class="ingroups"><a class="el" href="../../d2/de7/group__enrol__mnet.html">enrol_mnet</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>MNet server-side methods that are part of <a class="el" href="../../de/ddf/classmnetservice__enrol.html" title="Singleton providing various functionality usable by plugin(s) implementing this MNet service.">mnetservice_enrol</a>.  
 <a href="../../d4/d98/classenrol__mnet__mnetservice__enrol.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae8b66936018ff126366c6ed167c3e6f4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d98/classenrol__mnet__mnetservice__enrol.html#ae8b66936018ff126366c6ed167c3e6f4">available_courses</a> ()</td></tr>
<tr class="memdesc:ae8b66936018ff126366c6ed167c3e6f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns list of courses that we offer to the caller for remote enrolment of their users.  <br /></td></tr>
<tr class="separator:ae8b66936018ff126366c6ed167c3e6f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace78e3470093ce4efac21bcba4bbf723"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d98/classenrol__mnet__mnetservice__enrol.html#ace78e3470093ce4efac21bcba4bbf723">course_enrolments</a> ($courseid, $roles=null)</td></tr>
<tr class="memdesc:ace78e3470093ce4efac21bcba4bbf723"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a list of users from the client server who are enrolled in our course.  <br /></td></tr>
<tr class="separator:ace78e3470093ce4efac21bcba4bbf723"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21dd4f231164c97346df3c4fcb05e210"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d98/classenrol__mnet__mnetservice__enrol.html#a21dd4f231164c97346df3c4fcb05e210">enrol_user</a> (array $userdata, $courseid)</td></tr>
<tr class="memdesc:a21dd4f231164c97346df3c4fcb05e210"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enrol remote user to our course.  <br /></td></tr>
<tr class="separator:a21dd4f231164c97346df3c4fcb05e210"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1ecc5f65771cb9704d5024f6e2babfc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d98/classenrol__mnet__mnetservice__enrol.html#ad1ecc5f65771cb9704d5024f6e2babfc">unenrol_user</a> ($username, $courseid)</td></tr>
<tr class="memdesc:ad1ecc5f65771cb9704d5024f6e2babfc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unenrol remote user from our course.  <br /></td></tr>
<tr class="separator:ad1ecc5f65771cb9704d5024f6e2babfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd777394e3c7524839763a4609c399dc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d98/classenrol__mnet__mnetservice__enrol.html#afd777394e3c7524839763a4609c399dc">user_enrolments</a> ()</td></tr>
<tr class="memdesc:afd777394e3c7524839763a4609c399dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method has never been implemented in <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> MNet API.  <br /></td></tr>
<tr class="separator:afd777394e3c7524839763a4609c399dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>MNet server-side methods that are part of <a class="el" href="../../de/ddf/classmnetservice__enrol.html" title="Singleton providing various functionality usable by plugin(s) implementing this MNet service.">mnetservice_enrol</a>. </p>
<p>The weird name of the class tries to follow a pattern {plugintype}_{pluginnname}_mnetservice_{servicename}</p>
<p>Class methods are compatible with API 1 of the service used by <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 1.x and 2.0 peers. The API version might become a part of class name but it is not neccessary due to how xml-rcp methods are/will be mapped to php methods. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ae8b66936018ff126366c6ed167c3e6f4" name="ae8b66936018ff126366c6ed167c3e6f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8b66936018ff126366c6ed167c3e6f4">&#9670;&#160;</a></span>available_courses()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enrol_mnet_mnetservice_enrol::available_courses </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns list of courses that we offer to the caller for remote enrolment of their users. </p>
<p>Since <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 2.0, courses are made available for MNet peers by creating an instance of enrol_mnet plugin for the course. Hidden courses are not returned. If there are two instances - one specific for the host and one for 'All hosts', the setting of the specific one is used. The id of the peer is kept in customint1, no other custom fields are used.</p>
<p>@uses mnet_remote_client Callable via XML-RPC only </p><dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ace78e3470093ce4efac21bcba4bbf723" name="ace78e3470093ce4efac21bcba4bbf723"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace78e3470093ce4efac21bcba4bbf723">&#9670;&#160;</a></span>course_enrolments()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enrol_mnet_mnetservice_enrol::course_enrolments </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$courseid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$roles</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a list of users from the client server who are enrolled in our course. </p>
<p>Suitable instance of enrol_mnet must be created in the course. This method will not return any information about the enrolments in courses that are not available for remote enrolment, even if their users are enrolled into them via other plugin (note the difference from <a class="el" href="../../">self::user_enrolments()</a>).</p>
<p>This method will return enrolment information for users from hosts regardless the enrolment plugin. It does not matter if the user was enrolled remotely by their admin or locally. Once the course is available for remote enrolments, we will tell them everything about their users.</p>
<p>In <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 1.x the returned array used to be indexed by username. The side effect of <a href="https://tracker.moodle.org/browse/MDL-19219" class="el">MDL-19219</a> fix is that we do not need to use such index and therefore we can return all enrolment records. MNet clients 1.x will only use the last record for the student, if she is enrolled via multiple plugins.</p>
<p>@uses mnet_remote_client Callable via XML-RPC only </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$courseid</td><td>ID of our course </td></tr>
    <tr><td class="paramtype">string&#160;|&#160;array</td><td class="paramname">$roles</td><td>comma separated list of role shortnames (or array of them) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a21dd4f231164c97346df3c4fcb05e210" name="a21dd4f231164c97346df3c4fcb05e210"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21dd4f231164c97346df3c4fcb05e210">&#9670;&#160;</a></span>enrol_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enrol_mnet_mnetservice_enrol::enrol_user </td>
          <td>(</td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$userdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$courseid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enrol remote user to our course. </p>
<p>If we do not have local record for the remote user in our database, it gets created here.</p>
<p>@uses mnet_remote_client Callable via XML-RPC only </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$userdata</td><td>user details {</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d9/d9e/group__mnet.html#ga3350b13e4dc942d55ccf9350cae17aa3" title="return an array of the profile fields to import from the given host, when creating/updating user acco...">mnet_fields_to_import()</a>} </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$courseid</td><td>our local course id </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>true if the enrolment has been successful, throws exception otherwise </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad1ecc5f65771cb9704d5024f6e2babfc" name="ad1ecc5f65771cb9704d5024f6e2babfc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1ecc5f65771cb9704d5024f6e2babfc">&#9670;&#160;</a></span>unenrol_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enrol_mnet_mnetservice_enrol::unenrol_user </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$username</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$courseid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unenrol remote user from our course. </p>
<p>Only users enrolled via enrol_mnet plugin can be unenrolled remotely. If the remote user is enrolled into the local course via some other enrol plugin (enrol_manual for example), the remote host can't touch such enrolment. Please do not report this behaviour as bug, it is a feature ;-)</p>
<p>@uses mnet_remote_client Callable via XML-RPC only </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$username</td><td>of the remote user </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$courseid</td><td>of our local course </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>true if the unenrolment has been successful, throws exception otherwise </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afd777394e3c7524839763a4609c399dc" name="afd777394e3c7524839763a4609c399dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd777394e3c7524839763a4609c399dc">&#9670;&#160;</a></span>user_enrolments()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enrol_mnet_mnetservice_enrol::user_enrolments </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This method has never been implemented in <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> MNet API. </p>
<p>@uses mnet_remote_client Callable via XML-RPC only </p><dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>empty array </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>enrol/mnet/enrol.php</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Apr 9 2023 02:46:56 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
