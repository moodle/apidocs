<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: MongoDB\Operation\Aggregate Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;4.1</span>
   </div>
   <div id="projectbrief">Moodle 4.1.4+ (Build: 20230707) (f29f757f5f9)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d1/d48/namespace_mongo_d_b.html">MongoDB</a></li><li class="navelem"><a class="el" href="../../d8/d88/namespace_mongo_d_b_1_1_operation.html">Operation</a></li><li class="navelem"><a class="el" href="../../d1/d29/class_mongo_d_b_1_1_operation_1_1_aggregate.html">Aggregate</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../d2/d7f/class_mongo_d_b_1_1_operation_1_1_aggregate-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">MongoDB\Operation\Aggregate Class Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for MongoDB\Operation\Aggregate:</div>
<div class="dyncontent">
 <div class="center">
  <img src="../../d1/d29/class_mongo_d_b_1_1_operation_1_1_aggregate.png" usemap="#MongoDB_5COperation_5CAggregate_map" alt=""/>
  <map id="MongoDB_5COperation_5CAggregate_map" name="MongoDB_5COperation_5CAggregate_map">
<area href="../../d7/d7c/interface_mongo_d_b_1_1_operation_1_1_executable.html" alt="MongoDB\Operation\Executable" shape="rect" coords="0,56,197,80"/>
<area href="../../d6/dd0/interface_mongo_d_b_1_1_operation_1_1_explainable.html" alt="MongoDB\Operation\Explainable" shape="rect" coords="207,56,404,80"/>
<area href="../../d7/d7c/interface_mongo_d_b_1_1_operation_1_1_executable.html" alt="MongoDB\Operation\Executable" shape="rect" coords="207,0,404,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af039bc8ac7931ab1e84a1facae668c14"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d29/class_mongo_d_b_1_1_operation_1_1_aggregate.html#af039bc8ac7931ab1e84a1facae668c14">__construct</a> (string $databaseName, ?string $collectionName, array $pipeline, array $options=[])</td></tr>
<tr class="memdesc:af039bc8ac7931ab1e84a1facae668c14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs an aggregate command.  <br /></td></tr>
<tr class="separator:af039bc8ac7931ab1e84a1facae668c14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a060fc16de8a36b7b105c16cb5775d3ad"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d29/class_mongo_d_b_1_1_operation_1_1_aggregate.html#a060fc16de8a36b7b105c16cb5775d3ad">execute</a> (Server $<a class="el" href="../../dc/d71/group___imap___client.html#gaa7cf0dd2417970c0d8ade087cb1dc7f8">server</a>)</td></tr>
<tr class="memdesc:a060fc16de8a36b7b105c16cb5775d3ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Execute the operation.  <br /></td></tr>
<tr class="separator:a060fc16de8a36b7b105c16cb5775d3ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6637e25fb614a9b1f9c91695137c0754"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d29/class_mongo_d_b_1_1_operation_1_1_aggregate.html#a6637e25fb614a9b1f9c91695137c0754">getCommandDocument</a> (Server $<a class="el" href="../../dc/d71/group___imap___client.html#gaa7cf0dd2417970c0d8ade087cb1dc7f8">server</a>)</td></tr>
<tr class="memdesc:a6637e25fb614a9b1f9c91695137c0754"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the command document for this operation.  <br /></td></tr>
<tr class="separator:a6637e25fb614a9b1f9c91695137c0754"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="af039bc8ac7931ab1e84a1facae668c14" name="af039bc8ac7931ab1e84a1facae668c14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af039bc8ac7931ab1e84a1facae668c14">&#9670;&#160;</a></span>__construct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MongoDB\Operation\Aggregate::__construct </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$databaseName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">?string&#160;</td>
          <td class="paramname"><em>$collectionName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$pipeline</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$options</em> = <code>[]</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructs an aggregate command. </p>
<p>Supported options:</p>
<ul>
<li>allowDiskUse (boolean): Enables writing to temporary files. When set to true, aggregation stages can write data to the _tmp sub-directory in the dbPath directory.</li>
<li>batchSize (integer): The number of documents to return per batch.</li>
<li>bypassDocumentValidation (boolean): If true, allows the write to circumvent document level validation. This only applies when an $out or $merge stage is specified.</li>
<li>collation (document): Collation specification.</li>
<li><p class="startli">comment (mixed): BSON value to attach as a comment to this command.</p>
<p class="startli">Only string values are supported for server versions &lt; 4.4.</p>
</li>
<li>explain (boolean): Specifies whether or not to return the information on the processing of the pipeline.</li>
<li>hint (string|document): The index to use. Specify either the index name as a string or the index key pattern as a document. If specified, then the query system will only consider plans using the hinted index.</li>
<li><p class="startli">let (document): Map of parameter names and values. Values must be constant or closed expressions that do not reference document fields. Parameters can then be accessed as variables in an aggregate expression context (e.g. "$$var").</p>
<p class="startli">This is not supported for server versions &lt; 5.0 and will result in an exception at execution time if used.</p>
</li>
<li>maxTimeMS (integer): The maximum amount of time to allow the query to run.</li>
<li>readConcern (MongoDB::Driver::ReadConcern): Read concern.</li>
<li><p class="startli">readPreference (MongoDB::Driver::ReadPreference): Read preference.</p>
<p class="startli">This option is ignored if an $out or $merge stage is specified.</p>
</li>
<li>session (MongoDB::Driver::Session): <a class="el" href="../../d3/d7a/class_client.html">Client</a> session.</li>
<li>typeMap (array): Type map for BSON deserialization. This will be applied to the returned Cursor (it is not sent to the server).</li>
<li><p class="startli">useCursor (boolean): Indicates whether the command will request that the server provide results using a cursor. The default is true.</p>
<p class="startli">This option allows users to turn off cursors if necessary to aid in mongod/mongos upgrades.</p>
</li>
<li>writeConcern (MongoDB::Driver::WriteConcern): Write concern. This only applies when an $out or $merge stage is specified.</li>
</ul>
<p>Note: Collection-agnostic commands (e.g. $currentOp) may be executed by specifying null for the collection name.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$databaseName</td><td>Database name </td></tr>
    <tr><td class="paramtype">string&#160;|&#160;null</td><td class="paramname">$collectionName</td><td>Collection name </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$pipeline</td><td>List of pipeline operations </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$options</td><td>Command options </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidArgumentException</td><td>for parameter/option parsing errors </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a060fc16de8a36b7b105c16cb5775d3ad" name="a060fc16de8a36b7b105c16cb5775d3ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a060fc16de8a36b7b105c16cb5775d3ad">&#9670;&#160;</a></span>execute()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MongoDB\Operation\Aggregate::execute </td>
          <td>(</td>
          <td class="paramtype">Server&#160;</td>
          <td class="paramname"><em>$server</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Execute the operation. </p>
<dl class="section see"><dt>See also</dt><dd>Executable::execute() </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ArrayIterator|Cursor</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">UnexpectedValueException</td><td>if the command response was malformed </td></tr>
    <tr><td class="paramname">UnsupportedException</td><td>if read concern or write concern is used and unsupported </td></tr>
    <tr><td class="paramname">DriverRuntimeException</td><td>for other driver errors (e.g. connection errors) </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="../../d7/d7c/interface_mongo_d_b_1_1_operation_1_1_executable.html#a2a0d642f8265ebbc16968033cbe0d7d4">MongoDB\Operation\Executable</a>.</p>

</div>
</div>
<a id="a6637e25fb614a9b1f9c91695137c0754" name="a6637e25fb614a9b1f9c91695137c0754"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6637e25fb614a9b1f9c91695137c0754">&#9670;&#160;</a></span>getCommandDocument()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MongoDB\Operation\Aggregate::getCommandDocument </td>
          <td>(</td>
          <td class="paramtype">Server&#160;</td>
          <td class="paramname"><em>$server</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the command document for this operation. </p>
<dl class="section see"><dt>See also</dt><dd>Explainable::getCommandDocument() </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="../../d6/dd0/interface_mongo_d_b_1_1_operation_1_1_explainable.html#aca5db3b08170fbc519ad14e9f32907fa">MongoDB\Operation\Explainable</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>cache/stores/mongodb/MongoDB/Operation/Aggregate.php</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Jul 9 2023 03:30:52 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>
