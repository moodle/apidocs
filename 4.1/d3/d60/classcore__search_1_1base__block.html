<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: core_search\base_block Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;4.1</span>
   </div>
   <div id="projectbrief">Moodle 4.1.3+ (Build: 20230519) (6ca70dd59f2)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d4/dbc/namespacecore__search.html">core_search</a></li><li class="navelem"><a class="el" href="../../d3/d60/classcore__search_1_1base__block.html">base_block</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pro-static-attribs">Static Protected Attributes</a> &#124;
<a href="../../d3/d08/classcore__search_1_1base__block-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">core_search\base_block Class Reference<div class="ingroups"><a class="el" href="../../dc/da9/group__core__search.html">core_search</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Search area base class for blocks.  
 <a href="../../d3/d60/classcore__search_1_1base__block.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for core_search\base_block:</div>
<div class="dyncontent">
 <div class="center">
  <img src="../../d3/d60/classcore__search_1_1base__block.png" usemap="#core_5Fsearch_5Cbase_5Fblock_map" alt=""/>
  <map id="core_5Fsearch_5Cbase_5Fblock_map" name="core_5Fsearch_5Cbase_5Fblock_map">
<area href="../../d4/dd1/classcore__search_1_1base.html" title="Base search implementation." alt="core_search\base" shape="rect" coords="0,0,159,24"/>
<area href="../../dc/d44/classblock__html_1_1search_1_1content.html" title="Search area for block_html blocks." alt="block_html\search\content" shape="rect" coords="0,112,159,136"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a0b55f47276f864893629ec5fb77ca575"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd1/classcore__search_1_1base.html#a0b55f47276f864893629ec5fb77ca575">attach_files</a> ($<a class="el" href="../../d3/d5d/classcore__search_1_1document.html">document</a>)</td></tr>
<tr class="memdesc:a0b55f47276f864893629ec5fb77ca575"><td class="mdescLeft">&#160;</td><td class="mdescRight">Files related to the current document are attached, to the document object ready for indexing by Global Search.  <br /></td></tr>
<tr class="separator:a0b55f47276f864893629ec5fb77ca575"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc9b0c051bc0ef1b91e954a183d729a5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d60/classcore__search_1_1base__block.html#adc9b0c051bc0ef1b91e954a183d729a5">check_access</a> ($id)</td></tr>
<tr class="memdesc:adc9b0c051bc0ef1b91e954a183d729a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks access for a document in this search area.  <br /></td></tr>
<tr class="separator:adc9b0c051bc0ef1b91e954a183d729a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad84ab00e66d4c1c27f00b576f75e5c51"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd1/classcore__search_1_1base.html#ad84ab00e66d4c1c27f00b576f75e5c51">get_area_id</a> ()</td></tr>
<tr class="memdesc:ad84ab00e66d4c1c27f00b576f75e5c51"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the area id.  <br /></td></tr>
<tr class="separator:ad84ab00e66d4c1c27f00b576f75e5c51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a127630bec783eb13394eb9672262571b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d60/classcore__search_1_1base__block.html#a127630bec783eb13394eb9672262571b">get_block_name</a> ()</td></tr>
<tr class="memdesc:a127630bec783eb13394eb9672262571b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the block name only.  <br /></td></tr>
<tr class="separator:a127630bec783eb13394eb9672262571b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1004b2e3215322004251aabacb0b4fa4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d60/classcore__search_1_1base__block.html#a1004b2e3215322004251aabacb0b4fa4">get_category_names</a> ()</td></tr>
<tr class="memdesc:a1004b2e3215322004251aabacb0b4fa4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a list of category names associated with the area.  <br /></td></tr>
<tr class="separator:a1004b2e3215322004251aabacb0b4fa4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac19c10570b263a737bae95df78cf14c3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd1/classcore__search_1_1base.html#ac19c10570b263a737bae95df78cf14c3">get_component_name</a> ()</td></tr>
<tr class="memdesc:ac19c10570b263a737bae95df78cf14c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the moodle component name.  <br /></td></tr>
<tr class="separator:ac19c10570b263a737bae95df78cf14c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a505da2d2de9542487c26c6ccca95d26e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd1/classcore__search_1_1base.html#a505da2d2de9542487c26c6ccca95d26e">get_component_type</a> ()</td></tr>
<tr class="memdesc:a505da2d2de9542487c26c6ccca95d26e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the component type.  <br /></td></tr>
<tr class="separator:a505da2d2de9542487c26c6ccca95d26e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4bc33a676cd88323247a78e8b3330c3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd1/classcore__search_1_1base.html#ac4bc33a676cd88323247a78e8b3330c3">get_config</a> ()</td></tr>
<tr class="memdesc:ac4bc33a676cd88323247a78e8b3330c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns all the search area configuration.  <br /></td></tr>
<tr class="separator:ac4bc33a676cd88323247a78e8b3330c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5557001553cc16fd22e0c17fc5e1ab4d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd1/classcore__search_1_1base.html#a5557001553cc16fd22e0c17fc5e1ab4d">get_config_var_name</a> ()</td></tr>
<tr class="memdesc:a5557001553cc16fd22e0c17fc5e1ab4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the config var name.  <br /></td></tr>
<tr class="separator:a5557001553cc16fd22e0c17fc5e1ab4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0126ce0295840663a58d80de7e7a1ea3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d60/classcore__search_1_1base__block.html#a0126ce0295840663a58d80de7e7a1ea3">get_context_url</a> (\<a class="el" href="../../d3/d5d/classcore__search_1_1document.html">core_search\document</a> $doc)</td></tr>
<tr class="memdesc:a0126ce0295840663a58d80de7e7a1ea3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a url to the document context.  <br /></td></tr>
<tr class="separator:a0126ce0295840663a58d80de7e7a1ea3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc96c75acbca0f12875e4e57e7f942ba"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d60/classcore__search_1_1base__block.html#acc96c75acbca0f12875e4e57e7f942ba">get_contexts_to_reindex</a> ()</td></tr>
<tr class="memdesc:acc96c75acbca0f12875e4e57e7f942ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a list of all contexts to reindex when reindexing this search area.  <br /></td></tr>
<tr class="separator:acc96c75acbca0f12875e4e57e7f942ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45f7cc006a0fa1fa76e7e8f98d32bd7b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d60/classcore__search_1_1base__block.html#a45f7cc006a0fa1fa76e7e8f98d32bd7b">get_doc_icon</a> (<a class="el" href="../../d3/d5d/classcore__search_1_1document.html">document</a> $doc)</td></tr>
<tr class="memdesc:a45f7cc006a0fa1fa76e7e8f98d32bd7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns an icon instance for the document.  <br /></td></tr>
<tr class="separator:a45f7cc006a0fa1fa76e7e8f98d32bd7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4fac88db1b2f99290099e4b272aab87"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d60/classcore__search_1_1base__block.html#ad4fac88db1b2f99290099e4b272aab87">get_doc_url</a> (\<a class="el" href="../../d3/d5d/classcore__search_1_1document.html">core_search\document</a> $doc)</td></tr>
<tr class="memdesc:ad4fac88db1b2f99290099e4b272aab87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a url to the document, it might match self::get_context_url().  <br /></td></tr>
<tr class="separator:ad4fac88db1b2f99290099e4b272aab87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab97f5e92c82858220282750fe45f516e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd1/classcore__search_1_1base.html#ab97f5e92c82858220282750fe45f516e">get_document</a> ($record, $options=array())</td></tr>
<tr class="memdesc:ab97f5e92c82858220282750fe45f516e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the document related with the provided record.  <br /></td></tr>
<tr class="separator:ab97f5e92c82858220282750fe45f516e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3914440d35257ea3a6c377653e02116"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd1/classcore__search_1_1base.html#af3914440d35257ea3a6c377653e02116">get_document_display_title</a> (\<a class="el" href="../../d3/d5d/classcore__search_1_1document.html">core_search\document</a> $doc)</td></tr>
<tr class="memdesc:af3914440d35257ea3a6c377653e02116"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the document title to display.  <br /></td></tr>
<tr class="separator:af3914440d35257ea3a6c377653e02116"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5693c3ab6a002520756b203aa2482a90"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d60/classcore__search_1_1base__block.html#a5693c3ab6a002520756b203aa2482a90">get_document_recordset</a> ($modifiedfrom=0, <a class="el" href="../../da/d04/classcontext.html">context</a> $<a class="el" href="../../da/d04/classcontext.html">context</a>=null)</td></tr>
<tr class="memdesc:a5693c3ab6a002520756b203aa2482a90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets recordset of all blocks of this type modified since given time within the given context.  <br /></td></tr>
<tr class="separator:a5693c3ab6a002520756b203aa2482a90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7dc8d9c4268954e692713b7aa61ffe2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd1/classcore__search_1_1base.html#ab7dc8d9c4268954e692713b7aa61ffe2">get_last_indexing_duration</a> ()</td></tr>
<tr class="memdesc:ab7dc8d9c4268954e692713b7aa61ffe2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the length of time spent indexing this area (the last time it was indexed).  <br /></td></tr>
<tr class="separator:ab7dc8d9c4268954e692713b7aa61ffe2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad77655c32b8ea8a6ca6e6840028643d6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd1/classcore__search_1_1base.html#ad77655c32b8ea8a6ca6e6840028643d6">get_recordset_by_timestamp</a> ($modifiedfrom=0)</td></tr>
<tr class="memdesc:ad77655c32b8ea8a6ca6e6840028643d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a recordset ordered by modification date ASC.  <br /></td></tr>
<tr class="separator:ad77655c32b8ea8a6ca6e6840028643d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad42eed0fba2e5dd21f5d20b6b32820c8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd1/classcore__search_1_1base.html#ad42eed0fba2e5dd21f5d20b6b32820c8">get_search_fileareas</a> ()</td></tr>
<tr class="memdesc:ad42eed0fba2e5dd21f5d20b6b32820c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the context info required to index files for this search area.  <br /></td></tr>
<tr class="separator:ad42eed0fba2e5dd21f5d20b6b32820c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86c1d89a2d7aef3dd68e4e64d96495ac"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd1/classcore__search_1_1base.html#a86c1d89a2d7aef3dd68e4e64d96495ac">get_visible_name</a> ($lazyload=false)</td></tr>
<tr class="memdesc:a86c1d89a2d7aef3dd68e4e64d96495ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the area visible name.  <br /></td></tr>
<tr class="separator:a86c1d89a2d7aef3dd68e4e64d96495ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ca7150e7e84d3b428fccc99a077da94"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd1/classcore__search_1_1base.html#a7ca7150e7e84d3b428fccc99a077da94">is_enabled</a> ()</td></tr>
<tr class="memdesc:a7ca7150e7e84d3b428fccc99a077da94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is the search component enabled by the system administrator?  <br /></td></tr>
<tr class="separator:a7ca7150e7e84d3b428fccc99a077da94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae536cfa6da39bdc412ca3c7d30b7d583"><td class="memItemLeft" align="right" valign="top"><a id="ae536cfa6da39bdc412ca3c7d30b7d583" name="ae536cfa6da39bdc412ca3c7d30b7d583"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>set_enabled</b> ($isenabled)</td></tr>
<tr class="separator:ae536cfa6da39bdc412ca3c7d30b7d583"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e1b43dd5b41154eb00b53817c52c29b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd1/classcore__search_1_1base.html#a0e1b43dd5b41154eb00b53817c52c29b">supports_get_document_recordset</a> ()</td></tr>
<tr class="memdesc:a0e1b43dd5b41154eb00b53817c52c29b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if get_document_recordset is supported for this search area.  <br /></td></tr>
<tr class="separator:a0e1b43dd5b41154eb00b53817c52c29b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a091d34f6bd89871851b4c6019bc4e353"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd1/classcore__search_1_1base.html#a091d34f6bd89871851b4c6019bc4e353">uses_file_indexing</a> ()</td></tr>
<tr class="memdesc:a091d34f6bd89871851b4c6019bc4e353"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if this area uses file indexing.  <br /></td></tr>
<tr class="separator:a091d34f6bd89871851b4c6019bc4e353"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a235c2411ef7eb35ab50999fa5e51e542"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d60/classcore__search_1_1base__block.html#a235c2411ef7eb35ab50999fa5e51e542">clear_static</a> ()</td></tr>
<tr class="memdesc:a235c2411ef7eb35ab50999fa5e51e542"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clears static cache.  <br /></td></tr>
<tr class="separator:a235c2411ef7eb35ab50999fa5e51e542"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70090867a83b47ecc8e333fdedf9b626"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd1/classcore__search_1_1base.html#a70090867a83b47ecc8e333fdedf9b626">get_levels</a> ()</td></tr>
<tr class="memdesc:a70090867a83b47ecc8e333fdedf9b626"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns context levels property.  <br /></td></tr>
<tr class="separator:a70090867a83b47ecc8e333fdedf9b626"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e9bc3cd8168d3feb10fd3e81ed0dc09"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd1/classcore__search_1_1base.html#a5e9bc3cd8168d3feb10fd3e81ed0dc09">get_settingnames</a> ()</td></tr>
<tr class="memdesc:a5e9bc3cd8168d3feb10fd3e81ed0dc09"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a list of all required setting names.  <br /></td></tr>
<tr class="separator:a5e9bc3cd8168d3feb10fd3e81ed0dc09"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:adc1bbb6d2a90f1a338dc80d0e40d815d"><td class="memItemLeft" align="right" valign="top"><a id="adc1bbb6d2a90f1a338dc80d0e40d815d" name="adc1bbb6d2a90f1a338dc80d0e40d815d"></a>
string const&#160;</td><td class="memItemRight" valign="bottom"><b>CACHE_INSTANCES</b> = 'base_block_instances'</td></tr>
<tr class="memdesc:adc1bbb6d2a90f1a338dc80d0e40d815d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cache name used for block instances. <br /></td></tr>
<tr class="separator:adc1bbb6d2a90f1a338dc80d0e40d815d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a3ab6d8425ad49198f2fee4532ac7869a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d60/classcore__search_1_1base__block.html#a3ab6d8425ad49198f2fee4532ac7869a">get_block_instance</a> ($id, $strictness=<a class="el" href="../../d0/de1/group__core.html#ga95a5600deb278b693b6c3ffed667df6f">MUST_EXIST</a>)</td></tr>
<tr class="memdesc:a3ab6d8425ad49198f2fee4532ac7869a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a block instance with given id.  <br /></td></tr>
<tr class="separator:a3ab6d8425ad49198f2fee4532ac7869a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ef23f1efd4ea5ba88e0120e9926bf21"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d60/classcore__search_1_1base__block.html#a8ef23f1efd4ea5ba88e0120e9926bf21">get_context_restriction_sql</a> (\<a class="el" href="../../da/d04/classcontext.html">context</a> $<a class="el" href="../../da/d04/classcontext.html">context</a>=null, $blocktable='bi', $paramtype=<a class="el" href="../../d5/db5/group__core__dml.html#ga186c96032edcc8cb593687f7f7d55a1b">SQL_PARAMS_QM</a>)</td></tr>
<tr class="memdesc:a8ef23f1efd4ea5ba88e0120e9926bf21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function that gets SQL useful for restricting a search query given a passed-in context.  <br /></td></tr>
<tr class="separator:a8ef23f1efd4ea5ba88e0120e9926bf21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad10b495e364390b0827ff0cb827f6813"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d60/classcore__search_1_1base__block.html#ad10b495e364390b0827ff0cb827f6813">get_contexts_to_reindex_extra_sql</a> ()</td></tr>
<tr class="memdesc:ad10b495e364390b0827ff0cb827f6813"><td class="mdescLeft">&#160;</td><td class="mdescRight">This can be used in subclasses to change ordering within the get_contexts_to_reindex function.  <br /></td></tr>
<tr class="separator:ad10b495e364390b0827ff0cb827f6813"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a422833028cb201038181549a597ea744"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd1/classcore__search_1_1base.html#a422833028cb201038181549a597ea744">get_course_level_context_restriction_sql</a> (?\<a class="el" href="../../da/d04/classcontext.html">context</a> $<a class="el" href="../../da/d04/classcontext.html">context</a>, $coursetable, $paramtype=<a class="el" href="../../d5/db5/group__core__dml.html#ga186c96032edcc8cb593687f7f7d55a1b">SQL_PARAMS_QM</a>)</td></tr>
<tr class="memdesc:a422833028cb201038181549a597ea744"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function that gets SQL useful for restricting a search query given a passed-in context, for data stored at course level.  <br /></td></tr>
<tr class="separator:a422833028cb201038181549a597ea744"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a503e5e661306f5afb2927799c9c89369"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d60/classcore__search_1_1base__block.html#a503e5e661306f5afb2927799c9c89369">get_indexing_restrictions</a> ()</td></tr>
<tr class="memdesc:a503e5e661306f5afb2927799c9c89369"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns restrictions on which block_instances rows to return.  <br /></td></tr>
<tr class="separator:a503e5e661306f5afb2927799c9c89369"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-static-methods" name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr class="memitem:a23355bc06d69086a8878d8f75bf60b9b"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d60/classcore__search_1_1base__block.html#a23355bc06d69086a8878d8f75bf60b9b">is_supported_page_type_at_course_context</a> ($pagetype)</td></tr>
<tr class="memdesc:a23355bc06d69086a8878d8f75bf60b9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if a page type is supported for blocks when at course (or also site) context.  <br /></td></tr>
<tr class="separator:a23355bc06d69086a8878d8f75bf60b9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:af4627a3a60ed88bcf987ec2c1c558766"><td class="memItemLeft" align="right" valign="top"><a id="af4627a3a60ed88bcf987ec2c1c558766" name="af4627a3a60ed88bcf987ec2c1c558766"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>$areaname</b> = null</td></tr>
<tr class="memdesc:af4627a3a60ed88bcf987ec2c1c558766"><td class="mdescLeft">&#160;</td><td class="mdescRight">The area name as defined in the class name. <br /></td></tr>
<tr class="separator:af4627a3a60ed88bcf987ec2c1c558766"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b2cd2e23c961236b548c8fb38e54cbd"><td class="memItemLeft" align="right" valign="top"><a id="a2b2cd2e23c961236b548c8fb38e54cbd" name="a2b2cd2e23c961236b548c8fb38e54cbd"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>$componentname</b> = null</td></tr>
<tr class="memdesc:a2b2cd2e23c961236b548c8fb38e54cbd"><td class="mdescLeft">&#160;</td><td class="mdescRight">The component frankenstyle name. <br /></td></tr>
<tr class="separator:a2b2cd2e23c961236b548c8fb38e54cbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0265251d461ab421f2c3c694bcaf460"><td class="memItemLeft" align="right" valign="top"><a id="ae0265251d461ab421f2c3c694bcaf460" name="ae0265251d461ab421f2c3c694bcaf460"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>$componenttype</b> = null</td></tr>
<tr class="memdesc:ae0265251d461ab421f2c3c694bcaf460"><td class="mdescLeft">&#160;</td><td class="mdescRight">The component type (core or the plugin type). <br /></td></tr>
<tr class="separator:ae0265251d461ab421f2c3c694bcaf460"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-static-attribs" name="pro-static-attribs"></a>
Static Protected Attributes</h2></td></tr>
<tr class="memitem:a05069b88a2d8787f386cd94ec736149e"><td class="memItemLeft" align="right" valign="top">static array&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d60/classcore__search_1_1base__block.html#a05069b88a2d8787f386cd94ec736149e">$levels</a> = [<a class="el" href="../../da/d16/group__core__access.html#gaf26e0e9d63f6aa70f446e178150f0127">CONTEXT_BLOCK</a>]</td></tr>
<tr class="memdesc:a05069b88a2d8787f386cd94ec736149e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The context levels the search area is working on.  <br /></td></tr>
<tr class="separator:a05069b88a2d8787f386cd94ec736149e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Search area base class for blocks. </p>
<p>Note: Only blocks within courses are supported.</p>
<dl class="section copyright"><dt>Copyright</dt><dd>2017 The Open University </dd></dl>
<dl class="section user"><dt>License</dt><dd><a href="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later </dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a0b55f47276f864893629ec5fb77ca575" name="a0b55f47276f864893629ec5fb77ca575"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b55f47276f864893629ec5fb77ca575">&#9670;&#160;</a></span>attach_files()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_search\base::attach_files </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$document</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Files related to the current document are attached, to the document object ready for indexing by Global Search. </p>
<p>The default implementation retrieves all files for the file areas returned by get_search_fileareas(). If you need to filter files to specific items per file area, you will need to override this method and explicitly provide the items.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">document</td><td class="paramname">$document</td><td>The current document </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../d3/d75/classmod__data_1_1search_1_1entry.html#a2e51f3f6b838c965d80c858bb136b6f5">mod_data\search\entry</a>, <a class="el" href="../../dc/d44/classblock__html_1_1search_1_1content.html#a53290e71211a7b3a39b1c5cfa9341eff">block_html\search\content</a>, <a class="el" href="../../d3/dda/classmod__forum_1_1search_1_1post.html#a9579a7f7bcad2a42376d95a62e12505d">mod_forum\search\post</a>, and <a class="el" href="../../d2/d98/classcore__search_1_1base__activity.html#a2c1fccb79e26ee70280ed710a506b302">core_search\base_activity</a>.</p>

</div>
</div>
<a id="adc9b0c051bc0ef1b91e954a183d729a5" name="adc9b0c051bc0ef1b91e954a183d729a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc9b0c051bc0ef1b91e954a183d729a5">&#9670;&#160;</a></span>check_access()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_search\base_block::check_access </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks access for a document in this search area. </p>
<p>If you override this function for a block, you should call this base class version first as it will check that the block is still visible to users in a supported location.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$id</td><td>Document id </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td>manager:ACCESS_xx constant </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../d4/dd1/classcore__search_1_1base.html#addcf4f62de60919518b3c31203403e0c">core_search\base</a>.</p>

</div>
</div>
<a id="a235c2411ef7eb35ab50999fa5e51e542" name="a235c2411ef7eb35ab50999fa5e51e542"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a235c2411ef7eb35ab50999fa5e51e542">&#9670;&#160;</a></span>clear_static()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_search\base_block::clear_static </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clears static cache. </p>
<p>This function can be removed (with calls to it in the test script replaced with cache_helper::purge_all) if <a href="https://tracker.moodle.org/browse/MDL-59427" class="el">MDL-59427</a> is fixed. </p>

</div>
</div>
<a id="ad84ab00e66d4c1c27f00b576f75e5c51" name="ad84ab00e66d4c1c27f00b576f75e5c51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad84ab00e66d4c1c27f00b576f75e5c51">&#9670;&#160;</a></span>get_area_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_search\base::get_area_id </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the area id. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3ab6d8425ad49198f2fee4532ac7869a" name="a3ab6d8425ad49198f2fee4532ac7869a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ab6d8425ad49198f2fee4532ac7869a">&#9670;&#160;</a></span>get_block_instance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_search\base_block::get_block_instance </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$strictness</em> = <code><a class="el" href="../../d0/de1/group__core.html#ga95a5600deb278b693b6c3ffed667df6f">MUST_EXIST</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets a block instance with given id. </p>
<p>Returns the fields id, pagetypepattern, subpagepattern from block_instances and also the cmid (if parent context is an activity module).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$id</td><td>ID of block instance </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$strictness</td><td>MUST_EXIST or IGNORE_MISSING </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false|mixed</td><td>Block instance data (may be false if strictness is IGNORE_MISSING) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a127630bec783eb13394eb9672262571b" name="a127630bec783eb13394eb9672262571b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a127630bec783eb13394eb9672262571b">&#9670;&#160;</a></span>get_block_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_search\base_block::get_block_name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the block name only. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>Block name e.g. 'html' </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1004b2e3215322004251aabacb0b4fa4" name="a1004b2e3215322004251aabacb0b4fa4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1004b2e3215322004251aabacb0b4fa4">&#9670;&#160;</a></span>get_category_names()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_search\base_block::get_category_names </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a list of category names associated with the area. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../d4/dd1/classcore__search_1_1base.html#a5ee69f1dab548c14a51d22a8699ef65e">core_search\base</a>.</p>

</div>
</div>
<a id="ac19c10570b263a737bae95df78cf14c3" name="ac19c10570b263a737bae95df78cf14c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac19c10570b263a737bae95df78cf14c3">&#9670;&#160;</a></span>get_component_name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_search\base::get_component_name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the moodle component name. </p>
<p>It might be the plugin name (whole frankenstyle name) or the core subsystem name.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../d2/dce/classcore__course_1_1search_1_1course.html#ae48a12b052c2cc015a3cca77aa078d28">core_course\search\course</a>, <a class="el" href="../../da/d36/classcore__course_1_1search_1_1customfield.html#a0ee0415e45bd097956dce4859f58e9e2">core_course\search\customfield</a>, <a class="el" href="../../d6/d8d/classcore__course_1_1search_1_1section.html#a42961a1f5ba622c6685f055b2753a0f5">core_course\search\section</a>, <a class="el" href="../../d4/d92/classcore__user_1_1search_1_1course__teacher.html#a489cb6f5e922ca24bef72ded3c644e27">core_user\search\course_teacher</a>, and <a class="el" href="../../d6/d8f/classcore__user_1_1search_1_1user.html#aa63f5e3c3171491577dc1fa0f4d68118">core_user\search\user</a>.</p>

</div>
</div>
<a id="a505da2d2de9542487c26c6ccca95d26e" name="a505da2d2de9542487c26c6ccca95d26e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a505da2d2de9542487c26c6ccca95d26e">&#9670;&#160;</a></span>get_component_type()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_search\base::get_component_type </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the component type. </p>
<p>It might be a plugintype or 'core' for core subsystems.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac4bc33a676cd88323247a78e8b3330c3" name="ac4bc33a676cd88323247a78e8b3330c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4bc33a676cd88323247a78e8b3330c3">&#9670;&#160;</a></span>get_config()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_search\base::get_config </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns all the search area configuration. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5557001553cc16fd22e0c17fc5e1ab4d" name="a5557001553cc16fd22e0c17fc5e1ab4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5557001553cc16fd22e0c17fc5e1ab4d">&#9670;&#160;</a></span>get_config_var_name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_search\base::get_config_var_name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the config var name. </p>
<p>It depends on whether it is a moodle subsystem or a plugin as plugin-related config should remain in their own scope.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>Config var path including the plugin (or component) and the varname </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8ef23f1efd4ea5ba88e0120e9926bf21" name="a8ef23f1efd4ea5ba88e0120e9926bf21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ef23f1efd4ea5ba88e0120e9926bf21">&#9670;&#160;</a></span>get_context_restriction_sql()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_search\base_block::get_context_restriction_sql </td>
          <td>(</td>
          <td class="paramtype">\<a class="el" href="../../da/d04/classcontext.html">context</a>&#160;</td>
          <td class="paramname"><em>$context</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$blocktable</em> = <code>'bi'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$paramtype</em> = <code><a class="el" href="../../d5/db5/group__core__dml.html#ga186c96032edcc8cb593687f7f7d55a1b">SQL_PARAMS_QM</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function that gets SQL useful for restricting a search query given a passed-in context. </p>
<p>The SQL returned will be one or more JOIN statements, surrounded by whitespace, which act as restrictions on the query based on the rows in the block_instances table.</p>
<p>We assume the block instances have already been restricted by blockname.</p>
<p>Returns null if there can be no results for this block within this context.</p>
<p>If named parameters are used, these will be named gcrs0, gcrs1, etc. The table aliases used in SQL also all begin with gcrs, to avoid conflicts.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">context&#160;|&#160;null</td><td class="paramname">$context</td><td>Context to restrict the query </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$blocktable</td><td>Alias of block_instances table </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$paramtype</td><td>Type of SQL parameters to use (default question mark) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>Array with SQL and parameters </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../da/d34/classcoding__exception.html" title="Exception indicating programming error, must be fixed by a programer.">coding_exception</a></td><td>If called with invalid params </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0126ce0295840663a58d80de7e7a1ea3" name="a0126ce0295840663a58d80de7e7a1ea3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0126ce0295840663a58d80de7e7a1ea3">&#9670;&#160;</a></span>get_context_url()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_search\base_block::get_context_url </td>
          <td>(</td>
          <td class="paramtype">\<a class="el" href="../../d3/d5d/classcore__search_1_1document.html">core_search\document</a>&#160;</td>
          <td class="paramname"><em>$doc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a url to the document context. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d3/d5d/classcore__search_1_1document.html" title="Represents a document to index.">core_search::document</a></td><td class="paramname">$doc</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="../../dc/d31/classmoodle__url.html" title="Class for creating and manipulating urls.">moodle_url</a></td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../d4/dd1/classcore__search_1_1base.html#a06e508eed9fabace170fd32a95efdb42">core_search\base</a>.</p>

</div>
</div>
<a id="acc96c75acbca0f12875e4e57e7f942ba" name="acc96c75acbca0f12875e4e57e7f942ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc96c75acbca0f12875e4e57e7f942ba">&#9670;&#160;</a></span>get_contexts_to_reindex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_search\base_block::get_contexts_to_reindex </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets a list of all contexts to reindex when reindexing this search area. </p>
<p>For blocks, the default is to return all contexts for blocks of that type, that are on a course page, in order of time added (most recent first).</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Iterator</td><td>Iterator of contexts to reindex </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d6/da8/classmoodle__exception.html" title="Base Moodle Exception class.">moodle_exception</a></td><td>If any <a class="el" href="../../d1/dc8/class_d_b.html" title="The main &quot;DB&quot; class is simply a container class with some static methods for creating DB objects as w...">DB</a> error </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../d4/dd1/classcore__search_1_1base.html#a8aa8d1d34cbcae9ad4d2b913a2ea1745">core_search\base</a>.</p>

</div>
</div>
<a id="ad10b495e364390b0827ff0cb827f6813" name="ad10b495e364390b0827ff0cb827f6813"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad10b495e364390b0827ff0cb827f6813">&#9670;&#160;</a></span>get_contexts_to_reindex_extra_sql()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_search\base_block::get_contexts_to_reindex_extra_sql </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This can be used in subclasses to change ordering within the get_contexts_to_reindex function. </p>
<p>It returns 2 values:</p><ul>
<li>Extra SQL joins (tables block_instances 'bi' and context 'x' already exist).</li>
<li>An ORDER BY value which must use aggregate functions, by default 'MAX(bi.timemodified) DESC'.</li>
</ul>
<p>Note the query already includes a GROUP BY on the context fields, so if your joins result in multiple rows, you can use aggregate functions in the ORDER BY. See forum for an example.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string[]</td><td>Array with 2 elements; extra joins for the query, and ORDER BY value </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a422833028cb201038181549a597ea744" name="a422833028cb201038181549a597ea744"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a422833028cb201038181549a597ea744">&#9670;&#160;</a></span>get_course_level_context_restriction_sql()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_search\base::get_course_level_context_restriction_sql </td>
          <td>(</td>
          <td class="paramtype">?\<a class="el" href="../../da/d04/classcontext.html">context</a>&#160;</td>
          <td class="paramname"><em>$context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$coursetable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$paramtype</em> = <code><a class="el" href="../../d5/db5/group__core__dml.html#ga186c96032edcc8cb593687f7f7d55a1b">SQL_PARAMS_QM</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function that gets SQL useful for restricting a search query given a passed-in context, for data stored at course level. </p>
<p>The SQL returned will be zero or more JOIN statements, surrounded by whitespace, which act as restrictions on the query based on the rows in a module table.</p>
<p>You can pass in a null or system context, which will both return an empty string and no params.</p>
<p>Returns an array with two nulls if there can be no results for a course within this context.</p>
<p>If named parameters are used, these will be named gclcrs0, gclcrs1, etc. The table aliases used in SQL also all begin with gclcrs, to avoid conflicts.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">context&#160;|&#160;null</td><td class="paramname">$context</td><td>Context to restrict the query </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$coursetable</td><td>Name of alias for course table e.g. 'c' </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$paramtype</td><td>Type of SQL parameters to use (default question mark) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>Array with SQL and parameters; both null if no need to query </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../da/d34/classcoding__exception.html" title="Exception indicating programming error, must be fixed by a programer.">coding_exception</a></td><td>If called with invalid params </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a45f7cc006a0fa1fa76e7e8f98d32bd7b" name="a45f7cc006a0fa1fa76e7e8f98d32bd7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45f7cc006a0fa1fa76e7e8f98d32bd7b">&#9670;&#160;</a></span>get_doc_icon()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_search\base_block::get_doc_icon </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d5d/classcore__search_1_1document.html">document</a>&#160;</td>
          <td class="paramname"><em>$doc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns an icon instance for the document. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d3/d5d/classcore__search_1_1document.html" title="Represents a document to index.">core_search::document</a></td><td class="paramname">$doc</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="../../d6/d74/classcore__search_1_1document__icon.html" title="Represents a document icon.">core_search::document_icon</a></td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../d4/dd1/classcore__search_1_1base.html#abe6ed808cff13d800a2ebb823147b619">core_search\base</a>.</p>

</div>
</div>
<a id="ad4fac88db1b2f99290099e4b272aab87" name="ad4fac88db1b2f99290099e4b272aab87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4fac88db1b2f99290099e4b272aab87">&#9670;&#160;</a></span>get_doc_url()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_search\base_block::get_doc_url </td>
          <td>(</td>
          <td class="paramtype">\<a class="el" href="../../d3/d5d/classcore__search_1_1document.html">core_search\document</a>&#160;</td>
          <td class="paramname"><em>$doc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a url to the document, it might match self::get_context_url(). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d3/d5d/classcore__search_1_1document.html" title="Represents a document to index.">core_search::document</a></td><td class="paramname">$doc</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="../../dc/d31/classmoodle__url.html" title="Class for creating and manipulating urls.">moodle_url</a></td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../d4/dd1/classcore__search_1_1base.html#ae85d5cbccf7ef2069059dd2bfac7717d">core_search\base</a>.</p>

</div>
</div>
<a id="ab97f5e92c82858220282750fe45f516e" name="ab97f5e92c82858220282750fe45f516e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab97f5e92c82858220282750fe45f516e">&#9670;&#160;</a></span>get_document()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_search\base::get_document </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$record</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$options</em> = <code>array()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">abstract</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the document related with the provided record. </p>
<p>This method receives a record with the document id and other info returned by get_recordset_by_timestamp or get_recordset_by_contexts that might be useful here. The idea is to restrict database queries to minimum as this function will be called for each document to index. As an alternative, use cached data.</p>
<p>Internally it should use <a class="el" href="../../d3/d5d/classcore__search_1_1document.html" title="Represents a document to index.">core_search::document</a> to standarise the documents before sending them to the search engine.</p>
<p>Search areas should send plain text to the search engine, use the following function to convert any user input data to plain text: <a class="el" href="../../d0/de1/group__core.html#ga970fcc4179ad3e821ece2609f4193282">content_to_text</a></p>
<p>Valid keys for the options array are: indexfiles =&gt; File indexing is enabled if true. lastindexedtime =&gt; The last time this area was indexed. 0 if never indexed.</p>
<p>The lastindexedtime value is not set if indexing a specific context rather than the whole system.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$record</td><td>A record containing, at least, the indexed document id and a modified timestamp </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$options</td><td>Options for document creation </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="../../d3/d5d/classcore__search_1_1document.html" title="Represents a document to index.">core_search::document</a></td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../d3/d75/classmod__data_1_1search_1_1entry.html#a19fbcd6c647e2b348646b5fdfaaf37f5">mod_data\search\entry</a>, <a class="el" href="../../d0/df6/classmod__glossary_1_1search_1_1entry.html#ad203c74a124dcb519ce18aba5941cf9f">mod_glossary\search\entry</a>, <a class="el" href="../../d5/d04/classmod__bigbluebuttonbn_1_1search_1_1tags.html#a0b09da6bbe97eb1249225b556413b2e6">mod_bigbluebuttonbn\search\tags</a>, <a class="el" href="../../dc/d44/classblock__html_1_1search_1_1content.html#a051eb9a6c9afa1b6c1610d16af22d120">block_html\search\content</a>, <a class="el" href="../../d2/dce/classcore__course_1_1search_1_1course.html#a05bad53eba80bc7375c521f5fd2b49b6">core_course\search\course</a>, <a class="el" href="../../da/d36/classcore__course_1_1search_1_1customfield.html#af784822070b1816bfc918a2ddaac2333">core_course\search\customfield</a>, <a class="el" href="../../d6/d8d/classcore__course_1_1search_1_1section.html#aedf5a8090e9057d8122c586b2f82a031">core_course\search\section</a>, <a class="el" href="../../d2/d46/classcore__message_1_1search_1_1base__message.html#afac1197cebfa7fe364e40c1e358a0c91">core_message\search\base_message</a>, <a class="el" href="../../da/d39/classcore__message_1_1search_1_1message__received.html#a72d05b5648979807cde5ea3114705a1e">core_message\search\message_received</a>, <a class="el" href="../../d0/dcf/classcore__message_1_1search_1_1message__sent.html#a118767898704ad71109524f6c7a538c9">core_message\search\message_sent</a>, <a class="el" href="../../db/d5f/classmod__book_1_1search_1_1chapter.html#ab736230aeb5d2ce8c0e955fed717a115">mod_book\search\chapter</a>, <a class="el" href="../../d3/dda/classmod__forum_1_1search_1_1post.html#a237c58e2df26b7b5761b8ec5e9336fca">mod_forum\search\post</a>, <a class="el" href="../../dc/dd4/classmod__page_1_1search_1_1activity.html#a20907ed288e2cb606e6daad80e6c8b9a">mod_page\search\activity</a>, <a class="el" href="../../d1/d86/classmod__url_1_1search_1_1activity.html#a37957edd33c2b9e59536af67558d9969">mod_url\search\activity</a>, <a class="el" href="../../dc/d58/classmod__wiki_1_1search_1_1collaborative__page.html#a665d93aebf8753a0651b788ca331ad32">mod_wiki\search\collaborative_page</a>, <a class="el" href="../../d2/d98/classcore__search_1_1base__activity.html#a53c4db5e245ebd15e8d629bff6cebcba">core_search\base_activity</a>, <a class="el" href="../../d4/d92/classcore__user_1_1search_1_1course__teacher.html#aa01623f130d20bc6ef083975a94effa0">core_user\search\course_teacher</a>, and <a class="el" href="../../d6/d8f/classcore__user_1_1search_1_1user.html#a862789a05cc66ccc3ea09f97b4e27ed8">core_user\search\user</a>.</p>

</div>
</div>
<a id="af3914440d35257ea3a6c377653e02116" name="af3914440d35257ea3a6c377653e02116"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3914440d35257ea3a6c377653e02116">&#9670;&#160;</a></span>get_document_display_title()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_search\base::get_document_display_title </td>
          <td>(</td>
          <td class="paramtype">\<a class="el" href="../../d3/d5d/classcore__search_1_1document.html">core_search\document</a>&#160;</td>
          <td class="paramname"><em>$doc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the document title to display. </p>
<p>Allow to customize the document title string to display.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d3/d5d/classcore__search_1_1document.html" title="Represents a document to index.">core_search::document</a></td><td class="paramname">$doc</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>Document title to display in the search results page </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5693c3ab6a002520756b203aa2482a90" name="a5693c3ab6a002520756b203aa2482a90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5693c3ab6a002520756b203aa2482a90">&#9670;&#160;</a></span>get_document_recordset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core_search\base_block::get_document_recordset </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$modifiedfrom</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d04/classcontext.html">context</a>&#160;</td>
          <td class="paramname"><em>$context</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets recordset of all blocks of this type modified since given time within the given context. </p>
<p>See base class for detailed requirements. This implementation includes the key fields from block_instances.</p>
<p>This can be overridden to do something totally different if the block's data is stored in other tables.</p>
<p>If there are certain instances of the block which should not be included in the search index then you can override get_indexing_restrictions; by default this excludes rows with empty configdata.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$modifiedfrom</td><td>Return only records modified after this date </td></tr>
    <tr><td class="paramtype">context&#160;|&#160;null</td><td class="paramname">$context</td><td>Context to find blocks within </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false|moodle_recordset|null</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="../../d4/dd1/classcore__search_1_1base.html#abf88b972354a34e8cf8bc596a14ddeb3">core_search\base</a>.</p>

</div>
</div>
<a id="a503e5e661306f5afb2927799c9c89369" name="a503e5e661306f5afb2927799c9c89369"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a503e5e661306f5afb2927799c9c89369">&#9670;&#160;</a></span>get_indexing_restrictions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_search\base_block::get_indexing_restrictions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns restrictions on which block_instances rows to return. </p>
<p>By default, excludes rows that have empty configdata.</p>
<p>If no restriction is required, you could return ['', []].</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>2-element array of SQL restriction and params for it </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab7dc8d9c4268954e692713b7aa61ffe2" name="ab7dc8d9c4268954e692713b7aa61ffe2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7dc8d9c4268954e692713b7aa61ffe2">&#9670;&#160;</a></span>get_last_indexing_duration()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_search\base::get_last_indexing_duration </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the length of time spent indexing this area (the last time it was indexed). </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int|bool</td><td>Time in seconds spent indexing this area last time, false if never indexed </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a70090867a83b47ecc8e333fdedf9b626" name="a70090867a83b47ecc8e333fdedf9b626"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70090867a83b47ecc8e333fdedf9b626">&#9670;&#160;</a></span>get_levels()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_search\base::get_levels </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns context levels property. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad77655c32b8ea8a6ca6e6840028643d6" name="ad77655c32b8ea8a6ca6e6840028643d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad77655c32b8ea8a6ca6e6840028643d6">&#9670;&#160;</a></span>get_recordset_by_timestamp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_search\base::get_recordset_by_timestamp </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$modifiedfrom</em> = <code>0</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a recordset ordered by modification date ASC. </p>
<p>Each record can include any data self::get_document might need but it must:</p><ul>
<li>Include an 'id' field: Unique identifier (in this area's scope) of a document to index in the search engine If the indexed content field can contain embedded files, the 'id' value should match the filearea itemid.</li>
<li>Only return data modified since $modifiedfrom, including $modifiedform to prevent some records from not being indexed (e.g. your-timemodified-fieldname &gt;= $modifiedfrom)</li>
<li>Order the returned data by time modified in ascending order, as <a class="el" href="../../d8/df9/classcore__search_1_1manager.html" title="Search subsystem manager.">core_search::manager</a> will need to store the modified time of the last indexed document.</li>
</ul>
<p>Since <a class="el" href="../../d7/d79/namespace_moodle.html" title="&#160;">Moodle</a> 3.4, subclasses should instead implement get_document_recordset, which has an additional context parameter. This function continues to work for implementations which haven't been updated, or where the context parameter is not required.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$modifiedfrom</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="../../d6/d34/classmoodle__recordset.html" title="Abstract class for resultsets returned from database functions.">moodle_recordset</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad42eed0fba2e5dd21f5d20b6b32820c8" name="ad42eed0fba2e5dd21f5d20b6b32820c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad42eed0fba2e5dd21f5d20b6b32820c8">&#9670;&#160;</a></span>get_search_fileareas()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_search\base::get_search_fileareas </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the context info required to index files for this search area. </p>
<p>Should be onerridden by each search area.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../d2/dce/classcore__course_1_1search_1_1course.html#adc5a10dd6e3b88ca00013490cc305082">core_course\search\course</a>, <a class="el" href="../../d6/d8d/classcore__course_1_1search_1_1section.html#a02d906c2c53798dce680a1896bcb4e7b">core_course\search\section</a>, <a class="el" href="../../da/d9d/classmod__assign_1_1search_1_1activity.html#a0feb72845cd5a5da62712928b7d5ecc9">mod_assign\search\activity</a>, <a class="el" href="../../db/d5f/classmod__book_1_1search_1_1chapter.html#ace539ab746ddae7211266d936683beb5">mod_book\search\chapter</a>, <a class="el" href="../../db/df7/classmod__folder_1_1search_1_1activity.html#ae515366ce66e42bddd99fdb91129bfcd">mod_folder\search\activity</a>, <a class="el" href="../../d3/dda/classmod__forum_1_1search_1_1post.html#a53b9a9af05e9c3dcd124962a13a5fc26">mod_forum\search\post</a>, <a class="el" href="../../d0/df6/classmod__glossary_1_1search_1_1entry.html#aad44ae16d6d8cd136ab57fcfedb2af07">mod_glossary\search\entry</a>, <a class="el" href="../../de/d35/classmod__lesson_1_1search_1_1activity.html#a9b443516c228d31dcf0d0bbdf13f89f1">mod_lesson\search\activity</a>, <a class="el" href="../../dc/dd4/classmod__page_1_1search_1_1activity.html#a96caab4d7552271e511faf0d2a5e69e4">mod_page\search\activity</a>, <a class="el" href="../../db/dc1/classmod__resource_1_1search_1_1activity.html#ae98f67f20556b99ead68bb111e384eb8">mod_resource\search\activity</a>, <a class="el" href="../../d5/d88/classmod__scorm_1_1search_1_1activity.html#ae01c2720f5d6ae30b377e540f0e5f142">mod_scorm\search\activity</a>, <a class="el" href="../../dc/d58/classmod__wiki_1_1search_1_1collaborative__page.html#ac9044749b5689bc251d8058aa2b866d1">mod_wiki\search\collaborative_page</a>, <a class="el" href="../../d8/dd5/classmod__workshop_1_1search_1_1activity.html#aeaf279c6e1a9126e7e51936744e7b8cd">mod_workshop\search\activity</a>, <a class="el" href="../../d2/d98/classcore__search_1_1base__activity.html#ad6fd2850be9b8a4dbde4c1341e582d33">core_search\base_activity</a>, and <a class="el" href="../../d6/d8f/classcore__user_1_1search_1_1user.html#ad1c9e4d883285c050965bae3048d2b52">core_user\search\user</a>.</p>

</div>
</div>
<a id="a5e9bc3cd8168d3feb10fd3e81ed0dc09" name="a5e9bc3cd8168d3feb10fd3e81ed0dc09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e9bc3cd8168d3feb10fd3e81ed0dc09">&#9670;&#160;</a></span>get_settingnames()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_search\base::get_settingnames </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return a list of all required setting names. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a86c1d89a2d7aef3dd68e4e64d96495ac" name="a86c1d89a2d7aef3dd68e4e64d96495ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86c1d89a2d7aef3dd68e4e64d96495ac">&#9670;&#160;</a></span>get_visible_name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_search\base::get_visible_name </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$lazyload</em> = <code>false</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the area visible name. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">bool</td><td class="paramname">$lazyload</td><td>Usually false, unless when in admin settings. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7ca7150e7e84d3b428fccc99a077da94" name="a7ca7150e7e84d3b428fccc99a077da94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ca7150e7e84d3b428fccc99a077da94">&#9670;&#160;</a></span>is_enabled()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_search\base::is_enabled </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Is the search component enabled by the system administrator? </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a23355bc06d69086a8878d8f75bf60b9b" name="a23355bc06d69086a8878d8f75bf60b9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23355bc06d69086a8878d8f75bf60b9b">&#9670;&#160;</a></span>is_supported_page_type_at_course_context()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_search\base_block::is_supported_page_type_at_course_context </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$pagetype</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if a page type is supported for blocks when at course (or also site) context. </p>
<p>This function should be consistent with the SQL in get_recordset_by_timestamp.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$pagetype</td><td><a class="el" href="../../db/d2f/class_page.html" title="Class representing a page of a PDF document.">Page</a> type </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>True if supported </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0e1b43dd5b41154eb00b53817c52c29b" name="a0e1b43dd5b41154eb00b53817c52c29b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e1b43dd5b41154eb00b53817c52c29b">&#9670;&#160;</a></span>supports_get_document_recordset()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_search\base::supports_get_document_recordset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if get_document_recordset is supported for this search area. </p>
<p>For many uses you can simply call get_document_recordset and see if it returns false, but this function is useful when you don't want to actually call the function right away. </p>

</div>
</div>
<a id="a091d34f6bd89871851b4c6019bc4e353" name="a091d34f6bd89871851b4c6019bc4e353"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a091d34f6bd89871851b4c6019bc4e353">&#9670;&#160;</a></span>uses_file_indexing()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core_search\base::uses_file_indexing </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns true if this area uses file indexing. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../dc/d44/classblock__html_1_1search_1_1content.html#a907188e0e9984c93c46d07faf89a063a">block_html\search\content</a>, <a class="el" href="../../d2/dce/classcore__course_1_1search_1_1course.html#a8b5f59448a43c22f10aa5196489b5dfa">core_course\search\course</a>, <a class="el" href="../../d6/d8d/classcore__course_1_1search_1_1section.html#a5435f05bc8c67bef44c74d41b1fcc26e">core_course\search\section</a>, <a class="el" href="../../da/d9d/classmod__assign_1_1search_1_1activity.html#a10d84a6ac211d1314a35f8d453d7c395">mod_assign\search\activity</a>, <a class="el" href="../../d3/d49/classmod__bigbluebuttonbn_1_1search_1_1activity.html#a86508b81dcad667add9049af261ea54e">mod_bigbluebuttonbn\search\activity</a>, <a class="el" href="../../d5/d04/classmod__bigbluebuttonbn_1_1search_1_1tags.html#aac2f4d87001bcf3fb754c55bc4d333d9">mod_bigbluebuttonbn\search\tags</a>, <a class="el" href="../../d7/d9d/classmod__book_1_1search_1_1activity.html#a8896970f4c2e07ad995e63d930646012">mod_book\search\activity</a>, <a class="el" href="../../db/d5f/classmod__book_1_1search_1_1chapter.html#aa1b74831cc44cce9acdd450732de7d90">mod_book\search\chapter</a>, <a class="el" href="../../d8/d79/classmod__chat_1_1search_1_1activity.html#a2ef35624d6d98578816e68e15d1efcb3">mod_chat\search\activity</a>, <a class="el" href="../../d8/d75/classmod__choice_1_1search_1_1activity.html#a3fcd728d9d438d02d74f236539b2ad77">mod_choice\search\activity</a>, <a class="el" href="../../d4/dcb/classmod__data_1_1search_1_1activity.html#a872f3c3072e1e88edf105c8b9b71676c">mod_data\search\activity</a>, <a class="el" href="../../d3/d75/classmod__data_1_1search_1_1entry.html#a5fb0a9ff3b826b18a9d0c374f82aec1c">mod_data\search\entry</a>, <a class="el" href="../../dd/dee/classmod__feedback_1_1search_1_1activity.html#af2b93e6dfdf9d857721ab1930aa93bde">mod_feedback\search\activity</a>, <a class="el" href="../../db/df7/classmod__folder_1_1search_1_1activity.html#a881da3e5ddaff5479bec3142935e3a72">mod_folder\search\activity</a>, <a class="el" href="../../d5/dce/classmod__forum_1_1search_1_1activity.html#ae7fd731920758a47671172627c5e6cee">mod_forum\search\activity</a>, <a class="el" href="../../d3/dda/classmod__forum_1_1search_1_1post.html#a980be518f305820fbb6fb53535b727b1">mod_forum\search\post</a>, <a class="el" href="../../db/df7/classmod__glossary_1_1search_1_1activity.html#a8f0f0eb542c734dc9ba7514d206214b1">mod_glossary\search\activity</a>, <a class="el" href="../../d0/df6/classmod__glossary_1_1search_1_1entry.html#a8b16b759fe810e1da13d278ee4cde4b7">mod_glossary\search\entry</a>, <a class="el" href="../../da/daa/classmod__h5pactivity_1_1search_1_1activity.html#a1225afd56a673841ed207c4a468c0b1f">mod_h5pactivity\search\activity</a>, <a class="el" href="../../d5/d2c/classmod__imscp_1_1search_1_1activity.html#a5db1e207ad0e285c09c3afd0d681bb71">mod_imscp\search\activity</a>, <a class="el" href="../../d2/d33/classmod__label_1_1search_1_1activity.html#a5ac9bb8d84dfa6c954d1c7619761d339">mod_label\search\activity</a>, <a class="el" href="../../de/d35/classmod__lesson_1_1search_1_1activity.html#a9b3552943f3341cea1d83a9965cd486a">mod_lesson\search\activity</a>, <a class="el" href="../../d7/d31/classmod__lti_1_1search_1_1activity.html#ab3630e35a688012db4b4138904b686c0">mod_lti\search\activity</a>, <a class="el" href="../../dc/dd4/classmod__page_1_1search_1_1activity.html#a3bfbeb0a3ca807dae63f8bd79220f455">mod_page\search\activity</a>, <a class="el" href="../../df/d02/classmod__quiz_1_1search_1_1activity.html#ada9ce59aab7c990d80636080157c9873">mod_quiz\search\activity</a>, <a class="el" href="../../db/dc1/classmod__resource_1_1search_1_1activity.html#a9fec60af39fe1e34843ba80ff7fa48b0">mod_resource\search\activity</a>, <a class="el" href="../../d5/d88/classmod__scorm_1_1search_1_1activity.html#a117eea5ce5f2a4e2ea5d6c2bdf89d4c4">mod_scorm\search\activity</a>, <a class="el" href="../../de/db9/classmod__survey_1_1search_1_1activity.html#a7c2e281f2c041199180078022fbf6a9e">mod_survey\search\activity</a>, <a class="el" href="../../d1/d86/classmod__url_1_1search_1_1activity.html#a2e9a1f6a172e2e493a165067db606205">mod_url\search\activity</a>, <a class="el" href="../../d7/d3d/classmod__wiki_1_1search_1_1activity.html#ab54520e73c7ec94d031e449f7f0ee268">mod_wiki\search\activity</a>, <a class="el" href="../../dc/d58/classmod__wiki_1_1search_1_1collaborative__page.html#ac2ec8eb3a4c749b387f32591c47b37a3">mod_wiki\search\collaborative_page</a>, <a class="el" href="../../d8/dd5/classmod__workshop_1_1search_1_1activity.html#aff67e91a27e75248379b78383ba1f355">mod_workshop\search\activity</a>, and <a class="el" href="../../d6/d8f/classcore__user_1_1search_1_1user.html#a2ec4bcea43bc59562740102d0b5abe66">core_user\search\user</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a05069b88a2d8787f386cd94ec736149e" name="a05069b88a2d8787f386cd94ec736149e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05069b88a2d8787f386cd94ec736149e">&#9670;&#160;</a></span>$levels</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">array core_search\base_block::$levels = [<a class="el" href="../../da/d16/group__core__access.html#gaf26e0e9d63f6aa70f446e178150f0127">CONTEXT_BLOCK</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The context levels the search area is working on. </p>
<p>This can be overwriten by the search area if it works at multiple levels. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>search/classes/base_block.php</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun May 21 2023 02:55:01 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>
