<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: assignfeedback_editpdf\document_services Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;3.11</span>
   </div>
   <div id="projectbrief">Moodle 3.11.16+ (Build: 20230818) (a1dee0fff4)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../df/d2b/namespaceassignfeedback__editpdf.html">assignfeedback_editpdf</a></li><li class="navelem"><a class="el" href="../../dc/d08/classassignfeedback__editpdf_1_1document__services.html">document_services</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="../../de/d8e/classassignfeedback__editpdf_1_1document__services-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">assignfeedback_editpdf\document_services Class Reference<div class="ingroups"><a class="el" href="../../d3/ddb/group__assignfeedback__editpdf.html">assignfeedback_editpdf</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Functions for generating the annotated pdf.  
 <a href="../../dc/d08/classassignfeedback__editpdf_1_1document__services.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a38a64a94512f67f28076839ed6aa36fc"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d08/classassignfeedback__editpdf_1_1document__services.html#a38a64a94512f67f28076839ed6aa36fc">copy_pages_to_readonly_area</a> ($assignment, $grade)</td></tr>
<tr class="memdesc:a38a64a94512f67f28076839ed6aa36fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy the pages image to the readonly area.  <br /></td></tr>
<tr class="separator:a38a64a94512f67f28076839ed6aa36fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2ecfc649971bb9f0255909dd404d2b8"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d08/classassignfeedback__editpdf_1_1document__services.html#ae2ecfc649971bb9f0255909dd404d2b8">delete_feedback_document</a> ($assignment, $userid, $attemptnumber)</td></tr>
<tr class="memdesc:ae2ecfc649971bb9f0255909dd404d2b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function deletes the generated pdf for a student.  <br /></td></tr>
<tr class="separator:ae2ecfc649971bb9f0255909dd404d2b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac73ca07a68681ee3b37e78a4c325d885"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d08/classassignfeedback__editpdf_1_1document__services.html#ac73ca07a68681ee3b37e78a4c325d885">generate_feedback_document</a> ($assignment, $userid, $attemptnumber)</td></tr>
<tr class="memdesc:ac73ca07a68681ee3b37e78a4c325d885"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function takes the combined pdf and embeds all the comments and annotations.  <br /></td></tr>
<tr class="separator:ac73ca07a68681ee3b37e78a4c325d885"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1ece8111b04ef6321896668cf1ad657"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d08/classassignfeedback__editpdf_1_1document__services.html#af1ece8111b04ef6321896668cf1ad657">get_combined_document_for_attempt</a> ($assignment, $userid, $attemptnumber)</td></tr>
<tr class="memdesc:af1ece8111b04ef6321896668cf1ad657"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetch the current combined document ready for state checking.  <br /></td></tr>
<tr class="separator:af1ece8111b04ef6321896668cf1ad657"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5303d9569dca6e8acac66ab3ad6ffd01"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d08/classassignfeedback__editpdf_1_1document__services.html#a5303d9569dca6e8acac66ab3ad6ffd01">get_combined_pdf_for_attempt</a> ($assignment, $userid, $attemptnumber)</td></tr>
<tr class="memdesc:a5303d9569dca6e8acac66ab3ad6ffd01"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function return the combined pdf for all valid submission files.  <br /></td></tr>
<tr class="separator:a5303d9569dca6e8acac66ab3ad6ffd01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ec6d8faf4769f34954b1030d2c1bd4b"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d08/classassignfeedback__editpdf_1_1document__services.html#a6ec6d8faf4769f34954b1030d2c1bd4b">get_feedback_document</a> ($assignment, $userid, $attemptnumber)</td></tr>
<tr class="memdesc:a6ec6d8faf4769f34954b1030d2c1bd4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function returns the generated pdf (if it exists).  <br /></td></tr>
<tr class="separator:a6ec6d8faf4769f34954b1030d2c1bd4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae670f446e2ed4f28dc7853837018031"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d08/classassignfeedback__editpdf_1_1document__services.html#aae670f446e2ed4f28dc7853837018031">get_page_images_for_attempt</a> ($assignment, $userid, $attemptnumber, $readonly=false)</td></tr>
<tr class="memdesc:aae670f446e2ed4f28dc7853837018031"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function returns a list of the page images from a pdf.  <br /></td></tr>
<tr class="separator:aae670f446e2ed4f28dc7853837018031"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1df285e2ae5729dac51b4613b8b6f95"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d08/classassignfeedback__editpdf_1_1document__services.html#aa1df285e2ae5729dac51b4613b8b6f95">page_number_for_attempt</a> ($assignment, $userid, $attemptnumber, $readonly=false)</td></tr>
<tr class="memdesc:aa1df285e2ae5729dac51b4613b8b6f95"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function will return the number of pages of a pdf.  <br /></td></tr>
<tr class="separator:aa1df285e2ae5729dac51b4613b8b6f95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae06681b5d74b68ed5a9769c9e4efa0e9"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d08/classassignfeedback__editpdf_1_1document__services.html#ae06681b5d74b68ed5a9769c9e4efa0e9">rotate_page</a> ($assignment, $userid, $attemptnumber, $index, $rotateleft)</td></tr>
<tr class="memdesc:ae06681b5d74b68ed5a9769c9e4efa0e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function rotate a page, and mark the page as rotated.  <br /></td></tr>
<tr class="separator:ae06681b5d74b68ed5a9769c9e4efa0e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a4b98e32ecec9239285e91d3c6596ad6d"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d08/classassignfeedback__editpdf_1_1document__services.html#a4b98e32ecec9239285e91d3c6596ad6d">BLANK_PDF_BASE64</a> =</td></tr>
<tr class="memdesc:a4b98e32ecec9239285e91d3c6596ad6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Base64 encoded blank pdf.  <br /></td></tr>
<tr class="separator:a4b98e32ecec9239285e91d3c6596ad6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9be05605a714494c5a372c501db7cd7"><td class="memItemLeft" align="right" valign="top"><a id="ab9be05605a714494c5a372c501db7cd7" name="ab9be05605a714494c5a372c501db7cd7"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>BLANK_PDF_HASH</b> = '4c803c92c71f21b423d13de570c8a09e0a31c718'</td></tr>
<tr class="memdesc:ab9be05605a714494c5a372c501db7cd7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hash of blank pdf. <br /></td></tr>
<tr class="separator:ab9be05605a714494c5a372c501db7cd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1c07f8cd2649f2c619789fca893af78"><td class="memItemLeft" align="right" valign="top"><a id="ad1c07f8cd2649f2c619789fca893af78" name="ad1c07f8cd2649f2c619789fca893af78"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>COMBINED_PDF_FILEAREA</b> = 'combined'</td></tr>
<tr class="memdesc:ad1c07f8cd2649f2c619789fca893af78"><td class="mdescLeft">&#160;</td><td class="mdescRight">File area for combined pdf. <br /></td></tr>
<tr class="separator:ad1c07f8cd2649f2c619789fca893af78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00bee78dc2ddb1a9c7cc39be86179f4e"><td class="memItemLeft" align="right" valign="top"><a id="a00bee78dc2ddb1a9c7cc39be86179f4e" name="a00bee78dc2ddb1a9c7cc39be86179f4e"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>COMBINED_PDF_FILENAME</b> = 'combined.pdf'</td></tr>
<tr class="memdesc:a00bee78dc2ddb1a9c7cc39be86179f4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Filename for combined pdf. <br /></td></tr>
<tr class="separator:a00bee78dc2ddb1a9c7cc39be86179f4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6e8db94c6d44f694c0ea71fb6243f57"><td class="memItemLeft" align="right" valign="top"><a id="ac6e8db94c6d44f694c0ea71fb6243f57" name="ac6e8db94c6d44f694c0ea71fb6243f57"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>COMPONENT</b> = &quot;assignfeedback_editpdf&quot;</td></tr>
<tr class="memdesc:ac6e8db94c6d44f694c0ea71fb6243f57"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compoment name. <br /></td></tr>
<tr class="separator:ac6e8db94c6d44f694c0ea71fb6243f57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbbdd7035157b2fbfa2a211a74e278b2"><td class="memItemLeft" align="right" valign="top"><a id="acbbdd7035157b2fbfa2a211a74e278b2" name="acbbdd7035157b2fbfa2a211a74e278b2"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>FINAL_PDF_FILEAREA</b> = 'download'</td></tr>
<tr class="memdesc:acbbdd7035157b2fbfa2a211a74e278b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">File area for generated pdf. <br /></td></tr>
<tr class="separator:acbbdd7035157b2fbfa2a211a74e278b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af38959c7756f10d0f4a373278ece2527"><td class="memItemLeft" align="right" valign="top"><a id="af38959c7756f10d0f4a373278ece2527" name="af38959c7756f10d0f4a373278ece2527"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>IMPORT_HTML_FILEAREA</b> = 'importhtml'</td></tr>
<tr class="memdesc:af38959c7756f10d0f4a373278ece2527"><td class="mdescLeft">&#160;</td><td class="mdescRight">File area for importing html. <br /></td></tr>
<tr class="separator:af38959c7756f10d0f4a373278ece2527"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a870612fe66fa7be38e0508e7029f0da4"><td class="memItemLeft" align="right" valign="top"><a id="a870612fe66fa7be38e0508e7029f0da4" name="a870612fe66fa7be38e0508e7029f0da4"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>PAGE_IMAGE_FILEAREA</b> = 'pages'</td></tr>
<tr class="memdesc:a870612fe66fa7be38e0508e7029f0da4"><td class="mdescLeft">&#160;</td><td class="mdescRight">File area for page images. <br /></td></tr>
<tr class="separator:a870612fe66fa7be38e0508e7029f0da4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae82e542f2763469607c7e26656f5b002"><td class="memItemLeft" align="right" valign="top"><a id="ae82e542f2763469607c7e26656f5b002" name="ae82e542f2763469607c7e26656f5b002"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>PAGE_IMAGE_READONLY_FILEAREA</b> = 'readonlypages'</td></tr>
<tr class="memdesc:ae82e542f2763469607c7e26656f5b002"><td class="mdescLeft">&#160;</td><td class="mdescRight">File area for readonly page images. <br /></td></tr>
<tr class="separator:ae82e542f2763469607c7e26656f5b002"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66e95266bb489f7ad29f9e174dc496d5"><td class="memItemLeft" align="right" valign="top"><a id="a66e95266bb489f7ad29f9e174dc496d5" name="a66e95266bb489f7ad29f9e174dc496d5"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>PARTIAL_PDF_FILEAREA</b> = '<a class="el" href="../../d0/de1/group__core.html#gada7453623cff5a4bbedaad4a01199ef1">partial</a>'</td></tr>
<tr class="memdesc:a66e95266bb489f7ad29f9e174dc496d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">File area for partial combined pdf. <br /></td></tr>
<tr class="separator:a66e95266bb489f7ad29f9e174dc496d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34d4e78d2cefb8d52d591108de1fd4d1"><td class="memItemLeft" align="right" valign="top"><a id="a34d4e78d2cefb8d52d591108de1fd4d1" name="a34d4e78d2cefb8d52d591108de1fd4d1"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>STAMPS_FILEAREA</b> = 'stamps'</td></tr>
<tr class="memdesc:a34d4e78d2cefb8d52d591108de1fd4d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">File area for the stamps. <br /></td></tr>
<tr class="separator:a34d4e78d2cefb8d52d591108de1fd4d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36155b43b70452d3eb2842fc626d75ab"><td class="memItemLeft" align="right" valign="top"><a id="a36155b43b70452d3eb2842fc626d75ab" name="a36155b43b70452d3eb2842fc626d75ab"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>TMP_JPG_TO_PDF_FILEAREA</b> = 'tmp_jpg_to_pdf'</td></tr>
<tr class="memdesc:a36155b43b70452d3eb2842fc626d75ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Temporary place to save JPG Image to PDF file. <br /></td></tr>
<tr class="separator:a36155b43b70452d3eb2842fc626d75ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9c940abe4153d479f979fd23cc9f58f"><td class="memItemLeft" align="right" valign="top"><a id="ae9c940abe4153d479f979fd23cc9f58f" name="ae9c940abe4153d479f979fd23cc9f58f"></a>
const&#160;</td><td class="memItemRight" valign="bottom"><b>TMP_ROTATED_JPG_FILEAREA</b> = 'tmp_rotated_jpg'</td></tr>
<tr class="memdesc:ae9c940abe4153d479f979fd23cc9f58f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Temporary place to save (Automatically) Rotated JPG FILE. <br /></td></tr>
<tr class="separator:ae9c940abe4153d479f979fd23cc9f58f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-static-methods" name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr class="memitem:a5e58be25ee5707b89eb695752ac9752a"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d08/classassignfeedback__editpdf_1_1document__services.html#a5e58be25ee5707b89eb695752ac9752a">generate_page_images_for_attempt</a> ($assignment, $userid, $attemptnumber, $resetrotation=true)</td></tr>
<tr class="memdesc:a5e58be25ee5707b89eb695752ac9752a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function will generate and return a list of the page images from a pdf.  <br /></td></tr>
<tr class="separator:a5e58be25ee5707b89eb695752ac9752a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a002c765f22af5c59d9e005c5572d6381"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d08/classassignfeedback__editpdf_1_1document__services.html#a002c765f22af5c59d9e005c5572d6381">get_downloadable_feedback_filename</a> ($assignment, $userid, $attemptnumber)</td></tr>
<tr class="memdesc:a002c765f22af5c59d9e005c5572d6381"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function returns sensible filename for a feedback file.  <br /></td></tr>
<tr class="separator:a002c765f22af5c59d9e005c5572d6381"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cbf0c89bd4e0a8f0de3f09331334ea9"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d08/classassignfeedback__editpdf_1_1document__services.html#a1cbf0c89bd4e0a8f0de3f09331334ea9">list_compatible_submission_files_for_attempt</a> ($assignment, $userid, $attemptnumber)</td></tr>
<tr class="memdesc:a1cbf0c89bd4e0a8f0de3f09331334ea9"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function will search for all files that can be converted and concatinated into a PDF (1.4) - for any submission plugin for this students attempt.  <br /></td></tr>
<tr class="separator:a1cbf0c89bd4e0a8f0de3f09331334ea9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f37c0c4bf0eb71ed6031ac8dd42d608"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d08/classassignfeedback__editpdf_1_1document__services.html#a5f37c0c4bf0eb71ed6031ac8dd42d608">strip_images</a> ($html)</td></tr>
<tr class="memdesc:a5f37c0c4bf0eb71ed6031ac8dd42d608"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use a DOM parser to accurately replace images with their alt text.  <br /></td></tr>
<tr class="separator:a5f37c0c4bf0eb71ed6031ac8dd42d608"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Functions for generating the annotated pdf. </p>
<p>This class controls the ingest of student submission files to a normalised PDF 1.4 document with all submission files concatinated together. It also provides the functions to generate a downloadable pdf with all comments and annotations embedded. </p><dl class="section copyright"><dt>Copyright</dt><dd>2012 Davo Smith </dd></dl>
<dl class="section user"><dt>License</dt><dd><a href="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later </dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a38a64a94512f67f28076839ed6aa36fc" name="a38a64a94512f67f28076839ed6aa36fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38a64a94512f67f28076839ed6aa36fc">&#9670;&#160;</a></span>copy_pages_to_readonly_area()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static assignfeedback_editpdf\document_services::copy_pages_to_readonly_area </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$assignment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$grade</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Copy the pages image to the readonly area. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int&#160;|&#160;assign</td><td class="paramname">$assignment</td><td>The assignment. </td></tr>
    <tr><td class="paramtype">stdClass</td><td class="paramname">$grade</td><td>The grade record. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae2ecfc649971bb9f0255909dd404d2b8" name="ae2ecfc649971bb9f0255909dd404d2b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2ecfc649971bb9f0255909dd404d2b8">&#9670;&#160;</a></span>delete_feedback_document()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static assignfeedback_editpdf\document_services::delete_feedback_document </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$assignment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$userid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$attemptnumber</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function deletes the generated pdf for a student. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int&#160;|&#160;assign</td><td class="paramname">$assignment</td><td></td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td></td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$attemptnumber</td><td>(-1 means latest attempt) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac73ca07a68681ee3b37e78a4c325d885" name="ac73ca07a68681ee3b37e78a4c325d885"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac73ca07a68681ee3b37e78a4c325d885">&#9670;&#160;</a></span>generate_feedback_document()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static assignfeedback_editpdf\document_services::generate_feedback_document </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$assignment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$userid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$attemptnumber</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function takes the combined pdf and embeds all the comments and annotations. </p>
<p>This also moves the annotations and comments from drafts to not drafts. And it will copy all the images stored to the readonly area, so that they can be viewed online, and not be overwritten when a new submission is sent.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int&#160;|&#160;assign</td><td class="paramname">$assignment</td><td></td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td></td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$attemptnumber</td><td>(-1 means latest attempt) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5e58be25ee5707b89eb695752ac9752a" name="a5e58be25ee5707b89eb695752ac9752a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e58be25ee5707b89eb695752ac9752a">&#9670;&#160;</a></span>generate_page_images_for_attempt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static assignfeedback_editpdf\document_services::generate_page_images_for_attempt </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$assignment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$userid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$attemptnumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$resetrotation</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function will generate and return a list of the page images from a pdf. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int&#160;|&#160;assign</td><td class="paramname">$assignment</td><td></td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td></td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$attemptnumber</td><td>(-1 means latest attempt) </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$resetrotation</td><td>check if need to reset page rotation information </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array(stored_file)</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af1ece8111b04ef6321896668cf1ad657" name="af1ece8111b04ef6321896668cf1ad657"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1ece8111b04ef6321896668cf1ad657">&#9670;&#160;</a></span>get_combined_document_for_attempt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static assignfeedback_editpdf\document_services::get_combined_document_for_attempt </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$assignment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$userid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$attemptnumber</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fetch the current combined document ready for state checking. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int&#160;|&#160;assign</td><td class="paramname">$assignment</td><td></td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td></td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$attemptnumber</td><td>(-1 means latest attempt) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">combined_document</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5303d9569dca6e8acac66ab3ad6ffd01" name="a5303d9569dca6e8acac66ab3ad6ffd01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5303d9569dca6e8acac66ab3ad6ffd01">&#9670;&#160;</a></span>get_combined_pdf_for_attempt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static assignfeedback_editpdf\document_services::get_combined_pdf_for_attempt </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$assignment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$userid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$attemptnumber</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function return the combined pdf for all valid submission files. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int&#160;|&#160;assign</td><td class="paramname">$assignment</td><td></td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td></td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$attemptnumber</td><td>(-1 means latest attempt) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">combined_document</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a002c765f22af5c59d9e005c5572d6381" name="a002c765f22af5c59d9e005c5572d6381"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a002c765f22af5c59d9e005c5572d6381">&#9670;&#160;</a></span>get_downloadable_feedback_filename()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static assignfeedback_editpdf\document_services::get_downloadable_feedback_filename </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$assignment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$userid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$attemptnumber</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function returns sensible filename for a feedback file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int&#160;|&#160;assign</td><td class="paramname">$assignment</td><td></td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td></td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$attemptnumber</td><td>(-1 means latest attempt) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6ec6d8faf4769f34954b1030d2c1bd4b" name="a6ec6d8faf4769f34954b1030d2c1bd4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ec6d8faf4769f34954b1030d2c1bd4b">&#9670;&#160;</a></span>get_feedback_document()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static assignfeedback_editpdf\document_services::get_feedback_document </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$assignment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$userid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$attemptnumber</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function returns the generated pdf (if it exists). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int&#160;|&#160;assign</td><td class="paramname">$assignment</td><td></td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td></td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$attemptnumber</td><td>(-1 means latest attempt) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aae670f446e2ed4f28dc7853837018031" name="aae670f446e2ed4f28dc7853837018031"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae670f446e2ed4f28dc7853837018031">&#9670;&#160;</a></span>get_page_images_for_attempt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static assignfeedback_editpdf\document_services::get_page_images_for_attempt </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$assignment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$userid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$attemptnumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$readonly</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function returns a list of the page images from a pdf. </p>
<p>The readonly version is different than the normal one. The readonly version contains a copy of the pages in the state they were when the PDF was annotated, by doing so we prevent the the pages that are displayed to change as soon as the submission changes.</p>
<p>Though there is an edge case, if the PDF was annotated before <a href="https://tracker.moodle.org/browse/MDL-45580" class="el">MDL-45580</a>, then it is possible that we do not find any readonly version of the pages. In that case, we will get the normal pages and copy them to the readonly area. This ensures that the pages will remain in that state until the submission is updated. When the normal files do not exist, we throw an exception because the readonly pages should only ever be displayed after a teacher has annotated the PDF, they would not exist until they do.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int&#160;|&#160;assign</td><td class="paramname">$assignment</td><td></td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td></td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$attemptnumber</td><td>(-1 means latest attempt) </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$readonly</td><td>If true, then we are requesting the readonly version. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array(stored_file)</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1cbf0c89bd4e0a8f0de3f09331334ea9" name="a1cbf0c89bd4e0a8f0de3f09331334ea9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1cbf0c89bd4e0a8f0de3f09331334ea9">&#9670;&#160;</a></span>list_compatible_submission_files_for_attempt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static assignfeedback_editpdf\document_services::list_compatible_submission_files_for_attempt </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$assignment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$userid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$attemptnumber</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function will search for all files that can be converted and concatinated into a PDF (1.4) - for any submission plugin for this students attempt. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int&#160;|&#160;assign</td><td class="paramname">$assignment</td><td></td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td></td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$attemptnumber</td><td>(-1 means latest attempt) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">combined_document</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa1df285e2ae5729dac51b4613b8b6f95" name="aa1df285e2ae5729dac51b4613b8b6f95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1df285e2ae5729dac51b4613b8b6f95">&#9670;&#160;</a></span>page_number_for_attempt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static assignfeedback_editpdf\document_services::page_number_for_attempt </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$assignment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$userid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$attemptnumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$readonly</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function will return the number of pages of a pdf. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int&#160;|&#160;assign</td><td class="paramname">$assignment</td><td></td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td></td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$attemptnumber</td><td>(-1 means latest attempt) </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$readonly</td><td>When true we get the number of pages for the readonly version. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td>number of pages </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae06681b5d74b68ed5a9769c9e4efa0e9" name="ae06681b5d74b68ed5a9769c9e4efa0e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae06681b5d74b68ed5a9769c9e4efa0e9">&#9670;&#160;</a></span>rotate_page()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static assignfeedback_editpdf\document_services::rotate_page </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$assignment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$userid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$attemptnumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$rotateleft</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function rotate a page, and mark the page as rotated. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int&#160;|&#160;assign</td><td class="paramname">$assignment</td><td>Assignment </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td>User ID </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$attemptnumber</td><td>Attempt Number </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$index</td><td>Index of Current <a class="el" href="../../db/d2f/class_page.html" title="Class representing a page of a PDF document.">Page</a> </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$rotateleft</td><td>To determine whether the page is rotated left or right. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">null|stored_file</td><td>return rotated File </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../da/d34/classcoding__exception.html" title="Exception indicating programming error, must be fixed by a programer.">coding_exception</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="../../d9/daf/classfile__exception.html">file_exception</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="../../d6/da8/classmoodle__exception.html" title="Base Moodle Exception class.">moodle_exception</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="../../dd/d0b/classstored__file__creation__exception.html">stored_file_creation_exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5f37c0c4bf0eb71ed6031ac8dd42d608" name="a5f37c0c4bf0eb71ed6031ac8dd42d608"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f37c0c4bf0eb71ed6031ac8dd42d608">&#9670;&#160;</a></span>strip_images()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static assignfeedback_editpdf\document_services::strip_images </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$html</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Use a DOM parser to accurately replace images with their alt text. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$html</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>New html with no image tags. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a4b98e32ecec9239285e91d3c6596ad6d" name="a4b98e32ecec9239285e91d3c6596ad6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b98e32ecec9239285e91d3c6596ad6d">&#9670;&#160;</a></span>BLANK_PDF_BASE64</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const assignfeedback_editpdf\document_services::BLANK_PDF_BASE64 =</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Base64 encoded blank pdf. </p>
<p>This is the most reliable/fastest way to generate a blank pdf. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>mod/assign/feedback/editpdf/classes/document_services.php</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 20 2023 02:21:09 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>
