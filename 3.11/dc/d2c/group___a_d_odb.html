<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: ADOdb</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;3.11</span>
   </div>
   <div id="projectbrief">Moodle 3.11.7+ (Build: 20220617) (8303206ae0)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">ADOdb</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d4e/class_a_d_odb_load_balancer_connection.html">ADOdbLoadBalancerConnection</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Class <a class="el" href="../../d4/d4e/class_a_d_odb_load_balancer_connection.html" title="Class ADOdbLoadBalancerConnection.">ADOdbLoadBalancerConnection</a>.  <a href="../../d4/d4e/class_a_d_odb_load_balancer_connection.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga9f1179240d068c94a040021326032bed"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2c/group___a_d_odb.html#ga9f1179240d068c94a040021326032bed">__call</a> ($method, $args)</td></tr>
<tr class="memdesc:ga9f1179240d068c94a040021326032bed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Magic method to intercept method and callback to the proper ADODB object for write/readonly connections.  <a href="../../dc/d2c/group___a_d_odb.html#ga9f1179240d068c94a040021326032bed">More...</a><br /></td></tr>
<tr class="separator:ga9f1179240d068c94a040021326032bed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6481e8cfc93c80885b3d72a6e1f15a1f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2c/group___a_d_odb.html#ga6481e8cfc93c80885b3d72a6e1f15a1f">__get</a> ($property)</td></tr>
<tr class="memdesc:ga6481e8cfc93c80885b3d72a6e1f15a1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Magic method to proxy property getter calls back to the proper ADODB object currently in use.  <a href="../../dc/d2c/group___a_d_odb.html#ga6481e8cfc93c80885b3d72a6e1f15a1f">More...</a><br /></td></tr>
<tr class="separator:ga6481e8cfc93c80885b3d72a6e1f15a1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9b7f2b58fa3c9e81f142efb424433163"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2c/group___a_d_odb.html#ga9b7f2b58fa3c9e81f142efb424433163">__set</a> ($property, $<a class="el" href="../../d8/ded/group___simple_pie.html#gaefbfa229f1c9e1fc967bff724a010f9e">value</a>)</td></tr>
<tr class="memdesc:ga9b7f2b58fa3c9e81f142efb424433163"><td class="mdescLeft">&#160;</td><td class="mdescRight">Magic method to proxy property setter calls back to the proper ADODB object currently in use.  <a href="../../dc/d2c/group___a_d_odb.html#ga9b7f2b58fa3c9e81f142efb424433163">More...</a><br /></td></tr>
<tr class="separator:ga9b7f2b58fa3c9e81f142efb424433163"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga049a5d22396e17bca227c7edf39987ff"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2c/group___a_d_odb.html#ga049a5d22396e17bca227c7edf39987ff">addConnection</a> ($obj)</td></tr>
<tr class="memdesc:ga049a5d22396e17bca227c7edf39987ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a new database connection to the pool, but no actual connection is made until its needed.  <a href="../../dc/d2c/group___a_d_odb.html#ga049a5d22396e17bca227c7edf39987ff">More...</a><br /></td></tr>
<tr class="separator:ga049a5d22396e17bca227c7edf39987ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4bf2671da3a2c5ae0486de12fb792a94"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2c/group___a_d_odb.html#ga4bf2671da3a2c5ae0486de12fb792a94">clusterExecute</a> ( $sql, $inputarr=false, $return_all_results=false, $existing_connections_only=true)</td></tr>
<tr class="memdesc:ga4bf2671da3a2c5ae0486de12fb792a94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes the same SQL QUERY on the entire cluster of connections.  <a href="../../dc/d2c/group___a_d_odb.html#ga4bf2671da3a2c5ae0486de12fb792a94">More...</a><br /></td></tr>
<tr class="separator:ga4bf2671da3a2c5ae0486de12fb792a94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5e21842a7a858c38f72e03722cf98fc3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2c/group___a_d_odb.html#ga5e21842a7a858c38f72e03722cf98fc3">execute</a> ($sql, $inputarr=false)</td></tr>
<tr class="memdesc:ga5e21842a7a858c38f72e03722cf98fc3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use this instead of <a class="el" href="../../dc/d2c/group___a_d_odb.html#ga9f1179240d068c94a040021326032bed" title="Magic method to intercept method and callback to the proper ADODB object for write/readonly connectio...">__call()</a> as it significantly reduces the overhead of call_user_func_array().  <a href="../../dc/d2c/group___a_d_odb.html#ga5e21842a7a858c38f72e03722cf98fc3">More...</a><br /></td></tr>
<tr class="separator:ga5e21842a7a858c38f72e03722cf98fc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad78532440717db93ea23780edf2a4f9a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2c/group___a_d_odb.html#gad78532440717db93ea23780edf2a4f9a">getConnection</a> ($type='<a class="el" href="../../dc/d71/group___imap___client.html#gaea09d1ed6a1a3aa8fca59357baa9af80">write</a>', $pin_connection=null)</td></tr>
<tr class="memdesc:gad78532440717db93ea23780edf2a4f9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the ADODB connection object by database type.  <a href="../../dc/d2c/group___a_d_odb.html#gad78532440717db93ea23780edf2a4f9a">More...</a><br /></td></tr>
<tr class="separator:gad78532440717db93ea23780edf2a4f9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0af9a6f29e8b0d767ac17cb307c4f64a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2c/group___a_d_odb.html#ga0af9a6f29e8b0d767ac17cb307c4f64a">getLoadBalancedConnection</a> ($type)</td></tr>
<tr class="memdesc:ga0af9a6f29e8b0d767ac17cb307c4f64a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the proper database connection when taking into account sticky sessions and load balancing.  <a href="../../dc/d2c/group___a_d_odb.html#ga0af9a6f29e8b0d767ac17cb307c4f64a">More...</a><br /></td></tr>
<tr class="separator:ga0af9a6f29e8b0d767ac17cb307c4f64a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga29f384ae91d2bdef0b5d30097ec93c10"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2c/group___a_d_odb.html#ga29f384ae91d2bdef0b5d30097ec93c10">isReadOnlyQuery</a> ($sql)</td></tr>
<tr class="memdesc:ga29f384ae91d2bdef0b5d30097ec93c10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines if a SQL query is read-only or not.  <a href="../../dc/d2c/group___a_d_odb.html#ga29f384ae91d2bdef0b5d30097ec93c10">More...</a><br /></td></tr>
<tr class="separator:ga29f384ae91d2bdef0b5d30097ec93c10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga76e6ccbe3c1288f3c34ed86a4eba655f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2c/group___a_d_odb.html#ga76e6ccbe3c1288f3c34ed86a4eba655f">removeConnection</a> ($i)</td></tr>
<tr class="memdesc:ga76e6ccbe3c1288f3c34ed86a4eba655f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes a database connection from the pool.  <a href="../../dc/d2c/group___a_d_odb.html#ga76e6ccbe3c1288f3c34ed86a4eba655f">More...</a><br /></td></tr>
<tr class="separator:ga76e6ccbe3c1288f3c34ed86a4eba655f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1a7fe41b9786ec8dc49d858f1b525766"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2c/group___a_d_odb.html#ga1a7fe41b9786ec8dc49d858f1b525766">setSessionInitSQL</a> ($sql)</td></tr>
<tr class="memdesc:ga1a7fe41b9786ec8dc49d858f1b525766"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines SQL queries that are executed each time a new database connection is established.  <a href="../../dc/d2c/group___a_d_odb.html#ga1a7fe41b9786ec8dc49d858f1b525766">More...</a><br /></td></tr>
<tr class="separator:ga1a7fe41b9786ec8dc49d858f1b525766"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9a357b40a36e1ad97c68040e93835f86"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d2c/group___a_d_odb.html#ga9a357b40a36e1ad97c68040e93835f86">setSessionVariable</a> ($<a class="el" href="../../d8/ded/group___simple_pie.html#ga4b516aaa5fa38da4fed24ab6001627e2">name</a>, $<a class="el" href="../../d8/ded/group___simple_pie.html#gaefbfa229f1c9e1fc967bff724a010f9e">value</a>, $execute_immediately=true)</td></tr>
<tr class="memdesc:ga9a357b40a36e1ad97c68040e93835f86"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allow setting session variables that are maintained across connections.  <a href="../../dc/d2c/group___a_d_odb.html#ga9a357b40a36e1ad97c68040e93835f86">More...</a><br /></td></tr>
<tr class="separator:ga9a357b40a36e1ad97c68040e93835f86"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gabcab58df7c4541681d9ba9c2156a1b93"><td class="memItemLeft" align="right" valign="top"><a id="gabcab58df7c4541681d9ba9c2156a1b93" name="gabcab58df7c4541681d9ba9c2156a1b93"></a>
bool array&#160;</td><td class="memItemRight" valign="bottom"><b>$connections</b> = false</td></tr>
<tr class="memdesc:gabcab58df7c4541681d9ba9c2156a1b93"><td class="mdescLeft">&#160;</td><td class="mdescRight">All connections to each database. <br /></td></tr>
<tr class="separator:gabcab58df7c4541681d9ba9c2156a1b93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga436e317f929f36593346a34d8653cdcf"><td class="memItemLeft" align="right" valign="top"><a id="ga436e317f929f36593346a34d8653cdcf" name="ga436e317f929f36593346a34d8653cdcf"></a>
bool array&#160;</td><td class="memItemRight" valign="bottom"><b>$connections_readonly</b> = false</td></tr>
<tr class="memdesc:ga436e317f929f36593346a34d8653cdcf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Just connections to the readonly database. <br /></td></tr>
<tr class="separator:ga436e317f929f36593346a34d8653cdcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacd3ab46c60a8b684de913316a139c3c9"><td class="memItemLeft" align="right" valign="top"><a id="gacd3ab46c60a8b684de913316a139c3c9" name="gacd3ab46c60a8b684de913316a139c3c9"></a>
bool array&#160;</td><td class="memItemRight" valign="bottom"><b>$connections_write</b> = false</td></tr>
<tr class="memdesc:gacd3ab46c60a8b684de913316a139c3c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Just connections to the write capable database. <br /></td></tr>
<tr class="separator:gacd3ab46c60a8b684de913316a139c3c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1fb7c1f1f9c4aaee0f9efefdb24676f6"><td class="memItemLeft" align="right" valign="top"><a id="ga1fb7c1f1f9c4aaee0f9efefdb24676f6" name="ga1fb7c1f1f9c4aaee0f9efefdb24676f6"></a>
array&#160;</td><td class="memItemRight" valign="bottom"><b>$last_connection_id</b> = array('<a class="el" href="../../dc/d71/group___imap___client.html#gaea09d1ed6a1a3aa8fca59357baa9af80">write</a>' =&gt; false, 'readonly' =&gt; false, 'all' =&gt; false)</td></tr>
<tr class="memdesc:ga1fb7c1f1f9c4aaee0f9efefdb24676f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Last connection_id for each database type. <br /></td></tr>
<tr class="separator:ga1fb7c1f1f9c4aaee0f9efefdb24676f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8a199f4f286fe2e68345313fa810ca80"><td class="memItemLeft" align="right" valign="top"><a id="ga8a199f4f286fe2e68345313fa810ca80" name="ga8a199f4f286fe2e68345313fa810ca80"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>$pinned_connection_id</b> = false</td></tr>
<tr class="memdesc:ga8a199f4f286fe2e68345313fa810ca80"><td class="mdescLeft">&#160;</td><td class="mdescRight">When in transactions, always use this connection. <br /></td></tr>
<tr class="separator:ga8a199f4f286fe2e68345313fa810ca80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga055071e4c5d3839aaacbef75f5d87d18"><td class="memItemLeft" align="right" valign="top"><a id="ga055071e4c5d3839aaacbef75f5d87d18" name="ga055071e4c5d3839aaacbef75f5d87d18"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>$session_variables</b> = false</td></tr>
<tr class="memdesc:ga055071e4c5d3839aaacbef75f5d87d18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Session variables that must be maintained across all connections, ie: SET TIME ZONE. <br /></td></tr>
<tr class="separator:ga055071e4c5d3839aaacbef75f5d87d18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga450ae009626356a186ebeab0e9394060"><td class="memItemLeft" align="right" valign="top"><a id="ga450ae009626356a186ebeab0e9394060" name="ga450ae009626356a186ebeab0e9394060"></a>
array&#160;</td><td class="memItemRight" valign="bottom"><b>$total_connection_weights</b> = array('all' =&gt; 0, '<a class="el" href="../../dc/d71/group___imap___client.html#gaea09d1ed6a1a3aa8fca59357baa9af80">write</a>' =&gt; 0, 'readonly' =&gt; 0)</td></tr>
<tr class="memdesc:ga450ae009626356a186ebeab0e9394060"><td class="mdescLeft">&#160;</td><td class="mdescRight">Weights of all connections for each type. <br /></td></tr>
<tr class="separator:ga450ae009626356a186ebeab0e9394060"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0b662a3d3f258d92c1ae1a118b59462b"><td class="memItemLeft" align="right" valign="top"><a id="ga0b662a3d3f258d92c1ae1a118b59462b" name="ga0b662a3d3f258d92c1ae1a118b59462b"></a>
array&#160;</td><td class="memItemRight" valign="bottom"><b>$total_connections</b> = array('all' =&gt; 0, '<a class="el" href="../../dc/d71/group___imap___client.html#gaea09d1ed6a1a3aa8fca59357baa9af80">write</a>' =&gt; 0, 'readonly' =&gt; 0)</td></tr>
<tr class="memdesc:ga0b662a3d3f258d92c1ae1a118b59462b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Counts of all connections and their types. <br /></td></tr>
<tr class="separator:ga0b662a3d3f258d92c1ae1a118b59462b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeaa7cea36fd484e7699e80393c2fd3fe"><td class="memItemLeft" align="right" valign="top"><a id="gaeaa7cea36fd484e7699e80393c2fd3fe" name="gaeaa7cea36fd484e7699e80393c2fd3fe"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>$user_defined_session_init_sql</b> = false</td></tr>
<tr class="memdesc:gaeaa7cea36fd484e7699e80393c2fd3fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called immediately after connecting to any <a class="el" href="../../d1/dc8/class_d_b.html" title="The main &quot;DB&quot; class is simply a container class with some static methods for creating DB objects as w...">DB</a>. <br /></td></tr>
<tr class="separator:gaeaa7cea36fd484e7699e80393c2fd3fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf27eb91d5da79eae4566c2c28aa158c6"><td class="memItemLeft" align="right" valign="top"><a id="gaf27eb91d5da79eae4566c2c28aa158c6" name="gaf27eb91d5da79eae4566c2c28aa158c6"></a>
*ADOdbLoadBalancer is <a class="el" href="../../df/d44/group__ouwiki.html#ga7ee3cdf45007d1fc172018f1ea2bb61c">a</a> class that allows the user to do <a class="el" href="../../dc/d71/group___imap___client.html#ga8b4d018315b064203885d534978b5aa4">read</a> <a class="el" href="../../dc/d71/group___imap___client.html#gaea09d1ed6a1a3aa8fca59357baa9af80">write</a> splitting *and <a class="el" href="../../d8/ded/group___simple_pie.html#ga4dcaa8f72c8423d4de25a9e87fa6f3e4">load</a> balancing across multiple servers It can handle and <a class="el" href="../../d8/ded/group___simple_pie.html#ga4dcaa8f72c8423d4de25a9e87fa6f3e4">load</a> balance *any number of <a class="el" href="../../dc/d71/group___imap___client.html#gaea09d1ed6a1a3aa8fca59357baa9af80">write</a> capable *(AKA:master) or readonly(AKA including dealing with connection failures and retrying queries on <a class="el" href="../../df/d44/group__ouwiki.html#ga7ee3cdf45007d1fc172018f1ea2bb61c">a</a> different *connection instead **Released under both BSD license and Lesser GPL library license *Whenever there is any discrepancy between the two *the BSD license will take precedence See LICENSE md **Latest version is available at&#160;</td><td class="memItemRight" valign="bottom"><b>https</b></td></tr>
<tr class="separator:gaf27eb91d5da79eae4566c2c28aa158c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac24dde0ae3bec8fa1dad5fbd06a03c4f"><td class="memItemLeft" align="right" valign="top"><a id="gac24dde0ae3bec8fa1dad5fbd06a03c4f" name="gac24dde0ae3bec8fa1dad5fbd06a03c4f"></a>
*ADOdbLoadBalancer is <a class="el" href="../../df/d44/group__ouwiki.html#ga7ee3cdf45007d1fc172018f1ea2bb61c">a</a> class that allows the user to do <a class="el" href="../../dc/d71/group___imap___client.html#ga8b4d018315b064203885d534978b5aa4">read</a> <a class="el" href="../../dc/d71/group___imap___client.html#gaea09d1ed6a1a3aa8fca59357baa9af80">write</a> splitting *and <a class="el" href="../../d8/ded/group___simple_pie.html#ga4dcaa8f72c8423d4de25a9e87fa6f3e4">load</a> balancing across multiple servers It can handle and <a class="el" href="../../d8/ded/group___simple_pie.html#ga4dcaa8f72c8423d4de25a9e87fa6f3e4">load</a> balance *any number of <a class="el" href="../../dc/d71/group___imap___client.html#gaea09d1ed6a1a3aa8fca59357baa9af80">write</a> capable *(AKA:master) or readonly(AKA including dealing with connection failures and retrying queries on <a class="el" href="../../df/d44/group__ouwiki.html#ga7ee3cdf45007d1fc172018f1ea2bb61c">a</a> different *connection instead **Released under both BSD license and Lesser GPL library license *Whenever there is any discrepancy between the two&#160;</td><td class="memItemRight" valign="bottom"><b>licenses</b></td></tr>
<tr class="separator:gac24dde0ae3bec8fa1dad5fbd06a03c4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga9f1179240d068c94a040021326032bed" name="ga9f1179240d068c94a040021326032bed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9f1179240d068c94a040021326032bed">&#9670;&nbsp;</a></span>__call()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__call </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Magic method to intercept method and callback to the proper ADODB object for write/readonly connections. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$method</td><td>ADODB method to call. </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$args</td><td>Arguments to the ADODB method. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool|mixed</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../df/d70/class_exception.html">Exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga6481e8cfc93c80885b3d72a6e1f15a1f" name="ga6481e8cfc93c80885b3d72a6e1f15a1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6481e8cfc93c80885b3d72a6e1f15a1f">&#9670;&nbsp;</a></span>__get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__get </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$property</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Magic method to proxy property getter calls back to the proper ADODB object currently in use. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$property</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">mixed</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../df/d70/class_exception.html">Exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga9b7f2b58fa3c9e81f142efb424433163" name="ga9b7f2b58fa3c9e81f142efb424433163"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9b7f2b58fa3c9e81f142efb424433163">&#9670;&nbsp;</a></span>__set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__set </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Magic method to proxy property setter calls back to the proper ADODB object currently in use. </p>
<p >Overload <a class="el" href="../../dc/d2c/group___a_d_odb.html#ga9b7f2b58fa3c9e81f142efb424433163" title="Magic method to proxy property setter calls back to the proper ADODB object currently in use.">__set()</a> to provide access via properties.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$property</td><td></td></tr>
    <tr><td class="paramname">$value</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">mixed</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../df/d70/class_exception.html">Exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$name</td><td>Property name </td></tr>
    <tr><td class="paramtype">mixed</td><td class="paramname">$value</td><td>Property value </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga049a5d22396e17bca227c7edf39987ff" name="ga049a5d22396e17bca227c7edf39987ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga049a5d22396e17bca227c7edf39987ff">&#9670;&nbsp;</a></span>addConnection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">addConnection </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a new database connection to the pool, but no actual connection is made until its needed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$obj</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../df/d70/class_exception.html">Exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga4bf2671da3a2c5ae0486de12fb792a94" name="ga4bf2671da3a2c5ae0486de12fb792a94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4bf2671da3a2c5ae0486de12fb792a94">&#9670;&nbsp;</a></span>clusterExecute()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">clusterExecute </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sql</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$inputarr</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$return_all_results</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$existing_connections_only</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Executes the same SQL QUERY on the entire cluster of connections. </p>
<p >Would be used for things like SET SESSION TIME ZONE calls and such.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"></td><td class="paramname">$sql</td><td></td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$inputarr</td><td></td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$return_all_results</td><td></td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$existing_connections_only</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array|bool|mixed</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../df/d70/class_exception.html">Exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga5e21842a7a858c38f72e03722cf98fc3" name="ga5e21842a7a858c38f72e03722cf98fc3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5e21842a7a858c38f72e03722cf98fc3">&#9670;&nbsp;</a></span>execute()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">execute </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sql</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$inputarr</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Use this instead of <a class="el" href="../../dc/d2c/group___a_d_odb.html#ga9f1179240d068c94a040021326032bed" title="Magic method to intercept method and callback to the proper ADODB object for write/readonly connectio...">__call()</a> as it significantly reduces the overhead of call_user_func_array(). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"></td><td class="paramname">$sql</td><td></td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$inputarr</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array|bool|mixed</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../df/d70/class_exception.html">Exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gad78532440717db93ea23780edf2a4f9a" name="gad78532440717db93ea23780edf2a4f9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad78532440717db93ea23780edf2a4f9a">&#9670;&nbsp;</a></span>getConnection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getConnection </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$type</em> = <code>'<a class="el" href="../../dc/d71/group___imap___client.html#gaea09d1ed6a1a3aa8fca59357baa9af80">write</a>'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$pin_connection</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the ADODB connection object by database type. </p>
<p >Ensures that it's connected and the session variables are executed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$type</td><td></td></tr>
    <tr><td class="paramtype">null</td><td class="paramname">$pin_connection</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ADOConnection|bool</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../df/d70/class_exception.html">Exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga0af9a6f29e8b0d767ac17cb307c4f64a" name="ga0af9a6f29e8b0d767ac17cb307c4f64a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0af9a6f29e8b0d767ac17cb307c4f64a">&#9670;&nbsp;</a></span>getLoadBalancedConnection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getLoadBalancedConnection </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$type</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the proper database connection when taking into account sticky sessions and load balancing. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$type</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool|int|mixed|string</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga29f384ae91d2bdef0b5d30097ec93c10" name="ga29f384ae91d2bdef0b5d30097ec93c10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga29f384ae91d2bdef0b5d30097ec93c10">&#9670;&nbsp;</a></span>isReadOnlyQuery()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">isReadOnlyQuery </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sql</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determines if a SQL query is read-only or not. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$sql</td><td>SQL Query to test. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga76e6ccbe3c1288f3c34ed86a4eba655f" name="ga76e6ccbe3c1288f3c34ed86a4eba655f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga76e6ccbe3c1288f3c34ed86a4eba655f">&#9670;&nbsp;</a></span>removeConnection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">removeConnection </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$i</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes a database connection from the pool. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$i</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga1a7fe41b9786ec8dc49d858f1b525766" name="ga1a7fe41b9786ec8dc49d858f1b525766"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1a7fe41b9786ec8dc49d858f1b525766">&#9670;&nbsp;</a></span>setSessionInitSQL()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">setSessionInitSQL </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sql</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Defines SQL queries that are executed each time a new database connection is established. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$sql</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga9a357b40a36e1ad97c68040e93835f86" name="ga9a357b40a36e1ad97c68040e93835f86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9a357b40a36e1ad97c68040e93835f86">&#9670;&nbsp;</a></span>setSessionVariable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">setSessionVariable </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$execute_immediately</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allow setting session variables that are maintained across connections. </p>
<p >Its important that these are set using name/value, so it can determine if the same variable is set multiple times causing bloat/clutter when new connections are established. For example if the time_zone is set to many different ones through the course of a single connection, a new connection should only set it to the most recent value.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"></td><td class="paramname">$name</td><td></td></tr>
    <tr><td class="paramtype"></td><td class="paramname">$value</td><td></td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$execute_immediately</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array|bool|mixed</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../df/d70/class_exception.html">Exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Jun 19 2022 03:33:51 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
