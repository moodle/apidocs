<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: core_payment\helper Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;3.11</span>
   </div>
   <div id="projectbrief">Moodle 3.11.17+ (Build: 20231201) (edced24880)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../db/d28/namespacecore__payment.html">core_payment</a></li><li class="navelem"><a class="el" href="../../db/d1c/classcore__payment_1_1helper.html">helper</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="../../d1/d43/classcore__payment_1_1helper-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">core_payment\helper Class Reference<div class="ingroups"><a class="el" href="../../d9/d9f/group__core__payment.html">core_payment</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Helper class for the payment subsystem.  
 <a href="../../db/d1c/classcore__payment_1_1helper.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ae48f04f84929a45fb279752ab5b1472a" id="r_ae48f04f84929a45fb279752ab5b1472a"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d1c/classcore__payment_1_1helper.html#ae48f04f84929a45fb279752ab5b1472a">add_common_gateway_settings</a> (\<a class="el" href="../../db/d3c/classadmin__settingpage.html">admin_settingpage</a> $settings, string $<a class="el" href="../../d6/db1/classcore__payment_1_1gateway.html">gateway</a>)</td></tr>
<tr class="memdesc:ae48f04f84929a45fb279752ab5b1472a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This functions adds the settings that are common for all payment gateways.  <br /></td></tr>
<tr class="separator:ae48f04f84929a45fb279752ab5b1472a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5f93bf2bdc94aff284b5ef34cbf8abe" id="r_ac5f93bf2bdc94aff284b5ef34cbf8abe"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d1c/classcore__payment_1_1helper.html#ac5f93bf2bdc94aff284b5ef34cbf8abe">delete_payment_account</a> (<a class="el" href="../../d1/d15/classcore__payment_1_1account.html">account</a> $<a class="el" href="../../d1/d15/classcore__payment_1_1account.html">account</a>)</td></tr>
<tr class="memdesc:ac5f93bf2bdc94aff284b5ef34cbf8abe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a payment account (used in management interface)  <br /></td></tr>
<tr class="separator:ac5f93bf2bdc94aff284b5ef34cbf8abe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed93d7072c3ecd606a3a74ed38f6e359" id="r_aed93d7072c3ecd606a3a74ed38f6e359"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d1c/classcore__payment_1_1helper.html#aed93d7072c3ecd606a3a74ed38f6e359">deliver_order</a> (string $component, string $paymentarea, int $itemid, int $paymentid, int $userid)</td></tr>
<tr class="memdesc:aed93d7072c3ecd606a3a74ed38f6e359"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delivers what the user paid for.  <br /></td></tr>
<tr class="separator:aed93d7072c3ecd606a3a74ed38f6e359"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fc2aeb50175d2335bde10a4d09b9336" id="r_a3fc2aeb50175d2335bde10a4d09b9336"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d1c/classcore__payment_1_1helper.html#a3fc2aeb50175d2335bde10a4d09b9336">gateways_modal_link_params</a> (string $component, string $paymentarea, int $itemid, string $description)</td></tr>
<tr class="memdesc:a3fc2aeb50175d2335bde10a4d09b9336"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the attributes to place on a pay button.  <br /></td></tr>
<tr class="separator:a3fc2aeb50175d2335bde10a4d09b9336"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47a458415e759b5102fe1f04b2c8c650" id="r_a47a458415e759b5102fe1f04b2c8c650"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d1c/classcore__payment_1_1helper.html#a47a458415e759b5102fe1f04b2c8c650">get_available_gateways</a> (string $component, string $paymentarea, int $itemid)</td></tr>
<tr class="memdesc:a47a458415e759b5102fe1f04b2c8c650"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the list of gateways that can process payments in the given currency.  <br /></td></tr>
<tr class="separator:a47a458415e759b5102fe1f04b2c8c650"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2149f602373d9203cd9b40afd0e11614" id="r_a2149f602373d9203cd9b40afd0e11614"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d1c/classcore__payment_1_1helper.html#a2149f602373d9203cd9b40afd0e11614">get_cost_as_string</a> (float $amount, string $currency, float $surcharge=0)</td></tr>
<tr class="memdesc:a2149f602373d9203cd9b40afd0e11614"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns human-readable amount with correct number of fractional digits and currency indicator, can also apply surcharge.  <br /></td></tr>
<tr class="separator:a2149f602373d9203cd9b40afd0e11614"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19310d7b7dd5d5682b631dc6529415a4" id="r_a19310d7b7dd5d5682b631dc6529415a4"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d1c/classcore__payment_1_1helper.html#a19310d7b7dd5d5682b631dc6529415a4">get_gateway_configuration</a> (string $component, string $paymentarea, int $itemid, string $gatewayname)</td></tr>
<tr class="memdesc:a19310d7b7dd5d5682b631dc6529415a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the gateway configuration for given component and gateway.  <br /></td></tr>
<tr class="separator:a19310d7b7dd5d5682b631dc6529415a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadcde28c7124fd67f2ed05c61c472c36" id="r_aadcde28c7124fd67f2ed05c61c472c36"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d1c/classcore__payment_1_1helper.html#aadcde28c7124fd67f2ed05c61c472c36">get_gateway_surcharge</a> (string $<a class="el" href="../../d6/db1/classcore__payment_1_1gateway.html">gateway</a>)</td></tr>
<tr class="memdesc:aadcde28c7124fd67f2ed05c61c472c36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the percentage of surcharge that is applied when using a gateway.  <br /></td></tr>
<tr class="separator:aadcde28c7124fd67f2ed05c61c472c36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4362b9bb6249bc1279e9494d27f81a52" id="r_a4362b9bb6249bc1279e9494d27f81a52"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d1c/classcore__payment_1_1helper.html#a4362b9bb6249bc1279e9494d27f81a52">get_payable</a> (string $component, string $paymentarea, int $itemid)</td></tr>
<tr class="memdesc:a4362b9bb6249bc1279e9494d27f81a52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Asks the payable from the related component.  <br /></td></tr>
<tr class="separator:a4362b9bb6249bc1279e9494d27f81a52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1f0e722f94745c0d57b6080ee12c836" id="r_ae1f0e722f94745c0d57b6080ee12c836"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d1c/classcore__payment_1_1helper.html#ae1f0e722f94745c0d57b6080ee12c836">get_payment_accounts_menu</a> (\<a class="el" href="../../da/d04/classcontext.html">context</a> $<a class="el" href="../../da/d04/classcontext.html">context</a>)</td></tr>
<tr class="memdesc:ae1f0e722f94745c0d57b6080ee12c836"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get list of accounts available in the given context.  <br /></td></tr>
<tr class="separator:ae1f0e722f94745c0d57b6080ee12c836"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7487b43b8306ba1b0b1f30dd190f4157" id="r_a7487b43b8306ba1b0b1f30dd190f4157"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d1c/classcore__payment_1_1helper.html#a7487b43b8306ba1b0b1f30dd190f4157">get_payment_accounts_to_manage</a> (\<a class="el" href="../../da/d04/classcontext.html">context</a> $<a class="el" href="../../da/d04/classcontext.html">context</a>, bool $showarchived=false)</td></tr>
<tr class="memdesc:a7487b43b8306ba1b0b1f30dd190f4157"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the list of payment accounts in the given context (used in management interface)  <br /></td></tr>
<tr class="separator:a7487b43b8306ba1b0b1f30dd190f4157"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47c58bf2b83b01796fe138c94d39ac72" id="r_a47c58bf2b83b01796fe138c94d39ac72"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d1c/classcore__payment_1_1helper.html#a47c58bf2b83b01796fe138c94d39ac72">get_rounded_cost</a> (float $amount, string $currency, float $surcharge=0)</td></tr>
<tr class="memdesc:a47c58bf2b83b01796fe138c94d39ac72"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rounds the cost based on the currency fractional digits, can also apply surcharge.  <br /></td></tr>
<tr class="separator:a47c58bf2b83b01796fe138c94d39ac72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1983a72c0e99b54e3fdf252729a55f8" id="r_af1983a72c0e99b54e3fdf252729a55f8"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d1c/classcore__payment_1_1helper.html#af1983a72c0e99b54e3fdf252729a55f8">get_success_url</a> (string $component, string $paymentarea, int $itemid)</td></tr>
<tr class="memdesc:af1983a72c0e99b54e3fdf252729a55f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetches the URL of the page the user should be redirected to from the related component.  <br /></td></tr>
<tr class="separator:af1983a72c0e99b54e3fdf252729a55f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e4946ab542cce48c4cf128c0a671ff1" id="r_a7e4946ab542cce48c4cf128c0a671ff1"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d1c/classcore__payment_1_1helper.html#a7e4946ab542cce48c4cf128c0a671ff1">get_supported_currencies</a> ()</td></tr>
<tr class="memdesc:a7e4946ab542cce48c4cf128c0a671ff1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns an accumulated list of supported currencies by all payment gateways.  <br /></td></tr>
<tr class="separator:a7e4946ab542cce48c4cf128c0a671ff1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1ca5de7a30cf9cc56545c5dbd8b0b61" id="r_ac1ca5de7a30cf9cc56545c5dbd8b0b61"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d1c/classcore__payment_1_1helper.html#ac1ca5de7a30cf9cc56545c5dbd8b0b61">restore_payment_account</a> (<a class="el" href="../../d1/d15/classcore__payment_1_1account.html">account</a> $<a class="el" href="../../d1/d15/classcore__payment_1_1account.html">account</a>)</td></tr>
<tr class="memdesc:ac1ca5de7a30cf9cc56545c5dbd8b0b61"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restore archived payment account (used in management interface)  <br /></td></tr>
<tr class="separator:ac1ca5de7a30cf9cc56545c5dbd8b0b61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7a8af4e7255ff89c4f65187e5de6d0d" id="r_ab7a8af4e7255ff89c4f65187e5de6d0d"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d1c/classcore__payment_1_1helper.html#ab7a8af4e7255ff89c4f65187e5de6d0d">save_payment</a> (int $accountid, string $component, string $paymentarea, int $itemid, int $userid, float $amount, string $currency, string $<a class="el" href="../../d6/db1/classcore__payment_1_1gateway.html">gateway</a>)</td></tr>
<tr class="memdesc:ab7a8af4e7255ff89c4f65187e5de6d0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores essential information about the payment and returns the "id" field of the payment record in <a class="el" href="../../d1/dc8/class_d_b.html" title="The main &quot;DB&quot; class is simply a container class with some static methods for creating DB objects as w...">DB</a>.  <br /></td></tr>
<tr class="separator:ab7a8af4e7255ff89c4f65187e5de6d0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14c721a77af8a50001a4a75dbe6eef85" id="r_a14c721a77af8a50001a4a75dbe6eef85"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d1c/classcore__payment_1_1helper.html#a14c721a77af8a50001a4a75dbe6eef85">save_payment_account</a> (\stdClass $data)</td></tr>
<tr class="memdesc:a14c721a77af8a50001a4a75dbe6eef85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save a new or edited payment account (used in management interface)  <br /></td></tr>
<tr class="separator:a14c721a77af8a50001a4a75dbe6eef85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9aa47895d8c43e291ee1b854af1e6e0d" id="r_a9aa47895d8c43e291ee1b854af1e6e0d"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d1c/classcore__payment_1_1helper.html#a9aa47895d8c43e291ee1b854af1e6e0d">save_payment_gateway</a> (\stdClass $data)</td></tr>
<tr class="memdesc:a9aa47895d8c43e291ee1b854af1e6e0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save a payment gateway linked to an existing account (used in management interface)  <br /></td></tr>
<tr class="separator:a9aa47895d8c43e291ee1b854af1e6e0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Helper class for the payment subsystem. </p>
<dl class="section copyright"><dt>Copyright</dt><dd>2019 Shamim Rezaie <a href="#" onclick="location.href='mai'+'lto:'+'sha'+'mi'+'m@m'+'oo'+'dle'+'.c'+'om'; return false;">shami<span class="obfuscator">.nosp@m.</span>m@mo<span class="obfuscator">.nosp@m.</span>odle.<span class="obfuscator">.nosp@m.</span>com</a> </dd></dl>
<dl class="section user"><dt>License</dt><dd><a href="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later </dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ae48f04f84929a45fb279752ab5b1472a" name="ae48f04f84929a45fb279752ab5b1472a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae48f04f84929a45fb279752ab5b1472a">&#9670;&#160;</a></span>add_common_gateway_settings()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_payment\helper::add_common_gateway_settings </td>
          <td>(</td>
          <td class="paramtype">\<a class="el" href="../../db/d3c/classadmin__settingpage.html">admin_settingpage</a>&#160;</td>
          <td class="paramname"><em>$settings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$gateway</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This functions adds the settings that are common for all payment gateways. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../db/d3c/classadmin__settingpage.html" title="Used to group a number of admin_setting objects into a page and add them to the admin tree.">admin_settingpage</a></td><td class="paramname">$settings</td><td>The settings object </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$gateway</td><td>The gateway name prefixed with paygw_ </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac5f93bf2bdc94aff284b5ef34cbf8abe" name="ac5f93bf2bdc94aff284b5ef34cbf8abe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5f93bf2bdc94aff284b5ef34cbf8abe">&#9670;&#160;</a></span>delete_payment_account()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_payment\helper::delete_payment_account </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d15/classcore__payment_1_1account.html">account</a>&#160;</td>
          <td class="paramname"><em>$account</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Delete a payment account (used in management interface) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">account</td><td class="paramname">$account</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aed93d7072c3ecd606a3a74ed38f6e359" name="aed93d7072c3ecd606a3a74ed38f6e359"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed93d7072c3ecd606a3a74ed38f6e359">&#9670;&#160;</a></span>deliver_order()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_payment\helper::deliver_order </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$component</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$paymentarea</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>$itemid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>$paymentid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>$userid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Delivers what the user paid for. </p>
<p>@uses <a class="el" href="../../d5/ded/interfacecore__payment_1_1local_1_1callback_1_1service__provider.html#a8d4ae1f52a983c13b2f0dfc2c337172b" title="Callback function that delivers what the user paid for to them.">core_payment::local::callback::service_provider::deliver_order()</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$component</td><td>Name of the component that the paymentarea and itemid belong to </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$paymentarea</td><td>Payment area </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$itemid</td><td>An internal identifier that is used by the component </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$paymentid</td><td>payment id as inserted into the 'payments' table, if needed for reference </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td>The userid the order is going to deliver to </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>Whether successful or not </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3fc2aeb50175d2335bde10a4d09b9336" name="a3fc2aeb50175d2335bde10a4d09b9336"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fc2aeb50175d2335bde10a4d09b9336">&#9670;&#160;</a></span>gateways_modal_link_params()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_payment\helper::gateways_modal_link_params </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$component</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$paymentarea</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>$itemid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$description</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the attributes to place on a pay button. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$component</td><td>Name of the component that the paymentarea and itemid belong to </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$paymentarea</td><td>Payment area </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$itemid</td><td>An internal identifier that is used by the component </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$description</td><td>Description of the payment </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a47a458415e759b5102fe1f04b2c8c650" name="a47a458415e759b5102fe1f04b2c8c650"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47a458415e759b5102fe1f04b2c8c650">&#9670;&#160;</a></span>get_available_gateways()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_payment\helper::get_available_gateways </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$component</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$paymentarea</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>$itemid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the list of gateways that can process payments in the given currency. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$component</td><td>Name of the component that the paymentarea and itemid belong to </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$paymentarea</td><td>Payment area </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$itemid</td><td>An identifier that is known to the component </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string[]</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2149f602373d9203cd9b40afd0e11614" name="a2149f602373d9203cd9b40afd0e11614"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2149f602373d9203cd9b40afd0e11614">&#9670;&#160;</a></span>get_cost_as_string()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_payment\helper::get_cost_as_string </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>$amount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$currency</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>$surcharge</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns human-readable amount with correct number of fractional digits and currency indicator, can also apply surcharge. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">float</td><td class="paramname">$amount</td><td>amount in the currency units </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$currency</td><td>The currency </td></tr>
    <tr><td class="paramtype">float</td><td class="paramname">$surcharge</td><td>surcharge in percents </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a19310d7b7dd5d5682b631dc6529415a4" name="a19310d7b7dd5d5682b631dc6529415a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19310d7b7dd5d5682b631dc6529415a4">&#9670;&#160;</a></span>get_gateway_configuration()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_payment\helper::get_gateway_configuration </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$component</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$paymentarea</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>$itemid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$gatewayname</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the gateway configuration for given component and gateway. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$component</td><td>Name of the component that the paymentarea and itemid belong to </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$paymentarea</td><td>Payment area </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$itemid</td><td>An identifier that is known to the component </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$gatewayname</td><td>The gateway name </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d6/da8/classmoodle__exception.html" title="Base Moodle Exception class.">moodle_exception</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aadcde28c7124fd67f2ed05c61c472c36" name="aadcde28c7124fd67f2ed05c61c472c36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aadcde28c7124fd67f2ed05c61c472c36">&#9670;&#160;</a></span>get_gateway_surcharge()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_payment\helper::get_gateway_surcharge </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$gateway</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the percentage of surcharge that is applied when using a gateway. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$gateway</td><td>Name of the gateway </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">float</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4362b9bb6249bc1279e9494d27f81a52" name="a4362b9bb6249bc1279e9494d27f81a52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4362b9bb6249bc1279e9494d27f81a52">&#9670;&#160;</a></span>get_payable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_payment\helper::get_payable </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$component</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$paymentarea</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>$itemid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Asks the payable from the related component. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$component</td><td>Name of the component that the paymentarea and itemid belong to </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$paymentarea</td><td>Payment area </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$itemid</td><td>An internal identifier that is used by the component </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">local::entities::payable</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae1f0e722f94745c0d57b6080ee12c836" name="ae1f0e722f94745c0d57b6080ee12c836"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1f0e722f94745c0d57b6080ee12c836">&#9670;&#160;</a></span>get_payment_accounts_menu()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_payment\helper::get_payment_accounts_menu </td>
          <td>(</td>
          <td class="paramtype">\<a class="el" href="../../da/d04/classcontext.html">context</a>&#160;</td>
          <td class="paramname"><em>$context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get list of accounts available in the given context. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">context</td><td class="paramname">$context</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7487b43b8306ba1b0b1f30dd190f4157" name="a7487b43b8306ba1b0b1f30dd190f4157"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7487b43b8306ba1b0b1f30dd190f4157">&#9670;&#160;</a></span>get_payment_accounts_to_manage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_payment\helper::get_payment_accounts_to_manage </td>
          <td>(</td>
          <td class="paramtype">\<a class="el" href="../../da/d04/classcontext.html">context</a>&#160;</td>
          <td class="paramname"><em>$context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>$showarchived</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the list of payment accounts in the given context (used in management interface) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">context</td><td class="paramname">$context</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">account[]</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a47c58bf2b83b01796fe138c94d39ac72" name="a47c58bf2b83b01796fe138c94d39ac72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47c58bf2b83b01796fe138c94d39ac72">&#9670;&#160;</a></span>get_rounded_cost()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_payment\helper::get_rounded_cost </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>$amount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$currency</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>$surcharge</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Rounds the cost based on the currency fractional digits, can also apply surcharge. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">float</td><td class="paramname">$amount</td><td>amount in the currency units </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$currency</td><td>currency, used for calculating the number of fractional digits </td></tr>
    <tr><td class="paramtype">float</td><td class="paramname">$surcharge</td><td>surcharge in percents </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">float</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af1983a72c0e99b54e3fdf252729a55f8" name="af1983a72c0e99b54e3fdf252729a55f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1983a72c0e99b54e3fdf252729a55f8">&#9670;&#160;</a></span>get_success_url()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_payment\helper::get_success_url </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$component</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$paymentarea</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>$itemid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fetches the URL of the page the user should be redirected to from the related component. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$component</td><td>Name of the component that the paymentarea and itemid belong to </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$paymentarea</td><td>Payment area </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$itemid</td><td>An identifier that is known to the component </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="../../dc/d31/classmoodle__url.html" title="Class for creating and manipulating urls.">moodle_url</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7e4946ab542cce48c4cf128c0a671ff1" name="a7e4946ab542cce48c4cf128c0a671ff1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e4946ab542cce48c4cf128c0a671ff1">&#9670;&#160;</a></span>get_supported_currencies()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_payment\helper::get_supported_currencies </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns an accumulated list of supported currencies by all payment gateways. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string[]</td><td>An array of the currency codes in the three-character ISO-4217 format </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac1ca5de7a30cf9cc56545c5dbd8b0b61" name="ac1ca5de7a30cf9cc56545c5dbd8b0b61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1ca5de7a30cf9cc56545c5dbd8b0b61">&#9670;&#160;</a></span>restore_payment_account()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_payment\helper::restore_payment_account </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d15/classcore__payment_1_1account.html">account</a>&#160;</td>
          <td class="paramname"><em>$account</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Restore archived payment account (used in management interface) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">account</td><td class="paramname">$account</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab7a8af4e7255ff89c4f65187e5de6d0d" name="ab7a8af4e7255ff89c4f65187e5de6d0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7a8af4e7255ff89c4f65187e5de6d0d">&#9670;&#160;</a></span>save_payment()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_payment\helper::save_payment </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>$accountid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$component</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$paymentarea</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>$itemid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>$userid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>$amount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$currency</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$gateway</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Stores essential information about the payment and returns the "id" field of the payment record in <a class="el" href="../../d1/dc8/class_d_b.html" title="The main &quot;DB&quot; class is simply a container class with some static methods for creating DB objects as w...">DB</a>. </p>
<p>Each payment gateway may then store the additional information their way.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$accountid</td><td>Account id </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$component</td><td>Name of the component that the paymentarea and itemid belong to </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$paymentarea</td><td>Payment area </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$itemid</td><td>An internal identifier that is used by the component </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td>Id of the user who is paying </td></tr>
    <tr><td class="paramtype">float</td><td class="paramname">$amount</td><td>Amount of payment </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$currency</td><td>Currency of payment </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$gateway</td><td>The gateway that is used for the payment </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a14c721a77af8a50001a4a75dbe6eef85" name="a14c721a77af8a50001a4a75dbe6eef85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14c721a77af8a50001a4a75dbe6eef85">&#9670;&#160;</a></span>save_payment_account()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_payment\helper::save_payment_account </td>
          <td>(</td>
          <td class="paramtype">\stdClass&#160;</td>
          <td class="paramname"><em>$data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Save a new or edited payment account (used in management interface) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$data</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">account</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9aa47895d8c43e291ee1b854af1e6e0d" name="a9aa47895d8c43e291ee1b854af1e6e0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9aa47895d8c43e291ee1b854af1e6e0d">&#9670;&#160;</a></span>save_payment_gateway()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core_payment\helper::save_payment_gateway </td>
          <td>(</td>
          <td class="paramtype">\stdClass&#160;</td>
          <td class="paramname"><em>$data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Save a payment gateway linked to an existing account (used in management interface) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$data</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">account_gateway</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>payment/classes/<b>helper.php</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Dec 3 2023 02:25:34 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
