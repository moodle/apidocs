<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: mnetservice_enrol Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;3.9</span>
   </div>
   <div id="projectbrief">Moodle 3.9.14+ (Build: 20220617) (2dc581f717)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pro-static-attribs">Static Protected Attributes</a> &#124;
<a href="../../d7/d71/classmnetservice__enrol-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">mnetservice_enrol Class Reference<div class="ingroups"><a class="el" href="../../d9/d27/group__mnetservice.html">mnetservice</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Singleton providing various functionality usable by plugin(s) implementing this MNet service.  
 <a href="../../de/ddf/classmnetservice__enrol.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a3942a5db2c4c1dc8138f683a9c150705"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/ddf/classmnetservice__enrol.html#a3942a5db2c4c1dc8138f683a9c150705">format_error_message</a> ($errormsg)</td></tr>
<tr class="memdesc:a3942a5db2c4c1dc8138f683a9c150705"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepares error messages returned by our XML-RPC requests to be send as debug info to <a class="el" href="../../d0/de1/group__core.html#ga84f89c7c9253884b4db7e42247c0b97d">print_error()</a>.  <a href="../../de/ddf/classmnetservice__enrol.html#a3942a5db2c4c1dc8138f683a9c150705">More...</a><br /></td></tr>
<tr class="separator:a3942a5db2c4c1dc8138f683a9c150705"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afddcc34de26990ba3ced766b0a16a3d7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/ddf/classmnetservice__enrol.html#afddcc34de26990ba3ced766b0a16a3d7">get_remote_courses</a> ($mnethostid, $usecache=true)</td></tr>
<tr class="memdesc:afddcc34de26990ba3ced766b0a16a3d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetches the information about the courses available on remote host for our students.  <a href="../../de/ddf/classmnetservice__enrol.html#afddcc34de26990ba3ced766b0a16a3d7">More...</a><br /></td></tr>
<tr class="separator:afddcc34de26990ba3ced766b0a16a3d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9bcf29559f466e41a2647bdab5a3828"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/ddf/classmnetservice__enrol.html#ae9bcf29559f466e41a2647bdab5a3828">get_remote_publishers</a> ()</td></tr>
<tr class="memdesc:ae9bcf29559f466e41a2647bdab5a3828"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a list of remote servers that offer their courses for our users.  <a href="../../de/ddf/classmnetservice__enrol.html#ae9bcf29559f466e41a2647bdab5a3828">More...</a><br /></td></tr>
<tr class="separator:ae9bcf29559f466e41a2647bdab5a3828"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76766c9c4c2a10eb5ce73659a74ad00d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/ddf/classmnetservice__enrol.html#a76766c9c4c2a10eb5ce73659a74ad00d">get_remote_subscribers</a> ()</td></tr>
<tr class="memdesc:a76766c9c4c2a10eb5ce73659a74ad00d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a list of remote servers that can enrol their users into our courses.  <a href="../../de/ddf/classmnetservice__enrol.html#a76766c9c4c2a10eb5ce73659a74ad00d">More...</a><br /></td></tr>
<tr class="separator:a76766c9c4c2a10eb5ce73659a74ad00d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0457b4ad773062a225dccde79f0f334"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/ddf/classmnetservice__enrol.html#ae0457b4ad773062a225dccde79f0f334">is_available</a> ()</td></tr>
<tr class="memdesc:ae0457b4ad773062a225dccde79f0f334"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is this service enabled?  <a href="../../de/ddf/classmnetservice__enrol.html#ae0457b4ad773062a225dccde79f0f334">More...</a><br /></td></tr>
<tr class="separator:ae0457b4ad773062a225dccde79f0f334"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3293b3bfd1cfcf91c2f3cb58d5c80c23"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/ddf/classmnetservice__enrol.html#a3293b3bfd1cfcf91c2f3cb58d5c80c23">req_course_enrolments</a> ($mnethostid, $remotecourseid)</td></tr>
<tr class="memdesc:a3293b3bfd1cfcf91c2f3cb58d5c80c23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates local cache about enrolments of our users in remote courses.  <a href="../../de/ddf/classmnetservice__enrol.html#a3293b3bfd1cfcf91c2f3cb58d5c80c23">More...</a><br /></td></tr>
<tr class="separator:a3293b3bfd1cfcf91c2f3cb58d5c80c23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6d2514f2635903373e5c32ab6b72e9d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/ddf/classmnetservice__enrol.html#ac6d2514f2635903373e5c32ab6b72e9d">req_enrol_user</a> (stdclass $user, stdclass $remotecourse)</td></tr>
<tr class="memdesc:ac6d2514f2635903373e5c32ab6b72e9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send request to enrol our user to the remote course.  <a href="../../de/ddf/classmnetservice__enrol.html#ac6d2514f2635903373e5c32ab6b72e9d">More...</a><br /></td></tr>
<tr class="separator:ac6d2514f2635903373e5c32ab6b72e9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03fab7b01ea372bd891d1471e64cdf99"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/ddf/classmnetservice__enrol.html#a03fab7b01ea372bd891d1471e64cdf99">req_unenrol_user</a> (stdclass $user, stdclass $remotecourse)</td></tr>
<tr class="memdesc:a03fab7b01ea372bd891d1471e64cdf99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send request to unenrol our user from the remote course.  <a href="../../de/ddf/classmnetservice__enrol.html#a03fab7b01ea372bd891d1471e64cdf99">More...</a><br /></td></tr>
<tr class="separator:a03fab7b01ea372bd891d1471e64cdf99"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:aff35c0f64ba4e40b95e4ce7424639320"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/ddf/classmnetservice__enrol.html#aff35c0f64ba4e40b95e4ce7424639320">get_instance</a> ()</td></tr>
<tr class="separator:aff35c0f64ba4e40b95e4ce7424639320"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a426260ced1592eec248e7839c19064de"><td class="memItemLeft" align="right" valign="top"><a id="a426260ced1592eec248e7839c19064de" name="a426260ced1592eec248e7839c19064de"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>__construct</b> ()</td></tr>
<tr class="memdesc:a426260ced1592eec248e7839c19064de"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is singleton, use <a class="el" href="../../de/ddf/classmnetservice__enrol.html#aff35c0f64ba4e40b95e4ce7424639320">mnetservice_enrol::get_instance()</a>. <br /></td></tr>
<tr class="separator:a426260ced1592eec248e7839c19064de"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a06c8221e6734bf67bbe35dc84338b988"><td class="memItemLeft" align="right" valign="top"><a id="a06c8221e6734bf67bbe35dc84338b988" name="a06c8221e6734bf67bbe35dc84338b988"></a>
caches&#160;</td><td class="memItemRight" valign="bottom"><b>$cachepublishers</b> = null</td></tr>
<tr class="memdesc:a06c8221e6734bf67bbe35dc84338b988"><td class="mdescLeft">&#160;</td><td class="mdescRight">the result of <a class="el" href="../../">self::get_remote_publishers()</a> <br /></td></tr>
<tr class="separator:a06c8221e6734bf67bbe35dc84338b988"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a701859fdec3f0593f4594b6232dc1db7"><td class="memItemLeft" align="right" valign="top"><a id="a701859fdec3f0593f4594b6232dc1db7" name="a701859fdec3f0593f4594b6232dc1db7"></a>
caches&#160;</td><td class="memItemRight" valign="bottom"><b>$cachesubscribers</b> = null</td></tr>
<tr class="memdesc:a701859fdec3f0593f4594b6232dc1db7"><td class="mdescLeft">&#160;</td><td class="mdescRight">the result of <a class="el" href="../../">self::get_remote_subscribers()</a> <br /></td></tr>
<tr class="separator:a701859fdec3f0593f4594b6232dc1db7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-static-attribs" name="pro-static-attribs"></a>
Static Protected Attributes</h2></td></tr>
<tr class="memitem:a00a0d2d8e0972b6a085c24fef0f1c792"><td class="memItemLeft" align="right" valign="top"><a id="a00a0d2d8e0972b6a085c24fef0f1c792" name="a00a0d2d8e0972b6a085c24fef0f1c792"></a>
static <a class="el" href="../../de/ddf/classmnetservice__enrol.html">mnetservice_enrol</a>&#160;</td><td class="memItemRight" valign="bottom"><b>$singleton</b></td></tr>
<tr class="memdesc:a00a0d2d8e0972b6a085c24fef0f1c792"><td class="mdescLeft">&#160;</td><td class="mdescRight">holds the singleton instance. <br /></td></tr>
<tr class="separator:a00a0d2d8e0972b6a085c24fef0f1c792"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Singleton providing various functionality usable by plugin(s) implementing this MNet service. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a3942a5db2c4c1dc8138f683a9c150705" name="a3942a5db2c4c1dc8138f683a9c150705"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3942a5db2c4c1dc8138f683a9c150705">&#9670;&nbsp;</a></span>format_error_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mnetservice_enrol::format_error_message </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$errormsg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prepares error messages returned by our XML-RPC requests to be send as debug info to <a class="el" href="../../d0/de1/group__core.html#ga84f89c7c9253884b4db7e42247c0b97d">print_error()</a>. </p>
<p >MNet client-side methods in this class return request error as serialized array.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$error</td><td>serialized array </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aff35c0f64ba4e40b95e4ce7424639320" name="aff35c0f64ba4e40b95e4ce7424639320"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff35c0f64ba4e40b95e4ce7424639320">&#9670;&nbsp;</a></span>get_instance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static mnetservice_enrol::get_instance </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="../../de/ddf/classmnetservice__enrol.html" title="Singleton providing various functionality usable by plugin(s) implementing this MNet service.">mnetservice_enrol</a></td><td>singleton instance </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afddcc34de26990ba3ced766b0a16a3d7" name="afddcc34de26990ba3ced766b0a16a3d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afddcc34de26990ba3ced766b0a16a3d7">&#9670;&nbsp;</a></span>get_remote_courses()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mnetservice_enrol::get_remote_courses </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$mnethostid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$usecache</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fetches the information about the courses available on remote host for our students. </p>
<p >The information about remote courses available for us is cached in {mnetservice_enrol_courses}. This method either returns the cached information (typically when displaying the list to students) or fetch fresh data via new XML-RPC request (which updates the local cache, too). The lifetime of the cache is 1 day, so even if $usecache is set to true, the cache will be re-populated if we did not fetch from any server (not only the currently requested one) for some time.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">id</td><td class="paramname">$mnethostid</td><td>MNet remote host id </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$usecache</td><td>use cached data or invoke new XML-RPC? @uses <a class="el" href="../../db/d60/classmnet__xmlrpc__client.html" title="Class representing an XMLRPC request against a remote machine.">mnet_xmlrpc_client</a> Invokes XML-RPC request if the cache is not used </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array|string</td><td>returned list or serialized array of mnet error messages </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae9bcf29559f466e41a2647bdab5a3828" name="ae9bcf29559f466e41a2647bdab5a3828"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9bcf29559f466e41a2647bdab5a3828">&#9670;&nbsp;</a></span>get_remote_publishers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mnetservice_enrol::get_remote_publishers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a list of remote servers that offer their courses for our users. </p>
<p >We must subscribe MNet service 'mnet_enrol' for the peers to allow our users to enrol into their courses.</p>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000145">Todo:</a></b></dt><dd><p class="startdd">once the MNet core is refactored this may be part of a parent class </p>
<p class="enddd">the name of the service should be changed to the name of this plugin </p>
</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a76766c9c4c2a10eb5ce73659a74ad00d" name="a76766c9c4c2a10eb5ce73659a74ad00d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76766c9c4c2a10eb5ce73659a74ad00d">&#9670;&nbsp;</a></span>get_remote_subscribers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mnetservice_enrol::get_remote_subscribers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a list of remote servers that can enrol their users into our courses. </p>
<p >We must publish MNet service 'mnet_enrol' for the peers to allow them to enrol their users into our courses.</p>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000144">Todo:</a></b></dt><dd><p class="startdd">once the MNet core is refactored this may be part of a parent class </p>
<p class="enddd">the name of the service should be changed to the name of this plugin </p>
</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae0457b4ad773062a225dccde79f0f334" name="ae0457b4ad773062a225dccde79f0f334"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0457b4ad773062a225dccde79f0f334">&#9670;&nbsp;</a></span>is_available()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mnetservice_enrol::is_available </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Is this service enabled? </p>
<p >Currently, this checks if whole MNet is available. In the future, additional checks can be done. Probably the field 'offer' should be checked but it does not seem to be used so far.</p>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000143">Todo:</a></b></dt><dd>move this to some parent class once we have such </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3293b3bfd1cfcf91c2f3cb58d5c80c23" name="a3293b3bfd1cfcf91c2f3cb58d5c80c23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3293b3bfd1cfcf91c2f3cb58d5c80c23">&#9670;&nbsp;</a></span>req_course_enrolments()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mnetservice_enrol::req_course_enrolments </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$mnethostid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$remotecourseid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates local cache about enrolments of our users in remote courses. </p>
<p >The remote course must allow enrolments via our Remote enrolment service client. Because of legacy design of data structure returned by XML-RPC code, only one user enrolment per course is returned by 1.9 MNet servers. This may be an issue if the user is enrolled multiple times by various enrolment plugins. MNet 2.0 servers do not use user name as array keys - they do not need to due to side effect of <a href="https://tracker.moodle.org/browse/MDL-19219" class="el">MDL-19219</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">id</td><td class="paramname">$mnethostid</td><td>MNet remote host id </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$remotecourseid</td><td>ID of the course at the remote host </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$usecache</td><td>use cached data or invoke new XML-RPC? @uses <a class="el" href="../../db/d60/classmnet__xmlrpc__client.html" title="Class representing an XMLRPC request against a remote machine.">mnet_xmlrpc_client</a> Invokes XML-RPC request </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool|string</td><td>true if success or serialized array of mnet error messages </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac6d2514f2635903373e5c32ab6b72e9d" name="ac6d2514f2635903373e5c32ab6b72e9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6d2514f2635903373e5c32ab6b72e9d">&#9670;&nbsp;</a></span>req_enrol_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mnetservice_enrol::req_enrol_user </td>
          <td>(</td>
          <td class="paramtype">stdclass&#160;</td>
          <td class="paramname"><em>$user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">stdclass&#160;</td>
          <td class="paramname"><em>$remotecourse</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send request to enrol our user to the remote course. </p>
<p >Updates our remote enrolments cache if the enrolment was successful.</p>
<p >@uses <a class="el" href="../../db/d60/classmnet__xmlrpc__client.html" title="Class representing an XMLRPC request against a remote machine.">mnet_xmlrpc_client</a> Invokes XML-RPC request </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">object</td><td class="paramname">$user</td><td>our user </td></tr>
    <tr><td class="paramtype">object</td><td class="paramname">$remotecourse</td><td>record from mnetservice_enrol_courses table </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true|string</td><td>true if success, error message from the remote host otherwise </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a03fab7b01ea372bd891d1471e64cdf99" name="a03fab7b01ea372bd891d1471e64cdf99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03fab7b01ea372bd891d1471e64cdf99">&#9670;&nbsp;</a></span>req_unenrol_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mnetservice_enrol::req_unenrol_user </td>
          <td>(</td>
          <td class="paramtype">stdclass&#160;</td>
          <td class="paramname"><em>$user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">stdclass&#160;</td>
          <td class="paramname"><em>$remotecourse</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send request to unenrol our user from the remote course. </p>
<p >Updates our remote enrolments cache if the unenrolment was successful.</p>
<p >@uses <a class="el" href="../../db/d60/classmnet__xmlrpc__client.html" title="Class representing an XMLRPC request against a remote machine.">mnet_xmlrpc_client</a> Invokes XML-RPC request </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">object</td><td class="paramname">$user</td><td>our user </td></tr>
    <tr><td class="paramtype">object</td><td class="paramname">$remotecourse</td><td>record from mnetservice_enrol_courses table </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true|string</td><td>true if success, error message from the remote host otherwise </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>mnet/service/enrol/locallib.php</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Jun 26 2022 03:28:28 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
