<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: core\output\mustache_helper_collection Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;3.9</span>
   </div>
   <div id="projectbrief">Moodle 3.9.23+ (Build: 20230915) (d03b556a1c)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d9/d0f/namespacecore.html">core</a></li><li class="navelem"><a class="el" href="../../d4/ddd/namespacecore_1_1output.html">output</a></li><li class="navelem"><a class="el" href="../../d3/db6/classcore_1_1output_1_1mustache__helper__collection.html">mustache_helper_collection</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../d4/d8c/classcore_1_1output_1_1mustache__helper__collection-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">core\output\mustache_helper_collection Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Custom Moodle helper collection for mustache.  
 <a href="../../d3/db6/classcore_1_1output_1_1mustache__helper__collection.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for core\output\mustache_helper_collection:</div>
<div class="dyncontent">
 <div class="center">
  <img src="../../d3/db6/classcore_1_1output_1_1mustache__helper__collection.png" alt=""/>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a3124b8082cee9b09e038c97634b416fa" id="r_a3124b8082cee9b09e038c97634b416fa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db6/classcore_1_1output_1_1mustache__helper__collection.html#a3124b8082cee9b09e038c97634b416fa">__construct</a> ($helpers=null, array $blacklistednestedhelpers=[])</td></tr>
<tr class="memdesc:a3124b8082cee9b09e038c97634b416fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper Collection constructor.  <br /></td></tr>
<tr class="separator:a3124b8082cee9b09e038c97634b416fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41811c73c597acba2b2e7ccd2e6e5092" id="r_a41811c73c597acba2b2e7ccd2e6e5092"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db6/classcore_1_1output_1_1mustache__helper__collection.html#a41811c73c597acba2b2e7ccd2e6e5092">add</a> ($name, $helper)</td></tr>
<tr class="memdesc:a41811c73c597acba2b2e7ccd2e6e5092"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a helper to this collection.  <br /></td></tr>
<tr class="separator:a41811c73c597acba2b2e7ccd2e6e5092"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeba340e8476ec80ffcec53e08f74be39" id="r_aeba340e8476ec80ffcec53e08f74be39"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db6/classcore_1_1output_1_1mustache__helper__collection.html#aeba340e8476ec80ffcec53e08f74be39">strip_blacklisted_helpers</a> ($blacklist, $string)</td></tr>
<tr class="memdesc:aeba340e8476ec80ffcec53e08f74be39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse the given string and remove any reference to blacklisted helpers.  <br /></td></tr>
<tr class="separator:aeba340e8476ec80ffcec53e08f74be39"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Custom Moodle helper collection for mustache. </p>
<dl class="section copyright"><dt>Copyright</dt><dd>2019 Ryan Wyllie <a href="#" onclick="location.href='mai'+'lto:'+'rya'+'n@'+'moo'+'dl'+'e.c'+'om'; return false;">ryan@<span class="obfuscator">.nosp@m.</span>mood<span class="obfuscator">.nosp@m.</span>le.co<span class="obfuscator">.nosp@m.</span>m</a> </dd></dl>
<dl class="section user"><dt>License</dt><dd><a href="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a3124b8082cee9b09e038c97634b416fa" name="a3124b8082cee9b09e038c97634b416fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3124b8082cee9b09e038c97634b416fa">&#9670;&#160;</a></span>__construct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core\output\mustache_helper_collection::__construct </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$helpers</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$blacklistednestedhelpers</em> = <code>[]</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper Collection constructor. </p>
<p>Optionally accepts an array (or Traversable) of <code>$name =&gt; $helper</code> pairs.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Mustache_Exception_InvalidArgumentException</td><td>if the $helpers argument isn't an array or Traversable</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array&#160;|&#160;Traversable</td><td class="paramname">$helpers</td><td>(default: null) </td></tr>
    <tr><td class="paramtype">string[]</td><td class="paramname">$blacklistednestedhelpers</td><td>Names of helpers that aren't allowed to be called within other helpers. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a41811c73c597acba2b2e7ccd2e6e5092" name="a41811c73c597acba2b2e7ccd2e6e5092"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41811c73c597acba2b2e7ccd2e6e5092">&#9670;&#160;</a></span>add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core\output\mustache_helper_collection::add </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$helper</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a helper to this collection. </p>
<p>This function has overridden the parent implementation to provide blacklist functionality for certain helpers to prevent them being called from within other helpers. This is because the JavaScript helper can be used in a security exploit if it can be nested.</p>
<p>The function will wrap callable helpers in an anonymous function that strips out the blacklisted helpers from the source string before giving it to the helper function. This prevents the blacklisted helper functions from being called by nested render functions from within other helpers.</p>
<dl class="section see"><dt>See also</dt><dd>Mustache_HelperCollection::add() </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$name</td><td></td></tr>
    <tr><td class="paramtype">mixed</td><td class="paramname">$helper</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aeba340e8476ec80ffcec53e08f74be39" name="aeba340e8476ec80ffcec53e08f74be39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeba340e8476ec80ffcec53e08f74be39">&#9670;&#160;</a></span>strip_blacklisted_helpers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core\output\mustache_helper_collection::strip_blacklisted_helpers </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$blacklist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$string</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parse the given string and remove any reference to blacklisted helpers. </p>
<p>E.g. $blacklist = ['js']; $string = "core, move, {{#js}} some nasty JS hack {{/js}}" result: "core, move, {{}}"</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string[]</td><td class="paramname">$blacklist</td><td>List of helper names to strip </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$string</td><td>String to parse </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>Parsed string </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>lib/classes/output/<b>mustache_helper_collection.php</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Sep 24 2023 02:25:05 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
