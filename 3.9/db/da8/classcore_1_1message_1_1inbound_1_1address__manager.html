<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: core\message\inbound\address_manager Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;3.9</span>
   </div>
   <div id="projectbrief">Moodle 3.9.20+ (Build: 20230414) (94836d56b6)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d9/d0f/namespacecore.html">core</a></li><li class="navelem"><a class="el" href="../../da/db1/namespacecore_1_1message.html">message</a></li><li class="navelem"><a class="el" href="../../d5/d30/namespacecore_1_1message_1_1inbound.html">inbound</a></li><li class="navelem"><a class="el" href="../../db/da8/classcore_1_1message_1_1inbound_1_1address__manager.html">address_manager</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="../../de/d18/classcore_1_1message_1_1inbound_1_1address__manager-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">core\message\inbound\address_manager Class Reference<div class="ingroups"><a class="el" href="../../d4/dc2/group__core__message.html">core_message</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Incoming Message address manager.  
 <a href="../../db/da8/classcore_1_1message_1_1inbound_1_1address__manager.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a65f8a51829accedb0e9ec2a7fba803c4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da8/classcore_1_1message_1_1inbound_1_1address__manager.html#a65f8a51829accedb0e9ec2a7fba803c4">fetch_data_key</a> ()</td></tr>
<tr class="memdesc:a65f8a51829accedb0e9ec2a7fba803c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the data key for the data item.  <br /></td></tr>
<tr class="separator:a65f8a51829accedb0e9ec2a7fba803c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4156e00a072b674cccfe8af9a3e751d5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da8/classcore_1_1message_1_1inbound_1_1address__manager.html#a4156e00a072b674cccfe8af9a3e751d5">generate</a> ($userid, $userkey=null)</td></tr>
<tr class="memdesc:a4156e00a072b674cccfe8af9a3e751d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate an e-mail address for the Inbound Message handler, storing a private key for the data object if one was not specified.  <br /></td></tr>
<tr class="separator:a4156e00a072b674cccfe8af9a3e751d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea0f3272e4cab4c742be3bfc3ba0af2d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da8/classcore_1_1message_1_1inbound_1_1address__manager.html#aea0f3272e4cab4c742be3bfc3ba0af2d">get_data</a> ()</td></tr>
<tr class="memdesc:aea0f3272e4cab4c742be3bfc3ba0af2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the data parsed from the address.  <br /></td></tr>
<tr class="separator:aea0f3272e4cab4c742be3bfc3ba0af2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc9e90aa4f30d048ac267e7c4235e20a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da8/classcore_1_1message_1_1inbound_1_1address__manager.html#adc9e90aa4f30d048ac267e7c4235e20a">get_handler</a> ()</td></tr>
<tr class="memdesc:adc9e90aa4f30d048ac267e7c4235e20a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the active handler.  <br /></td></tr>
<tr class="separator:adc9e90aa4f30d048ac267e7c4235e20a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d94c716c7b6aa24a1f70cdc3787001d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da8/classcore_1_1message_1_1inbound_1_1address__manager.html#a8d94c716c7b6aa24a1f70cdc3787001d">handle_message</a> (\stdClass $messagedata)</td></tr>
<tr class="memdesc:a8d94c716c7b6aa24a1f70cdc3787001d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process the message against the relevant handler.  <br /></td></tr>
<tr class="separator:a8d94c716c7b6aa24a1f70cdc3787001d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21b893c5b79c11ce2c8571f1c665b65c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da8/classcore_1_1message_1_1inbound_1_1address__manager.html#a21b893c5b79c11ce2c8571f1c665b65c">process_envelope</a> ($recipient, $sender)</td></tr>
<tr class="memdesc:a21b893c5b79c11ce2c8571f1c665b65c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process the message recipient, load the handler, and then validate the sender with the associated data record.  <br /></td></tr>
<tr class="separator:a21b893c5b79c11ce2c8571f1c665b65c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acaa81e714a95fa3bee40bbde97ece690"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da8/classcore_1_1message_1_1inbound_1_1address__manager.html#acaa81e714a95fa3bee40bbde97ece690">set_data</a> ($datavalue, $datakey=null)</td></tr>
<tr class="memdesc:acaa81e714a95fa3bee40bbde97ece690"><td class="mdescLeft">&#160;</td><td class="mdescRight">Specify an integer data item value for this record.  <br /></td></tr>
<tr class="separator:acaa81e714a95fa3bee40bbde97ece690"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0933adaeed8e1d33540be03205ad2174"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da8/classcore_1_1message_1_1inbound_1_1address__manager.html#a0933adaeed8e1d33540be03205ad2174">set_data_key</a> ($datakey=null)</td></tr>
<tr class="memdesc:a0933adaeed8e1d33540be03205ad2174"><td class="mdescLeft">&#160;</td><td class="mdescRight">Specify a known data key for this data item.  <br /></td></tr>
<tr class="separator:a0933adaeed8e1d33540be03205ad2174"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7676577658c80afc706cd7bce80ef36a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da8/classcore_1_1message_1_1inbound_1_1address__manager.html#a7676577658c80afc706cd7bce80ef36a">set_handler</a> ($classname)</td></tr>
<tr class="memdesc:a7676577658c80afc706cd7bce80ef36a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the handler to use for the subsequent Inbound Message commands.  <br /></td></tr>
<tr class="separator:a7676577658c80afc706cd7bce80ef36a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a10b5094c329a865c3b27e693d4bcf870"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da8/classcore_1_1message_1_1inbound_1_1address__manager.html#a10b5094c329a865c3b27e693d4bcf870">is_correct_format</a> ($address)</td></tr>
<tr class="memdesc:a10b5094c329a865c3b27e693d4bcf870"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine whether the supplied address is of the correct format.  <br /></td></tr>
<tr class="separator:a10b5094c329a865c3b27e693d4bcf870"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a51962accf1099d2284d007a43b301882"><td class="memItemLeft" align="right" valign="top">int const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da8/classcore_1_1message_1_1inbound_1_1address__manager.html#a51962accf1099d2284d007a43b301882">HASHSIZE</a> = 24</td></tr>
<tr class="memdesc:a51962accf1099d2284d007a43b301882"><td class="mdescLeft">&#160;</td><td class="mdescRight">The size of the hash component of the address.  <br /></td></tr>
<tr class="separator:a51962accf1099d2284d007a43b301882"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae14180bffb51fb72bb1072f7af850913"><td class="memItemLeft" align="right" valign="top"><a id="ae14180bffb51fb72bb1072f7af850913" name="ae14180bffb51fb72bb1072f7af850913"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>VALIDATION_ADDRESS_MISMATCH</b> = 256</td></tr>
<tr class="memdesc:ae14180bffb51fb72bb1072f7af850913"><td class="mdescLeft">&#160;</td><td class="mdescRight">A validation status indicating that the originator address did not match the user on record. <br /></td></tr>
<tr class="separator:ae14180bffb51fb72bb1072f7af850913"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38dc0d61877b9f153495569c7dbc3d78"><td class="memItemLeft" align="right" valign="top"><a id="a38dc0d61877b9f153495569c7dbc3d78" name="a38dc0d61877b9f153495569c7dbc3d78"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>VALIDATION_DISABLED_HANDLER</b> = 16</td></tr>
<tr class="memdesc:a38dc0d61877b9f153495569c7dbc3d78"><td class="mdescLeft">&#160;</td><td class="mdescRight">A validation status indicating that the mail processing handler was not enabled. <br /></td></tr>
<tr class="separator:a38dc0d61877b9f153495569c7dbc3d78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab742797efca9d1f727af99dd8eea083c"><td class="memItemLeft" align="right" valign="top"><a id="ab742797efca9d1f727af99dd8eea083c" name="ab742797efca9d1f727af99dd8eea083c"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>VALIDATION_DISABLED_USER</b> = 32</td></tr>
<tr class="memdesc:ab742797efca9d1f727af99dd8eea083c"><td class="mdescLeft">&#160;</td><td class="mdescRight">A validation status indicating that the user specified was deleted or unconfirmed. <br /></td></tr>
<tr class="separator:ab742797efca9d1f727af99dd8eea083c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7affb5c6a065b4c7fb50bb8dfdf7f0bd"><td class="memItemLeft" align="right" valign="top"><a id="a7affb5c6a065b4c7fb50bb8dfdf7f0bd" name="a7affb5c6a065b4c7fb50bb8dfdf7f0bd"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>VALIDATION_EXPIRED_DATAKEY</b> = 64</td></tr>
<tr class="memdesc:a7affb5c6a065b4c7fb50bb8dfdf7f0bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">A validation status indicating that the datakey specified had reached it's expiration time. <br /></td></tr>
<tr class="separator:a7affb5c6a065b4c7fb50bb8dfdf7f0bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55efb3fdcb789bcaf1658f9ccc2fd9f8"><td class="memItemLeft" align="right" valign="top">int const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da8/classcore_1_1message_1_1inbound_1_1address__manager.html#a55efb3fdcb789bcaf1658f9ccc2fd9f8">VALIDATION_INVALID_ADDRESS_FORMAT</a> = 1</td></tr>
<tr class="memdesc:a55efb3fdcb789bcaf1658f9ccc2fd9f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">A validation status indicating an invalid address format.  <br /></td></tr>
<tr class="separator:a55efb3fdcb789bcaf1658f9ccc2fd9f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac86726c88d64bc023527bd357ff3d00d"><td class="memItemLeft" align="right" valign="top"><a id="ac86726c88d64bc023527bd357ff3d00d" name="ac86726c88d64bc023527bd357ff3d00d"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>VALIDATION_INVALID_HASH</b> = 128</td></tr>
<tr class="memdesc:ac86726c88d64bc023527bd357ff3d00d"><td class="mdescLeft">&#160;</td><td class="mdescRight">A validation status indicating that the hash could not be verified. <br /></td></tr>
<tr class="separator:ac86726c88d64bc023527bd357ff3d00d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a191157b2294cb8992a0867b2c2957b56"><td class="memItemLeft" align="right" valign="top"><a id="a191157b2294cb8992a0867b2c2957b56" name="a191157b2294cb8992a0867b2c2957b56"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>VALIDATION_SUCCESS</b> = 0</td></tr>
<tr class="memdesc:a191157b2294cb8992a0867b2c2957b56"><td class="mdescLeft">&#160;</td><td class="mdescRight">A validation status indicating successful validation. <br /></td></tr>
<tr class="separator:a191157b2294cb8992a0867b2c2957b56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7465114a386037f74c229ed2981acc52"><td class="memItemLeft" align="right" valign="top"><a id="a7465114a386037f74c229ed2981acc52" name="a7465114a386037f74c229ed2981acc52"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>VALIDATION_UNKNOWN_DATAKEY</b> = 8</td></tr>
<tr class="memdesc:a7465114a386037f74c229ed2981acc52"><td class="mdescLeft">&#160;</td><td class="mdescRight">A validation status indicating that the data key specified could not be found. <br /></td></tr>
<tr class="separator:a7465114a386037f74c229ed2981acc52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13c48803b76f978b12f998b25b690b8f"><td class="memItemLeft" align="right" valign="top"><a id="a13c48803b76f978b12f998b25b690b8f" name="a13c48803b76f978b12f998b25b690b8f"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>VALIDATION_UNKNOWN_HANDLER</b> = 2</td></tr>
<tr class="memdesc:a13c48803b76f978b12f998b25b690b8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">A validation status indicating that a handler could not be found for this address. <br /></td></tr>
<tr class="separator:a13c48803b76f978b12f998b25b690b8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae475ae54c56b216ff02bc069633df54b"><td class="memItemLeft" align="right" valign="top"><a id="ae475ae54c56b216ff02bc069633df54b" name="ae475ae54c56b216ff02bc069633df54b"></a>
int const&#160;</td><td class="memItemRight" valign="bottom"><b>VALIDATION_UNKNOWN_USER</b> = 4</td></tr>
<tr class="memdesc:ae475ae54c56b216ff02bc069633df54b"><td class="mdescLeft">&#160;</td><td class="mdescRight">A validation status indicating that an unknown user was specified. <br /></td></tr>
<tr class="separator:ae475ae54c56b216ff02bc069633df54b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:afd3e3bd9260f77b5170e6b00dfb6bd50"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da8/classcore_1_1message_1_1inbound_1_1address__manager.html#afd3e3bd9260f77b5170e6b00dfb6bd50">generate_data_key</a> ()</td></tr>
<tr class="memdesc:afd3e3bd9260f77b5170e6b00dfb6bd50"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate a new secret key for the current data item and handler combination.  <br /></td></tr>
<tr class="separator:afd3e3bd9260f77b5170e6b00dfb6bd50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49349d39b949024ce02fa8bcddfdd54c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da8/classcore_1_1message_1_1inbound_1_1address__manager.html#a49349d39b949024ce02fa8bcddfdd54c">pack_int</a> ($int)</td></tr>
<tr class="memdesc:a49349d39b949024ce02fa8bcddfdd54c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pack an integer into a pair of 32-bit numbers.  <br /></td></tr>
<tr class="separator:a49349d39b949024ce02fa8bcddfdd54c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2709f35970395a067d3291194d0af094"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da8/classcore_1_1message_1_1inbound_1_1address__manager.html#a2709f35970395a067d3291194d0af094">process</a> ($address)</td></tr>
<tr class="memdesc:a2709f35970395a067d3291194d0af094"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process an inbound address to obtain the data stored within it.  <br /></td></tr>
<tr class="separator:a2709f35970395a067d3291194d0af094"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a897ceb54b6a3570fc00b3a922fbdab85"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da8/classcore_1_1message_1_1inbound_1_1address__manager.html#a897ceb54b6a3570fc00b3a922fbdab85">validate</a> ($address)</td></tr>
<tr class="memdesc:a897ceb54b6a3570fc00b3a922fbdab85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ensure that the parsed data is valid, and if the handler requires address validation, validate the sender against the user record of identified user record.  <br /></td></tr>
<tr class="separator:a897ceb54b6a3570fc00b3a922fbdab85"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Incoming Message address manager. </p>
<dl class="section copyright"><dt>Copyright</dt><dd>2014 Andrew Nicols <a href="#" onclick="location.href='mai'+'lto:'+'and'+'re'+'w@n'+'ic'+'ols'+'.c'+'o.u'+'k'; return false;">andre<span class="obfuscator">.nosp@m.</span>w@ni<span class="obfuscator">.nosp@m.</span>cols.<span class="obfuscator">.nosp@m.</span>co.u<span class="obfuscator">.nosp@m.</span>k</a> </dd></dl>
<dl class="section user"><dt>License</dt><dd><a href="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later </dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a65f8a51829accedb0e9ec2a7fba803c4" name="a65f8a51829accedb0e9ec2a7fba803c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65f8a51829accedb0e9ec2a7fba803c4">&#9670;&#160;</a></span>fetch_data_key()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core\message\inbound\address_manager::fetch_data_key </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the data key for the data item. </p>
<p>If no data key has been defined yet, this will call generate_data_key() to generate a new key on the fly. </p><dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>The secret key for this data item. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4156e00a072b674cccfe8af9a3e751d5" name="a4156e00a072b674cccfe8af9a3e751d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4156e00a072b674cccfe8af9a3e751d5">&#9670;&#160;</a></span>generate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core\message\inbound\address_manager::generate </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$userid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$userkey</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate an e-mail address for the Inbound Message handler, storing a private key for the data object if one was not specified. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td>The ID of the user to generated an address for. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$userkey</td><td>The unique key for this user. If not specified this will be retrieved using <a class="el" href="../../d0/de1/group__core.html#ga48f0d34fa9be4903c35964e6756d7777" title="Gets a private user access key (and creates one if one doesn&#39;t exist).">get_user_key()</a>. This key must have been created using <a class="el" href="../../d0/de1/group__core.html#ga48f0d34fa9be4903c35964e6756d7777" title="Gets a private user access key (and creates one if one doesn&#39;t exist).">get_user_key()</a>. This parameter is provided as a performance optimisation for when generating multiple addresses for the same user. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string|null</td><td>The generated address, or null if an address could not be generated. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afd3e3bd9260f77b5170e6b00dfb6bd50" name="afd3e3bd9260f77b5170e6b00dfb6bd50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd3e3bd9260f77b5170e6b00dfb6bd50">&#9670;&#160;</a></span>generate_data_key()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core\message\inbound\address_manager::generate_data_key </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generate a new secret key for the current data item and handler combination. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>The new generated secret key for this data item. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aea0f3272e4cab4c742be3bfc3ba0af2d" name="aea0f3272e4cab4c742be3bfc3ba0af2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea0f3272e4cab4c742be3bfc3ba0af2d">&#9670;&#160;</a></span>get_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core\message\inbound\address_manager::get_data </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the data parsed from the address. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">stdClass</td><td>the parsed data. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adc9e90aa4f30d048ac267e7c4235e20a" name="adc9e90aa4f30d048ac267e7c4235e20a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc9e90aa4f30d048ac267e7c4235e20a">&#9670;&#160;</a></span>get_handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core\message\inbound\address_manager::get_handler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the active handler. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">core::message::inbound::handler|null;</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8d94c716c7b6aa24a1f70cdc3787001d" name="a8d94c716c7b6aa24a1f70cdc3787001d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d94c716c7b6aa24a1f70cdc3787001d">&#9670;&#160;</a></span>handle_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core\message\inbound\address_manager::handle_message </td>
          <td>(</td>
          <td class="paramtype">\stdClass&#160;</td>
          <td class="paramname"><em>$messagedata</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process the message against the relevant handler. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$messagedata</td><td>The data for the current message being processed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">mixed</td><td>The result of the handler's message processor. A truthy result suggests a successful send. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a10b5094c329a865c3b27e693d4bcf870" name="a10b5094c329a865c3b27e693d4bcf870"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10b5094c329a865c3b27e693d4bcf870">&#9670;&#160;</a></span>is_correct_format()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static core\message\inbound\address_manager::is_correct_format </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$address</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine whether the supplied address is of the correct format. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$address</td><td>The address to test </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>Whether the address matches the correct format </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a49349d39b949024ce02fa8bcddfdd54c" name="a49349d39b949024ce02fa8bcddfdd54c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49349d39b949024ce02fa8bcddfdd54c">&#9670;&#160;</a></span>pack_int()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core\message\inbound\address_manager::pack_int </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$int</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pack an integer into a pair of 32-bit numbers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$int</td><td>The integer to pack </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>The encoded binary data </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2709f35970395a067d3291194d0af094" name="a2709f35970395a067d3291194d0af094"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2709f35970395a067d3291194d0af094">&#9670;&#160;</a></span>process()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core\message\inbound\address_manager::process </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$address</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Process an inbound address to obtain the data stored within it. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$address</td><td>The fully formed e-mail address to process. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a21b893c5b79c11ce2c8571f1c665b65c" name="a21b893c5b79c11ce2c8571f1c665b65c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21b893c5b79c11ce2c8571f1c665b65c">&#9670;&#160;</a></span>process_envelope()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core\message\inbound\address_manager::process_envelope </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$recipient</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sender</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process the message recipient, load the handler, and then validate the sender with the associated data record. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$recipient</td><td>The recipient of the message </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$sender</td><td>The sender of the message </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="acaa81e714a95fa3bee40bbde97ece690" name="acaa81e714a95fa3bee40bbde97ece690"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acaa81e714a95fa3bee40bbde97ece690">&#9670;&#160;</a></span>set_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core\message\inbound\address_manager::set_data </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$datavalue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$datakey</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Specify an integer data item value for this record. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$datavalue</td><td>The value of the data item. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$datakey</td><td>A hash to use for the datakey </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0933adaeed8e1d33540be03205ad2174" name="a0933adaeed8e1d33540be03205ad2174"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0933adaeed8e1d33540be03205ad2174">&#9670;&#160;</a></span>set_data_key()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core\message\inbound\address_manager::set_data_key </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$datakey</em> = <code>null</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Specify a known data key for this data item. </p>
<p>If specified, the datakey must already exist in the messageinbound_datakeys table, typically as a result of a previous Inbound Message setup.</p>
<p>This is intended as a performance optimisation when sending many e-mails with different data to many users.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$datakey</td><td>A hash to use for the datakey </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7676577658c80afc706cd7bce80ef36a" name="a7676577658c80afc706cd7bce80ef36a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7676577658c80afc706cd7bce80ef36a">&#9670;&#160;</a></span>set_handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">core\message\inbound\address_manager::set_handler </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$classname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the handler to use for the subsequent Inbound Message commands. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$classname</td><td>The name of the class for the handler. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a897ceb54b6a3570fc00b3a922fbdab85" name="a897ceb54b6a3570fc00b3a922fbdab85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a897ceb54b6a3570fc00b3a922fbdab85">&#9670;&#160;</a></span>validate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">core\message\inbound\address_manager::validate </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$address</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Ensure that the parsed data is valid, and if the handler requires address validation, validate the sender against the user record of identified user record. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$address</td><td>The fully formed e-mail address to process. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int</td><td>The validation status. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a51962accf1099d2284d007a43b301882" name="a51962accf1099d2284d007a43b301882"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51962accf1099d2284d007a43b301882">&#9670;&#160;</a></span>HASHSIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int const core\message\inbound\address_manager::HASHSIZE = 24</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The size of the hash component of the address. </p>
<p>Note: Increasing this value will invalidate all previous key values and reduce the potential length of the e-mail address being checked. Do not change this value. </p>

</div>
</div>
<a id="a55efb3fdcb789bcaf1658f9ccc2fd9f8" name="a55efb3fdcb789bcaf1658f9ccc2fd9f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55efb3fdcb789bcaf1658f9ccc2fd9f8">&#9670;&#160;</a></span>VALIDATION_INVALID_ADDRESS_FORMAT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int const core\message\inbound\address_manager::VALIDATION_INVALID_ADDRESS_FORMAT = 1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A validation status indicating an invalid address format. </p>
<p>Typically this is an address which does not contain a subaddress or all of the required data. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>lib/classes/message/inbound/address_manager.php</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Apr 16 2023 02:36:03 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
