<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Moodle PHP Documentation: file_system Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Moodle PHP Documentation"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Moodle-Logo-ReversedWhite_RGB.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Moodle PHP Documentation<span id="projectnumber">&#160;3.9</span>
   </div>
   <div id="projectbrief">Moodle 3.9.19 (Build: 20230116) (fc01a52823)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="../../de/d6c/classfile__system-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">file_system Class Reference<div class="ingroups"><a class="el" href="../../d5/d09/group__core__files.html">core_files</a></div></div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for file_system:</div>
<div class="dyncontent">
 <div class="center">
  <img src="../../df/d66/classfile__system.png" usemap="#file_5Fsystem_map" alt=""/>
  <map id="file_5Fsystem_map" name="file_5Fsystem_map">
<area href="../../df/da8/classfile__system__filedir.html" alt="file_system_filedir" shape="rect" coords="0,56,113,80"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad3fd32fc383dd974258d3608d531ec1d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#ad3fd32fc383dd974258d3608d531ec1d">add_file_from_path</a> ($pathname, $contenthash=null)</td></tr>
<tr class="memdesc:ad3fd32fc383dd974258d3608d531ec1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add the supplied file to the file system.  <br /></td></tr>
<tr class="separator:ad3fd32fc383dd974258d3608d531ec1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27dca02c966f622382c17a4e66dcf03c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#a27dca02c966f622382c17a4e66dcf03c">add_file_from_string</a> ($content)</td></tr>
<tr class="memdesc:a27dca02c966f622382c17a4e66dcf03c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a file with the supplied content to the file system.  <br /></td></tr>
<tr class="separator:a27dca02c966f622382c17a4e66dcf03c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab296e9d2bccccf27e7d3d0c269be4be1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#ab296e9d2bccccf27e7d3d0c269be4be1">add_storedfile_to_archive</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $file, <a class="el" href="../../d0/d59/classfile__archive.html">file_archive</a> $filearch, $archivepath)</td></tr>
<tr class="memdesc:ab296e9d2bccccf27e7d3d0c269be4be1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add file/directory into archive.  <br /></td></tr>
<tr class="separator:ab296e9d2bccccf27e7d3d0c269be4be1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d0f2a17e2ffbe4ce377db4ac1c7a6a8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#a7d0f2a17e2ffbe4ce377db4ac1c7a6a8">add_to_curl_request</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $file, &amp;$curlrequest, $key)</td></tr>
<tr class="memdesc:a7d0f2a17e2ffbe4ce377db4ac1c7a6a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds this file path to a curl request (POST only).  <br /></td></tr>
<tr class="separator:a7d0f2a17e2ffbe4ce377db4ac1c7a6a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18d4900d8c507bdced68fe903aaa18ed"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#a18d4900d8c507bdced68fe903aaa18ed">copy_content_from_storedfile</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $file, $target)</td></tr>
<tr class="memdesc:a18d4900d8c507bdced68fe903aaa18ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy content of file to given pathname.  <br /></td></tr>
<tr class="separator:a18d4900d8c507bdced68fe903aaa18ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4c5da230c081300032209ff7c691886"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#ad4c5da230c081300032209ff7c691886">cron</a> ()</td></tr>
<tr class="memdesc:ad4c5da230c081300032209ff7c691886"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run any periodic tasks which must be performed.  <br /></td></tr>
<tr class="separator:ad4c5da230c081300032209ff7c691886"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35a5da858151b7ce51aeb2a67d51ad38"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#a35a5da858151b7ce51aeb2a67d51ad38">extract_to_pathname</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $file, <a class="el" href="../../df/d4d/classfile__packer.html">file_packer</a> $packer, $pathname, <a class="el" href="../../d5/dd5/interfacefile__progress.html">file_progress</a> $progress=null)</td></tr>
<tr class="memdesc:a35a5da858151b7ce51aeb2a67d51ad38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extract file to given file path (real OS filesystem), existing files are overwritten.  <br /></td></tr>
<tr class="separator:a35a5da858151b7ce51aeb2a67d51ad38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad56ab84f69ba9c9840a282668597376f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#ad56ab84f69ba9c9840a282668597376f">extract_to_storage</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $file, <a class="el" href="../../df/d4d/classfile__packer.html">file_packer</a> $packer, $contextid, $component, $filearea, $itemid, $pathbase, $userid=null, <a class="el" href="../../d5/dd5/interfacefile__progress.html">file_progress</a> $progress=null)</td></tr>
<tr class="memdesc:ad56ab84f69ba9c9840a282668597376f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extract file to given file path (real OS filesystem), existing files are overwritten.  <br /></td></tr>
<tr class="separator:ad56ab84f69ba9c9840a282668597376f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f5f85c088e34c7ef9179ebc32ad8ebf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#a0f5f85c088e34c7ef9179ebc32ad8ebf">get_content</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $file)</td></tr>
<tr class="memdesc:a0f5f85c088e34c7ef9179ebc32ad8ebf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the content of the specified stored file.  <br /></td></tr>
<tr class="separator:a0f5f85c088e34c7ef9179ebc32ad8ebf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe1cf5c4f4a97ddafff94186b144de1f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#afe1cf5c4f4a97ddafff94186b144de1f">get_content_file_handle</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $file, $type=<a class="el" href="../../d0/d00/classstored__file.html#a5eebe96673d6aa18540e0c813e7b8be6">stored_file::FILE_HANDLE_FOPEN</a>)</td></tr>
<tr class="memdesc:afe1cf5c4f4a97ddafff94186b144de1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns file handle - read only mode, no writing allowed into pool files!  <br /></td></tr>
<tr class="separator:afe1cf5c4f4a97ddafff94186b144de1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23934d0c5451f122a77acf1bb8282e5d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#a23934d0c5451f122a77acf1bb8282e5d">get_imageinfo</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $file)</td></tr>
<tr class="memdesc:a23934d0c5451f122a77acf1bb8282e5d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns information about image.  <br /></td></tr>
<tr class="separator:a23934d0c5451f122a77acf1bb8282e5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac89f578faaf0577944f70090ccc28610"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#ac89f578faaf0577944f70090ccc28610">get_local_path_from_storedfile</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $file, $fetchifnotfound=false)</td></tr>
<tr class="memdesc:ac89f578faaf0577944f70090ccc28610"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the full path on disk for the specified stored file.  <br /></td></tr>
<tr class="separator:ac89f578faaf0577944f70090ccc28610"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa25672aba79a570fad23608d148fd826"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#aa25672aba79a570fad23608d148fd826">get_remote_path_from_storedfile</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $file)</td></tr>
<tr class="memdesc:aa25672aba79a570fad23608d148fd826"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a remote filepath for the specified stored file.  <br /></td></tr>
<tr class="separator:aa25672aba79a570fad23608d148fd826"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0016d02c00c2a59cc5784b9bba2b6060"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#a0016d02c00c2a59cc5784b9bba2b6060">is_file_readable_locally_by_hash</a> ($contenthash, $fetchifnotfound=false)</td></tr>
<tr class="memdesc:a0016d02c00c2a59cc5784b9bba2b6060"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine whether the file is present on the file system somewhere given the contenthash.  <br /></td></tr>
<tr class="separator:a0016d02c00c2a59cc5784b9bba2b6060"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a526a870315ac46a3a5152b50201889cb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#a526a870315ac46a3a5152b50201889cb">is_file_readable_locally_by_storedfile</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $file, $fetchifnotfound=false)</td></tr>
<tr class="memdesc:a526a870315ac46a3a5152b50201889cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine whether the file is present on the file system somewhere.  <br /></td></tr>
<tr class="separator:a526a870315ac46a3a5152b50201889cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66b7c0dae227f738dccda596db16c8d1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#a66b7c0dae227f738dccda596db16c8d1">is_file_readable_remotely_by_hash</a> ($contenthash)</td></tr>
<tr class="memdesc:a66b7c0dae227f738dccda596db16c8d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine whether the file is present locally on the file system somewhere given the contenthash.  <br /></td></tr>
<tr class="separator:a66b7c0dae227f738dccda596db16c8d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf4e80af230068c630183f8262ca29f6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#abf4e80af230068c630183f8262ca29f6">is_file_readable_remotely_by_storedfile</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $file)</td></tr>
<tr class="memdesc:abf4e80af230068c630183f8262ca29f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine whether the file is present on the local file system somewhere.  <br /></td></tr>
<tr class="separator:abf4e80af230068c630183f8262ca29f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73ae40c4b1c8ab8f975c287ec5aeaaf2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#a73ae40c4b1c8ab8f975c287ec5aeaaf2">is_image_from_storedfile</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $file)</td></tr>
<tr class="memdesc:a73ae40c4b1c8ab8f975c287ec5aeaaf2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempt to determine whether the specified file is likely to be an image.  <br /></td></tr>
<tr class="separator:a73ae40c4b1c8ab8f975c287ec5aeaaf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac716bfd32ff89202686932955e84a130"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#ac716bfd32ff89202686932955e84a130">list_files</a> ($file, <a class="el" href="../../df/d4d/classfile__packer.html">file_packer</a> $packer)</td></tr>
<tr class="memdesc:ac716bfd32ff89202686932955e84a130"><td class="mdescLeft">&#160;</td><td class="mdescRight">List contents of archive.  <br /></td></tr>
<tr class="separator:ac716bfd32ff89202686932955e84a130"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeadee305eca3b669503616af31b4f0db"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#aeadee305eca3b669503616af31b4f0db">mimetype_from_hash</a> ($contenthash, $filename)</td></tr>
<tr class="memdesc:aeadee305eca3b669503616af31b4f0db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the mime information for the specified stored file.  <br /></td></tr>
<tr class="separator:aeadee305eca3b669503616af31b4f0db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0fecf5d3ce1913daff424281ea117a4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#ac0fecf5d3ce1913daff424281ea117a4">mimetype_from_storedfile</a> ($file)</td></tr>
<tr class="memdesc:ac0fecf5d3ce1913daff424281ea117a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the mime information for the specified stored file.  <br /></td></tr>
<tr class="separator:ac0fecf5d3ce1913daff424281ea117a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf24d28e45870b2b63c1a986ea08d0fa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#adf24d28e45870b2b63c1a986ea08d0fa">readfile</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $file)</td></tr>
<tr class="memdesc:adf24d28e45870b2b63c1a986ea08d0fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Output the content of the specified stored file.  <br /></td></tr>
<tr class="separator:adf24d28e45870b2b63c1a986ea08d0fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcba187599d2ae8204871aaba774fa59"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#abcba187599d2ae8204871aaba774fa59">remove_file</a> ($contenthash)</td></tr>
<tr class="memdesc:abcba187599d2ae8204871aaba774fa59"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove the file with the specified contenthash.  <br /></td></tr>
<tr class="separator:abcba187599d2ae8204871aaba774fa59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a333ac111c8c4aa442bdd660b5cc16018"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#a333ac111c8c4aa442bdd660b5cc16018">supports_xsendfile</a> ()</td></tr>
<tr class="memdesc:a333ac111c8c4aa442bdd660b5cc16018"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if filesystem is configured to support xsendfile.  <br /></td></tr>
<tr class="separator:a333ac111c8c4aa442bdd660b5cc16018"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7e756e5661f235482109f08de90d449"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#ae7e756e5661f235482109f08de90d449">xsendfile</a> ($contenthash)</td></tr>
<tr class="memdesc:ae7e756e5661f235482109f08de90d449"><td class="mdescLeft">&#160;</td><td class="mdescRight">Serve file content using X-Sendfile header.  <br /></td></tr>
<tr class="separator:ae7e756e5661f235482109f08de90d449"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7688c7acf20291b6f004d41c6c1cf90"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#af7688c7acf20291b6f004d41c6c1cf90">xsendfile_file</a> (<a class="el" href="../../d0/d00/classstored__file.html">stored_file</a> $file)</td></tr>
<tr class="memdesc:af7688c7acf20291b6f004d41c6c1cf90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Serve file content using X-Sendfile header.  <br /></td></tr>
<tr class="separator:af7688c7acf20291b6f004d41c6c1cf90"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a53787d5aef4cb07c107dde1bceb00c31"><td class="memItemLeft" align="right" valign="top"><a id="a53787d5aef4cb07c107dde1bceb00c31" name="a53787d5aef4cb07c107dde1bceb00c31"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>__clone</b> ()</td></tr>
<tr class="memdesc:a53787d5aef4cb07c107dde1bceb00c31"><td class="mdescLeft">&#160;</td><td class="mdescRight">Private clone method to prevent cloning of the instance. <br /></td></tr>
<tr class="separator:a53787d5aef4cb07c107dde1bceb00c31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5a1011dec20ef76051ba690a4f29b52"><td class="memItemLeft" align="right" valign="top"><a id="aa5a1011dec20ef76051ba690a4f29b52" name="aa5a1011dec20ef76051ba690a4f29b52"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>__wakeup</b> ()</td></tr>
<tr class="memdesc:aa5a1011dec20ef76051ba690a4f29b52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Private wakeup method to prevent unserialising of the instance. <br /></td></tr>
<tr class="separator:aa5a1011dec20ef76051ba690a4f29b52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af33a6c613ff4637dff79d043ec78389c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#af33a6c613ff4637dff79d043ec78389c">get_imageinfo_from_path</a> ($path)</td></tr>
<tr class="memdesc:af33a6c613ff4637dff79d043ec78389c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns image information relating to the specified path or URL.  <br /></td></tr>
<tr class="separator:af33a6c613ff4637dff79d043ec78389c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2d4125ef642b1f3842f2de01ec3a962"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#ac2d4125ef642b1f3842f2de01ec3a962">get_local_path_from_hash</a> ($contenthash, $fetchifnotfound=false)</td></tr>
<tr class="memdesc:ac2d4125ef642b1f3842f2de01ec3a962"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the full path for the specified hash, including the path to the filedir.  <br /></td></tr>
<tr class="separator:ac2d4125ef642b1f3842f2de01ec3a962"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab00092a18af0f01cabfa63f9d03b3c7b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#ab00092a18af0f01cabfa63f9d03b3c7b">get_remote_path_from_hash</a> ($contenthash)</td></tr>
<tr class="memdesc:ab00092a18af0f01cabfa63f9d03b3c7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the full path for the specified hash, including the path to the filedir.  <br /></td></tr>
<tr class="separator:ab00092a18af0f01cabfa63f9d03b3c7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4fbbd8f766f22cdfb9623046ef14c36"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#af4fbbd8f766f22cdfb9623046ef14c36">validate_hash_and_file_size</a> ($contenthash, $pathname)</td></tr>
<tr class="memdesc:af4fbbd8f766f22cdfb9623046ef14c36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validate that the content hash matches the content hash of the file on disk.  <br /></td></tr>
<tr class="separator:af4fbbd8f766f22cdfb9623046ef14c36"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-static-methods" name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr class="memitem:ab4d701d8a2a8a18368b668ba059c7c72"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#ab4d701d8a2a8a18368b668ba059c7c72">get_file_handle_for_path</a> ($path, $type=<a class="el" href="../../d0/d00/classstored__file.html#a5eebe96673d6aa18540e0c813e7b8be6">stored_file::FILE_HANDLE_FOPEN</a>)</td></tr>
<tr class="memdesc:ab4d701d8a2a8a18368b668ba059c7c72"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a file handle for the specified path.  <br /></td></tr>
<tr class="separator:ab4d701d8a2a8a18368b668ba059c7c72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74b107d17e319cf5ef012b507bb5388a"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d66/classfile__system.html#a74b107d17e319cf5ef012b507bb5388a">is_file_removable</a> ($contenthash)</td></tr>
<tr class="memdesc:a74b107d17e319cf5ef012b507bb5388a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether a file is removable.  <br /></td></tr>
<tr class="separator:a74b107d17e319cf5ef012b507bb5388a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ad3fd32fc383dd974258d3608d531ec1d" name="ad3fd32fc383dd974258d3608d531ec1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3fd32fc383dd974258d3608d531ec1d">&#9670;&#160;</a></span>add_file_from_path()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system::add_file_from_path </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$pathname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$contenthash</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">abstract</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add the supplied file to the file system. </p>
<p>Note: If overriding this function, it is advisable to store the file in the path returned by get_local_path_from_hash as there may be subsequent uses of the file in the same request.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$pathname</td><td>Path to file currently on disk </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$contenthash</td><td>SHA1 hash of content if known (performance only) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>(contenthash, filesize, newfile) </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../df/da8/classfile__system__filedir.html#a4e0ffabb607ab48e29302355da95af4b">file_system_filedir</a>.</p>

</div>
</div>
<a id="a27dca02c966f622382c17a4e66dcf03c" name="a27dca02c966f622382c17a4e66dcf03c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27dca02c966f622382c17a4e66dcf03c">&#9670;&#160;</a></span>add_file_from_string()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system::add_file_from_string </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$content</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">abstract</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add a file with the supplied content to the file system. </p>
<p>Note: If overriding this function, it is advisable to store the file in the path returned by get_local_path_from_hash as there may be subsequent uses of the file in the same request.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$content</td><td>file content - binary string </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>(contenthash, filesize, newfile) </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../df/da8/classfile__system__filedir.html#a67e2bbbc8bfeed51b7907143765555ed">file_system_filedir</a>.</p>

</div>
</div>
<a id="ab296e9d2bccccf27e7d3d0c269be4be1" name="ab296e9d2bccccf27e7d3d0c269be4be1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab296e9d2bccccf27e7d3d0c269be4be1">&#9670;&#160;</a></span>add_storedfile_to_archive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">file_system::add_storedfile_to_archive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a>&#160;</td>
          <td class="paramname"><em>$file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d59/classfile__archive.html">file_archive</a>&#160;</td>
          <td class="paramname"><em>$filearch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$archivepath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add file/directory into archive. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td>The file to archive </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../d0/d59/classfile__archive.html" title="Each file archive type must extend this class.">file_archive</a></td><td class="paramname">$filearch</td><td>file archive instance </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$archivepath</td><td>pathname in archive </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>success </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7d0f2a17e2ffbe4ce377db4ac1c7a6a8" name="a7d0f2a17e2ffbe4ce377db4ac1c7a6a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d0f2a17e2ffbe4ce377db4ac1c7a6a8">&#9670;&#160;</a></span>add_to_curl_request()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">file_system::add_to_curl_request </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a>&#160;</td>
          <td class="paramname"><em>$file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;&#160;</td>
          <td class="paramname"><em>$curlrequest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds this file path to a curl request (POST only). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td>The file to add to the curl request </td></tr>
    <tr><td class="paramtype">curl</td><td class="paramname">$curlrequest</td><td>The curl request object </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$key</td><td>What key to use in the POST request </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">void</td><td>This needs the fullpath for the storedfile :/ Can this be achieved in some other fashion? </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a18d4900d8c507bdced68fe903aaa18ed" name="a18d4900d8c507bdced68fe903aaa18ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18d4900d8c507bdced68fe903aaa18ed">&#9670;&#160;</a></span>copy_content_from_storedfile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system::copy_content_from_storedfile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a>&#160;</td>
          <td class="paramname"><em>$file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">abstract</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Copy content of file to given pathname. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td>The file to be copied </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$target</td><td>real path to the new file </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>success </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../df/da8/classfile__system__filedir.html#aedb8e141cff7bb1360d20f73b5791222">file_system_filedir</a>.</p>

</div>
</div>
<a id="ad4c5da230c081300032209ff7c691886" name="ad4c5da230c081300032209ff7c691886"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4c5da230c081300032209ff7c691886">&#9670;&#160;</a></span>cron()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">file_system::cron </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run any periodic tasks which must be performed. </p>

<p>Reimplemented in <a class="el" href="../../df/da8/classfile__system__filedir.html#a3dd02c3a9a88efd533539f6fb1113a8d">file_system_filedir</a>.</p>

</div>
</div>
<a id="a35a5da858151b7ce51aeb2a67d51ad38" name="a35a5da858151b7ce51aeb2a67d51ad38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35a5da858151b7ce51aeb2a67d51ad38">&#9670;&#160;</a></span>extract_to_pathname()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">file_system::extract_to_pathname </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a>&#160;</td>
          <td class="paramname"><em>$file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/d4d/classfile__packer.html">file_packer</a>&#160;</td>
          <td class="paramname"><em>$packer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$pathname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/dd5/interfacefile__progress.html">file_progress</a>&#160;</td>
          <td class="paramname"><em>$progress</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Extract file to given file path (real OS filesystem), existing files are overwritten. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td>The archive to inspect </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../df/d4d/classfile__packer.html" title="Abstract class for archiving of files.">file_packer</a></td><td class="paramname">$packer</td><td>File packer instance </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$pathname</td><td>Target directory </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../d5/dd5/interfacefile__progress.html">file_progress</a></td><td class="paramname">$progress</td><td>progress indicator callback or null if not required </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array|bool</td><td>List of processed files; false if error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad56ab84f69ba9c9840a282668597376f" name="ad56ab84f69ba9c9840a282668597376f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad56ab84f69ba9c9840a282668597376f">&#9670;&#160;</a></span>extract_to_storage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">file_system::extract_to_storage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a>&#160;</td>
          <td class="paramname"><em>$file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/d4d/classfile__packer.html">file_packer</a>&#160;</td>
          <td class="paramname"><em>$packer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$contextid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$component</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$filearea</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$itemid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$pathbase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$userid</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/dd5/interfacefile__progress.html">file_progress</a>&#160;</td>
          <td class="paramname"><em>$progress</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Extract file to given file path (real OS filesystem), existing files are overwritten. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td>The archive to inspect </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../df/d4d/classfile__packer.html" title="Abstract class for archiving of files.">file_packer</a></td><td class="paramname">$packer</td><td>file packer instance </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$contextid</td><td>context ID </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$component</td><td>component </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$filearea</td><td>file area </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$itemid</td><td>item ID </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$pathbase</td><td>path base </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$userid</td><td>user ID </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../d5/dd5/interfacefile__progress.html">file_progress</a></td><td class="paramname">$progress</td><td>Progress indicator callback or null if not required </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array|bool</td><td>list of processed files; false if error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0f5f85c088e34c7ef9179ebc32ad8ebf" name="a0f5f85c088e34c7ef9179ebc32ad8ebf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f5f85c088e34c7ef9179ebc32ad8ebf">&#9670;&#160;</a></span>get_content()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">file_system::get_content </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a>&#160;</td>
          <td class="paramname"><em>$file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the content of the specified stored file. </p>
<p>Generally you will probably want to use <a class="el" href="../../df/d66/classfile__system.html#adf24d28e45870b2b63c1a986ea08d0fa" title="Output the content of the specified stored file.">readfile()</a> to serve content, and where possible you should see if you can use get_content_file_handle and work with the file stream instead.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td>The file to retrieve </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>The full file content </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afe1cf5c4f4a97ddafff94186b144de1f" name="afe1cf5c4f4a97ddafff94186b144de1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe1cf5c4f4a97ddafff94186b144de1f">&#9670;&#160;</a></span>get_content_file_handle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">file_system::get_content_file_handle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a>&#160;</td>
          <td class="paramname"><em>$file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$type</em> = <code><a class="el" href="../../d0/d00/classstored__file.html#a5eebe96673d6aa18540e0c813e7b8be6">stored_file::FILE_HANDLE_FOPEN</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns file handle - read only mode, no writing allowed into pool files! </p>
<p>When you want to modify a file, create a new file and delete the old one.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td>The file to retrieve a handle for </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$type</td><td>Type of file handle (FILE_HANDLE_xx constant) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">resource</td><td>file handle </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab4d701d8a2a8a18368b668ba059c7c72" name="ab4d701d8a2a8a18368b668ba059c7c72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4d701d8a2a8a18368b668ba059c7c72">&#9670;&#160;</a></span>get_file_handle_for_path()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static file_system::get_file_handle_for_path </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$type</em> = <code><a class="el" href="../../d0/d00/classstored__file.html#a5eebe96673d6aa18540e0c813e7b8be6">stored_file::FILE_HANDLE_FOPEN</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return a file handle for the specified path. </p>
<p>This abstraction should be used when overriding get_content_file_handle in a new file system.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$path</td><td>The path to the file. This shoudl be any type of path that fopen and gzopen accept. </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$type</td><td>Type of file handle (FILE_HANDLE_xx constant) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">resource</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../da/d34/classcoding__exception.html" title="Exception indicating programming error, must be fixed by a programer.">coding_exception</a></td><td>When an unexpected type of file handle is requested </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a23934d0c5451f122a77acf1bb8282e5d" name="a23934d0c5451f122a77acf1bb8282e5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23934d0c5451f122a77acf1bb8282e5d">&#9670;&#160;</a></span>get_imageinfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">file_system::get_imageinfo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a>&#160;</td>
          <td class="paramname"><em>$file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns information about image. </p>
<p>Information is determined from the file content</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td>The file to inspect </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">mixed</td><td>array with width, height and mimetype; false if not an image </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af33a6c613ff4637dff79d043ec78389c" name="af33a6c613ff4637dff79d043ec78389c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af33a6c613ff4637dff79d043ec78389c">&#9670;&#160;</a></span>get_imageinfo_from_path()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system::get_imageinfo_from_path </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns image information relating to the specified path or URL. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$path</td><td>The path to pass to getimagesize. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>Containing width, height, and mimetype. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac2d4125ef642b1f3842f2de01ec3a962" name="ac2d4125ef642b1f3842f2de01ec3a962"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2d4125ef642b1f3842f2de01ec3a962">&#9670;&#160;</a></span>get_local_path_from_hash()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system::get_local_path_from_hash </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$contenthash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$fetchifnotfound</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">abstract</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the full path for the specified hash, including the path to the filedir. </p>
<p>Note: This must return a consistent path for the file's contenthash and the path <em>will</em> be in a standard local format. Streamable paths will not work. A local copy of the file <em>will</em> be fetched if $fetchifnotfound is tree.</p>
<p>The $fetchifnotfound allows you to determine the expected path of the file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$contenthash</td><td>The content hash </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$fetchifnotfound</td><td>Whether to attempt to fetch from the remote path if not found. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>The full path to the content file </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../df/da8/classfile__system__filedir.html#aea733ed385cef9749a5b4c5286a4a26a">file_system_filedir</a>.</p>

</div>
</div>
<a id="ac89f578faaf0577944f70090ccc28610" name="ac89f578faaf0577944f70090ccc28610"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac89f578faaf0577944f70090ccc28610">&#9670;&#160;</a></span>get_local_path_from_storedfile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">file_system::get_local_path_from_storedfile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a>&#160;</td>
          <td class="paramname"><em>$file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$fetchifnotfound</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the full path on disk for the specified stored file. </p>
<p>Note: This must return a consistent path for the file's contenthash and the path <em>will</em> be in a standard local format. Streamable paths will not work. A local copy of the file <em>will</em> be fetched if $fetchifnotfound is tree.</p>
<p>The $fetchifnotfound allows you to determine the expected path of the file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td>The file to serve. </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$fetchifnotfound</td><td>Whether to attempt to fetch from the remote path if not found. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>full path to pool file with file content </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../df/da8/classfile__system__filedir.html#a8ce522e57fdeba336b9968e985d3311f">file_system_filedir</a>.</p>

</div>
</div>
<a id="ab00092a18af0f01cabfa63f9d03b3c7b" name="ab00092a18af0f01cabfa63f9d03b3c7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab00092a18af0f01cabfa63f9d03b3c7b">&#9670;&#160;</a></span>get_remote_path_from_hash()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system::get_remote_path_from_hash </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$contenthash</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">abstract</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the full path for the specified hash, including the path to the filedir. </p>
<p>This is typically either the same as the local filepath, or it is a streamable resource.</p>
<p>See <a href="https://secure.php.net/manual/en/wrappers.php">https://secure.php.net/manual/en/wrappers.php</a> for further information on valid wrappers.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$contenthash</td><td>The content hash </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>The full path to the content file </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../df/da8/classfile__system__filedir.html#a74c4998a6cc083fe7170d55c5d1b708b">file_system_filedir</a>.</p>

</div>
</div>
<a id="aa25672aba79a570fad23608d148fd826" name="aa25672aba79a570fad23608d148fd826"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa25672aba79a570fad23608d148fd826">&#9670;&#160;</a></span>get_remote_path_from_storedfile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">file_system::get_remote_path_from_storedfile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a>&#160;</td>
          <td class="paramname"><em>$file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a remote filepath for the specified stored file. </p>
<p>This is typically either the same as the local filepath, or it is a streamable resource.</p>
<p>See <a href="https://secure.php.net/manual/en/wrappers.php">https://secure.php.net/manual/en/wrappers.php</a> for further information on valid wrappers.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td>The file to serve. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>full path to pool file with file content </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../df/da8/classfile__system__filedir.html#a4c6de079ecbef03951b9cf208201bd53">file_system_filedir</a>.</p>

</div>
</div>
<a id="a0016d02c00c2a59cc5784b9bba2b6060" name="a0016d02c00c2a59cc5784b9bba2b6060"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0016d02c00c2a59cc5784b9bba2b6060">&#9670;&#160;</a></span>is_file_readable_locally_by_hash()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">file_system::is_file_readable_locally_by_hash </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$contenthash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$fetchifnotfound</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determine whether the file is present on the file system somewhere given the contenthash. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$contenthash</td><td>The contenthash of the file to check. </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$fetchifnotfound</td><td>Whether to attempt to fetch from the remote path if not found. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a526a870315ac46a3a5152b50201889cb" name="a526a870315ac46a3a5152b50201889cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a526a870315ac46a3a5152b50201889cb">&#9670;&#160;</a></span>is_file_readable_locally_by_storedfile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">file_system::is_file_readable_locally_by_storedfile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a>&#160;</td>
          <td class="paramname"><em>$file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$fetchifnotfound</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determine whether the file is present on the file system somewhere. </p>
<p>A local copy of the file <em>will</em> be fetched if $fetchifnotfound is tree.</p>
<p>The $fetchifnotfound allows you to determine the expected path of the file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td>The file to ensure is available. </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$fetchifnotfound</td><td>Whether to attempt to fetch from the remote path if not found. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a66b7c0dae227f738dccda596db16c8d1" name="a66b7c0dae227f738dccda596db16c8d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66b7c0dae227f738dccda596db16c8d1">&#9670;&#160;</a></span>is_file_readable_remotely_by_hash()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">file_system::is_file_readable_remotely_by_hash </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$contenthash</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determine whether the file is present locally on the file system somewhere given the contenthash. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$contenthash</td><td>The contenthash of the file to check. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abf4e80af230068c630183f8262ca29f6" name="abf4e80af230068c630183f8262ca29f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf4e80af230068c630183f8262ca29f6">&#9670;&#160;</a></span>is_file_readable_remotely_by_storedfile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">file_system::is_file_readable_remotely_by_storedfile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a>&#160;</td>
          <td class="paramname"><em>$file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determine whether the file is present on the local file system somewhere. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td>The file to ensure is available. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a74b107d17e319cf5ef012b507bb5388a" name="a74b107d17e319cf5ef012b507bb5388a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74b107d17e319cf5ef012b507bb5388a">&#9670;&#160;</a></span>is_file_removable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static file_system::is_file_removable </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$contenthash</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check whether a file is removable. </p>
<p>This must be called prior to file removal.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$contenthash</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a73ae40c4b1c8ab8f975c287ec5aeaaf2" name="a73ae40c4b1c8ab8f975c287ec5aeaaf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73ae40c4b1c8ab8f975c287ec5aeaaf2">&#9670;&#160;</a></span>is_image_from_storedfile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">file_system::is_image_from_storedfile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a>&#160;</td>
          <td class="paramname"><em>$file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attempt to determine whether the specified file is likely to be an image. </p>
<p>Since this relies upon the mimetype stored in the files table, there may be times when this information is not 100% accurate.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td>The file to check </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac716bfd32ff89202686932955e84a130" name="ac716bfd32ff89202686932955e84a130"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac716bfd32ff89202686932955e84a130">&#9670;&#160;</a></span>list_files()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">file_system::list_files </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/d4d/classfile__packer.html">file_packer</a>&#160;</td>
          <td class="paramname"><em>$packer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>List contents of archive. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td>The archive to inspect </td></tr>
    <tr><td class="paramtype"><a class="el" href="../../df/d4d/classfile__packer.html" title="Abstract class for archiving of files.">file_packer</a></td><td class="paramname">$packer</td><td>file packer instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>of file infos </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aeadee305eca3b669503616af31b4f0db" name="aeadee305eca3b669503616af31b4f0db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeadee305eca3b669503616af31b4f0db">&#9670;&#160;</a></span>mimetype_from_hash()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">file_system::mimetype_from_hash </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$contenthash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the mime information for the specified stored file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$contenthash</td><td></td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$filename</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>The MIME type. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac0fecf5d3ce1913daff424281ea117a4" name="ac0fecf5d3ce1913daff424281ea117a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0fecf5d3ce1913daff424281ea117a4">&#9670;&#160;</a></span>mimetype_from_storedfile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">file_system::mimetype_from_storedfile </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the mime information for the specified stored file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td>The stored file to retrieve mime information for </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">string</td><td>The MIME type. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adf24d28e45870b2b63c1a986ea08d0fa" name="adf24d28e45870b2b63c1a986ea08d0fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf24d28e45870b2b63c1a986ea08d0fa">&#9670;&#160;</a></span>readfile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">file_system::readfile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a>&#160;</td>
          <td class="paramname"><em>$file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Output the content of the specified stored file. </p>
<p>Note, this is different to <a class="el" href="../../df/d66/classfile__system.html#a0f5f85c088e34c7ef9179ebc32ad8ebf" title="Get the content of the specified stored file.">get_content()</a> as it uses the built-in php readfile function which is more efficient.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td>The file to serve. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abcba187599d2ae8204871aaba774fa59" name="abcba187599d2ae8204871aaba774fa59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abcba187599d2ae8204871aaba774fa59">&#9670;&#160;</a></span>remove_file()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system::remove_file </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$contenthash</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">abstract</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remove the file with the specified contenthash. </p>
<p>Note, if overriding this function, you <em>must</em> check that the file is no longer in use - see {check_file_usage}.</p>
<p>DO NOT call directly - reserved for core!!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$contenthash</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="../../df/da8/classfile__system__filedir.html#a0e3856db08221fb41d0ba0fbcaa13224">file_system_filedir</a>.</p>

</div>
</div>
<a id="a333ac111c8c4aa442bdd660b5cc16018" name="a333ac111c8c4aa442bdd660b5cc16018"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a333ac111c8c4aa442bdd660b5cc16018">&#9670;&#160;</a></span>supports_xsendfile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">file_system::supports_xsendfile </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if filesystem is configured to support xsendfile. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af4fbbd8f766f22cdfb9623046ef14c36" name="af4fbbd8f766f22cdfb9623046ef14c36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4fbbd8f766f22cdfb9623046ef14c36">&#9670;&#160;</a></span>validate_hash_and_file_size()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">file_system::validate_hash_and_file_size </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$contenthash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$pathname</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Validate that the content hash matches the content hash of the file on disk. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$contenthash</td><td>The current content hash to validate </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$pathname</td><td>The path to the file on disk </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">array</td><td>The content hash (it might change) and file size </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae7e756e5661f235482109f08de90d449" name="ae7e756e5661f235482109f08de90d449"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7e756e5661f235482109f08de90d449">&#9670;&#160;</a></span>xsendfile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">file_system::xsendfile </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$contenthash</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Serve file content using X-Sendfile header. </p>
<p>Please make sure that all headers are already sent and the all access control checks passed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$contenthash</td><td>The content hash of the file to be served </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>success </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af7688c7acf20291b6f004d41c6c1cf90" name="af7688c7acf20291b6f004d41c6c1cf90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7688c7acf20291b6f004d41c6c1cf90">&#9670;&#160;</a></span>xsendfile_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">file_system::xsendfile_file </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a>&#160;</td>
          <td class="paramname"><em>$file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Serve file content using X-Sendfile header. </p>
<p>Please make sure that all headers are already sent and the all access control checks passed.</p>
<p>This alternate method to <a class="el" href="../../df/d66/classfile__system.html#ae7e756e5661f235482109f08de90d449" title="Serve file content using X-Sendfile header.">xsendfile()</a> allows an alternate file system to use the full file metadata and avoid extra lookups.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="../../d0/d00/classstored__file.html">stored_file</a></td><td class="paramname">$file</td><td>The file to send </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>success </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>lib/filestorage/file_system.php</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Jan 15 2023 02:44:29 for Moodle PHP Documentation by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
